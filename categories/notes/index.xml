<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Notes on Coding_Panda&#39;s Blog</title>
        <link>https://blog.ipandai.club/categories/notes/</link>
        <description>Recent content in Notes on Coding_Panda&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Thu, 02 Mar 2023 15:11:40 +0800</lastBuildDate><atom:link href="https://blog.ipandai.club/categories/notes/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>[FAST&#39;23] More Than Capacity: Performance-oriented Evolution of Pangu in Alibaba</title>
        <link>https://blog.ipandai.club/p/fast23-more-than-capacity-performance-oriented-evolution-of-pangu-in-alibaba/</link>
        <pubDate>Thu, 02 Mar 2023 15:11:40 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/fast23-more-than-capacity-performance-oriented-evolution-of-pangu-in-alibaba/</guid>
        <description>&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/conference/fast23/presentation/li-qiang-deployed&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[FAST&#39;23] More Than Capacity: Performance-oriented Evolution of Pangu in Alibaba&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;FAST&#39;23 ä¼šè®®è®ºæ–‡ç¿»è¯‘ï¼Œã€Šä¸ä»…ä»…æ˜¯å®¹é‡:ç›˜å¤é¢å‘æ€§èƒ½çš„æ¼”å˜ã€‹&lt;/p&gt;
&lt;p&gt;æœ¬è®ºæ–‡è®²è¿°äº†Panguå­˜å‚¨ç³»ç»Ÿæ˜¯å¦‚ä½•éšç€ç¡¬ä»¶åŠå•†ä¸šéœ€æ±‚ï¼Œå»æ¼”å˜æä¾›æ›´é«˜çš„æ€§èƒ½çš„ï¼Œå­˜å‚¨æœåŠ¡çš„I/Oå»¶è¿Ÿè¾¾åˆ°äº†100-usã€‚ç›˜å¤çš„æ¼”å˜ä¸»è¦æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Phase 1: ç›˜å¤é€šè¿‡ä¼˜åŒ–æ–‡ä»¶ç³»ç»Ÿå¹¶è®¾è®¡äº†ç”¨æˆ·ç«¯çš„å­˜å‚¨æ“ä½œç³»ç»Ÿï¼Œç§¯æå¼•å…¥é«˜é€ŸSSDå’ŒRemote Direct Memory Access(RDMA)ç½‘ç»œæŠ€æœ¯ã€‚å› æ­¤ï¼Œç›˜å¤åœ¨æœ‰æ•ˆé™ä½äº†I/Oå»¶è¿Ÿçš„åŒæ—¶ï¼Œè¿˜æé«˜äº†ååé‡å’ŒIOPSã€‚&lt;/li&gt;
&lt;li&gt;Phase 2: ç›˜å¤ä»é¢å‘å·çš„å­˜å‚¨ä¾›åº”å•†è½¬å˜ä¸ºé¢å‘æ€§èƒ½ã€‚ä¸ºäº†é€‚åº”è¿™ä¸€å•†ä¸šæ¨¡å¼çš„æ”¹å˜ï¼Œç›˜å¤ä½¿ç”¨è¶³å¤Ÿå¤šçš„SSDå’Œ25Gbps-100Gbpsçš„RDMAå¸¦å®½æ›´æ–°äº†åŸºç¡€è®¾æ–½ã€‚è¿™å¼•å…¥äº†ä¸€äº›åˆ—çš„å…³é”®è®¾è®¡ï¼ŒåŒ…æ‹¬å‡å°‘æµé‡æ”¾å¤§ï¼Œè¿œç¨‹ç›´æ¥ç¼“å­˜è®¿é—®ï¼Œå’ŒCPUè®¡ç®—å¸è½½ï¼Œæ¥ä¿è¯ç›˜å¤å®Œå…¨è·å¾—åŸºäºç¡¬ä»¶å‡çº§æ‰€å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é™¤äº†æŠ€æœ¯ä¸Šçš„åˆ›æ–°ï¼Œä½œè€…è¿˜åˆ†äº«äº†ç›˜å¤å‘å±•è¿‡ç¨‹ä¸­çš„è¿è¥ç»éªŒï¼Œå¹¶è®¨è®ºäº†å…¶ä¸­çš„é‡è¦æ•™è®­ã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x00-intro&#34;&gt;0x00 Intro&lt;/h1&gt;
&lt;p&gt;ç›˜å¤çš„å¼€å‘å§‹äº2009å¹´ï¼Œç›®å‰å·²ç»æ˜¯é˜¿é‡Œå·´å·´é›†å›¢å’Œé˜¿é‡Œäº‘ç»Ÿä¸€å­˜å‚¨å¹³å°ã€‚ç›˜å¤ä¸ºé˜¿é‡Œçš„æ ¸å¿ƒä¸šåŠ¡æä¾›äº†å¯ä¼¸ç¼©æ€§ã€é«˜æ€§èƒ½å’Œå¯é æ€§ã€‚&lt;/p&gt;
&lt;p&gt;Elastic Block Storage(EBS), Object Storage Service(OSS), Network-Attached Storage(NAS), PolarDB, MaxComputeè¿™äº›äº‘æœåŠ¡åŸºäºç›˜å¤å»ºç«‹ã€‚ç»è¿‡åå‡ å¹´çš„å‘å±•ï¼Œç›˜å¤å·²ç»æˆä¸ºäº†ä¸€ä¸ªæ‹¥æœ‰ExaByteså¹¶ç®¡ç†ä¸‡äº¿æ–‡ä»¶çš„å…¨å±€å­˜å‚¨ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç›˜å¤-10-æä¾›å­˜å‚¨å®¹é‡&#34;&gt;ç›˜å¤ 1.0: æä¾›å­˜å‚¨å®¹é‡&lt;/h2&gt;
&lt;p&gt;Pangu 1.0è®¾è®¡äº2009-2015å¹´ï¼Œé€šè¿‡é«˜æ€§èƒ½çš„CPUå’ŒHDDç»„æˆï¼Œå¯ä»¥æä¾›msæ¯«ç§’çº§åˆ«çš„I/Oå»¶è¿Ÿå’ŒGbpsçº§åˆ«çš„&lt;strong&gt;æ•°æ®ä¸­å¿ƒå¸¦å®½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Pangu 1.0åŸºäºLinux Ext4è®¾è®¡äº†ä¸€ä¸ªåˆ†å¸ƒå¼çš„å†…æ ¸æ–‡ä»¶ç³»ç»Ÿå’Œå†…æ ¸TCPï¼Œå¹¶ç»™äºˆä¸åŒç§ç±»çš„å­˜å‚¨æœåŠ¡æä¾›å¤šç§æ–‡ä»¶ç±»å‹æ”¯æŒï¼ˆTempfileï¼ŒLogFileï¼ŒRandom Access fileï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æ­£å¤„äºäº‘è®¡ç®—çš„åˆå§‹é˜¶æ®µï¼Œæ€§èƒ½å—é™äºHDDæ€§èƒ½å’Œç½‘ç»œå¸¦å®½ï¼Œç›¸è¾ƒäºæ›´å¿«çš„è®¿é—®é€Ÿåº¦ï¼Œç”¨æˆ·æ›´å…³æ³¨å­˜å‚¨å®¹é‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ–°çš„ç¡¬ä»¶æ–°çš„è®¾è®¡&#34;&gt;æ–°çš„ç¡¬ä»¶ï¼Œæ–°çš„è®¾è®¡&lt;/h2&gt;
&lt;p&gt;è‡ª2015å¹´èµ·ï¼Œä¸ºäº†å¼•å…¥æ–°å…´çš„SSDå’ŒRDMAæŠ€æœ¯ï¼Œç›˜å¤2.0å¼€å§‹è®¾è®¡å’Œå¼€å‘ã€‚ç›˜å¤2.0çš„ç›®æ ‡æ˜¯æä¾›100usçº§åˆ«I/Oå»¶è¿Ÿçš„é«˜æ€§èƒ½çš„å­˜å‚¨æœåŠ¡ã€‚å°½ç®¡SSDå’ŒRDMAåœ¨å­˜å‚¨å’Œç½‘ç»œä¸­å®ç°ä½å»¶è¿Ÿã€é«˜æ€§èƒ½çš„I/Oï¼Œå›¢é˜Ÿå‘ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç›˜å¤1.0ä¸­ä½¿ç”¨çš„å¤šç§æ–‡ä»¶ç±»å‹ï¼Œç‰¹åˆ«æ˜¯å…è®¸éšæœºè®¿é—®çš„æ–‡ä»¶ç±»å‹ï¼Œåœ¨å›ºæ€ç¡¬ç›˜ä¸Šçš„è¡¨ç°å¾ˆå·®ï¼Œè€Œå›ºæ€ç¡¬ç›˜åœ¨é¡ºåºæ“ä½œä¸Šå¯ä»¥å®ç°é«˜ååé‡å’ŒIOPSã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºæ•°æ®å¤åˆ¶å’Œé¢‘ç¹çš„ä¸­æ–­ï¼Œå†…æ ¸ç©ºé—´çš„è½¯ä»¶æ ˆæ— æ³•è·Ÿä¸ŠSSDå’ŒRDMAçš„é«˜IOPSå’Œä½I/Oå»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;ä»ä»¥æœåŠ¡å™¨ä¸ºä¸­å¿ƒçš„æ•°æ®ä¸­å¿ƒæ¶æ„å‘èµ„æºåˆ†æ•£çš„æ•°æ®ä¸­å¿ƒæ¶æ„çš„èŒƒå¼è½¬å˜ï¼Œå¯¹å®ç°ä½I/Oå»¶è¿Ÿæå‡ºäº†é¢å¤–çš„æŒ‘æˆ˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç›˜å¤20-phase-1-é€šè¿‡é‡æ„æ–‡ä»¶ç³»ç»Ÿä¸ç”¨æˆ·ç©ºé—´çš„å­˜å‚¨æ“ä½œç³»ç»Ÿæ¥æ‹¥æŠ±ssdå’Œrdma&#34;&gt;ç›˜å¤2.0 Phase 1: é€šè¿‡é‡æ„æ–‡ä»¶ç³»ç»Ÿä¸ç”¨æˆ·ç©ºé—´çš„å­˜å‚¨æ“ä½œç³»ç»Ÿæ¥æ‹¥æŠ±SSDå’ŒRDMA&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºäº†å®ç°é«˜æ€§èƒ½å’Œä½I/Oå»¶è¿Ÿï¼Œç›˜å¤2.0é¦–å…ˆåœ¨å…¶æ–‡ä»¶ç³»ç»Ÿä¸­çš„å…³é”®ç»„ä»¶æå‡ºäº†æ–°çš„è®¾è®¡ã€‚ä¸ºäº†ç®€åŒ–æ•´ä¸ªç³»ç»Ÿçš„å¼€å‘å’Œç®¡ç†ï¼Œç›˜å¤è®¾è®¡äº†ä¸€ä¸ªç»Ÿä¸€ã€è¿½åŠ å†™å…¥çš„æŒä¹…åŒ–å±‚ã€‚å®ƒè¿˜å¼•å…¥äº†ä¸€ä¸ªç‹¬ç«‹çš„åˆ†å—å¸ƒå±€ï¼Œä»¥å‡å°‘æ–‡ä»¶å†™å…¥æ“ä½œçš„I/Oå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›˜å¤2.0è®¾è®¡äº†ä¸€ä¸ªç”¨æˆ·ç©ºé—´çš„å­˜å‚¨æ“ä½œç³»ç»Ÿï¼ˆUSSOSï¼‰ï¼ŒUSSOSSä½¿ç”¨ä¸€ä¸ªRTC(Run to completion)çº¿ç¨‹æ¨¡å‹æ¥å®ç°ç”¨æˆ·ç©ºé—´å­˜å‚¨æ ˆå’Œç”¨æˆ·ç©ºé—´ç½‘ç»œæ ˆçš„é«˜æ•ˆåä½œã€‚å®ƒè¿˜ä¸ºé«˜æ•ˆçš„CPUå’Œå†…å­˜èµ„æºåˆ†é…æå‡ºäº†ä¸€ä¸ªç”¨æˆ·ç©ºé—´çš„è°ƒåº¦æœºåˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›˜å¤2.0éƒ¨ç½²äº†åœ¨åŠ¨æ€ç¯å¢ƒä¸‹æä¾›SLAä¿è¯çš„æœºåˆ¶ã€‚é€šè¿‡è¿™äº›åˆ›æ–°ï¼Œç›˜å¤2.0å®ç°äº†æ¯«ç§’çº§åˆ«çš„P999 I/Oå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç›˜å¤20-phase-2-é€šè¿‡åŸºç¡€è®¾æ–½æ›´æ–°å’Œçªç ´ç½‘ç»œå†…å­˜cpuç“¶é¢ˆé€‚åº”ä»¥æ€§èƒ½ä¸ºå¯¼å‘çš„ä¸šåŠ¡æ¨¡å¼&#34;&gt;ç›˜å¤2.0 Phase 2: é€šè¿‡åŸºç¡€è®¾æ–½æ›´æ–°å’Œçªç ´ç½‘ç»œ/å†…å­˜/CPUç“¶é¢ˆï¼Œé€‚åº”ä»¥æ€§èƒ½ä¸ºå¯¼å‘çš„ä¸šåŠ¡æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;2018å¹´èµ·ï¼Œç›˜å¤é€æ¸ä»å®¹é‡å¯¼å‘çš„å•†ä¸šæ¨¡å¼è½¬å˜ä¸ºæ€§èƒ½å¯¼å‘ã€‚è¿™æ˜¯å› ä¸ºè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šç”¨æˆ·å°†ä»–ä»¬çš„ä¸šåŠ¡è½¬ç§»åˆ°äº†é˜¿é‡Œäº‘å¹¶ä¸”ä»–ä»¬å¯¹å­˜å‚¨æ€§èƒ½çš„å»¶è¿Ÿå’Œæ€§èƒ½æœ‰å¾ˆä¸¥æ ¼çš„è¦æ±‚ã€‚è¿™åœ¨COVID-19ç–«æƒ…çˆ†å‘ä¹‹åå˜å¾—è¶Šæ¥è¶Šå¿«ï¼Œä¸ºäº†é€‚åº”è¿™ä¸€å•†ä¸šæ¨¡å¼è½¬å˜å’Œæ—¥ç›Šå¢é•¿çš„ç”¨æˆ·ï¼Œç›˜å¤2.0éœ€è¦ç»§ç»­å‡çº§åŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨åŸæœ‰çš„æœåŠ¡å™¨å’Œäº¤æ¢æœºæ²¿ç€åŸºäºCLOSæ¶æ„çš„æ‹“æ‰‘ç»“æ„æ¥å¯¹åŸºç¡€è®¾æ–½è¿›è¡Œæ‰©å®¹æ˜¯ä¸ç»æµçš„ï¼ŒåŒ…æ‹¬é«˜æ˜‚çš„æ€»æˆæœ¬ï¼ˆæœºæ¶ç©ºé—´ã€ç”µåŠ›ã€æ•£çƒ­ã€äººåŠ›æˆæœ¬ï¼‰å’Œæ›´é«˜çš„ç¢³æ’æ”¾/ç¯å¢ƒé—®é¢˜ã€‚å› æ­¤ï¼Œç›˜å¤å¼€å‘æ¥å®¤å†…é«˜å®¹é‡å­˜å‚¨æœåŠ¡å™¨ï¼ˆæ¯ä¸ªæœåŠ¡å™¨96TB SSDï¼‰å¹¶ä¸”å‡çº§åˆ°äº†25Gbps-100Gbpsçš„ç½‘ç»œå¸¦å®½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®Œå…¨è·å¾—è¿™äº›å‡çº§å¸¦æ¥çš„æ€§èƒ½æå‡ï¼Œç›˜å¤2.0æå‡ºäº†ä¸€ç³»åˆ—çš„æŠ€æœ¯æ¥å¤„ç†åœ¨{ç½‘ç»œ/å†…å­˜/CPU}çš„æ€§èƒ½ç“¶é¢ˆå¹¶å……åˆ†åˆ©ç”¨å…¶å¼ºå¤§çš„ç¡¬ä»¶èµ„æºã€‚å…·ä½“æ¥è¯´ï¼Œç›˜å¤2.0é€šè¿‡å‡å°‘ç½‘ç»œæµé‡æ”¾å¤§ç‡å’ŒåŠ¨æ€è°ƒæ•´ä¸åŒæµé‡çš„ä¼˜å…ˆçº§æ¥ä¼˜åŒ–ç½‘ç»œå¸¦å®½ï¼›é€šè¿‡æå‡ºRemote Direct Cache Access(RDCA)æ¥å¤„ç†å†…å­˜ç“¶é¢ˆï¼›é€šè¿‡æ¶ˆé™¤æ•°æ®åºåˆ—åŒ–/ååºåˆ—åŒ–çš„å¼€é”€å¹¶å¼•å…¥CPUç­‰å¾…æŒ‡ä»¤æ¥åŒæ­¥è¶…çº¿ç¨‹ï¼Œä»¥æ­¤æ¥è§£å†³CPUç“¶é¢ˆé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç”Ÿäº§ä¸­çš„é«˜æ€§èƒ½&#34;&gt;ç”Ÿäº§ä¸­çš„é«˜æ€§èƒ½&lt;/h2&gt;
&lt;p&gt;ç›˜å¤2.0æˆåŠŸæ”¯æŒäº†elastic SSD blockå­˜å‚¨æœåŠ¡ï¼Œå¹¶å¯è¾¾åˆ°100usçº§åˆ«çš„I/Oå»¶è¿Ÿå’Œ1Mçš„IOPSã€‚åœ¨2018å¹´åŒåä¸€æ´»åŠ¨ï¼Œç›˜å¤2.0åŠ æŒä¸‹çš„é˜¿é‡Œæ•°æ®åº“å®ç°äº†280usçš„å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºOTSå­˜å‚¨æœåŠ¡ï¼ŒåŒæ ·çš„ç¡¬ä»¶æ¡ä»¶ä¸‹ã€‚ç›˜å¤2.0çš„I/Oå»¶è¿Ÿæ¯”ç›˜å¤1.0é™ä½äº†ä¸€ä¸ªæ•°é‡çº§ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå†™æ•æ„Ÿçš„æœåŠ¡ï¼ˆEBSäº‘ç›˜ï¼‰ï¼ŒP999 I/Oå»¶è¿Ÿä½äº1msã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºè¯»æ•æ„Ÿçš„æœåŠ¡ï¼ˆåœ¨çº¿æœç´¢ï¼‰ï¼ŒP999 I/Oå»¶è¿Ÿä½äº11msã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¬¬äºŒé˜¶æ®µï¼Œé€šè¿‡å°†2x25Gbpså¸¦å®½å‡çº§åˆ°2x100Gbpsï¼Œå¹¶è§£å†³äº†ç½‘ç»œã€å†…å­˜ã€CPUç“¶é¢ˆï¼Œæ¯å°æ³°å±±å­˜å‚¨æœåŠ¡å™¨çš„æœ‰æ•ˆååé‡å¢åŠ äº†6.1å€ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Elastic SSD Block/EBSäº‘ç›˜ï¼šæ˜¯ä¸ºé˜¿é‡Œäº‘ä¸ºäº‘æœåŠ¡å™¨ECSæä¾›çš„ä½æ—¶å»¶ã€æŒä¹…æ€§ã€é«˜å¯é çš„å—çº§éšæœºå­˜å‚¨ã€‚å—å­˜å‚¨æ”¯æŒåœ¨å¯ç”¨åŒºå†…è‡ªåŠ¨å¤åˆ¶ç”¨æˆ·çš„æ•°æ®ï¼Œé˜²æ­¢æ„å¤–ç¡¬ä»¶æ•…éšœå¯¼è‡´çš„æ•°æ®ä¸å¯ç”¨ï¼Œä¿æŠ¤ä¸šåŠ¡å…äºç¡¬ä»¶æ•…éšœçš„å¨èƒã€‚&lt;/p&gt;
&lt;p&gt;OTSï¼šOpen Table Serviceï¼Œå·²æ›´åTable Storeï¼Œæ˜¯æ„å»ºåœ¨é˜¿é‡Œäº‘é£å¤©åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹ä¸Šçš„NoSQLæ•°æ®åº“æœåŠ¡ï¼Œæä¾›æµ·é‡ç»“æ„åŒ–æ•°æ®çš„å­˜å‚¨å’Œå®æ—¶è®¿é—®ã€‚Table Storeä»¥å®ä¾‹å’Œè¡¨çš„å½¢å¼ç»„ç»‡æ•°æ®ï¼Œé€šè¿‡æ•°æ®åˆ†ç‰‡å’Œè´Ÿè½½å‡è¡¡æŠ€æœ¯ï¼Œå®ç°è§„æ¨¡ä¸Šçš„æ— ç¼æ‰©å±•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;0x01-bg&#34;&gt;0x01 Bg&lt;/h1&gt;
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;ç›˜å¤æ˜¯å¤§è§„æ¨¡åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œç”±ï¼šç›˜å¤æ ¸å¿ƒï¼Œç›˜å¤æœåŠ¡å±‚ï¼Œç›˜å¤ç›‘æ§ç³»ç»Ÿç»„æˆï¼ˆFigure 1ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230303140052844.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230303140052844&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;ç›˜å¤core&#34;&gt;ç›˜å¤Core&lt;/h3&gt;
&lt;p&gt;ç›˜å¤æ ¸å¿ƒç”±ï¼šclientsï¼Œmastersï¼Œchunk seversç»„æˆï¼Œæä¾›è¿½åŠ å†™å…¥çš„å­˜å‚¨è¯­ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Client&lt;/strong&gt;æä¾›è®¿é—®ç›˜å¤äº‘å­˜å‚¨æœåŠ¡ï¼ˆEBSï¼ŒOSSï¼‰çš„SDKï¼Œå¹¶è´Ÿè´£æ¥æ”¶ä»æœåŠ¡ç«¯å‘é€çš„æ–‡ä»¶è¯·æ±‚ï¼Œä¸masterså’Œchunk serversé€šä¿¡æ¥å®ç°è¿™äº›è¯·æ±‚ã€‚ç±»ä¼¼äºå…¶ä»–åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆTectonicï¼ŒColossusï¼‰ï¼Œç›˜å¤ä¸­çš„Clientsè´Ÿè´£è¾ƒé‡çš„å·¥ä½œå¹¶åœ¨ç›˜å¤çš„å¤åˆ¶ç®¡ç†ã€SLAä¿éšœã€æ•°æ®ä¸€è‡´æ€§ç®¡ç†ä¸­æ‰®æ¼”å…³é”®è§’è‰²ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Master&lt;/strong&gt;ç®¡ç†ç›˜å¤ä¸­çš„æ‰€æœ‰å…ƒæ•°æ®å¹¶ä½¿ç”¨åŸºäºRaftçš„åè®®æ¥ç»´æŠ¤å…ƒæ•°æ®çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§ã€‚ä¸ºäº†æ›´å¥½çš„æ°´å¹³æ‰©å±•æ€§å’Œå»¶ä¼¸æ€§ï¼ˆå¤§é‡çš„æ–‡ä»¶æ•°ï¼‰ï¼Œç›˜å¤masteråˆ†è§£å…ƒæ•°æ®æœåŠ¡ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šnamespaceæœåŠ¡å’Œstream metaæœåŠ¡ï¼Œstreamæ˜¯ä¸€ç»„chunkçš„æŠ½è±¡ã€‚è¿™ä¸¤ä¸ªæœåŠ¡é¦–å…ˆæ ¹æ®ç›®å½•æ ‘åˆ†éš”å…ƒæ•°æ®æ¥å®ç°å±€éƒ¨åŸæ•°æ®ï¼Œç„¶åé€šè¿‡å“ˆå¸Œå°†è¿™äº›streamè¿›ä¸€æ­¥åˆ†éš”ä»¥è¾¾åˆ°è´Ÿè½½å‡è¡¡ã€‚namespaceæœåŠ¡æä¾›æ–‡ä»¶çš„ä¿¡æ¯ï¼ˆç›®å½•æ ‘å’Œå‘½åç©ºé—´ï¼‰ï¼Œstreamå…ƒæ•°æ®æœåŠ¡æä¾›ä»æ–‡ä»¶åˆ°chunkçš„æ˜ å°„ï¼ˆchunkçš„ä½ç½®ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ChunkServers&lt;/strong&gt;ä»¥chunkå­˜å‚¨æ•°æ®å¹¶é…å¤‡æœ‰è‡ªå®šä¹‰çš„ç”¨æˆ·ç©ºé—´å­˜å‚¨æ–‡ä»¶ç³»ç»Ÿï¼ˆUSSFSï¼‰ï¼ŒUSSFSä¸ºä¸åŒç¡¬ä»¶ï¼ˆSMRSTORE for HM-SMR drivesï¼‰æä¾›é«˜æ€§èƒ½ï¼Œè¿½åŠ å†™å…¥çš„å­˜å‚¨å¼•æ“ã€‚åœ¨ç›˜å¤2.0çš„ç¬¬ä¸€é˜¶æ®µï¼Œæ¯ä¸ªå­˜å‚¨åœ¨chunkserversçš„æ–‡ä»¶éƒ½æœ‰ä¸‰ä¸ªå†—ä½™ï¼Œç”±GCWorkerè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¹¶ä½¿ç”¨ECï¼ˆErasure Codingï¼‰ç¼–ç æ¥å­˜å‚¨æ–‡ä»¶ã€‚åœ¨ç›˜å¤2.0çš„ç¬¬äºŒé˜¶æ®µï¼Œåœ¨å•†ä¸šæ¨¡å¼ä¸­ï¼Œä½¿ç”¨ECæ›¿æ¢3ä¸ªå†—ä½™çš„å­˜å‚¨æ–¹å¼æ¥å‡å°‘æµé‡æ”¾å¤§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç›˜å¤service&#34;&gt;ç›˜å¤Service&lt;/h3&gt;
&lt;p&gt;ç›˜å¤æœåŠ¡å±‚æä¾›ä¼ ç»Ÿçš„äº‘å­˜å‚¨æœåŠ¡ï¼ˆEBSã€OSSã€NASï¼‰ï¼Œé€šè¿‡é¢ç›¸äº‘åŸç”Ÿçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆFiscï¼‰æä¾›äº‘åŸç”Ÿå­˜å‚¨æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç›˜å¤monitoring-system&#34;&gt;ç›˜å¤Monitoring System&lt;/h3&gt;
&lt;p&gt;Perseusä¸ºç›˜å¤æ ¸å¿ƒå’Œç›˜å¤æœåŠ¡æä¾›å®æ—¶ç›‘æ§å’Œäººå·¥æ™ºèƒ½è¾…åŠ©çš„æ ¹æœ¬åŸå› åˆ†ææœåŠ¡ã€‚ç›˜å¤Coreã€ç›˜å¤Serviceã€ç›˜å¤Monitoring Systemé€šè¿‡é«˜é€Ÿç½‘ç»œç›¸è¿ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç›˜å¤20çš„è®¾è®¡ç›®æ ‡&#34;&gt;ç›˜å¤2.0çš„è®¾è®¡ç›®æ ‡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä½å»¶è¿Ÿï¼šç›˜å¤2.0è¦åˆ©ç”¨SSDå’ŒRDMAä½å»¶è¿Ÿçš„ç‰¹æ€§ï¼Œåœ¨è®¡ç®—-å­˜å‚¨åˆ†ç¦»æ¶æ„ä¸­å®ç°å¹³å‡100usçº§åˆ«I/Oå»¶è¿Ÿçš„æ€§èƒ½ç›®æ ‡ï¼Œå³ä½¿åœ¨ç½‘ç»œæµé‡æŠ–åŠ¨å’ŒæœåŠ¡å™¨æ•…éšœç­‰åŠ¨æ€ç¯å¢ƒä¸‹ï¼Œä¹Ÿèƒ½æä¾›æ¯«ç§’çº§åˆ« P999 SLAã€‚&lt;/li&gt;
&lt;li&gt;é«˜ååé‡ï¼šä½¿å­˜å‚¨æœåŠ¡å™¨çš„æœ‰æ•ˆååé‡æ¥è¿‘å…¶å®¹é‡ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºæ‰€æœ‰æœåŠ¡æä¾›ç»Ÿä¸€çš„é«˜æ€§èƒ½æ”¯æŒï¼šä¸ºè¿è¡Œåœ¨å…¶ä¸Šçš„æ‰€æœ‰ä¸šåŠ¡æä¾›ç»Ÿä¸€çš„é«˜æ€§èƒ½æ”¯æŒï¼Œä¾‹å¦‚åœ¨çº¿æœç´¢ã€æ•°æ®æµåˆ†æã€EBSã€OSSå’Œæ•°æ®åº“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;related-work&#34;&gt;Related Work&lt;/h2&gt;
&lt;p&gt;ç›®å‰æœ‰å¾ˆå¤šåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿè¢«æå‡ºå’Œä½¿ç”¨&lt;/p&gt;
&lt;p&gt;å¼€æºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://hadoop.apache.org/docs/r1.2.1/hdfs_design.htmll&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;HDFSï¼ˆHadoop FSï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ceph.com/en/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Cephï¼ˆRedhatï¼‰[OSDI&#39;06] Ceph: A Scalable, High-Performance Distributed File System&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç§æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://pdos.csail.mit.edu/6.824/papers/gfs.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GFSï¼ˆGoogleï¼‰[SOSP&#39;03] The Google File System&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/conference/fast21/presentation/pan&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Tectonic (FaceBook)[FAST&#39;21] Facebookâ€™s Tectonic Filesystem: Efficiency from Exascale&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://aws.amazon.com/products/storage/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;AWS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é˜¿é‡Œå·´å·´çš„ç›˜å¤å›¢é˜Ÿåˆ†äº«è¿‡å¾ˆå¤šç›˜å¤çš„è®¾è®¡ç†å¿µï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RDMAå¤§å‹éƒ¨ç½²,&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/system/files/nsdi21-gao.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[NSDI&#39;21] When Cloud Storage Meets RDMA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æ¨ªå‘æ‰©å±•äº‘å­˜å‚¨æœåŠ¡çš„Key-Valueé”®å€¼å­˜å‚¨å¼•æ“&lt;a class=&#34;link&#34; href=&#34;https://dl.acm.org/doi/abs/10.1145/3448016.3457553&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[SIGMOD&#39;21] A Key-Value Engine for Scalable Cloud Storage Services&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;EBSå­˜å‚¨æœåŠ¡çš„ç½‘ç»œå’Œå­˜å‚¨è½¯ä»¶æ ˆååŒè®¾è®¡&lt;a class=&#34;link&#34; href=&#34;https://dl.acm.org/doi/abs/10.1145/3544216.3544238&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[SIGCOMM&#39;22] From Luna to Solar: the Evolu- tions of the Compute-to-Storage Networks in Alibaba Cloud&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;namespaceå…ƒæ•°æ®æœåŠ¡çš„å…³é”®è®¾è®¡&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/conference/fast22/presentation/lv&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[FAST&#39;22] InfiniFS: An Efficient Metadata Service for Large-Scale Distributed Filesystems&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;0x02-phase-one-embracing-ssd-and-rdma&#34;&gt;0x02 Phase One: Embracing SSD and RDMA&lt;/h1&gt;
&lt;p&gt;ç›¸è¾ƒäºHDDå’ŒTCPï¼ŒSSDå’ŒRDMAæŠ€æœ¯æ˜¾è‘—é™ä½äº†I/Oå»¶è¿Ÿå’Œç½‘ç»œé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç›˜å¤é€šè¿‡å¼€å‘ç”¨æˆ·ç©ºé—´å­˜å‚¨æ“ä½œç³»ç»Ÿå¹¶æå‡ºä¸€äº›æ–‡ä»¶ç³»ç»Ÿçš„è®¾è®¡æ¥å®ç°é«˜ååé‡ã€100usçº§åˆ«I/Oå»¶è¿Ÿçš„é«˜IOPSæ€§èƒ½ã€‚åŒæ—¶æä¾›äº†æ–°çš„æœºåˆ¶æ¥ä¿éšœSLAã€‚&lt;/p&gt;
&lt;h2 id=&#34;append-only-file-system&#34;&gt;Append-Only File System&lt;/h2&gt;
&lt;p&gt;ç›˜å¤æå‡ºäº†ç»Ÿä¸€ã€è¿½åŠ å†™å…¥çš„æŒä¹…å±‚ï¼Œé€šè¿‡åä¸ºFlatLogFileçš„è¿½åŠ å†™å…¥æ¥å£æ¥ç®€åŒ–æ¶æ„ã€‚FlatLogFileå…·æœ‰é«˜ååé‡å’Œä½å»¶è¿Ÿã€‚åŸºäºFlatLogFileï¼Œç›˜å¤é‡‡ç”¨è¿½åŠ å†™å…¥çš„chunkï¼Œå¹¶ä½¿ç”¨ç‹¬ç«‹chunkå¸ƒå±€æ¥ç®¡ç†chunkserverä¸­çš„chunk&lt;/p&gt;
&lt;h3 id=&#34;unified-append-only-persistence-layer&#34;&gt;Unified, Append-Only Persistence Layer&lt;/h3&gt;
&lt;p&gt;ç›˜å¤çš„æŒä¹…åŒ–å±‚ä¸ºå­˜å‚¨æœåŠ¡æä¾›æ¥å£ã€‚åœ¨æ—©æœŸå¼€å‘é˜¶æ®µï¼Œä¸åŒçš„å­˜å‚¨æœåŠ¡ä¼šä½¿ç”¨ä¸åŒçš„æ¥å£ï¼Œä¾‹å¦‚LogFileæ¥å£æœåŠ¡äºä½å»¶è¿Ÿçš„NASæœåŠ¡ï¼ŒTempFileæ¥å£æœåŠ¡äºé«˜ååé‡çš„å¤§å‹è®¡ç®—æ•°æ®åˆ†ææœåŠ¡ã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡ä½¿å¼€å‘å’Œç®¡ç†éå¸¸å¤æ‚ã€‚æ¯ä¸ªæ¥å£éƒ½éœ€è¦æœ‰äººå¼€å‘å’Œç»´æŠ¤ï¼ŒäººåŠ›æˆæœ¬é«˜åˆ‡å®¹æ˜“å‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œéœ€è¦ç®€åŒ–å¼€å‘ç®¡ç†è¿‡ç¨‹ï¼Œè¿˜è¦å¼•å…¥ä½å»¶è¿Ÿçš„SSDï¼Œå—åˆ°è®¡ç®—æœºç½‘ç»œåˆ†å±‚æ¶æ„çš„å¯å‘ï¼Œç›˜å¤æå‡ºäº†ç»Ÿä¸€çš„æ–‡ä»¶ç±»å‹ï¼šFlatLogFileï¼ˆFigure 2ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230303201714075.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230303201714075&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;FlatLogFileä»…æ”¯æŒè¿½åŠ å†™å…¥ï¼Œä¸Šå±‚æœåŠ¡ï¼ˆOSSï¼‰å¯ä»¥å¯ä»¥ä½¿ç”¨ç±»ä¼¼é”®å€¼çš„æ˜ å°„æ¥æ›´æ–°æ•°æ®ï¼Œå¹¶ä½¿ç”¨åƒåœ¾æ”¶é›†æœºåˆ¶æ¥å‹ç¼©å†å²æ•°æ®ã€‚FlatLogFileä¸ºå­˜å‚¨æœåŠ¡æä¾›ç®€å•ã€ç»Ÿä¸€çš„æ¥å£æ“ä½œæ•°æ®ã€‚ç›˜å¤çš„å¼€å‘è€…å¿…é¡»ä¿è¯æ•°æ®æ“ä½œéƒ½æ˜¯é€šè¿‡FlatLogFileï¼Œå°¤å…¶æ˜¯å†™å…¥æ“ä½œï¼Œå¯ä»¥é«˜æ•ˆå¹¶å¯é çš„åœ¨å­˜å‚¨ä»‹è´¨ä¸Šæ‰§è¡Œã€‚å› æ­¤ï¼Œå­˜å‚¨æœåŠ¡çš„ä»»ä½•å‡çº§å’Œæ”¹å˜å¯¹äºå¼€å‘è€…è€Œè¨€éƒ½æ˜¯é€æ˜çš„ï¼Œç®€åŒ–äº†å¼€å‘å’Œç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åº•å±‚ï¼Œå›¢é˜Ÿè§‚å¯Ÿåˆ°SSDç”±äºå…¶è‡ªèº«çš„å­˜å‚¨å•å…ƒå’Œé—ªå­˜äº‹åŠ¡å±‚çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨é¡ºåºæ“ä½œä¸Šè·å¾—è¾ƒé«˜çš„ååé‡å’ŒIOPSã€‚ä¸ºäº†ä¿è¯é€šè¿‡FlatLogFileè¿›è¡Œçš„æ•°æ®æ“ä½œèƒ½å¤Ÿåœ¨SSDä¸Šé«˜æ•ˆåœ°æ‰§è¡Œï¼Œæˆ‘ä»¬å°†FlatLogFileä¸Šçš„é¡ºåºæ“ä½œå¯¹é½ä»¥å®ç°é«˜æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&#34;heavy-weight-client&#34;&gt;Heavy weight Client&lt;/h3&gt;
&lt;p&gt;è„æ´»ç´¯æ´»éƒ½æ˜¯Clientæ¥å¹²ã€‚Clientè´Ÿè´£ä¸chunkserversä¸€èµ·è¿›è¡Œæ•°æ®æ“ä½œï¼Œä¸masterä¸€èµ·è¿›è¡Œå…ƒæ•°æ®ä¿¡æ¯çš„æ£€ç´¢å’Œæ›´æ–°ã€‚åœ¨ä»mastersè·å–chunkä¿¡æ¯åï¼Œä¸€ä¸ªç›˜å¤Clientå°†è´Ÿè´£ç›¸åº”çš„å¤åˆ¶åè®®å’ŒECåè®®ã€‚Clientæœ‰é‡è¯•æœºåˆ¶ï¼ˆå¤‡ä»½è¯»å–Â¥3.3ï¼‰æ¥å¤„ç†æ„å¤–çš„æ€§èƒ½æŠ–åŠ¨ï¼ˆä¸¢åŒ…ï¼‰æ¥ä¿éšœI/O SLAã€‚&lt;/p&gt;
&lt;p&gt;Clientè¿˜æœ‰æ¢æµ‹æœºåˆ¶ï¼Œå®šæœŸä»mastersè·å–æœ€æ–°çš„ chunkserver çŠ¶æ€ï¼Œå¹¶è¯„ä¼° chunkserver çš„æœåŠ¡è´¨é‡ã€‚ç±»ä¼¼äºFacebook Tectonic FSçš„clientï¼Œç›˜å¤çš„Clientå¯ä»¥é€‰æ‹©åˆé€‚çš„è¯»å†™å‚æ•°æ¥å¤„ç†å…·ä½“çš„å­˜å‚¨æœåŠ¡æŒ‡ä»¤ï¼ˆEBS/OSSï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;append-only-chunk-management&#34;&gt;Append-Only Chunk Management&lt;/h3&gt;
&lt;p&gt;ä¼ ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿåœ¨å†™å…¥æ–‡ä»¶æ—¶ï¼ŒåŒæ—¶åˆ†ç¦»å†™å…¥æ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œäº§ç”Ÿä¸¤æ¬¡SSDçš„å†™æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é™ä½å»¶è¿Ÿå’Œå»¶é•¿SSDå¯¿å‘½ï¼Œç›˜å¤åŸºäºFlatLogFileçš„append-onlyè¯­ä¹‰ï¼Œé€‰æ‹©ä»¥chunkä¸ºå•ä½å­˜å‚¨æ–‡ä»¶ï¼Œè€Œéblockï¼Œchunkå­˜å‚¨åœ¨chunkseverä¸­ï¼Œå¹¶æœ‰ç‹¬ç«‹çš„å¸ƒå±€ï¼Œæ¯ä¸ªchunkéƒ½ä¿å­˜äº†è‡ªå·±çš„æ•°æ®å’Œå…ƒæ•°æ®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;chunkåªéœ€è¦ä¸€æ¬¡æ“ä½œå°±å¯ä»¥è¢«å†™å…¥åˆ°å­˜å‚¨ä»‹è´¨ä¸­ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘å†™å…¥å»¶è¿Ÿå’Œå­˜å‚¨ä»‹è´¨çš„å¯¿å‘½ã€‚&lt;/p&gt;
&lt;p&gt;Figure 3æ˜¯chunkçš„å¸ƒå±€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230304141646186.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230304141646186&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªchunkåŒ…å«å¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†åŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼šdataã€paddingã€footerã€‚&lt;/p&gt;
&lt;p&gt;footerä¿å­˜äº†chunkçš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚chunk IDã€chunk é•¿åº¦ã€CRCæ ¡éªŒå’Œã€‚&lt;/p&gt;
&lt;p&gt;ç‹¬ç«‹çš„chunkå¸ƒå±€ä¹Ÿä½¿å¾—chunkserverå¯ä»¥æ‰§è¡Œè¿›è¡Œçº é”™æ¢å¤ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªclientè¿ç»­å†™å…¥chunkåˆ°å­˜å‚¨è®¾å¤‡æ—¶ï¼Œchunkserveråœ¨å†…å­˜ä¸­å­˜å‚¨è¿™äº›chunkçš„å…ƒæ•°æ®ï¼Œå¹¶ä¸”å‘¨æœŸæ€§åœ°å°†è¿™äº›ä¿¡æ¯çš„æ£€æŸ¥ç‚¹ä¼ é€’ç»™å­˜å‚¨è®¾å¤‡ã€‚å½“å‘ç”Ÿé”™è¯¯å¯¼è‡´ä¸€äº›ä¸èƒ½å®Œæˆçš„å†™å…¥æ“ä½œæ—¶ï¼Œchunkserverä¼šåŠ è½½æ£€æŸ¥ç‚¹ä¸­çš„å…ƒæ•°æ®å¹¶ä¸”å’Œchunkä¸­çš„å…ƒæ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœäºŒè€…ä¸åŒï¼Œchunkserverä¼šæ£€æŸ¥Chunkçš„CRCæ¥è¿›è¡Œæ¢å¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;metadata-operation-optimization-å…ƒæ•°æ®æ“ä½œä¼˜åŒ–&#34;&gt;Metadata Operation Optimization å…ƒæ•°æ®æ“ä½œä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;ç›˜å¤çš„Masteræä¾›ä¸¤ç§å…ƒæ•°æ®æœåŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;namespaceï¼šè´Ÿè´£ç›®å½•æ ‘å’Œæ–‡ä»¶ç®¡ç†&lt;/li&gt;
&lt;li&gt;Streamï¼šè´Ÿè´£chunkä¿¡æ¯çš„ç»´æŠ¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Streamå†…åŒ…å«ä¸€ç»„chunkï¼ŒåŒä¸€ä¸ªStreamä¸­çš„chunkä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªæœåŠ¡éƒ½æ˜¯ç”¨äº†åˆ†å¸ƒå¼æ¶æ„æ¥ä¿è¯æ›´å¥½çš„ä¼¸ç¼©æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä»–ä»¬æ ¹æ®å…ƒæ•°æ®å±€éƒ¨æ€§å’Œè´Ÿè½½å‡è¡¡å¯¹å…ƒæ•°æ®è¿›è¡Œåˆ’åˆ†ï¼ˆå…ˆæ ¹æ®ç›®å½•æ ‘åˆ’åˆ†ï¼Œå†è¿›è¡Œå“ˆå¸Œï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶è¿˜ç”¨å¤šç§æœºåˆ¶æ¥ä¼˜åŒ–å…ƒæ•°æ®æ“ä½œçš„é«˜æ•ˆæ€§ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å¹¶è¡Œçš„å…ƒæ•°æ®å¤„ç†&#34;&gt;å¹¶è¡Œçš„å…ƒæ•°æ®å¤„ç†&lt;/h4&gt;
&lt;p&gt;namespaceå’Œstreaméƒ½ä½¿ç”¨å¹¶è¡Œå¤„ç†ï¼ˆInfiniFSï¼‰æ¥å®ç°å…ƒæ•°æ®çš„ä½å»¶è¿Ÿè®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;ç›˜å¤ä½¿ç”¨å“ˆå¸Œç®—æ³•æ¥æ˜ å°„å…³è”æ€§å¼ºçš„å…ƒæ•°æ®åˆ°ä¸åŒçš„å…ƒæ•°æ®æœåŠ¡å™¨ä¸­ã€‚ä½¿ç”¨ä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼Œæ”¯æŒå¯é¢„æµ‹çš„ç›®å½•IDï¼Œå¹¶å…è®¸Clienté«˜æ•ˆåœ°å¹³è¡Œæ‰§è¡Œè·¯å¾„è§£æã€‚åŒæ—¶è¿˜å¼•å…¥äº†å‡ ç§åŠ é€ŸClientä»StreamæœåŠ¡ä¸­æ£€ç´¢chunkä¿¡æ¯çš„æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å¯å˜é•¿åº¦çš„chunk&#34;&gt;å¯å˜é•¿åº¦çš„chunk&lt;/h4&gt;
&lt;p&gt;ç›˜å¤2.0é‡‡ç”¨å¤§chunkï¼Œæœ‰ä¸‰ä¸ªå¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡å°‘äº†å…ƒæ•°æ®çš„æ•°é‡&lt;/li&gt;
&lt;li&gt;é¿å…äº†Clienté¢‘ç¹è¯·æ±‚chunkäº§ç”Ÿçš„I/Oå»¶è¿Ÿ&lt;/li&gt;
&lt;li&gt;æé«˜äº†SSDçš„å¯¿å‘½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä»…ä»…æé«˜chunk sizeä¼šæœ‰ç¢ç‰‡çš„é£é™©ï¼Œå› æ­¤é‡‡ç”¨äº†å¯å˜é•¿åº¦çš„chunkï¼ˆä»1MBåˆ°2GBï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚EBSæœåŠ¡çš„chunk sizeçš„95%åˆ†ä½æ•°ä¸º64MBï¼Œ99%åˆ†ä½æ•°ä¸º286.4MBã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœ¨clientä¸­ç¼“å­˜chunkä¿¡æ¯&#34;&gt;åœ¨Clientä¸­ç¼“å­˜chunkä¿¡æ¯&lt;/h4&gt;
&lt;p&gt;æ¯ä¸ªclientç»´æŠ¤äº†ä¸€ä¸ªæœ¬åœ°çš„å…ƒæ•°æ®ç¼“å­˜æ± ï¼Œæ¥å‡å°‘å…ƒæ•°æ®çš„è¯·æ±‚æ¬¡æ•°ã€‚ç¼“å­˜æ± é€šè¿‡LRUè¿›è¡Œç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªç¨‹åºæƒ³è®¿é—®æ•°æ®æ—¶ï¼Œclienté¦–å…ˆè®¿é—®å…ƒæ•°æ®ç¼“å­˜ï¼Œå½“ç¼“å­˜æ²¡æœ‰å‘½ä¸­æ—¶å°†å‘èµ·å¯¹masterçš„è¯·æ±‚ï¼Œå½“ç¼“å­˜å‘½ä¸­æ—¶ï¼Œå“åº”è¯·æ±‚æ—¶ï¼Œå¯¹åº”çš„chunkserverä¼šé€šçŸ¥clientå…¶å…ƒæ•°æ®å·²ç»è¿‡æœŸï¼ˆç”±äºå‰¯æœ¬è¿ç§»ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ‰¹å¤„ç†chunkä¿¡æ¯è¯·æ±‚&#34;&gt;æ‰¹å¤„ç†chunkä¿¡æ¯è¯·æ±‚&lt;/h4&gt;
&lt;p&gt;æ¯ä¸ªclientåœ¨çŸ­æ—¶é—´å†…æ±‡æ€»å¤šä¸ªchunkè¯·æ±‚ï¼Œå¹¶å°†å…¶æ‰¹é‡å‘é€ç»™masterï¼Œæ¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ä¸»ç«™å¹¶è¡Œå¤„ç†æˆæ‰¹çš„è¯·æ±‚ï¼Œæ±‡æ€»ç»“æœå¹¶å°†å…¶å‘å›ç»™clientã€‚clientå¯¹ç»“æœè¿›è¡Œåˆ†è§£ï¼Œå¹¶å°†å…¶åˆ†é…ç»™ç›¸åº”çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ¨æµ‹chunkä¿¡æ¯è¿›è¡Œé¢„å–&#34;&gt;æ¨æµ‹chunkä¿¡æ¯è¿›è¡Œé¢„å–&lt;/h4&gt;
&lt;p&gt;è®¾è®¡äº†ä¸€ä¸ªåŸºäºè´ªå¿ƒå’Œç»Ÿè®¡å­¦çš„é¢„å–æœºåˆ¶æ¥å‡å°‘chunkä¿¡æ¯çš„è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å½“masterèŠ‚ç‚¹æ”¶åˆ°äº†æ¥è‡ªclientçš„è¯»è¯·æ±‚æ—¶ï¼Œmasterå°†è¿”å›æœ‰å…³çš„chunkå…ƒæ•°æ®å’Œå…¶ä»–chunkçš„å…ƒæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å½“masteræ”¶åˆ°å†™å…¥è¯·æ±‚æ—¶ï¼Œmasterå°†è¿”å›å¤šä¸ªchunkï¼Œè¶…å‡ºclientçš„è¯·æ±‚æ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;clientå› æ­¤å¯ä»¥åœ¨ä¸è¯·æ±‚å—çš„æƒ…å†µä¸‹åˆ‡æ¢å—ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ•°æ®æå¸¦å‡å°‘å¾€è¿”æ—¶å»¶&#34;&gt;æ•°æ®æå¸¦å‡å°‘å¾€è¿”æ—¶å»¶&lt;/h4&gt;
&lt;p&gt;å—åˆ°äº†QUICå’ŒHTTP3çš„å¯å‘ï¼Œä½¿ç”¨æ•°æ®æå¸¦æ¥æ”¹å–„å†™å…¥å»¶è¿Ÿï¼Œåœ¨clientä»masteræ£€ç´¢åˆ°chunkåœ°å€åï¼Œä»–å°†chunkåˆ›å»ºè¯·æ±‚å’Œæ•°æ®å†™å…¥è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªè¯·æ±‚ï¼Œç„¶åå‘é€ç»™chunkserverã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤å¯ä»¥å‡å°‘ä¸€ä¸ªRTTã€‚ï¼ˆä½†æ˜¯å½“ä¸ªRTTé•¿äº†ï¼Œæ•°æ®åŒ…å¤§å°é—®é¢˜ï¼Ÿï¼‰&lt;/p&gt;
&lt;h2 id=&#34;chunkserver-ussos&#34;&gt;ChunkServer USSOS&lt;/h2&gt;
&lt;p&gt;chunkserverè´Ÿè´£æ‰§è¡Œæ‰€æœ‰çš„æ•°æ®æ“ä½œã€‚å› æ­¤ï¼Œç²¾å¿ƒè®¾è®¡è¿è¡Œæ—¶æ“ä½œç³»ç»Ÿä»¥ç¡®ä¿æ•°æ®æ“ä½œèƒ½ä»¥&lt;strong&gt;ä½å»¶è¿Ÿ&lt;/strong&gt;å’Œ&lt;strong&gt;é«˜ååé‡&lt;/strong&gt;å®Œæˆæ˜¯éå¸¸é‡è¦çš„ã€‚åœ¨æ–°å…´çš„é«˜é€Ÿç½‘ç»œæŠ€æœ¯å’Œå­˜å‚¨é¢†åŸŸï¼ŒåšæŒé€šè¿‡å†…æ ¸ç©ºé—´è¿›è¡Œæ•°æ®æ“ä½œçš„ä¼ ç»Ÿè®¾è®¡æ˜¯ä½æ•ˆçš„ã€‚è¿™ä¸ä»…ä¼šå¯¼è‡´é¢‘ç¹çš„ç³»ç»Ÿä¸­æ–­ï¼Œä»è€Œæ¶ˆè€—CPUèµ„æºï¼Œè€Œä¸”è¿˜ä¼šå¯¼è‡´ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ä¹‹é—´ä¸å¿…è¦çš„æ•°æ®é‡å¤ã€‚
ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç›˜å¤é‡‡ç”¨äº†kernel-bypassç»•è¿‡å†…æ ¸çš„è®¾è®¡ï¼Œä¸ºchunkserverå¼€å‘äº†ä¸€ä¸ªé«˜æ€§èƒ½çš„ç”¨æˆ·ç©ºé—´å­˜å‚¨æ“ä½œç³»ç»Ÿï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„ç”¨æˆ·ç©ºé—´å­˜å‚¨è½¯ä»¶å¹³å°ã€‚é™¤äº†åœ¨USSOSä¸­å®ç°è®¾å¤‡ç®¡ç†å’ŒRTCè¿è¡Œåˆ°å®Œæˆçš„çº¿ç¨‹æ¨¡å‹ï¼Œç›˜å¤è¿˜å®ç°äº†ç”¨æˆ·çº§çš„å†…å­˜ç®¡ç†ï¼Œè½»é‡çº§çš„ç”¨æˆ·ç©ºé—´è°ƒåº¦ç­–ç•¥ï¼Œè¿˜ä¸ºSSDå®šåˆ¶äº†é«˜æ€§èƒ½append-onlyçš„ç”¨æˆ·ç©ºé—´å­˜å‚¨æ–‡ä»¶ç³»ç»Ÿï¼ˆUSSFSï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç”¨æˆ·çº§åˆ«å†…å­˜ç®¡ç†&#34;&gt;ç”¨æˆ·çº§åˆ«å†…å­˜ç®¡ç†&lt;/h3&gt;
&lt;p&gt;chunkserverçš„USSOSåŸºäºç°æœ‰çš„ç”¨æˆ·ç©ºé—´æŠ€æœ¯ï¼Œå¦‚ç½‘ç»œæ ˆä¸­çš„RDMAï¼Œå­˜å‚¨æ ˆä¸­çš„DPDKå’ŒSPDKã€‚ç›˜å¤å¯¹ç½‘ç»œæ ˆå’Œå­˜å‚¨æ ˆè¿›è¡Œäº†æ•´åˆï¼Œä»¥å‡å°‘å»¶è¿Ÿå¹¶å®ç°é«˜æ€§èƒ½çš„æ•°æ®æ“ä½œã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨RTCçº¿ç¨‹æ¨¡å‹ï¼Œåœ¨ä¼ ç»Ÿçš„æµæ°´çº¿pipelineçº¿ç¨‹æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚è¢«åˆ†è§£æˆå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µè¿è¡Œåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ã€‚ç›¸åï¼ŒUSSOSä¸­ä¸€ä¸ªè¯·æ±‚è‡ªå§‹è‡³ç»ˆéƒ½å¤„äºä¸€ä¸ªçº¿ç¨‹é‡Œï¼Œå‡å°‘äº†ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œçº¿ç¨‹é—´é€šä¿¡çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹è¯·æ±‚ä¸€ä¸ªå¤§é¡µå†…å­˜ç©ºé—´ç”¨ä½œç½‘ç»œæ ˆå’Œå­˜å‚¨æ ˆçš„å…±äº«å†…å­˜ã€‚ä»ç½‘ç»œä¸­æ¥å—çš„æ•°æ®å¯ä»¥é€šè¿‡RDMAå­˜å‚¨åœ¨å¤§é¡µå†…å­˜ç©ºé—´ä¸­ã€‚å‘é€å¤§é¡µå†…å­˜çš„å…ƒæ•°æ®ä¹‹åï¼ˆåœ°å€å’Œå¤§å°ï¼‰ï¼Œæ•°æ®å¯ä»¥ç›´æ¥é€šè¿‡SPDKä»å¤§é¡µå†…å­˜å†™å…¥åˆ°å­˜å‚¨è®¾å¤‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ç”¨æˆ·ç©ºé—´çš„è°ƒåº¦æœºåˆ¶&#34;&gt;ç”¨æˆ·ç©ºé—´çš„è°ƒåº¦æœºåˆ¶&lt;/h3&gt;
&lt;h4 id=&#34;é€šè¿‡é˜»å¡åç»­è¯·æ±‚é˜»æ­¢ä»»åŠ¡&#34;&gt;é€šè¿‡é˜»å¡åç»­è¯·æ±‚é˜»æ­¢ä»»åŠ¡&lt;/h4&gt;
&lt;p&gt;æ¯ä¸ªchunkserveréƒ½æœ‰å›ºå®šæ•°é‡çš„çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ–°çš„è¯·æ±‚é€šè¿‡å“ˆå¸Œæ˜ å°„è¢«ä¸‹å‘ç»™ä¸€ä¸ªworkingçº¿ç¨‹ã€‚è¢«å‘é€åˆ°åŒä¸€ä¸ªçº¿ç¨‹çš„è¯·æ±‚åŸºäºå…ˆåˆ°å…ˆæ‰§è¡ŒFIFSçš„æœºåˆ¶æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªè¯·æ±‚å ç”¨äº†å¤ªå¤šçš„æ—¶é—´ç‰‡ï¼ˆè¡¨æŸ¥è¯¢æœç´¢ï¼Œå†…å­˜ç”³è¯·ï¼‰ï¼Œå°†ä¼šé˜»å¡å…¶ä»–ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;é’ˆå¯¹ä¸åŒåœºæ™¯ä½¿ç”¨ä¸åŒçš„è°ƒåº¦ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºè´Ÿè½½è¾ƒé«˜çš„ä»»åŠ¡ï¼Œä½¿ç”¨å¿ƒè·³æœºåˆ¶æ¥ç›‘æ§ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ï¼Œå¹¶è®¾ç½®å‘Šè­¦ã€‚å¦‚æœä»»åŠ¡è¶…å‡ºäº†è§„å®šæ—¶é—´ç‰‡ï¼Œä¼šå°†å…¶ä¸‹å‘åˆ°åå°çº¿ç¨‹è¿›è¡Œæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºç³»ç»Ÿäº§ç”Ÿçš„è´Ÿè½½ï¼Œç›˜å¤ä½¿ç”¨TCMallocï¼ˆThread Cached Mallocï¼‰ç¼“å­˜æ¥å…è®¸åœ¨ç¼“å­˜ä¸­æ‰§è¡Œé«˜é¢‘ç‡çš„æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä¼˜å…ˆçº§è°ƒåº¦ä¿éšœé«˜qos&#34;&gt;ä¼˜å…ˆçº§è°ƒåº¦ä¿éšœé«˜QoS&lt;/h4&gt;
&lt;p&gt;ç›˜å¤å¯¹ä¸åŒè¯·æ±‚æ ‡æ³¨ä¸åŒçš„QoSæ ‡ç­¾ï¼ˆç”¨æˆ·è¯·æ±‚é«˜ä¼˜å…ˆçº§ï¼ŒGCè¯·æ±‚ä½ä¼˜å…ˆçº§ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;USSOSåˆ›å»ºäº†ä¸€ä¸ª&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—&lt;/strong&gt;ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ ¹æ®QoSç›®æ ‡æ¥è¿›è¡Œè°ƒåº¦ã€‚ä»¥æ­¤æ¥é˜²æ­¢ä½QoSä»»åŠ¡è¿‡å¤šå¯¼è‡´é«˜QoSä¸èƒ½è¢«æŒ‰æ—¶å®Œæˆã€‚&lt;/p&gt;
&lt;h4 id=&#34;è½®è¯¢å’Œäº‹ä»¶é©±åŠ¨çš„åˆ‡æ¢napi&#34;&gt;è½®è¯¢å’Œäº‹ä»¶é©±åŠ¨çš„åˆ‡æ¢ï¼ˆNAPIï¼‰&lt;/h4&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢é¢‘ç¹å‘èµ·ä¸­æ–­å¯¼è‡´é«˜CPUåˆ©ç”¨ç‡ï¼ŒUSSOSä½¿ç”¨åˆ‡æ¢æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;NICï¼ˆNetwork Interface Controllerï¼Œç½‘å¡ï¼‰æä¾›äº†&lt;strong&gt;æ–‡ä»¶æè¿°ç¬¦fd&lt;/strong&gt;çš„ç›‘æ§ï¼ŒåŸºäºç›‘å¬æ•°æ®è¾¾åˆ°åçš„fdäº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç¨‹åºé»˜è®¤ä½¿ç”¨&lt;strong&gt;äº‹ä»¶é©±åŠ¨&lt;/strong&gt;ï¼Œå½“ç¨‹åºæ”¶åˆ°äº†NICçš„é€šçŸ¥ï¼Œå°†åˆ‡æ¢ä¸ºè½®è¯¢æ¨¡å¼ã€‚å¦‚æœç¨‹åºä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•I/Oè¯·æ±‚ï¼Œå°†ä¼šåˆ‡æ¢ä¼šäº‹ä»¶é©±åŠ¨æ¨¡å¼å¹¶å‘ŠçŸ¥NICã€‚&lt;/p&gt;
&lt;h3 id=&#34;append-only-ussos&#34;&gt;Append Only USSOS&lt;/h3&gt;
&lt;p&gt;USSFSä½¿ç”¨ä¸€ç³»åˆ—åŸºäºchunkçš„æŒ‡ä»¤ï¼ˆopenï¼Œcloseï¼Œsealï¼Œformatç­‰ï¼‰ï¼Œæ”¯æŒappend-only writeã€‚&lt;/p&gt;
&lt;p&gt;æ”¯æŒappend-onlyçš„é¡ºåºå†™å…¥ï¼Œå……åˆ†åˆ©ç”¨äº†SSDçš„é¡ºåºå†™å’Œéšæœºè¯»ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¤šç§æœºåˆ¶æœ€å¤§åŒ–SSDæ€§èƒ½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å……åˆ†åˆ©ç”¨ç‹¬ç«‹chunkå¸ƒå±€ï¼Œæå¤§çš„å‡å°‘äº†æ•°æ®æ“ä½œçš„æ¬¡æ•°ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨page cacheå’Œæ—¥å¿—ç­‰æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;ä¸éœ€è¦å»ºç«‹åˆ†çº§çš„ç´¢å¼•æœºåˆ¶ï¼ˆä¾‹å¦‚ext4çš„inodeå’Œæ–‡ä»¶ç›®å½•dentriesï¼‰ã€‚æ‰€æœ‰çš„æ“ä½œä¼šé€šè¿‡æ—¥å¿—è¿›è¡Œè®°å½•ï¼Œè¯¥æ—¥å¿—å¯ä»¥ç”¨æ¥åœ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿæ—¶é‡å»ºå…ƒæ•°æ®ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è½®è¯¢æœºåˆ¶å‡å°‘ä¸­æ–­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å•ä¸ªSSDçš„å®¹é‡ä¸€èˆ¬å¾ˆå¤§ï¼Œå¹¶ä¸”ä¸€ä¸ªchunkçš„å¤§å°é€šå¸¸æ˜¯64MBï¼Œè®¾å®šUSSFSçš„æœ€å°ç©ºé—´åˆ†é…ç²’åº¦ä¸º1MBï¼Œä¸»è¦è€ƒè™‘ä½¿ç”¨çš„å†…å­˜å¤§å°å’ŒSSDçš„ç©ºé—´åˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é«˜æ€§èƒ½slaä¿éšœ&#34;&gt;é«˜æ€§èƒ½SLAä¿éšœ&lt;/h2&gt;
&lt;h3 id=&#34;chasing&#34;&gt;Chasing&lt;/h3&gt;
&lt;p&gt;å‡å°‘ç³»ç»ŸæŠ–åŠ¨åœ¨å†™å»¶è¿Ÿä¸Šçš„å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å½“$MaxCopy$ä¸ªå‰¯æœ¬ä¸­çš„$MinCopy$ä¸ªåœ¨chunkserverä¸­æˆåŠŸå†™å…¥æ—¶ï¼Œå…è®¸clientå‘åº”ç”¨è¿”å›successã€‚è§„å®š$2\times MinCopy\ \ \ \textgreater \ \ \ MaxCopy$ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾Figure 4å±•ç¤ºäº†Chasingåœ¨$MaxCopy=3\and MinCopy=2$æƒ…å†µä¸‹çš„å·¥ä½œæƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230308133528640.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230308133528640&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºè¯·æ±‚Clientå†™å…¥æ•°æ®$[1,2,3]$åˆ°3ä¸ªå‰¯æœ¬chunkserverä¸­ï¼Œåœ¨æ—¶é—´$T$æ—¶ï¼Œchunkserver1å’Œ2å·²ç»å‘clientè¿”å›äº†å†™æ“ä½œsuccessï¼Œä½†æ˜¯chunkserver3è¿˜æ²¡æœ‰å›å¤ã€‚æ­¤æ—¶Clientå°†å‘åº”ç”¨ç¨‹åºå›å¤successã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Clientä¸­è¿˜éœ€è¦åœ¨å†…å­˜ä¸­ä¿ç•™å†™å…¥çš„æ•°æ®ï¼Œå¹¶ç­‰å¾…ä¸€ä¸ªæ—¶é—´æ®µ$t$ï¼ˆmsçº§åˆ«ï¼‰ï¼Œå¦‚æœchunkserver 3åœ¨$T+t$æ—¶é—´ä»¥å‰å›å¤äº†successï¼ŒClientå°±ä¼šåœ¨å†…å­˜ä¸­åˆ é™¤é‡Šæ”¾è¦å†™å…¥çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœchunkserver 3æ²¡æœ‰å®Œæˆå†™å…¥æ“ä½œï¼Œä¸”æ²¡æœ‰å®Œæˆçš„éƒ¨åˆ†å°äºé˜ˆå€¼$k$ï¼ŒClientå°†åœ¨chunkserver 3ä¸­å‘èµ·é‡è¯•æ“ä½œï¼›è‹¥æ²¡æœ‰å®Œæˆçš„éƒ¨åˆ†å¤§äº$k$ï¼ŒClientå°†ä¼šåœ¨chunkserver 3ä¸­å°å­˜è¿™ä¸ªchunkï¼Œä¿è¯ä¸ä¼šæ”¶åˆ°åç»­è¿½åŠ å†™å…¥çš„å½±å“ï¼ŒClienté€šçŸ¥masterï¼Œmasterå°†ä»chunkserver 1æˆ–è€…2å¤åˆ¶ä¸€ä¸ªä¸åŒçš„chunkæ¥ä¿è¯æ€»å…±å­˜åœ¨3ä¸ªå‰¯æœ¬ï¼Œ&lt;strong&gt;Clientçš„å†…å­˜ä¸­è¿˜æœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Ÿ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‚£ä¹ˆchunkserver 3ä¸­å°å­˜è¿‡çš„chunkæ€ä¹ˆå¤„ç†ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç§Early- Write- Acknowledgmentæœºåˆ¶ï¼Œå‡å°‘äº†å†™å…¥æ“ä½œçš„å°¾å»¶è¿Ÿï¼Œåœ¨ç›˜å¤ä¸Šéƒ¨ç½²äº†åå¤šå¹´ï¼Œæ²¡å‘ç”Ÿè¿‡æ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;h3 id=&#34;non-stop-write-ä¸åœå†™&#34;&gt;Non-stop write ä¸åœå†™&lt;/h3&gt;
&lt;p&gt;å‡å°‘å½“ä¸€ä¸ªchunkå†™å…¥å¤±è´¥å¯¼è‡´çš„å†™å…¥å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;å½“å†™å…¥å¤±è´¥æ—¶ï¼ŒClientğŸå°å­˜chunkå¹¶ä¸”æ±‡æŠ¥masterå½“å‰å·²ç»æˆåŠŸå†™å…¥çš„æ•°æ®é•¿åº¦ï¼Œmasterä½¿ç”¨ä¸€ä¸ªæ–°çš„chunkæ¥ç»§ç»­å†™å…¥æ•°æ®ã€‚å¦‚æœå†™å…¥åˆ°å°å­˜çš„chunkä¸­çš„æ•°æ®æŸåï¼Œä¼šåœ¨åå°ä½¿ç”¨å…¶ä»–å·²ç»æˆåŠŸå†™å…¥çš„å‰¯æœ¬å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„chunkä¸­ã€‚å¦‚æœæ²¡æœ‰å¯ç”¨å‰¯æœ¬ï¼ŒClientå°†å†æ¬¡å†™å…¥æ•°æ®åˆ°ä¸€ä¸ªæ–°çš„chunkã€‚&lt;/p&gt;
&lt;h3 id=&#34;backup-read&#34;&gt;Backup read&lt;/h3&gt;
&lt;p&gt;å‡å°‘åŠ¨æ€ç¯å¢ƒä¸‹è¯»å»¶è¿Ÿã€‚åœ¨æ”¶åˆ°è¯»è¯·æ±‚çš„responseå‰ï¼ŒClientå‘å…¶ä»–Chunkserverå‘é€é¢å¤–çš„è¯»è¯·æ±‚ä½œä¸ºå¤‡ä»½ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æœºåˆ¶æ¶‰åŠä¸¤ä¸ªå‚æ•°ï¼Œå‘é€è¯·æ±‚çš„æ•°é‡å’Œç­‰å¾…æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œç›˜å¤è®¡ç®—äº†ä¸åŒç¡¬ç›˜ç±»å‹å’ŒI/Oå¤§å°çš„å»¶è¿Ÿï¼Œå¹¶ä½¿ç”¨è¿™äº›ä¿¡æ¯åŠ¨æ€è°ƒæ•´å‘é€å¤‡ä»½è¯»å–è¯·æ±‚çš„æ—¶é—´ã€‚å®ƒè¿˜é™åˆ¶äº†å¤‡ä»½è¯»å–è¯·æ±‚çš„æ•°é‡ï¼Œä»¥æ§åˆ¶ç³»ç»Ÿçš„è´Ÿè½½ã€‚&lt;/p&gt;
&lt;h3 id=&#34;blacklisting&#34;&gt;Blacklisting&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†é¿å…å‘æœåŠ¡è´¨é‡å·®çš„chunkserverå‘é€I/Oè¯·æ±‚ï¼Œç›˜å¤ä½¿ç”¨ä¸¤ä¸ªé»‘åå•ï¼Œ&lt;strong&gt;ç¡®å®šé»‘åå•&lt;/strong&gt;å’Œ&lt;strong&gt;éç¡®å®šé»‘åå•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç›˜å¤ç¡®å®šä¸€ä¸ªchunkserverå·²ç»æ— æ³•æä¾›æœåŠ¡ï¼ˆchunkserverçš„SSDæŸåï¼‰ï¼Œè¿™ä¸ªæœåŠ¡å™¨å°†è¢«åŠ å…¥ç¡®å®šé»‘åå•ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªchunkserverå¯ä»¥æä¾›æœåŠ¡ï¼Œä½†æ˜¯å»¶è¿Ÿè¶…è¿‡ä¸Šé™ï¼Œå°†ä¼šè¢«åŠ å…¥&lt;/p&gt;
&lt;h2 id=&#34;è¯„ä¼°&#34;&gt;è¯„ä¼°&lt;/h2&gt;
&lt;h1 id=&#34;0x03-phase-two-adapting-to-performance-oriented-business-model&#34;&gt;0x03 Phase Two: Adapting to Performance-Oriented Business Model&lt;/h1&gt;
&lt;h1 id=&#34;0x04-operation-experiences&#34;&gt;0x04 Operation Experiences&lt;/h1&gt;
&lt;h1 id=&#34;0x05-lessons&#34;&gt;0x05 Lessons&lt;/h1&gt;
&lt;h1 id=&#34;0x06-conclusion&#34;&gt;0x06 Conclusion&lt;/h1&gt;
&lt;h1 id=&#34;0x07-reference&#34;&gt;0x07 Reference&lt;/h1&gt;
</description>
        </item>
        <item>
        <title>[OSDI&#39;22] XRP: In-Kernel Storage Functions with eBPF</title>
        <link>https://blog.ipandai.club/p/osdi22-xrp-in-kernel-storage-functions-with-ebpf/</link>
        <pubDate>Thu, 09 Feb 2023 14:51:48 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/osdi22-xrp-in-kernel-storage-functions-with-ebpf/</guid>
        <description>&lt;h1 id=&#34;0x00-intro&#34;&gt;0x00 Intro&lt;/h1&gt;
&lt;p&gt;éšç€è¶…ä½å»¶è¿ŸSSDçš„å‘å±•ï¼ŒI/Oè¿‡ç¨‹ä¸­æ¥è‡ªå†…æ ¸çš„å»¶è¿Ÿæ¯”é‡ä¸æ–­å‡é«˜ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230224131538122.png&#34; alt=&#34;image-20230224131538122&#34; style=&#34;zoom:67%;&#34; /&gt;
&lt;p&gt;è§‚å¯Ÿä¸€ä¸ªè¯·æ±‚çš„ä»å‘èµ·åˆ°å®Œæˆçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå†…æ ¸éƒ¨åˆ†å æ®äº†48.6%çš„å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230224132654967.png&#34; alt=&#34;image-20230224132654967&#34; style=&#34;zoom: 67%;&#34; /&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230225105147344.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230225105147344&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å› æ­¤å¯ä»¥è€ƒè™‘è·³è¿‡å†…æ ¸ä¸­ä¸€ç³»åˆ—çš„æ•°æ®ä¼ é€’ï¼Œå³Kernel Bypassã€‚ç›®å‰ç°æœ‰çš„ç ”ç©¶å¤§éƒ½å¯¹å†…æ ¸è¿›è¡Œäº†æ¿€è¿›çš„ä¿®æ”¹ç­–ç•¥ï¼Œæˆ–å¼•å…¥äº†æ–°çš„ç¡¬ä»¶ï¼ŒKernel Bypassä¸»è¦ä½¿ç”¨SPDKï¼Œç›´æ¥å¯¹ç¡¬ä»¶è®¾å¤‡è¿›è¡Œè®¿é—®ï¼Œè€ŒSPDKä¼šå¼ºåˆ¶å¼€å‘è€…å®ç°è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œéœ€è¦è‡ªè¡Œç»´æŠ¤éš”ç¦»æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç­‰å¾…I/Oå®Œæˆæ—¶ï¼Œå¾€å¾€ä¼šè¿›è¡Œè½®è¯¢ï¼Œç»™CPUå¸¦æ¥äº†ä¸€äº›æ€§èƒ½æŸå¤±ã€‚æœ‰ç ”ç©¶è¡¨æ˜å½“å¯è°ƒåº¦çš„çº¿ç¨‹æ•°é‡è¶…è¿‡äº†CPUæ ¸å¿ƒæ•°é‡æ—¶ï¼Œä½¿ç”¨SPDKä¼šæé«˜å¹³å‡å»¶è¿Ÿå’Œå°¾å»¶è¿Ÿï¼Œä¸¥é‡é™ä½äº†ååé‡ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ä½œè€…çš„æ ¸å¿ƒæ€æƒ³ä¸ºæ—¢å¯ä»¥å®ŒæˆKernel Bypassï¼Œä¹Ÿä¸éœ€è¦å¼•å…¥é¢å¤–ç¡¬ä»¶å¹¶ä¸å¯¹å†…æ ¸å’Œæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå¾ˆå¤§çš„ä¿®æ”¹ï¼Œä½œè€…å€ŸåŠ©BPF(Berkeley Packet Filter)æ¥å®ç°ï¼ŒBPFå…è®¸åº”ç”¨ç¨‹åºä¸‹æ”¾éƒ¨åˆ†å·¥ä½œåˆ°å†…æ ¸ä¸­ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯éš”ç¦»æ€§ï¼Œå…è®¸å¤šçº¿ç¨‹å…±äº«ä¸€ä¸ªCPUæ ¸å¿ƒï¼Œæé«˜åˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;p&gt;è®¸å¤šI/Oè´Ÿè½½éœ€è¦å¤šæ¬¡è°ƒç”¨å‡½æ•°è®¿é—®ç¡¬ç›˜ä¸Šçš„å¤§å‹æ•°æ®ç»“æ„ï¼ˆB+ treeï¼‰ï¼Œä½œè€…ç§°ä¹‹ä¸ºresubmissionã€‚&lt;/p&gt;
&lt;p&gt;ä½œè€…æå‡ºäº†eXpress Resubmission Pathï¼ŒXRPåœ¨NVMeé©±åŠ¨ä¸­çš„ä¸­æ–­å¤„ç†å™¨ä¸Šæ·»åŠ äº†ä¸€ä¸ªhookï¼Œä½¿å¾—XRPå¯ä»¥åœ¨I/Oå®Œæˆæ—¶ç›´æ¥ä»NVMeé©±åŠ¨å±‚æ¥å‘èµ·BPFå‡½æ•°è°ƒç”¨ï¼Œå¿«é€Ÿå¯åŠ¨I/Oçš„é‡æ–°æäº¤ã€‚&lt;/p&gt;
&lt;p&gt;XRPçš„ä¸»è¦è´¡çŒ®ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¦–æ¬¡ä½¿ç”¨BPFæ¥å¸è½½I/Oä»»åŠ¡åˆ°å†…æ ¸&lt;/li&gt;
&lt;li&gt;å°†B-treeçš„æŸ¥æ‰¾ååé‡æé«˜äº†2.5å€&lt;/li&gt;
&lt;li&gt;XRPæä¾›äº†æ¥è¿‘Kernel Bypassçš„å»¶è¿Ÿï¼Œè€Œä¸”å…è®¸çº¿ç¨‹å’Œè¿›ç¨‹é«˜æ•ˆåœ°å…±äº«CPUæ ¸å¿ƒ&lt;/li&gt;
&lt;li&gt;XRPé€‚ç”¨äºå¤šç§ä¸åŒç”¨ä¾‹ï¼Œæ”¯æŒä¸åŒç±»å‹æ•°æ®ç»“æ„ä»¥åŠå­˜å‚¨æ“ä½œ&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;0x01-bg--motivation&#34;&gt;0x01 Bg &amp;amp;&amp;amp; Motivation&lt;/h1&gt;
&lt;h2 id=&#34;ioæ˜¯ç›®å‰çš„ç“¶é¢ˆ&#34;&gt;I/Oæ˜¯ç›®å‰çš„ç“¶é¢ˆ&lt;/h2&gt;
&lt;h3 id=&#34;æ—¶é—´éƒ½å»å“ªäº†&#34;&gt;æ—¶é—´éƒ½å»å“ªäº†&lt;/h3&gt;
&lt;p&gt;ä½œè€…é€šè¿‡å®éªŒå‘ç°å»¶è¿Ÿçš„éƒ¨åˆ†æ¥æºæ˜¯è½¯ä»¶å±‚é¢ï¼Œå³ç³»ç»Ÿå†…æ ¸éƒ¨åˆ†ä¸­block I/Oçš„ä¼ é€’&lt;/p&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆä¸å•çº¯çš„kernel-bypass&#34;&gt;ä¸ºä»€ä¹ˆä¸å•çº¯çš„kernel bypass&lt;/h3&gt;
&lt;p&gt;å¤§éƒ¨åˆ†bypassçš„æ–¹æ³•éƒ½æ˜¯ç›´æ¥å¯¹NVMe driverå‘èµ·è¯·æ±‚ï¼Œæ­¤ç±»æ–¹æ¡ˆä¸èƒ½å®ç°ç»†ç²’åº¦çš„éš”ç¦»æˆ–è€…å†ä¸åŒåº”ç”¨ä¹‹é—´å…±äº«æ•°æ®ï¼ŒåŒæ—¶ä¸èƒ½æœ‰æ•ˆçš„å»æ¥æ”¶I/Oå®Œæˆäº§ç”Ÿçš„ä¸­æ–­ï¼Œéœ€è¦åº”ç”¨ä¸æ–­è½®è¯¢ï¼Œå› æ­¤CPUå°±è¢«æŸä¸ªåº”ç”¨ç‹¬å ï¼Œä¸èƒ½å¾—åˆ°å…±äº«ã€‚è€Œä¸”å½“å¤šä¸ªè½®è¯¢çº¿ç¨‹å…±äº«ä¸€ä¸ªCPUå¤„ç†å™¨æ—¶ï¼Œä»–ä»¬ä¹‹é—´å¯¹CPUçš„ç«äº‰åŒæ—¶ç¼ºå°‘åŒæ­¥ä¼šå¯¼è‡´å°¾å»¶è¿Ÿå‡é«˜å’Œååé‡çš„é™ä½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;bpf&#34;&gt;BPF&lt;/h2&gt;
&lt;p&gt;Berkeley Packet Filterå…è®¸ç”¨æˆ·å°†ä¸€äº›ç®€å•å‡½æ•°ä¸‹æ”¾åˆ°å†…æ ¸å±‚æ¥æ‰§è¡Œï¼Œèµ·åˆæ˜¯ç”¨äºTCPçš„æ•°æ®åŒ…è¿‡æ»¤ã€è´Ÿè½½å‡è¡¡ã€æ•°æ®åŒ…è½¬å‘ï¼Œç›®å‰æ¨å‡ºäº†eBPFæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;BPFå¯ä»¥éªŒè¯å‡½æ•°çš„å®‰å…¨æ€§ï¼Œä¸»è¦æ£€æŸ¥æ˜¯å¦è¶…å‡ºå†…å­˜åœ°å€ç©ºé—´ã€æ˜¯å¦æœ‰æ­»å¾ªç¯ã€æŒ‡ä»¤æ˜¯å¦å¤ªå¤šã€‚&lt;/p&gt;
&lt;p&gt;BPFå¯ä»¥ç›´æ¥å‘èµ·ä¸€ç³»åˆ—I/Oè¯·æ±‚ï¼Œæ¥è·å–é‚£äº›ä¸è¢«ç¨‹åºç›´æ¥åˆ©ç”¨çš„ä¸­é—´æ•°æ®ï¼Œä¾‹å¦‚æŒ‡é’ˆå¯»å€è¿‡ç¨‹ï¼ŒB-treeç´¢å¼•ä¾¿åˆ©ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€äº›åœ¨ç¡¬ç›˜ç»´æŠ¤å¹¶ä¸”ä½¿ç”¨æŒ‡é’ˆæ¥æŸ¥æ‰¾çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚LSM treeï¼Œå¯ä»¥ç”¨äºåŠ é€ŸæŸ¥æ‰¾çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ç ”ç©¶å¯¹æ¯”äº†åˆ†åˆ«ä»User Spaceã€Syscallã€NVMe Driverå±‚å‘èµ·I/Oä¹‹é—´ååé‡å’Œå»¶è¿Ÿçš„å·®å¼‚ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230225134629890.png&#34; alt=&#34;image-20230225134629890&#34; style=&#34;zoom: 33%;&#34; /&gt;
&lt;p&gt;åœ¨NVMe Driverä¸­å‘èµ·I/Oæœ‰æ•ˆæé«˜äº†ååé‡é™ä½äº†å»¶è¿Ÿï¼ŒåŸå› æ˜¯è¶Šé è¿‘å­˜å‚¨è®¾å¤‡çš„ä¸€å±‚ï¼Œæ€»ä½“çš„å»¶è¿Ÿå’Œæ€§èƒ½è¶Šé«˜ã€‚å› æ­¤XRPé€‰æ‹©åœ¨NVMe Driverå±‚æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;io_uring&#34;&gt;io_uring&lt;/h3&gt;
&lt;p&gt;io_uringæ˜¯Linuxçš„ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå¯ä»¥æ‰¹é‡æäº¤å¼‚æ­¥I/Oï¼Œå¹¶ä¸”ç›¸è¾ƒäºaioå‡å°‘äº†ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ï¼Œä½œè€…é€šè¿‡å®éªŒéªŒè¯äº†åœ¨NVMe Driverå±‚æäº¤I/Oä¹Ÿå¯ä»¥æé«˜io_uringçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x02-challenges--principles&#34;&gt;0x02 Challenges &amp;amp;&amp;amp; Principles&lt;/h1&gt;
&lt;h2 id=&#34;challenges&#34;&gt;Challenges&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ°å€è½¬æ¢å’Œå®‰å…¨é—®é¢˜ï¼šNVMe Driverä¸èƒ½è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ï¼Œå› æ­¤ä¸èƒ½å®Œæˆé€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ï¼›BPFå¯ä»¥è®¿é—®å…¶ä»–æ–‡ä»¶å’Œç”¨æˆ·çš„ä»»ä½•blockã€‚&lt;/li&gt;
&lt;li&gt;å¹¶å‘å’Œç¼“å­˜é—®é¢˜ï¼šå¯¹äºä»æ–‡ä»¶ç³»ç»Ÿå‘èµ·çš„å¹¶å‘è¯»å†™å¾ˆéš¾ç»´æŠ¤ã€‚ä»æ–‡ä»¶ç³»ç»Ÿå‘å‡ºçš„å†™è¯·æ±‚å°†å†™å…¥åˆ°page cacheä¸­ï¼Œå¯¹äºXRPä¸å¯è§ï¼›åŒæ—¶å¯¹äºç¡¬ç›˜ä¸Šæ•°æ®ç»“æ„å¸ƒå±€çš„ä¿®æ”¹ï¼Œä¾‹å¦‚æ”¹å˜æŸä¸€ä¸ªæŒ‡é’ˆï¼Œå°†ä¼šå¯¼è‡´XRPè·å–åˆ°é”™è¯¯çš„æ•°æ®ï¼Œè™½ç„¶å¯ä»¥è¿›è¡ŒåŠ é”ï¼Œä½†æ˜¯ä»NVMeä¸­æ–­è®¿é—®é”çš„å¼€é”€å¤ªå¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;observation&#34;&gt;Observation&lt;/h2&gt;
&lt;p&gt;ä½œè€…ç ”ç©¶å‘ç°ï¼Œå¤§éƒ¨åˆ†çš„å­˜å‚¨å¼•æ“çš„ç¡¬ç›˜æ•°æ®ç»“æ„éƒ½æ˜¯ç¨³å®šçš„ï¼Œæˆ–ä¸ä¼šè¿›è¡Œå°±åœ°æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚åœ¨LSM-treeä¸­ï¼Œè¿›è¡Œç´¢å¼•çš„å†™å…¥æ“ä½œï¼Œå†™å…¥åˆ°æ–‡ä»¶&lt;code&gt;SSTables&lt;/code&gt;ä¸­ï¼Œè¿™äº›æ–‡ä»¶ä¸ºä¸å¯å˜ï¼Œç›´è‡³å…¶è¢«åˆ é™¤ï¼Œä¸å¯å˜æ–‡ä»¶è¿˜é™ä½äº†æ–‡ä»¶å¹¶å‘è®¿é—®çš„æˆæœ¬ã€‚B-treeçš„ç´¢å¼•è™½ç„¶å¯ä»¥å°±åœ°æ›´æ–°ï¼Œä½†æ˜¯åœ¨å®é™…æµ‹è¯•ä¸­ï¼ˆ24å°æ—¶YCSBè¯»å†™æ”¹å®éªŒï¼‰å‘ç°ï¼Œç´¢å¼•çš„ä¿®æ”¹æ¬¡æ•°å¾ˆå°‘ï¼Œå› æ­¤ä¹Ÿä¸éœ€è¦åœ¨NVMe Driverä¸­é¢‘ç¹çš„æ›´æ–°æ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶ï¼Œç´¢å¼•ä¸€èˆ¬å­˜å‚¨åœ¨å°‘é‡çš„å¤§æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”æ¯ä¸ªç´¢å¼•ä¸ä¼šè·¨è¶Šå¤šä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;design-principles&#34;&gt;Design Principles&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€æ¬¡åªè®¿é—®ä¸€ä¸ªæ–‡ä»¶ï¼šå¯ä»¥ç®€åŒ–åœ°å€è½¬æ¢å’Œè®¿é—®æ§åˆ¶ï¼Œè¿˜æœ€å°åŒ–äº†éœ€è¦ä¼ é€’ç»™NVMe driverçš„å…ƒæ•°æ®&lt;/li&gt;
&lt;li&gt;é¢å‘äºç¨³å®šçš„æ•°æ®ç»“æ„ï¼šXRPä»¥ä¸ä¼šé¢‘ç¹æ›´æ–°çš„æ•°æ®ç»“æ„ä¸ºç›®æ ‡RocksDBã€LevelDBã€TokuDBã€WiredTigerï¼Œä¸æ”¯æŒéœ€è¦é”æ¥è®¿é—®çš„æ•°æ®ç»“æ„&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·ç®¡ç†ç¼“å­˜ï¼šXRPæ— æ³•ç›´æ¥è®¿é—®Page Cacheï¼Œå› æ­¤å¦‚æœblockä½äºPage Cacheä¸­ï¼ŒXRPå‡½æ•°ä¸èƒ½å®‰å…¨çš„å¹¶å‘æ‰§è¡Œï¼Œè€Œå¤§å¤šæ•°å­˜å‚¨å¼•æ“éƒ½æ˜¯åœ¨ç”¨æˆ·ç©ºé—´è‡ªè¡Œç®¡ç†Cacheã€‚&lt;/li&gt;
&lt;li&gt;é”™è¯¯å¤„ç†ï¼šå¦‚æœè®¿é—®å¤±è´¥ï¼ˆæ˜ å°„ä¿¡æ¯è¿‡æœŸï¼‰ï¼Œéœ€è¦ç¨‹åºåœ¨ç”¨æˆ·ç©ºé—´é‡è¯•æˆ–å›æ»šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;0x03-design--implementation&#34;&gt;0x03 Design &amp;amp;&amp;amp; Implementation&lt;/h1&gt;
&lt;p&gt;XRPçš„æ¶æ„å›¾ï¼š&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230225161425201.png&#34; alt=&#34;image-20230225161425201&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h2 id=&#34;resubmission-logic&#34;&gt;Resubmission Logic&lt;/h2&gt;
&lt;p&gt;XRPçš„Resubmissionä¸»è¦åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BPF hook&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶ç³»ç»Ÿåœ°å€ç¿»è¯‘&lt;/li&gt;
&lt;li&gt;NVMeè¯·æ±‚çš„æ„å»ºå’Œæäº¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“NVMeæŒ‡ä»¤è¯·æ±‚å®Œæˆåï¼Œè®¾å¤‡å‘èµ·ä¸­æ–­ä½¿å†…æ ¸å‘ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢æ‰§è¡Œä¸­æ–­å¤„ç†ï¼Œå¯¹äºåœ¨&lt;code&gt;ä¸­æ–­ä¸Šä¸‹æ–‡&lt;/code&gt;(å³ISRä¸­æ–­å¤„ç†ç¨‹åºä¿å­˜çš„è¯·æ±‚å‘èµ·ç¨‹åºçš„ä¸Šä¸‹æ–‡)æ¯ä¸ªNVMeè¯·æ±‚ï¼ŒXRPè°ƒç”¨ç›¸å…³çš„BPFå‡½æ•°ï¼Œå³ä¸Šå›¾çš„&lt;code&gt;bpf_func_0&lt;/code&gt;ï¼Œè¯¥å‡½æ•°æŒ‡é’ˆå­˜å‚¨åœ¨å†…æ ¸I/Oè¯·æ±‚çš„ç»“æ„ä½“ä¸­ï¼ˆbioï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è°ƒç”¨BPFå‡½æ•°åï¼ŒXRPè°ƒç”¨å…ƒæ•°æ®ä¿¡æ¯æ‘˜è¦ï¼Œæ­¤æ–‡ä»¶ç³»ç»Ÿæ‘˜è¦ç”¨äºåšåœ°å€è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆï¼ŒXRPå‘èµ·ä¸‹ä¸€æ¬¡NVMeè¯·æ±‚ï¼Œå°†è¯·æ±‚appendåˆ°ç›¸åº”CPUæ ¸å¿ƒNVMeçš„SQä¸­å®Œæˆresubmissionï¼ˆå¦‚ä¸Šå›¾æ‰€ç¤ºï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;bpf-hook&#34;&gt;BPF Hook&lt;/h3&gt;
&lt;p&gt;XRPå¼•å…¥&lt;code&gt;BPF_PROG_TYPE_XRP&lt;/code&gt;ä½œä¸ºBPFå‡½æ•°çš„ç­¾åï¼ˆå‡½æ•°ç­¾åä¸€èˆ¬åŒ…æ‹¬å‡½æ•°çš„å‚æ•°ç±»å‹ã€ä¸ªæ•°ç­‰ï¼‰ï¼Œç¬¦åˆè¯¥ç­¾åçš„ç¨‹åºå¯ä»¥è¢«BPF Hookè°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230225182708553.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230225182708553&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å‚æ•°è§£é‡Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;data&lt;/code&gt;ï¼šå­˜å‚¨ä»ç¡¬ç›˜ä¸­è¯»å–çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚B-tree Pageï¼‰ï¼Œå¯ä»¥è¢«BPFå‡½æ•°è§£æ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;done&lt;/code&gt;ï¼šåœ¨resubmissioné˜¶æ®µé€šè¿‡æ­¤å­—æ®µåˆ¤æ–­æ˜¯å¦å°†æ•°æ®ä¸ŠæŠ¥ç»™ç”¨æˆ·ç¨‹åºï¼Œæˆ–æ˜¯è¿›è¡Œåç»­I/O&lt;/li&gt;
&lt;li&gt;&lt;code&gt;next_addr&lt;/code&gt;ï¼šè¡¨ç¤ºä¸‹ä¸€æ¬¡resubmissionè¦è¯·æ±‚çš„é€»è¾‘åœ°å€ï¼Œæœ€å¤§è¾“å…¥é‡fanouté»˜è®¤é™åˆ¶åœ¨16&lt;/li&gt;
&lt;li&gt;&lt;code&gt;size&lt;/code&gt;ï¼šè¡¨ç¤º&lt;code&gt;next_addr&lt;/code&gt;é€»è¾‘åœ°å€çš„å¤§å°ï¼ŒæŸäº›æƒ…å†µä¸‹å¯ä»¥å°†å…¶è®¾ç½®ä¸º0è¡¨ç¤ºä¸å‘èµ·I/O&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scratch&lt;/code&gt;ï¼šå¯¹äºç”¨æˆ·å’ŒBPFå‡½æ•°ç§æœ‰ï¼Œç”¨äºå‘BPFå‡½æ•°ä¼ é€’ç”¨æˆ·çš„å‚æ•°ï¼ŒBPFå‡½æ•°ä¹Ÿå¯ä»¥åœ¨æ­¤å­˜å‚¨ä¸¤æ¬¡I/Oä¹‹é—´çš„ä¸­é—´å˜é‡ï¼Œäº¦æˆ–æ˜¯ä¿å­˜ä¼ é€’ç»™ç”¨æˆ·çš„æ•°æ®ã€‚ç›¸å½“äºBPFå¯ä»¥åˆ©ç”¨çš„ä¸€ä¸ª4KBçš„bufferã€‚å¦‚æœBPFå‡½æ•°éœ€è¦æ›´å¤§çš„ç©ºé—´ï¼Œè¿˜å¯ä»¥ä½¿ç”¨BPF maps&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;BPFä¸Šä¸‹æ–‡å¯¹äºä¸€ä¸ªNVMeè¯·æ±‚æ˜¯ç§æœ‰çš„ï¼Œä¸éœ€è¦è€ƒè™‘åŠ é”ã€‚ä¸ºç”¨æˆ·æä¾›scratch bufferé¿å…äº†è°ƒç”¨&lt;code&gt;bpf_map_lookup_elem&lt;/code&gt;æ¥è®¿é—®bufferäº§ç”Ÿçš„å¼€é”€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;bpf-verifier&#34;&gt;BPF Verifier&lt;/h3&gt;
&lt;p&gt;BPFæ ¡éªŒå™¨é€šè¿‡è¿½è¸ª&lt;code&gt;å¯„å­˜å™¨ä¸­valueçš„è¯­ä¹‰&lt;/code&gt;æ¥ä¿è¯å†…å­˜å®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæœ‰æ•ˆçš„valueæ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæ ‡é‡ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SCALAR_TYPE&lt;/code&gt;è¡¨ç¤ºä¸€ä¸ªä¸èƒ½è¢«æŒ‡é’ˆå–å€¼(cannot be dereference)çš„valueã€‚&lt;/p&gt;
&lt;p&gt;verifierå®šä¹‰äº†å¤šç§æŒ‡é’ˆç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªBPFå‡½æ•°éƒ½å®šä¹‰äº†ä¸€ä¸ªå›è°ƒå‡½æ•°&lt;code&gt;is_valid_access()&lt;/code&gt;æ¥æ£€æŸ¥ä¸Šä¸‹æ–‡è®¿é—®æ˜¯å¦æ­£ç¡®å¹¶è¿”å›ä¸Šä¸‹æ–‡ä¸­value typeå­—æ®µã€‚&lt;/p&gt;
&lt;p&gt;PTR_TO_MEMè¡¨ç¤ºä¸€ä¸ªæŒ‡å‘å›ºå®šå†…å­˜å¤§å°çš„æŒ‡é’ˆï¼Œæ”¯æŒç›´æ¥é€šè¿‡offsetå–å€¼ï¼ˆä¸è¶…è¿‡è¾¹ç•Œçš„æƒ…å†µä¸‹ï¼‰ï¼Œ&lt;code&gt;BPF_PROG_TYPE_XRP&lt;/code&gt;çš„dataå’Œscratchå­—æ®µé€šè¿‡&lt;code&gt;PTR_TO_MEM&lt;/code&gt;è®¿é—®ï¼Œå…¶ä½™éƒ¨åˆ†åˆ™ä¸ºSCALAR_TYPEã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;is_valid_access()&lt;/code&gt;è¿˜å¯ä»¥ç”¨æ¥ä¼ é€’data/scratch bufferçš„å¤§å°ï¼Œç”¨äºåšè¾¹ç•Œæ£€æŸ¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;metadata-digest&#34;&gt;Metadata Digest&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†å®Œæˆåœ¨NVMe Driverä¸­çš„åœ°å€è½¬æ¢ï¼ŒXRPåœ¨æ–‡ä»¶ç³»ç»Ÿå’Œä¸­æ–­å¤„ç†ç¨‹åºä¹‹é—´æ·»åŠ äº†ä¸€ä¸ªæ¥å£ã€‚æ–‡ä»¶ç³»ç»Ÿå…±äº«é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„ã€‚&lt;/p&gt;
&lt;p&gt;å…ƒæ•°æ®æ‘˜è¦å…±æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;å½“åœ°å€æ˜ å°„è¢«æ›´æ–°æ—¶ï¼Œ&lt;strong&gt;æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt;å°†è°ƒç”¨updateå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸­æ–­å¤„ç†ç¨‹åº&lt;/strong&gt;åˆ™è´Ÿè´£è°ƒç”¨lookupå‡½æ•°ï¼Œé€šè¿‡æ¥æ”¶åˆ°çš„inodeåœ°å€ï¼Œç»™å‡ºoffsetå’Œé•¿åº¦è·å–åœ°å€æ˜ å°„ï¼›lookupä¸­ä¹Ÿä¼šæœ‰è¶Šç•Œæ£€æŸ¥æ¥ä¿è¯å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230225205022040.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230225205022040&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å½“æ£€æµ‹åˆ°ä¸åˆæ³•çš„é€»è¾‘åœ°å€ï¼ŒXRPå°†ç«‹å³è¿”å›é”™è¯¯ä»£ç åˆ°ç”¨æˆ·ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ä½œè€…åœ¨ext4æ–‡ä»¶ç³»ç»Ÿçš„å®ç°ä¸­ï¼Œå…ƒæ•°æ®æ‘˜è¦æ¥è‡ªç¼“å­˜ä¸­çš„extent status treeï¼Œä½¿ç”¨RCUæœºåˆ¶è¿›è¡Œå¹¶å‘æ§åˆ¶ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¤ªé•¿ä¸çœ‹ï¼š&lt;/p&gt;
&lt;p&gt;RCUæ˜¯ä¸€ç§ç±»ä¼¼äºCOWå†™æ—¶å¤åˆ¶çš„æœºåˆ¶ï¼Œå› ä¸ºè¯»å–æ“ä½œä¸éœ€è¦åŠ é”ï¼Œåœ¨ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„åŒæ—¶å¯ä»¥ä¿è¯é«˜æ€§èƒ½ï¼ŒRCUä¸»è¦ç”¨äºLinuxå†…æ ¸ä¸­å¯¹é«˜å¹¶å‘è®¿é—®æ•°æ®ç»“æ„çš„ä¼˜åŒ–ï¼Œè€Œå†™æ—¶å¤åˆ¶ä¸»è¦ç”¨äºå†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç­‰é¢†åŸŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linux RCUï¼š&lt;/p&gt;
&lt;p&gt;Linux RCUï¼ˆRead-Copy-Updateï¼‰æ˜¯ä¸€ç§ç”¨äºç®¡ç†å¹¶å‘è®¿é—®å…±äº«æ•°æ®ç»“æ„çš„æŠ€æœ¯ã€‚å®ƒæ˜¯ä¸€ç§æ— é”å¹¶å‘æœºåˆ¶ï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å–å…±äº«æ•°æ®ï¼Œè€Œä¸éœ€è¦äº’æ–¥é”æˆ–è¯»å†™é”ç­‰ä¼ ç»Ÿçš„åŒæ­¥æœºåˆ¶ï¼Œä»è€Œæé«˜äº†å¹¶å‘æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ã€‚&lt;/p&gt;
&lt;p&gt;RCUçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ›´æ–°å…±äº«æ•°æ®æ—¶ï¼Œå®ƒå°†æ•°æ®å¤åˆ¶ä¸€ä»½ï¼Œå¹¶åœ¨å‰¯æœ¬ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸æ˜¯åœ¨åŸå§‹æ•°æ®ä¸Šè¿›è¡Œä¿®æ”¹ã€‚å…¶ä»–çº¿ç¨‹ä»ç„¶å¯ä»¥è®¿é—®åŸå§‹æ•°æ®ï¼Œç›´åˆ°æ›´æ–°å®Œæˆã€‚åœ¨æ›´æ–°å®Œæˆåï¼Œæ–°çš„æ•°æ®å‰¯æœ¬å°†æ›¿æ¢åŸå§‹æ•°æ®ï¼Œå¹¶ä¸”RCUæœºåˆ¶å°†ç¡®ä¿åœ¨è¯¥æ›´æ–°ä¹‹å‰ä»»ä½•å·²ç»è¯»å–çš„æ•°æ®éƒ½ä¸ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;RCUé€‚ç”¨äºé«˜å¹¶å‘è®¿é—®æ•°æ®ç»“æ„çš„åœºæ™¯ï¼Œä¾‹å¦‚å“ˆå¸Œè¡¨ã€é“¾è¡¨å’Œæ ‘ç­‰æ•°æ®ç»“æ„ã€‚å®ƒå·²ç»è¢«å¹¿æ³›åº”ç”¨äºLinuxå†…æ ¸ä¸­ï¼Œä½¿å¾—Linuxå†…æ ¸åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸Šçš„æ€§èƒ½å¾—åˆ°æ˜¾è‘—æå‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;ext4ä¸­ï¼Œextentsæ‰©å±•å—æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­ä¸€æ®µè¿ç»­çš„å—ï¼Œä¸€èˆ¬ç”¨äºå­˜å‚¨å¤§æ–‡ä»¶çš„æ•°æ®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯ç¼“å­˜æ•°æ®ä¸ext4ä¸­çš„extentsä¸€è‡´ï¼Œupdateå‡½æ•°ä¼šåœ¨extentså‘ç”Ÿä¿®æ”¹æˆ–è€…åˆ é™¤æ—¶è°ƒç”¨ã€‚åŒæ—¶ä¸ºäº†é˜²æ­¢ç«æ€ï¼Œä¸ºæ¯ä¸ªæ‰©å±•å—ç»´æŠ¤äº†ä¸€ä¸ªç‰ˆæœ¬å·ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ•°æ®è¯»å–åï¼Œä½†è¿˜æ²¡æœ‰ä¼ é€’ç»™BPFå‡½æ•°ä¹‹å‰ï¼Œä¼šå…ˆè°ƒç”¨å…ƒæ•°æ®æ‘˜è¦çš„æŸ¥æ‰¾ã€‚å¦‚ä½•ç›¸åº”çš„extentså·²ç»è¢«åˆ é™¤æˆ–è€…å½“å‰ç‰ˆæœ¬å·å·²ç»è½åï¼ŒXRPå°†ä¸­æ–­æ­¤æ¬¡æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬è€Œè¨€ï¼Œä¸ºä¿éšœå®‰å…¨å’Œæ­£ç¡®æ€§ï¼Œåœ¨ç¨‹åºä¹‹é—´è¿›è¡ŒåŒæ­¥æ—¶å°±ä¼šå¯¹æ–‡ä»¶ä¸­ä¸€ä¸ªéƒ¨åˆ†çš„åŠ é”ï¼Œå› æ­¤ç‰ˆæœ¬å·çš„æ”¹å˜å¤§å¤šæ¥è‡ªäºæ¶æ„ä¿®æ”¹æˆ–ç¨‹åºå‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç§æ›´ç®€å•çš„å®ç°åˆ©ç”¨ext4æ–‡ä»¶ç³»ç»Ÿç°æœ‰çš„extent treeæ›´æ–°å’Œè®¿é—®å‡½æ•°æ¥è·å–å…ƒæ•°æ®æ‘˜è¦ï¼Œè¿™ä¼šä¿è¯ext4ä¸­çš„extent treeæ—¶åˆ»æ˜¯æœ€æ–°çŠ¶æ€ï¼Œä½†æ˜¯åœ¨æŸ¥æ‰¾ext4ä¸­extentæŸ¥æ‰¾å‡½æ•°ä¼šè·å–è‡ªæ—‹é”ï¼Œå¯¹äºä¸­æ–­å¤„ç†ç¨‹åºå¸¦æ¥äº†æå¤§çš„å¼€é”€ï¼Œå› æ­¤ä¸å¤ªåˆé€‚ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰XRPä»…æ”¯æŒäº†ext4æ–‡ä»¶ç³»ç»Ÿã€‚å¯¹äºF2FSå¯ä»¥ç›´æ¥åˆ©ç”¨å­˜å‚¨äº†é€»è¾‘ç‰©ç†åœ°å€å—æ˜ å°„çš„Node Address Tableï¼ˆNATï¼‰ï¼Œé€šè¿‡ä¿å­˜ä¸€ä¸ªNATçš„å‰¯æœ¬æ¥å¾—åˆ°å…ƒæ•°æ®æ‘˜è¦ã€‚æ¯æ¬¡æ›´æ–°NATéƒ½è°ƒç”¨&lt;code&gt;update_mapping&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;resubmitting-nvme-request&#34;&gt;Resubmitting NVMe Request&lt;/h3&gt;
&lt;p&gt;åœ¨æŸ¥è¯¢åˆ°æ•°æ®å—çš„ç‰©ç†åœ°å€åï¼ŒXRPå°†å‡†å¤‡æäº¤NVMeè¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;XRPé‡å¤åˆ©ç”¨åˆšåˆšå®Œæˆçš„NVMeè¯·æ±‚ç»“æ„ï¼Œä¿®æ”¹NVMeè¯·æ±‚ä¸­çš„ç‰©ç†æ‰‡åŒºå’Œå—åœ°å€ä¸ºé€šè¿‡lookupå‡½æ•°æŸ¥è¯¢åˆ°çš„åç§»é‡ï¼Œç„¶åç»§ç»­è¿›è¡Œè¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºbpf_xrpæ”¯æŒçš„æœ€å¤§åœ°å€ä¸ªæ•°ä¸º16ï¼Œç›®å‰çš„resubmitåªèƒ½è·å–åˆ°å’Œåˆå§‹NVMeè¯·æ±‚ä¸€æ ·å¤šçš„ç‰©ç†æ®µã€‚ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªNVMeè¯·æ±‚åªç”³è¯·äº†ä¸€ä¸ªç‰©ç†æ®µï¼Œé‚£ä¹ˆåç»­çš„NVMeè¯·æ±‚ä¹Ÿåªèƒ½å»è·å–ä¸€ä¸ªç‰©ç†æ®µã€‚&lt;/p&gt;
&lt;p&gt;XRPä¼šä¸­æ–­åŒ…å«æ— æ•ˆåœ°å€çš„BPFè°ƒç”¨ï¼Œå¯ä»¥åœ¨ç¬¬ä¸€æ¬¡I/Oä¸­next_addrä¸­è®¾ç½®16ä¸ªä¼ªNVMeæŒ‡ä»¤ï¼Œä»¥ä¿è¯åç»­çš„è¯·æ±‚å¯ä»¥æœ‰è¶³å¤Ÿçš„è®¿é—®ç©ºé—´ã€‚&lt;/p&gt;
&lt;h2 id=&#34;synchronization-limitations&#34;&gt;Synchronization Limitations&lt;/h2&gt;
&lt;p&gt;BPFç›®å‰åªæ”¯æŒè‡ªæ—‹é”è¿›è¡ŒåŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;Verifieråªå…è®¸BPFç¨‹åºä¸€æ¬¡åªè·å–ä¸€ä¸ªé”ï¼Œå¹¶ä¸”åœ¨å‡½æ•°é€€å‡ºå‰è¦å°†å…¶é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·ç¨‹åºä¸éœ€è¦ç›´æ¥å»è®¿é—®BPFçš„è‡ªæ—‹é”ï¼Œå¯ä»¥ç›´æ¥è¿›è¡ŒBPFçš„ç³»ç»Ÿè°ƒç”¨ï¼Œè¯¥ç³»ç»Ÿè°ƒç”¨å¯ä»¥åœ¨æŒæœ‰é”æ—¶å¯¹ä¿æŠ¤çš„æ•°æ®ç»“æ„è¿›è¡Œè¯»å†™ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦åœ¨å¤šä¸ªè¯»å†™æ“ä½œä¹‹é—´è¿›è¡ŒåŒæ­¥çš„å¤æ‚æ“ä½œåœ¨ç”¨æˆ·ç©ºé—´æ— æ³•å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·å¯ä»¥é€šè¿‡BPFçš„åŸå­æ“ä½œå®ç°è‡ªå®šä¹‰çš„è‡ªæ—‹é”ï¼Œè¿™å…è®¸BPFå‡½æ•°å’Œç”¨æˆ·ç¨‹åºç›´æ¥è·å–ä»»ä½•è‡ªæ—‹é”ã€‚ç„¶è€ŒBPFå‡½æ•°çš„è¡Œä¸ºä¼šè¢«é™åˆ¶ï¼Œé˜²æ­¢æ— é™åœ°ç­‰å¾…æŸä¸€ä¸ªè‡ªæ—‹é”ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§åŒæ­¥æ–¹æ³•å°±æ˜¯RCUã€‚XRP BPFéƒ½è¿è¡Œåœ¨NVMeä¸­æ–­å¤„ç†ç¨‹åºä¸Šï¼Œè€Œä¸­æ–­å¤„ç†ç¨‹åºä¸èƒ½è¢«æŠ¢å ï¼Œå¯ä»¥è®¤ä¸ºä»–ä»¬å·²ç»è¿›å…¥äº†RCUè¯»ç«¯ä¸´ç•ŒåŒºï¼ˆa RCU read-side critical sectionï¼‰çš„çŠ¶æ€ï¼Œå› ä¸ºåœ¨ä¸­æ–­å¤„ç†ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå…¶ä»–ä»»åŠ¡æ— æ³•è®¿é—®å…±äº«æ•°æ®ç»“æ„ï¼Œä»è€Œé¿å…äº†å¹¶å‘å†²çªã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒBPFç¨‹åºä¸éœ€è¦è·å¾—é”æ¥è¯»å–å…±äº«æ•°æ®ç»“æ„ï¼Œä»è€Œé¿å…äº†é”çš„å¼€é”€ï¼Œå¹¶æé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;linux-schedulers&#34;&gt;Linux Schedulers&lt;/h2&gt;
&lt;h3 id=&#34;è¿›ç¨‹è°ƒåº¦&#34;&gt;è¿›ç¨‹è°ƒåº¦&lt;/h3&gt;
&lt;p&gt;ä½œè€…ç ”ç©¶å‘ç°æ ¹æ®Linuxçš„CFSå®Œå…¨å…¬å¹³è°ƒåº¦ç®—æ³•ï¼Œå½“è®¡ç®—å¯†é›†å‹çš„è¿›ç¨‹å’ŒI/Oå¯†é›†å‹çš„è¿›ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªæ ¸å¿ƒæ—¶ï¼Œç”±äºè¶…ä½å»¶è¿ŸSSDçš„ä¸­æ–­è¿‡äºé¢‘ç¹ï¼Œä½¿å¾—I/Oå¯†é›†å‹åº”ç”¨äº§ç”Ÿçš„I/Oä¸­æ–­å ç”¨å¤§é‡æ—¶é—´ç‰‡ï¼Œå¯¼è‡´è®¡ç®—å¯†é›†å‹è¿›ç¨‹çš„é¥¥é¥¿ã€‚è€Œåœ¨æ™®é€šSSDä¸Šï¼Œç”±äºä¸­æ–­äº§ç”Ÿçš„é¢‘ç‡è¾ƒä½ï¼Œä¸ä¼šå‘ç”Ÿæ­¤ç°è±¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿ç»­äº§ç”Ÿä¸­æ–­è¾ƒå¤šçš„XRPã€ç½‘ç»œä¸­æ–­è¾ƒå¤šçš„ç¨‹åºä¼šåŠ å‰§ï¼ˆexarcerbatesï¼‰æ­¤é—®é¢˜ï¼Œä½œè€…è®¡åˆ’åœ¨ä¹‹åè€ƒè™‘æ­¤é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ioè°ƒåº¦&#34;&gt;I/Oè°ƒåº¦&lt;/h3&gt;
&lt;p&gt;NVMeé»˜è®¤ä½¿ç”¨noopè°ƒåº¦å™¨ï¼Œå¦‚æœéœ€è¦å…¬å¹³è°ƒåº¦ï¼Œå¯ä»¥å¼€å¯ç¡¬ä»¶é˜Ÿåˆ—æ€»è£ã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x04-case-studies&#34;&gt;0x04 Case Studies&lt;/h1&gt;
&lt;h2 id=&#34;use-xrp&#34;&gt;Use XRP&lt;/h2&gt;
&lt;p&gt;ç”¨æˆ·è°ƒç”¨ä¸‹å›¾ä¸¤ä¸ªæ¥å£æ¥åŠ è½½BPFå‡½æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bpf_prog_load&lt;/code&gt;ï¼šåŠ è½½&lt;code&gt;BPF_PROG_TYPE_XRP&lt;/code&gt;ç±»å‹çš„BPFå‡½æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;read_xrp&lt;/code&gt;ï¼šå°†è°ƒç”¨BPFå‡½æ•°åº”ç”¨åˆ°ä¸€ä¸ªå…·ä½“çš„è¯·æ±‚ä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230226143117688.png&#34; alt=&#34;image-20230226143117688&#34; style=&#34;zoom: 50%;&#34; /&gt;
&lt;p&gt;å…·ä½“çš„ä½¿ç”¨å®ä¾‹ï¼Œä½œè€…ç»™å‡ºäº†ä¸¤ä¸ªç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;bpf-kv&#34;&gt;BPF-KV&lt;/h2&gt;
&lt;p&gt;ä½œè€…ä½¿ç”¨B+æ ‘åœ¨ç£ç›˜ç»„ç»‡æ•°æ®ï¼ŒåŒæ—¶è‡ªè¡Œç»´æŠ¤DRAM Cacheæ¥å¯¹å—å’Œå¯¹è±¡è¿›è¡Œç´¢å¼•ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¤§è¯·æ±‚æ•°é‡é™åˆ¶ä¸º31ï¼Œä¿è¯å¯ä»¥éå†ä¸€ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰31ä¸ªå­©å­ã€‚&lt;/p&gt;
&lt;p&gt;BPFå‡½æ•°ç”¨äºæŸ¥æ‰¾KVå¯¹ï¼Œé¦–å…ˆè·å–åœ¨scratch bufferä¸­çš„æŸ¥è¯¢ç›®æ ‡keyï¼Œå¹¶çº¿æ€§åœ°åœ¨nodeä¸­æŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;read_xrp&lt;/code&gt;æ¥å®ç°readç³»ç»Ÿè°ƒç”¨ï¼ŒBPF-KVé¦–å…ˆä¸ºscratch bufferåˆ†é…ä¸€å—ç©ºé—´ï¼Œå¹¶è®¡ç®—å‡ºoffsetæ¥å¯åŠ¨readã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230226152454999.png&#34; alt=&#34;image-20230226152454999&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;BPF-KVæ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¸­çš„æ•°æ®ä¿å­˜åœ¨scratch bufferä¸­ã€‚&lt;/p&gt;
&lt;p&gt;BPF-KVæ”¯æŒSUMã€MAXã€MINæ­¤ç±»æ“ä½œ&lt;/p&gt;
&lt;h2 id=&#34;wiredtiger&#34;&gt;WiredTiger&lt;/h2&gt;
&lt;p&gt;WiredTigeræ˜¯MongoDBçš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œå¯ä»¥ä½¿ç”¨LSM-treeä½œä¸ºæ•°æ®ç»“æ„ï¼Œæ•°æ®ä¿å­˜äºLSMçš„ä¸åŒlevelä¹‹é—´ï¼Œæ¯ä¸ªlevelä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ²¡ä¸ªæ–‡ä»¶ä½¿ç”¨B-treeç´¢å¼•ã€‚æ‰€æœ‰çš„æ–‡ä»¶ä¸ºåªè¯»ï¼Œæ›´æ–°å’Œæ’å…¥æ“ä½œå…ˆå†™å…¥å¦‚bufferä¸­ï¼Œbufferç©ºé—´ä¸è¶³æ—¶ä¿å­˜åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;XRPåªé’ˆå¯¹readæ“ä½œåšä¼˜åŒ–ï¼Œupdateå’Œinsertåœ¨bufferä¸­ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;WTçš„BPFå‡½æ•°å’ŒBPF-KVå·®ä¸å¤šï¼ŒWTéœ€è¦å¯¹B-treeçš„Pageåšè§£ææ“ä½œã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x05-thinking&#34;&gt;0x05 Thinking&lt;/h1&gt;
&lt;p&gt;XRPæ˜¯OSDI&#39;22çš„best paperï¼Œæ–‡ç« æ•´ä½“çš„å·¥ä½œé‡éå¸¸å¤§ï¼Œä¿®æ”¹äº†ext4æ–‡ä»¶ç³»ç»Ÿã€BPFæ¨¡å—ï¼Œå¹¶è®¾è®¡äº†ä¼˜åŒ–åçš„KVå­˜å‚¨å¼•æ“ã€‚æ–‡ç« ä»å¾ˆæ–°é¢–çš„è§’åº¦ä¼˜åŒ–äº†æ•°æ®åº“å¼•æ“ç­‰I/Oå¯†é›†å‹åº”ç”¨ï¼Œä¸éœ€è¦é¢‘ç¹ä¼ é€’æ•°æ®äºç”¨æˆ·ç©ºé—´å’ŒNVMe Driveræ—¶é—´ï¼Œä¹Ÿå‡å°‘äº†I/Oè¿‡ç¨‹ä¸­åœ¨è½®è¯¢æ—¶çš„å¼€é”€ï¼Œæé«˜äº†CPUåˆ©ç”¨ç‡ï¼Œé€šè¿‡BPFè¿™ä¸€å†…æ ¸ç‰¹æ€§å¯ä»¥å®ç°è‡ªå®šä¹‰I/Oå‡½æ•°ï¼ŒåŒæ—¶ä¿è¯ä¸€å®šçš„å®‰å…¨æ€§å’Œéš”ç¦»ã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x06-reference--more-information&#34;&gt;0x06 Reference &amp;amp;&amp;amp; More information&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/databasss/on-disk-io-part-3-lsm-trees-8b2da218496f&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;LSM ä¸å¯ä¿®æ”¹æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.kernel.org/doc/html/latest/RCU/whatisRCU.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€kernel.orgã€‘ RCU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://draveness.me/mongodb-wiredtiger/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€dravenessã€‘MongoDBå’ŒWiretigerå­˜å‚¨å¼•æ“&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>[FAST&#39;22] MT^2: Memory Bandwidth Regulation on Hybrid NVM/DRAM Platforms</title>
        <link>https://blog.ipandai.club/p/fast22-mt2-memory-bandwidth-regulation-on-hybrid-nvm/dram-platforms/</link>
        <pubDate>Mon, 19 Dec 2022 16:50:00 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/fast22-mt2-memory-bandwidth-regulation-on-hybrid-nvm/dram-platforms/</guid>
        <description>&lt;h1 id=&#34;0x00-intro&#34;&gt;0x00 Intro&lt;/h1&gt;
&lt;p&gt;NVMå’ŒDRAMå…±äº«å†…å­˜æ€»çº¿ï¼ŒäºŒè€…ä¹‹é—´çš„è´Ÿè½½ç›¸äº’å¹²æ‰°ï¼Œç»™æ··åˆNVM/DRAMå¹³å°çš„å¸¦å®½åˆ†é…å¸¦æ¥äº†æŒ‘æˆ˜&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æå‡ºäº†MT2ï¼Œå¯ä»¥åœ¨æ··åˆNVM/DRAMå¹³å°ä¸­ç®¡ç†å¹¶å‘ç¨‹åºé—´çš„å†…å­˜å¸¦å®½ã€‚&lt;/p&gt;
&lt;p&gt;MT2é¦–å…ˆæ£€æŸ¥å†…å­˜æµé‡é—´çš„å¹²æ‰°å¹¶é€šè¿‡ç¡¬ä»¶ç›‘è§†å™¨å’Œè½¯ä»¶æ±‡æŠ¥ä»æ··åˆæµé‡ç›‘æ§ä¸åŒç±»å‹çš„å†…å­˜å¸¦å®½&lt;/p&gt;
&lt;p&gt;ç„¶åMT2åˆ©ç”¨ä¸€ä¸ªåŠ¨æ€çš„å¸¦å®½æµé‡è°ƒèŠ‚ç®—æ³•åŸºäºå¤šç§æ–¹å¼æ¥ç®¡ç†å†…å­˜å¸¦å®½&lt;/p&gt;
&lt;p&gt;ä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„ç®¡ç†ä¸åŒç¨‹åºï¼ŒMT2è¢«é›†æˆåˆ°äº†cgroupä¸­ï¼Œæ·»åŠ äº†ä¸€ä¸ªç”¨äºå¸¦å®½åˆ†é…çš„cgroup subsystem&lt;/p&gt;
&lt;p&gt;æ–°å…´çš„NVMå­˜å‚¨å™¨é€æ¸è¢«ç”¨æ¥åšä¸ºå¯æŒä¹…åŒ–å†…å­˜æ¥ä½¿ç”¨ï¼ŒåŸºäºNVMï¼Œæå‡ºäº†NVMæ–‡ä»¶ç³»ç»Ÿï¼ŒNVMç¼–ç¨‹åº“ï¼ŒNVMæ•°æ®ç»“æ„ã€NVMæ•°æ®åº“ï¼ŒNVMä½œä¸ºå¤§å®¹é‡å†…å­˜æˆ–è€…å¿«é€Ÿçš„å­—èŠ‚å¯»å€å­˜å‚¨è®¾å¤‡ç”¨äºæ•°æ®ä¸­å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€ŒNVM/DRAMæ··åˆå¹³å°åŠ å‰§äº†åµé—¹é‚»å±…é—®é¢˜ã€‚åœ¨äº‘å­˜å‚¨ç¯å¢ƒä¸­ï¼Œå¤šä¸ªç”¨æˆ·å¸¸å¸¸å…±äº«ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¸åŒç”¨æˆ·çš„ä¸åŒåº”ç”¨ç¨‹åºå…±äº«ä¸»æœºçš„ä¸€æ¡æ€»çº¿ï¼ŒæŸäº›åº”ç”¨å¯èƒ½ä¼šè¿‡åº¦ä½¿ç”¨å†…å­˜å¸¦å®½ã€‚åœ¨NVM/DRAMä¸­ï¼ŒNVMå’ŒDRAMå…±äº«åŒä¸€ä¸ªæ€»çº¿ï¼Œå› æ­¤ä¸åŒçš„åº”ç”¨ç¨‹åºå°†ç«äº‰æœ‰é™çš„å†…å­˜å¸¦å®½ï¼Œå½±å“æ•´ä½“çš„æ€§èƒ½&lt;/p&gt;
&lt;p&gt;åœ¨NVM/DRAMä¸­è°ƒèŠ‚å¸¦å®½æœ‰å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†…å­˜å¸¦å®½ä¸å¯¹ç§°ï¼Œåœ¨NVM/DRAMï¼Œä¸åŒçš„å†…å­˜è®¿é—®ï¼ˆå¦‚DRAM readï¼ŒDRAM writeï¼ŒNVM readå’ŒNVM writeï¼‰ä¼šäº§ç”Ÿä¸åŒçš„æœ€å¤§å†…å­˜å¸¦å®½ã€‚å†…å­˜çš„å®é™…å¯ç”¨å¸¦å®½ä¸»è¦å–å†³äºè´Ÿè½½ä¸­ä¸åŒç±»å‹è®¿é—®çš„å æ¯”ã€‚åŒæ—¶è®¾ç½®é™æ€çš„å†…å­˜å¸¦å®½è€Œä¸è€ƒè™‘å®é™…çš„I/Oè®¿é—®å æ¯”æ˜¯ä¸æ­£ç¡®çš„åšæ³•ã€‚åŒæ—¶NVMæœ€å¤§å¸¦å®½é€šå¸¸å°äºDRAMã€‚è€Œä¸”ä¸åŒç±»å‹çš„å†…å­˜è®¿é—®çš„å¹²æ‰°ç¨‹åº¦ä¸åŒï¼Œå› æ­¤ä¸èƒ½å•çº¯å°†æ‰€æœ‰å†…å­˜==è®¿é—®å»¶è¿Ÿ==è§†ä¸ºç›¸ç­‰&lt;/li&gt;
&lt;li&gt;NVMå’ŒDRAMå…±äº«å†…å­˜æ€»çº¿ï¼ŒNVMæµé‡å’ŒDRAMæµé‡ä¸å¯é¿å…åœ°ä¼šæ··åˆå¹¶ä¸”å¾ˆéš¾åŒºåˆ†ã€‚å¯¹äºæ··åˆçš„æµé‡ï¼Œç›‘æ§ä¸åŒç§ç±»çš„å†…å­˜å¸¦å®½ã€‚ç”±äºå†…å­˜æµé‡æ··åˆï¼Œå‡ ä¹ä¸å¯èƒ½åœ¨æ¯ä¸ªè¿›ç¨‹çš„åŸºç¡€ä¸Šç›‘æ§ä¸åŒç±»å‹çš„å†…å­˜å¸¦å®½ï¼Œè¿™ä½¿ä¸ºDRAMè®¾è®¡çš„ç°æœ‰ç¡¬ä»¶å’Œè½¯ä»¶è°ƒèŠ‚æ–¹æ³•æ— æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;å†…å­˜è°ƒèŠ‚çš„ç¡¬ä»¶å’Œè½¯ä»¶æœºåˆ¶ä¸è¶³ã€‚ç”±äºNVMå’ŒDRAMéƒ½å¯ä»¥é€šè¿‡CPUè´Ÿè½½/å­˜å‚¨æŒ‡ä»¤ç›´æ¥è®¿é—®ï¼Œå› æ­¤ä¸ºäº†æ€§èƒ½ï¼Œå¯¹æ¯ä¸ªå†…å­˜è®¿é—®è¿›è¡Œè®¡ç®—å’Œé™æµæ˜¯ä¸åˆ‡å®é™…çš„ã€‚CPUä¾›åº”å•†ï¼Œå¦‚è‹±ç‰¹å°”ï¼Œæ”¯æŒç¡¬ä»¶æœºåˆ¶æ¥è°ƒèŠ‚å†…å­˜å¸¦å®½ã€‚ç„¶è€Œï¼Œå¸¦å®½é™åˆ¶æ˜¯ç²—ç²’åº¦å’Œå®šæ€§è¿­ä»£çš„ï¼Œè¿™ä¸è¶³ä»¥ç²¾ç¡®çš„å†…å­˜å¸¦å®½è°ƒèŠ‚ã€‚å…¶ä»–ä¸€äº›æ–¹æ³•ï¼Œå¦‚é¢‘ç‡ç¼©æ”¾å’ŒCPUè°ƒåº¦ï¼Œå¯èƒ½ä¼šæä¾›ç›¸å¯¹ç»†ç²’åº¦çš„å¸¦å®½è°ƒæ•´ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä¹Ÿæ˜¯å®šæ€§çš„ï¼Œå¹¶å‡æ…¢äº†è®¡ç®—å’Œå†…å­˜è®¿é—®çš„é€Ÿåº¦ï¼Œå› æ­¤å¯¹æ•´ä¸ªå¹³å°æ€§èƒ½ç¼ºä¹å½±å“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;MT2ä½œä¸ºLinux Cgroupä¸­çš„ä¸€ä¸ªSubsystemï¼Œç”¨äºå‡è½»åµé—¹é‚»å±…é—®é¢˜ã€‚åœ¨å†…å­˜å¸¦å®½åˆ†é…å’Œäº‘SLOä¿è¯æ–¹é¢æé«˜æ•ˆç‡ã€‚æœ¬æ–‡çš„ä¸»è¦è´¡çŒ®ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‘ç°äº†å¯¼è‡´NVM/DRAMæ··åˆå¹³å°ä¸Šå†…å­˜å¯†é›†å‹åº”ç”¨ç¨‹åºæ˜¾è‘—æ€§èƒ½æµå¤±çš„å†…å­˜å¸¦å®½å¹²æ‰°é—®é¢˜&lt;/li&gt;
&lt;li&gt;é¦–æ¬¡å¯¹åœ¨NVM/DRAMå¹³å°ç°å­˜çš„ç¡¬ä»¶å’Œè½¯ä»¶å¸¦å®½åˆ†é…æœºåˆ¶è¿›è¡Œç ”ç©¶&lt;/li&gt;
&lt;li&gt;é«˜æ•ˆæœ‰æ•ˆåœ°è°ƒèŠ‚å…·æœ‰çº¿ç¨‹çº§ç²’åº¦çš„NVM/DRAMæ··åˆå¹³å°ä¸Šçš„å†…å­˜å¸¦å®½&lt;/li&gt;
&lt;li&gt;åœ¨è‹±ç‰¹å°”Optane SSDä¸Šè¿›è¡Œäº†æµ‹è¯•å’Œåˆ†æ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ä¸‹ç®€ç§°NVM/DRAM&lt;/p&gt;
&lt;h1 id=&#34;0x01-bg&#34;&gt;0x01 BG&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;MT^2&lt;/strong&gt; æŒä¹…å†…å­˜ï¼ˆPMï¼‰/ éæ˜“å¤±æ€§å†…å­˜ï¼ˆNVMï¼‰çš„å‡ºç°æ­£æ”¹å˜ç€å­˜å‚¨ç³»ç»Ÿçš„é‡‘å­—å¡”å±‚æ¬¡ç»“æ„ã€‚æœ¬æ–‡å‘ç°ï¼Œç”±äº NVM å’Œ DRAM å…±äº«åŒä¸€æ¡å†…å­˜æ€»çº¿ï¼Œå¸¦å®½å¹²æ‰°é—®é¢˜å˜å¾—æ›´ä¸ºä¸¥é‡å’Œå¤æ‚ï¼Œç”šè‡³ä¼šæ˜¾è‘—é™ä½ç³»ç»Ÿçš„æ€»å¸¦å®½ã€‚æœ¬å·¥ä½œä»‹ç»äº†å¯¹å†…å­˜å¸¦å®½å¹²æ‰°çš„åˆ†æï¼Œå¯¹ç°æœ‰è½¯ç¡¬ä»¶æŠ€æœ¯è¿›è¡Œäº†æ·±å…¥è°ƒç ”ï¼Œå¹¶æå‡ºäº†ä¸€ç§åœ¨ NVM/DRAM æ··åˆå¹³å°ä¸Šç›‘æ§è°ƒèŠ‚å¹¶å‘åº”ç”¨çš„å†…å­˜å¸¦å®½çš„è®¾è®¡ï¼ˆMT^2ï¼‰ã€‚MT^2 ä»¥çº¿ç¨‹ä¸ºç²’åº¦å‡†ç¡®ç›‘æµ‹æ¥è‡ªæ··åˆæµé‡çš„ä¸åŒç±»å‹çš„å†…å­˜å¸¦å®½ï¼Œä½¿ç”¨è½¯ç¡¬ä»¶ç»“åˆæŠ€æœ¯æ§åˆ¶å†…å­˜å¸¦å®½ã€‚åœ¨å¤šä¸ªä¸åŒçš„ç”¨ä¾‹ä¸­ï¼ŒMT^2 èƒ½å¤Ÿæœ‰æ•ˆé™åˆ¶â€œåµé—¹é‚»å±…â€ï¼ˆnoisy neighborsï¼‰ï¼Œæ¶ˆé™¤å¸¦å®½å¹²æ‰°ï¼Œä¿è¯é«˜ä¼˜å…ˆçº§åº”ç”¨çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;noisy-neighbors&#34;&gt;Noisy Neighbors&lt;/h2&gt;
&lt;p&gt;åœ¨å¤šç§Ÿæˆ·çš„äº‘ç¯å¢ƒä¸­ï¼Œå†…å­˜å¸¦å®½å¯¹åº”ç”¨ç¨‹åºçš„æ€§èƒ½æœ‰å¾ˆå¤§å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¤ç§å¯ä»¥å‡è½»åµé—¹é‚»å±…é—®é¢˜çš„æ–¹æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Preventionï¼šä¸»åŠ¨ä¸ºåº”ç”¨ç¨‹åºè®¾ç½®å¸¦å®½é™åˆ¶ï¼ˆå›ºå®šçš„ï¼‰&lt;/li&gt;
&lt;li&gt;Remedyï¼šç³»ç»Ÿæ£€æµ‹åµé—¹é‚»å±…æƒ…å†µçš„å‡ºç°å¹¶è¯†åˆ«å‡ºåµé—¹çš„â€œé‚»å±…â€å¯¹å…¶è¿›è¡Œé™åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›æ–¹æ³•éœ€è¦å»ç›‘æ§åº”ç”¨çš„å¸¦å®½ä½¿ç”¨æƒ…å†µ&lt;/p&gt;
&lt;h2 id=&#34;nvm&#34;&gt;NVM&lt;/h2&gt;
&lt;p&gt;NVMå¾—ç›Šäºå…¶å­˜å‚¨å®¹é‡å¤§ï¼Œè®¿é—®é€Ÿåº¦å¿«çš„ç‰¹æ€§ï¼Œæ­£åœ¨é€æ­¥ä½œä¸ºå†…å­˜ä½¿ç”¨äºå•†ä¸šæœåŠ¡å™¨ä¸­ã€‚å¾—ç›ŠäºPMDKï¼ˆPersistent Memory Development Kitï¼‰åŒæ—¶è¿˜æ¶Œç°å‡ºäº†å¤§é‡åŸºäºNVM Memoryçš„åº”ç”¨ç¨‹åºï¼Œå¦‚PmemKVï¼ŒPmem-RocksDBã€‚&lt;/p&gt;
&lt;p&gt;NVMå¯ä»¥ç›´æ¥é€šè¿‡CPUçš„load/storeæŒ‡ä»¤è¿›è¡Œè®¿é—®&lt;/p&gt;
&lt;h2 id=&#34;memory-bandwidth-interference&#34;&gt;Memory Bandwidth Interference&lt;/h2&gt;
&lt;p&gt;ç”±äºNVMå’ŒDRAMå…±äº«å†…å­˜æ€»çº¿ï¼Œå› æ­¤å­˜åœ¨å¹²æ‰°é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ä¸¤ä¸ªFlexible I/O Testeræ¥ç«äº‰æ€»å¸¦å®½è¿›è¡Œæµ‹è¯•ï¼ŒåŒ…æ‹¬NVM/DRAMçš„è¯»å†™ï¼Œåˆ†åˆ«æ¯”è¾ƒåœ¨ä¸åŒçš„è®¿é—®æ–¹å¼ä¸‹çš„å¸¦å®½å¹²æ‰°æƒ…å†µ&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé¢œè‰²è¶Šæ·±è¡¨æ˜å¹²æ‰°è¶Šæ˜æ˜¾ï¼Œå›¾ä¸­æ•°æ®è¡¨ç¤ºä¸ºåœ¨Task Bè¿è¡Œçš„æƒ…å†µä¸‹Task Açš„ååé‡å Task Aloneæƒ…å†µä¸‹çš„ç™¾åˆ†æ¯”ï¼ˆGB/sï¼‰&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230223132031882.png&#34; alt=&#34;image-20230223132031882&#34; style=&#34;zoom:67%;&#34; /&gt;
&lt;p&gt;ä»å›¾ä¸­å¾—å‡ºçš„ä¸¤ä¸ªç»“è®ºä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜çš„å¹²æ‰°å’Œå†…å­˜çš„è®¿é—®æƒ…å†µæœ‰å…³ï¼Œå æ®æ›´å°å¸¦å®½çš„å†…å­˜è®¿é—®å¯èƒ½ä¼šå¯¹å…¶ä»–è®¿é—®é€ æˆæ›´å¤§çš„å½±å“&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NVMçš„è®¿é—®æ¯”DRAMè®¿é—®å¯¹å…¶ä»–ä»»åŠ¡çš„å½±å“æ›´å¤§ï¼Œä¾‹å¦‚å›¾ä¸­NVM Readåˆ—å’ŒDRAM Readåˆ—çš„å¯¹æ¯”ï¼Œè¯´æ˜æ‰§è¡ŒNVM writeè¾ƒå¤šçš„åº”ç”¨æ›´å¯èƒ½æˆä¸ºå½±å“å…¶ä»–ä»»åŠ¡&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä½œè€…è¿˜åšäº†Task Bè¿›è¡ŒNVM Writeï¼ŒTask Açš„å»¶è¿Ÿå’Œååé‡çš„å˜åŒ–ï¼Œå‘ç°äº†&lt;strong&gt;éšç€å¸¦å®½çš„é€æ¸é™ä½ï¼ŒTask Açš„å»¶è¿Ÿé€æ¸å¢åŠ ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;memory-bandwidth-monitoring&#34;&gt;Memory Bandwidth Monitoring&lt;/h2&gt;
&lt;p&gt;Intelçš„MBMæŠ€æœ¯å¯ä»¥ç”¨æ¥ç›‘æ§ä»L3 Cacheåˆ°ä¸‹ä¸€çº§å†…å­˜ç³»ç»Ÿçš„å¸¦å®½ä½¿ç”¨æƒ…å†µï¼Œå³NVMæˆ–è€…DRAMï¼Œä¸ºæ¯ä¸ªé€»è¾‘æ ¸å¿ƒéƒ½æä¾›äº†ç¡¬ä»¶çº§åˆ«çš„å†…å­˜å¸¦å®½æµ‹é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªé€»è¾‘æ ¸å¿ƒåˆ†é…äº†ä¸€ä¸ªResource Monitoring IDï¼ˆRMIDï¼‰ï¼Œä¸€ç»„é€»è¾‘æ ¸å¿ƒå¯ä»¥åˆ†é…ç›¸åŒçš„RMIDï¼Œåº•å±‚çš„ç¡¬ä»¶é€šè¿‡è¿½è¸ªå…·æœ‰ç›¸åŒRMIDçš„å†…å­˜å¸¦å®½å¹¶å°†å®ƒä»¬è¿›è¡Œæ±‡æ€»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;memory-bandwidth-allocation&#34;&gt;Memory Bandwidth Allocation&lt;/h2&gt;
&lt;p&gt;Intel MBAæŠ€æœ¯æä¾›é—´æ¥å’Œç²—ç•¥å†…å­˜å¸¦å®½æ§åˆ¶ï¼ŒåŸºæœ¬æ— æ€§èƒ½æŸå¤±ã€‚&lt;/p&gt;
&lt;p&gt;MBAåœ¨æ¯ä¸ªç‰©ç†æ ¸å¿ƒå’Œå…±äº«L3 Cacheä¹‹é—´å¼•å…¥äº†ä¸€ä¸ªå¯ç¼–ç¨‹çš„è¯·æ±‚é€Ÿç‡æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨é€šè¿‡åœ¨å†…å­˜è¯·æ±‚ä¹‹é—´æ’å…¥å»¶è¿Ÿæ¥å¯¹å†…å­˜å¸¦å®½çš„ä½¿ç”¨è¿›è¡Œé™æµã€‚&lt;/p&gt;
&lt;p&gt;Intelè¦æ±‚ä½¿ç”¨Classes of Serviceï¼ˆCLOSï¼‰ä¸ºçº¿ç¨‹è¿›è¡Œåˆ†ç»„ï¼Œç„¶åä¸ºæ¯ä¸ªCLOSè®¾ç½®ä¸€ä¸ªé™æµå€¼ã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x02-design&#34;&gt;0x02 Design&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221223002925874.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221223002925874&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒMT2å·¥ä½œåœ¨Kernel spaceï¼Œå¯ä»¥æ›´æ–¹ä¾¿é«˜æ•ˆåœ°è®¿é—®ç¡¬ä»¶ä¿¡æ¯ã€‚è¿˜èƒ½ä¸å†…æ ¸å…¶ä»–ç»„ä»¶é«˜æ•ˆçš„é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;MT2å¯¹user spaceæš´éœ²äº†ç›¸å…³ç®¡ç†æ¥å£ï¼Œç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥å°†çº¿ç¨‹åˆ†é…åˆ°ä¸åŒçš„groupå¹¶ä¸”åˆ¶å®šå„ä¸ªgroupæ‰€ä½¿ç”¨çš„å¸¦å®½ï¼Œç§°ä¸ºTGroupï¼ŒThrottling Group&lt;/p&gt;
&lt;p&gt;MT2ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Monitorï¼Œè´Ÿè´£ä»VFSï¼ŒPerformance Monitoring Unitï¼ˆPMUï¼‰ï¼ŒMBMæ”¶é›†æ€§èƒ½æ•°æ®ï¼Œå¹¶å°†å…¶åˆ†ä¸ºå››ç§ç±»å‹DRAM/NVM R/Wï¼Œå°†ä¿¡æ¯è½¬å‘åˆ°Regulator&lt;/li&gt;
&lt;li&gt;Regulatorï¼Œæ ¹æ®ç›‘æ§çš„æ•°æ®å’Œç­–ç•¥ï¼Œæ‰§è¡Œä¸¤ç§æœºåˆ¶ï¼š
&lt;ul&gt;
&lt;li&gt;è°ƒæ•´MBAé™æµå€¼&lt;/li&gt;
&lt;li&gt;è°ƒæ•´CPUé…é¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MT2ä½¿ç”¨åŠ¨æ€å¸¦å®½é™æµç®—æ³•ï¼Œæ ¹æ®å®æ—¶å¸¦å®½å’Œå¹²æ‰°çº§åˆ«ä¸æ–­ç›‘æ§å’Œè°ƒæ•´é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;MT2æä¾›ä¸¤ç§ç¼“è§£åµé—¹é‚»å±…çš„æ–¹æ¡ˆï¼Œæ¥é€‚åº”ä¸åŒåœºæ™¯ï¼Œå¦‚ä¸Šæ–‡æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Preventionï¼šç³»ç»Ÿç®¡ç†å‘˜ä¸ºæ¯ä¸ªTGroupè®¾ç½®å¸¦å®½ä¸Šé™ï¼ŒMT2ç›‘æ§å®æ—¶å¸¦å®½å¹¶ä»¤æ‰€æœ‰groupä¸ä¼šä½¿ç”¨è¶…è¿‡è®¾å®šå€¼çš„å¸¦å®½ã€‚&lt;/li&gt;
&lt;li&gt;Remedyï¼šå¯¹äºæ²¡æœ‰è¶…è¿‡å¸¦å®½é™åˆ¶ï¼Œä½†æ˜¯ä»ç„¶æœ‰å¾ˆå¤§å½±å“çš„TGroupï¼Œå¯ä»¥ç”±ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œé™åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ’åˆ†TGroupä¹‹åï¼Œç®¡ç†å‘˜é™åˆ¶æ¯ä¸ªTGroupçš„æœ€å¤§å¸¦å®½ï¼Œç›‘æ§å™¨ä¼šä¿è¯æ¯ä¸ªTGroupçš„å¸¦å®½ä¸ä¼šè¶…è¿‡é˜ˆå€¼&lt;/p&gt;
&lt;p&gt;è¿˜è¦ä¿è¯åœ¨å¤§éƒ¨åˆ†çº¿ç¨‹æ²¡æœ‰è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œäº§ç”Ÿçš„I/Oå¹²æ‰°é—®é¢˜ï¼ˆç©ºé—²çŠ¶æ€ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;monitor&#34;&gt;Monitor&lt;/h2&gt;
&lt;h3 id=&#34;å¸¦å®½ä¼°è®¡&#34;&gt;å¸¦å®½ä¼°è®¡&lt;/h3&gt;
&lt;p&gt;monitoréœ€è¦è·å¾—ä¸åŒç§ç±»I/Oå‡†ç¡®çš„å¸¦å®½ï¼Œä¾‹å¦‚DRAMçš„read/writeå¸¦å®½ï¼ŒNVMçš„read/writeå¸¦å®½ã€‚Regulatorä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥å†³å®šæ˜¯å¦è¦é™åˆ¶æ¯ä¸ªTGroupçš„å†…å­˜å¸¦å®½ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºNVM/DRAMçš„readå¸¦å®½ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡PMUè¿›è¡Œè·å–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NVM Read Bandwidthï¼š&lt;code&gt;ocr.all_data_rd.pmm_hit_local_pmm.any_snoop&lt;/code&gt; éœ€è¦é€šè¿‡PMUäº‹ä»¶è®¡æ•°å™¨æ¥æ£€ç´¢æœ¬åœ°NVM readçš„æ•°é‡å¹¶ä¹˜ä¸Šcache line size å³64Bæ¥å¾—å‡ºæ€»å¸¦å®½&lt;/li&gt;
&lt;li&gt;DRAM Read Bandwidthï¼š&lt;code&gt;ocr.all_data_rd.l3_miss_local_dram.any_snoop&lt;/code&gt; DRAM PMU counterè¿›è¡Œç»Ÿè®¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºWriteçš„ç»Ÿè®¡æ— æ³•é€šè¿‡PMUï¼Œéœ€è¦åˆ©ç”¨MBMæ¥ç›‘æ§æ¯ä¸ªTGroupçš„æ€»å†…å­˜è®¿é—®å¸¦å®½ï¼Œä¸ºDRAM read/write Bandwidth å’Œ NVM read/write Bandwidthçš„æ€»å’Œã€‚äºŒè€…çš„Readå¸¦å®½å¯ä»¥å¾ˆå®¹æ˜“è®¡ç®—å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;åªéœ€é€šè¿‡å‘¨æœŸæ€§åœ°æ”¶é›†NVM writeçš„æ•°é‡ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªTGroupæ€»NVM write Bandwidth&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;User-Spaceå¯¹äºNVMçš„writeåªèƒ½é€šè¿‡æ–‡ä»¶ç³»ç»ŸAPIå’Œé€šè¿‡MMapåçš„CPU storeæŒ‡ä»¤æ“ä½œå†…å­˜æ¥å®ç°ï¼Œå¯¹äºæ–‡ä»¶ç³»ç»ŸAPIå¯ä»¥hookå†…æ ¸VFSå¹¶ç›‘æ§æ¯ä¸ªTGroup NVM write çš„æ•°é‡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºMMapçš„è®¿é—®ï¼Œä½œè€…åŸºäºappæ˜¯å¦å—ä¿¡æå‡ºäº†ä¸¤ç§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºå—ä¿¡ä»»çš„appï¼ˆæ¥è‡ªå—ä¿¡ç”¨æˆ·æˆ–è€…å…¬å¸ä¼ä¸šï¼‰ï¼Œä½¿ç”¨ä»–ä»¬æ¥è¾…åŠ©æ”¶é›†ä½¿ç”¨mmapæ–¹å¼å¯¹NVMè¿›è¡Œçš„writeæ•°é‡ã€‚ä½œè€…æå‡ºäº†ä¿®æ”¹åçš„PMDKï¼Œè°ƒç”¨PMDKçš„APIåˆ·æ–°Cache lines åˆ°NVMæˆ–æ‰§è¡Œæ°¸ä¹…åœ°å†…å­˜å†™å…¥ï¼ˆmovntï¼‰ï¼Œé€šè¿‡è®¡ç®—å¹¶ç»Ÿè®¡æ¯ä¸ªçº¿ç¨‹NVM writeçš„æ•°é‡åˆ°è®¡æ•°å™¨ä¸­ã€‚ä¸ºäº†è¦å°†è®¡æ•°å™¨æŠ¥å‘Šç»™MT2ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½è®¾ç½®ä¸€ä¸ªä¸å†…æ ¸å…±äº«çš„é¡µé¢ï¼Œè¿›ç¨‹ä¸­çš„æ¯ä¸ªçº¿ç¨‹å°†å…¶æ¯ä¸ªçº¿ç¨‹è®¡æ•°å™¨çš„å€¼å†™å…¥é¡µé¢ä¸­çš„ä¸åŒä½ç½®ã€‚å†…æ ¸ä¸­çš„MT2å®šæœŸæ£€æŸ¥è®¡æ•°å™¨ï¼Œå¹¶è®¡ç®—æ¯ä¸ªTGroupçš„å¸¦å®½ã€‚åŸºäºPMDKçš„åº”ç”¨æ— åºè¿›è¡Œä¿®æ”¹ï¼Œå…¶ä»–åº”ç”¨éœ€è¦å¯¹æºç è¿›è¡Œå°‘é‡ä¿®æ”¹ã€‚æœ€ç»ˆæ ¹æ®æ”¶é›†çš„NVM writeä¿¡æ¯ï¼Œç»§ç»­è®¡ç®—å‡ºDRAMçš„write å¸¦å®½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$
BW_{DW}=BW_{Total}-BW_{DR}-BW_{NR}-BW_{NW}
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºä¸å—ä¿¡çš„appï¼ˆå¯èƒ½ä¸ä¼šæŒ‰ç…§è§„å®šä¸Šä¼ NVM writeå¸¦å®½ä¿¡æ¯ï¼‰ï¼Œåªèƒ½è¿›è¡Œç²—ç•¥ä¼°è®¡ã€‚åˆ©ç”¨PEBSï¼ˆProcessor Event Based Sampling å¤„ç†å™¨äº‹ä»¶é‡‡æ ·ï¼‰ï¼Œç”¨äºå¯¹æ¯ä¸ªTGroupå¸¦æœ‰ç›®çš„åœ°å€çš„å†…å­˜writeæ“ä½œè¿›è¡Œé‡‡æ ·ï¼Œé€šè¿‡æ¯”è¾ƒNVMçš„åœ°å€èŒƒå›´ï¼Œå¯ä»¥è®¡ç®—å‡ºNVMå’ŒDRAMä¸­é‡‡æ ·çš„writeæ“ä½œæ¯”ä¾‹ï¼Œå¯¹NVMå’ŒDRAM writeè¿›è¡Œç²—ç•¥ä¼°è®¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¹²æ‰°æ£€æµ‹&#34;&gt;å¹²æ‰°æ£€æµ‹&lt;/h3&gt;
&lt;p&gt;MT2é€šè¿‡æµ‹é‡ä¸åŒç±»å‹å†…å­˜è®¿é—®çš„å»¶è¿Ÿæ¥æ£€æµ‹å¹²æ‰°çº§åˆ«ï¼Œå› ä¸ºå†…å­˜è®¿é—®å»¶è¿Ÿä¸å¸¦å®½è´Ÿç›¸å…³&lt;/p&gt;
&lt;p&gt;MT2é€šè¿‡å››ä¸ªæ€§èƒ½å‚æ•°å¾—åˆ°readå»¶è¿Ÿï¼Œ &lt;code&gt;unc_m_pmm_rpq_occupancy.all &lt;/code&gt;($RPQ_O$), &lt;code&gt;unc_m_pmm_rpq_inserts&lt;/code&gt; ($RPQ_1$), &lt;code&gt;unc_m_rpq_occupancy&lt;/code&gt;, and &lt;code&gt;unc_m_rpq_inserts&lt;/code&gt;ï¼Œé€šè¿‡$\frac{RPQ_O}{RPQ_1}$æ¥è®¡ç®—NVM readå»¶è¿Ÿï¼ŒåŒç†å¾—åˆ°DRAM readå»¶è¿Ÿ&lt;/p&gt;
&lt;p&gt;MT2å‘¨æœŸæ€§åœ°å‘èµ·NVMå’ŒDRAM writeè¯·æ±‚ï¼Œä»¥æ­¤æ¥æµ‹é‡å®Œæˆæ—¶é—´ï¼Œè¿›è€Œè·å¾—å»¶è¿Ÿ&lt;/p&gt;
&lt;p&gt;é€šè¿‡è®¾ç½®é˜ˆå€¼æ¥åˆ¤æ–­å¸¦å®½æ˜¯å¦å‘ç”Ÿå¹²æ‰°&lt;/p&gt;
&lt;p&gt;å¹²æ‰°æ£€æµ‹ä¼ªä»£ç &lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;detect_interference&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bt&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bandwidth_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;latency&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;THRESHOLD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½œè€…ä½¿ç”¨ååé‡é™ä½10%çš„å»¶è¿Ÿä½œä¸ºé˜ˆå€¼&lt;/p&gt;
&lt;h2 id=&#34;regulator&#34;&gt;Regulator&lt;/h2&gt;
&lt;h3 id=&#34;å†…å­˜è°ƒèŠ‚æœºåˆ¶&#34;&gt;å†…å­˜è°ƒèŠ‚æœºåˆ¶&lt;/h3&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230223164328178.png&#34; alt=&#34;image-20230223164328178&#34; style=&#34;zoom:67%;&#34; /&gt;
&lt;p&gt;&lt;strong&gt;MBA&lt;/strong&gt;ï¼Œé€šè¿‡è®¾ç½®é™æµå€¼æ¥å¯¹ç¨‹åºè¿›è¡Œé™åˆ¶ã€‚MBAåªæ”¯æŒthrottling valuesï¼Œä¸èƒ½è¿›è¡Œå¤ªç²¾ç»†çš„æ§åˆ¶ï¼ŒMBAå¯¹DRAMæ•æ„Ÿçš„è´Ÿè½½çš„é™åˆ¶æ•ˆæœæ›´å¥½ï¼Œå¯¹NVM-writeçš„é™åˆ¶å‡ ä¹æ²¡æœ‰æ•ˆæœï¼Œå¦‚ä¸Šå›¾bã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CPUè°ƒåº¦&lt;/strong&gt;ï¼Œå¯ä»¥è¿›è¡Œæ›´ç»†ç²’åº¦çš„å†…å­˜å¸¦å®½è°ƒæ•´ï¼Œåˆ©ç”¨Linux Cgroup CPUå­ç³»ç»Ÿæ¥å¯¹åº”ç”¨ä½¿ç”¨çš„CPUæ ¸å¿ƒè¿›è¡Œé™é¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœ‰æ•ˆæ€§å’Œæ¯”è¾ƒ&lt;/strong&gt;ï¼Œä½œè€…é€šè¿‡å¯¹æ¯”æµ‹è¯•åå‘ç°ï¼ŒCPUé™æµä¼šå½±å“åº”ç”¨ç¨‹åºçš„å…¶ä»–ä»»åŠ¡ï¼Œé™åˆ¶å…¶æ•´ä½“çš„æ•ˆç‡ï¼Œè€ŒMBAè¿›å¯¹å†…å­˜çš„è®¿é—®è¿›è¡Œé™åˆ¶ï¼Œå¯¹ç¨‹åºæ•´ä½“çš„è¿è¡Œå½±å“è¾ƒå°ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20230223170600388.png&#34; alt=&#34;image-20230223170600388&#34; style=&#34;zoom:67%;&#34; /&gt;
&lt;h3 id=&#34;åŠ¨æ€å¸¦å®½é™æµ&#34;&gt;åŠ¨æ€å¸¦å®½é™æµ&lt;/h3&gt;
&lt;h4 id=&#34;è¯†åˆ«åµé—¹é‚»å±…&#34;&gt;è¯†åˆ«åµé—¹é‚»å±…&lt;/h4&gt;
&lt;p&gt;Preventionç­–ç•¥ï¼Œæ‰€æœ‰è¶…è¿‡å¸¦å®½ä¸Šé™çš„TGroupéƒ½è¢«è§†ä¸ºåµé—¹é‚»å±…&lt;/p&gt;
&lt;p&gt;Remedyç­–ç•¥ï¼ŒRegulatoré¦–å…ˆæ ¹æ®Monitoræä¾›çš„ä¿¡æ¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸¥é‡çš„å†…å­˜å¹²æ‰°ï¼Œå½“å†…å­˜å¹²æ‰°æƒ…å†µä¸¥é‡æ—¶ï¼Œç®—æ³•ä¼šæ ¹æ®æ¯ä¸ªTGroupçš„å¸¦å®½ä½¿ç”¨æƒ…å†µè¯†åˆ«åµé—¹é‚»å±…ï¼Œæ ¹æ®ä¸Šæ–‡çš„åˆ†æï¼ŒåŒ…å«NVM writeæ“ä½œæœ€å¤šçš„TGroupæœ€æœ‰å¯èƒ½æ˜¯åµé—¹é‚»å±…ï¼Œå› æ­¤ç®—æ³•è¦é€‰å–è¿™ç±»TGroupå¹¶è¿›è¡Œé™æµã€‚&lt;/p&gt;
&lt;h4 id=&#34;è°ƒèŠ‚å†…å­˜å¸¦å®½&#34;&gt;è°ƒèŠ‚å†…å­˜å¸¦å®½&lt;/h4&gt;
&lt;p&gt;ç®—æ³•ä¼šæ ¹æ®å†…å­˜è®¿é—®çš„ç±»å‹æ¥é€‰å–è°ƒèŠ‚æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºNVMè®¿é—®å¸¦å®½çš„é™åˆ¶ï¼Œç®—æ³•é‡‡ç”¨CPUé™åˆ¶&lt;/p&gt;
&lt;p&gt;å¯¹äºDRAMè®¿é—®å¸¦å®½çš„é™åˆ¶ï¼Œç®—æ³•é¦–å…ˆå‰Šå‡å…¶TGroupçš„MBAï¼Œå¦‚æœMBAå·²ç»è®¾å®šä¸ºæœ€å°å€¼ï¼Œç®—æ³•å°†ä½¿ç”¨CPUé™æµæ¥è¿›ä¸€æ­¥è°ƒèŠ‚ã€‚&lt;/p&gt;
&lt;h4 id=&#34;é‡Šæ”¾å†…å­˜é™åˆ¶&#34;&gt;é‡Šæ”¾å†…å­˜é™åˆ¶&lt;/h4&gt;
&lt;p&gt;ä¸€æ—¦å†…å­˜å¹²æ‰°æ¶ˆå¤±ï¼Œç®—æ³•å°±ä¼šå°è¯•æ”¾å®½å¸¦å®½é™åˆ¶ï¼Œæ“ä½œè¿‡ç¨‹å’Œæ–½åŠ å†…å­˜é™åˆ¶çš„æ–¹å¼ç›¸åã€‚&lt;/p&gt;
&lt;p&gt;å½“Regulatorç»“æŸäº†ä¸€æ¬¡è°ƒèŠ‚/é‡Šæ”¾æ“ä½œæ—¶ï¼Œå°±ä¼šç»§ç»­ç­‰å¾…ä¸‹ä¸€æ­¥æ“ä½œï¼Œå–å†³äºMonitoræä¾›çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä½“çš„å·¥ä½œæµç¨‹åœ¨ä½œè€…çš„Slidesä¸Šæœ‰ä¸€å¼ å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20230223191251147.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20230223191251147&#34;
	
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;0x03-implementation&#34;&gt;0x03 Implementation&lt;/h1&gt;
&lt;h2 id=&#34;cgroupæ¥å£&#34;&gt;Cgroupæ¥å£&lt;/h2&gt;
&lt;p&gt;Cgroupæ˜¯Linuxå†…æ ¸ä¸­ç”¨äºèµ„æºé™åˆ¶çš„å·¥å…·ï¼Œå¸¸ç”¨äºå®¹å™¨åŒ–æŠ€æœ¯ï¼Œç›®å‰æ­£åœ¨æ•´ç†æœ‰å…³å†…å®¹è®¡åˆ’åˆ†äº«ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;Cgroupé€šè¿‡æš´éœ²ä¼ªæ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶å®ç°å…¶æ¥å£ï¼ŒCgroupfsï¼Œç”¨æˆ·é€šè¿‡ä¿®æ”¹æ–‡ä»¶çš„å†…å®¹å®Œæˆé…ç½®å·¥ä½œï¼ŒMT2éµå¾ªCgroupè§„èŒƒæ·»åŠ äº†TGroupï¼Œç”¨äºé™æµå’Œç®¡ç†çš„ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;priority&lt;/code&gt;ï¼šç”¨äºè®¾ç½®TGroupçš„ä¼˜å…ˆçº§ï¼ŒåŒ…æ‹¬&lt;code&gt;high&lt;/code&gt;å’Œ&lt;code&gt;low&lt;/code&gt;ï¼Œ&lt;code&gt;high&lt;/code&gt;ä¼˜å…ˆçº§çš„TGroupä¸ä¼šè¢«Regulatoré™åˆ¶ï¼Œ&lt;code&gt;low&lt;/code&gt;ä¼˜å…ˆçº§åˆ™ä¼šåœ¨å†…å­˜å¹²æ‰°æƒ…å†µå‘ç”Ÿæ—¶è¢«é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bandwidth&lt;/code&gt;ï¼šè¯¥æ–‡ä»¶åªè¯»ï¼Œè¿”å›TGroupå½“å‰çš„å¸¦å®½ä½¿ç”¨æƒ…å†µ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;limit&lt;/code&gt;ç”¨äºè·å–å’Œè®¾ç½®TGroupçš„ç»å¯¹å¸¦å®½ï¼Œå››ä¸ªé€—å·åˆ†éš”çš„æ•°å­—æ¥ä»£è¡¨å››ç§å†…å­˜è®¿é—®å¸¦å®½ä¸Šé™ï¼Œä¸€æ—¦å¸¦å®½è¶…è¿‡è¯¥å€¼TGroupå°±ä¼šè¢«é™æµã€‚Zero Valueè¡¨ç¤ºæ— é™åˆ¶ï¼Œè¯¥é…ç½®ç«‹å³ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;çº¿ç¨‹åˆ›å»ºé—®é¢˜&#34;&gt;çº¿ç¨‹åˆ›å»ºé—®é¢˜&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰å­è¿›ç¨‹éƒ½ä¸çˆ¶è¿›ç¨‹æ”¾åœ¨åŒä¸€ä¸ªTGroupä¸­ï¼Œé™¤éç®¡ç†å‘˜æ‰‹åŠ¨å°†å…¶æ”¾å…¥å¦ä¸€ä¸ªTGroupã€‚ä¸ºæ­¤ä½œè€…åœ¨è¿›ç¨‹/çº¿ç¨‹åˆ›å»ºç¨‹åºä¸­æ·»åŠ äº†ä¸€ä¸ªhookï¼Œå³Linuxå†…æ ¸ä¸­çš„&lt;code&gt;fork&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;mba&#34;&gt;MBA&lt;/h2&gt;
&lt;p&gt;MBAæ”¯æŒ10ä¸ªé™æµå€¼ï¼Œç”±äº70ã€80ã€90çš„æ•ˆæœè¾ƒå·®ï¼Œä½œè€…åªä½¿ç”¨å…¶ä¸­çš„8ä¸ªå€¼ï¼Œå¹¶å°†æ¯ä¸ªå€¼åˆ†é…åˆ°ä¸€ä¸ªCLOSä¸­ï¼Œå°†TGroupåˆ†é…åˆ°ç›¸åº”çš„CLOSæ¥å®ç°ä¸åŒç­‰çº§çš„é™æµã€‚åœ¨æ²¡æœ‰å¹²æ‰°çš„æƒ…å†µä¸‹ï¼Œå…·æœ‰ç›¸åŒCLOSçš„TGroupsæœ‰ç›¸åŒçš„è¯·æ±‚é€Ÿç‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸Šä¸‹æ–‡åˆ‡æ¢&#34;&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ç»™æ¯ä¸ªçº¿ç¨‹è®¾ç½®MT2ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬è®¾ç½®PMUç›¸å…³çš„ä¸Šä¸‹æ–‡ã€å†™å…¥ä¸MBAç›¸å…³çš„MSRå¯„å­˜å™¨ä»¥åŠè®¾ç½®CPUé…é¢ï¼Œä½œè€…ç»™è°ƒåº¦å™¨æ·»åŠ äº†ä¸€ä¸ªhookã€‚æ¯æ¬¡å‘ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶ï¼Œæˆ‘ä»¬å°±ä¸ºå°†è¦åœ¨è¿™ä¸ªCPUæ ¸ä¸Šè¿è¡Œçš„æ–°çº¿ç¨‹è®¾ç½®ç›¸åº”çš„MT2ä¸Šä¸‹æ–‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;pmu&#34;&gt;PMU&lt;/h2&gt;
&lt;p&gt;ç”¨äºè®¡ç®—æ²¡æœ‰å‘½ä¸­Cacheè€Œè¿›è¡ŒNVMå’ŒDRAMè®¿é—®çš„æ‰€æœ‰readæŒ‡ä»¤ã€‚å¯¹äºDRAMå’ŒNVMçš„readæ“ä½œå»¶è¿Ÿä¹Ÿé€šè¿‡PMUè·å–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;pebs&#34;&gt;PEBS&lt;/h2&gt;
&lt;p&gt;é‡‡æ ·é¢‘ç‡ä¸º10007ï¼ŒPEBSå°†æ¯10007ä¸ªäº‹ä»¶è®°å½•ä¸€ä¸ªçº¿æ€§åœ°å€ï¼Œä¸ä¼šå¯¹ç³»ç»Ÿäº§ç”Ÿå¤ªå¤§çš„æ€§èƒ½å½±å“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸“æœ‰å†…æ ¸çº¿ç¨‹&#34;&gt;ä¸“æœ‰å†…æ ¸çº¿ç¨‹&lt;/h2&gt;
&lt;p&gt;åœ¨MT2å†…æ ¸æ¨¡å—çš„åˆå§‹åŒ–é˜¶æ®µåˆ›å»ºä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œå®šæœŸæ£€æµ‹å†…å­˜å¹²æ‰°ï¼Œç›‘æ§å¸¦å®½å¹¶æ‰§è¡ŒåŠ¨æ€å¸¦å®½é™æµã€‚&lt;/p&gt;
&lt;p&gt;å†…æ ¸çº¿ç¨‹çš„ä¼ªä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;kthread_main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;interference&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;detect_interference&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TGroups&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;aggregate_bandwidths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adjust_bandwidths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interference&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INTERVAL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;0x04-thinking&#34;&gt;0x04 Thinking&lt;/h1&gt;
&lt;p&gt;ä½œè€…åœ¨å†…æ ¸ä¸­å®ç°äº†çº¿ç¨‹ç²’åº¦çš„å†…å­˜å¸¦å®½ç›‘æ§ï¼ŒåŒæ—¶åˆ©ç”¨äº†å¤šç§æ–¹æ³•æ¥å®ç°å†…å­˜å¸¦å®½çš„é™æµã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶åˆ©ç”¨äº†åˆ†æDRAM/NVMè¯»å†™å¸¦å®½ä¹‹é—´çš„ç›¸äº’å½±å“ï¼Œä»è€Œç¡®å®šäº†ä¼˜åŒ–çš„æ–¹å‘å’Œæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« æ¥è‡ªSJTUçš„IPADSå®éªŒå®¤ï¼Œæ–‡ç« ä¸­çš„è®ºè¿°éå¸¸æœ‰æ¡ç†ï¼Œé‡‡å–çš„æ¯ä¸€é¡¹æªæ–½éƒ½æœ‰å®éªŒéªŒè¯ï¼Œæœ‰ä¾‹å¯å¾ªï¼Œä¾‹å¦‚é€‰å–NVM writeæ“ä½œè¾ƒå¤šçš„TGroupä½œä¸ºå¹²æ‰°é¡¹ï¼Œä»¥åŠMBAå’ŒCPUé™é¢ç»¼åˆè°ƒæ•´å¸¦å®½ï¼Œéƒ½æœ‰ç›¸åº”çš„å®éªŒåˆ†æã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>FEMUä½¿ç”¨æ•™ç¨‹</title>
        <link>https://blog.ipandai.club/p/femu%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</link>
        <pubDate>Sun, 11 Dec 2022 16:10:32 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/femu%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</guid>
        <description>&lt;p&gt;æœ¬æ–‡ä¸»è¦å‚è€ƒFEMUä»“åº“README&lt;/p&gt;
&lt;h1 id=&#34;0x00-intro&#34;&gt;0x00 Intro&lt;/h1&gt;
&lt;p&gt;FEMUæ¶æ„å›¾&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        +--------------------+
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        |    VM / Guest OS   |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        |                    |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        |                    |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        |  NVMe Block Device |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        +--------^^----------+
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                 ||
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                              PCIe/NVMe
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                 ||
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  +------------------------------vv----------------------------+
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  |  +---------+ +---------+ +---------+ +---------+ +------+  |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  |  | Blackbox| |  OCSSD  | | ZNS-SSD | |  NoSSD  | | ...  |  |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  |  +---------+ +---------+ +---------+ +---------+ +------+  |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  |                    FEMU NVMe SSD Controller                |
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  +------------------------------------------------------------+
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;FEMUæ˜¯å¼—å‰å°¼äºšç†å·¥å­¦é™¢çš„&lt;strong&gt;Huaicheng LI&lt;/strong&gt;æ•™æˆå›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾SSDæ¨¡æ‹Ÿå™¨ï¼ŒFEMUçš„è®ºæ–‡æ­¤å‰è¿›è¡Œè¿‡æ€»ç»“[[&lt;a class=&#34;link&#34; href=&#34;https://blog.ipandai.club/p/fast18-femu%e9%97%aa%e5%ad%98%e6%a8%a1%e6%8b%9f%e7%b3%bb%e7%bb%9f%e4%bb%8b%e7%bb%8d/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;FAST&#39;18] FEMUé—ªå­˜æ¨¡æ‹Ÿç³»ç»Ÿä»‹ç»&lt;/a&gt;](https://blog.ipandai.club/p/fast18-femu%E9%97%AA%E5%AD%98%E6%A8%A1%E6%8B%9F%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D/)&lt;/p&gt;
&lt;p&gt;ç»¼åˆæ¥è¯´ï¼ŒFEMUæ˜¯é€šè¿‡ä¿®æ”¹QEMUçš„åŸºç¡€æ¡†æ¶ï¼Œå®ç°äº†å¯¹SSDæ€§èƒ½çš„ç›‘æ§ã€æ§åˆ¶ï¼ŒåŒæ—¶æ”¯æŒè‡ªè¡Œå¯¹FTLè¿›è¡Œè®¾è®¡ï¼Œå¯¹äºVMè€Œè¨€ï¼ŒFEMUå°±æ˜¯ä¸€ä¸ªNVMeåè®®å—è®¾å¤‡ï¼Œæ”¯æŒå¤šç§SSDç ”ç©¶æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç™½ç›’æ¨¡å¼ Open Chanel SSDï¼šä¾‹å¦‚è½¯ä»¶å®šä¹‰é—ªå­˜SDFï¼ŒOCSSDï¼Œä¸»æœºç«¯è¿è¡ŒFTL&lt;/li&gt;
&lt;li&gt;é»‘ç›’æ¨¡å¼ BBSSDï¼šFTLä½äºå­˜å‚¨è®¾å¤‡ï¼Œå®ç°äº†å†…éƒ¨æ˜ å°„è¡¨ï¼Œæ¨¡æ‹Ÿç›®å‰çš„æ¶ˆè´¹çº§SSD&lt;/li&gt;
&lt;li&gt;ZNS SSDï¼šå‘OSæš´éœ²NVMe Zoneæ¥å£ï¼Œä¾¿äºOSç›´æ¥å‘èµ·read/writeè¯·æ±‚&lt;/li&gt;
&lt;li&gt;NoSSDï¼šæ¨¡æ‹Ÿè¶…ä½å»¶è¿Ÿçš„NVMeè®¾å¤‡ï¼Œä¾‹å¦‚SCMã€Optaneã€Z-NAND SSD&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;FEMUä½¿ç”¨çš„ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å°½é‡è®©FEMUå•ç‹¬è¿è¡Œï¼Œä»¥ä¾¿æœ‰è¾ƒä½çš„è¯¯å·®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FEMUé»˜è®¤ä½¿ç”¨8ä¸ªæ ¸å¿ƒæ¥è½®è®­NVMeé˜Ÿåˆ—ï¼ŒFTLé¢å¤–ä½¿ç”¨ä¸€ä¸ªæ ¸å¿ƒï¼ŒVMä½¿ç”¨å°‘é‡çš„è™šæ‹ŸCPUï¼Œé»˜è®¤é…ç½®ä¼šä¸ºVMä¿ç•™4ä¸ªå®¿ä¸»æœºCPUã€‚FEMUå¯¹è½®è¯¢çº¿ç¨‹çš„æ•°é‡å¯ä»¥è‡ªè¡Œé…ç½®ï¼Œä½¿ç”¨&lt;code&gt;-device femu,queues=1,devsz_mb=xxx,femu_mode=xxx&lt;/code&gt;è¿›è¡Œè®¾ç½®ï¼Œå³ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;FEMUè½®è¯¢çº¿ç¨‹+1ä¸ªFTLçº¿ç¨‹+FEMUè™šæ‹Ÿæœºè™šæ‹ŸCPUæ•°é‡+å®¿ä¸»æœºä½¿ç”¨1-2ä¸ªCPU&amp;lt;=å®¿ä¸»æœºä¸­çš„CPUæ ¸å¿ƒæ•°&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FEMUä¼šå°†æ•´ä¸ªSSDå­˜å‚¨åˆ°DRAMä¸­æ¥ç¡®ä¿ç²¾å‡†çš„å»¶è¿Ÿå’Œå¯¹é—ªå­˜çš„æ¨¡æ‹Ÿï¼Œå¿…é¡»ç¡®ä¿æœ‰å¤§äºå­˜å‚¨è®¾å¤‡å®¹é‡çš„ç©ºé—²å†…å­˜ï¼Œå®¿ä¸»æœºå’ŒVMéœ€è¦ä¿ç•™2-4GBçš„å†…å­˜ï¼Œä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„å…¬å¼è¡¨è¾¾å°±æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;FEMU SSDå¤§å°+è™šæ‹ŸæœºDRAMå¤§å°+å®¿ä¸»æœºDRAMå¤§å°&amp;lt;=æ€»DRAMå¤§å°&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;$\rm FEMU \ \ SSD\ \ Size + VM\ \ DRAM\ \ Size+Host\ \  DRAM\ \ Size \leq Total\ \ DRAM \ \ Size$&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FEMUåªæ”¯æŒ4.14åŠä»¥ä¸Šçš„Linuxå†…æ ¸ç‰ˆæœ¬&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒ&lt;a class=&#34;link&#34; href=&#34;https://github.com/vtess/FEMU/wiki&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;FEMU wiki&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;0x01-usage&#34;&gt;0x01 Usage&lt;/h1&gt;
&lt;h2 id=&#34;image&#34;&gt;Image&lt;/h2&gt;
&lt;h3 id=&#34;get-from-maintainer&#34;&gt;Get From Maintainer&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæ˜¯è¦åˆ¶ä½œç³»ç»Ÿé•œåƒï¼Œå¦‚æœä¸æƒ³çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä½œè€…æä¾›çš„é•œåƒï¼Œèµ·åˆæˆ‘æ‰“ç®—åœ¨macOSä¸Šåˆ¶ä½œï¼Œä½†æ˜¯è²Œä¼¼macOSæ²¡æœ‰ç»™QEMUä½¿ç”¨HyperVisorçš„æƒé™ï¼Œå› æ­¤æƒ³å»è£…ä¸€ä¸ªUbuntuåŒç³»ç»Ÿï¼Œç»“æœWindowsåœ¨ç¡¬ç›˜æœ«å°¾å†™äº†ä¸€ç‚¹æ•°æ®ï¼Œå¯¼è‡´SSDä¸èƒ½åˆ†å‡ºè¶³å¤Ÿçš„ç©ºé—´æ¥å®‰è£…ï¼Œæœ€åæŠ˜è…¾äº†ä¸€ä¸‹ç£ç›˜ç¢ç‰‡æ•´ç†ï¼Œå…³é—­è™šæ‹Ÿå†…å­˜ã€ä½¿ç”¨winè‡ªå¸¦çš„ç¡¬ç›˜ç¢ç‰‡æ•´ç†å·¥å…·ï¼Œæœ€ç»ˆè¿˜æ˜¯æ²¡èƒ½æˆåŠŸåˆ†å‡ºè¶³å¤Ÿçš„ç©ºé—´ï¼Œä¸–ç•Œåç”»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/095d3446086861d74d8b96a9623f9c02.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;095d3446086861d74d8b96a9623f9c02&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æœ€ååªèƒ½å€ŸåŠ©WSLï¼Œåˆ¶ä½œå‡ºæ¥äº†Ubuntu Serverçš„é•œåƒï¼Œå‡ ç»å‘¨æŠ˜ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¹‹åï¼Œå‘ç°å¯åŠ¨å¤±è´¥ï¼Œç”¨md5sumçœ‹äº†ä¸€ä¸‹ï¼Œç»“æœä¸Šä¼ è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œäºæ˜¯å‹ç¼©äº†é•œåƒé‡æ–°ä¸Šä¼ ï¼Œæ­¤æ—¶å­¦é•¿å‘ŠçŸ¥å¯ä»¥ç›´æ¥ä½¿ç”¨ä½œè€…æä¾›çš„é•œåƒï¼ˆubuntu 20.04.1 serverç‰ˆæœ¬ï¼Œå†…æ ¸ç‰ˆæœ¬5.4ï¼‰ï¼Œçœ‹äº†ä¸€ä¸‹READMEå‘ç°å¡«å†™é—®å·å³å¯ï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://docs.google.com/forms/d/e/1FAIpQLSdCyNTU7n-hwW1ODJ3i_q1vmS6eTT-V3c4vCL8ouYocNLhxvA/viewform&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é•œåƒä¸‹è½½Google é—®å·&lt;/a&gt;ï¼Œåªæœ‰é‚®ç®±ä¸­å°±ä¼šæ”¶åˆ°ä¸‹è½½åœ°å€&lt;/p&gt;
&lt;p&gt;ä¸‹è½½åœ°å€ä¸ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget http://people.cs.uchicago.edu/~huaicheng/femu/femu-vm.tar.xz
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar xJvf femu-vm.tar.xz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸‹è½½åè§£å‹ï¼Œç„¶åè®°å¾—æ£€æŸ¥ä¸€ä¸‹md5ï¼Œä¸ç„¶ä¼šå˜å¾—ä¸å¹¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;md5sum u20s.qcow2 &amp;gt; tmp.md5sum
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;diff md5sum u20s.md5sum
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è™šæ‹Ÿæœºçš„ç”¨æˆ·åå’Œå¯†ç ä¸º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;username: femu
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;passwd: femu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;make-it-yourself&#34;&gt;Make It Yourself&lt;/h3&gt;
&lt;p&gt;åœ¨ubuntuå®˜ç½‘æˆ–è€…å„å¤§é«˜æ ¡é•œåƒç«™ä¸‹è½½live-serverå³å¯ï¼Œç„¶åä½¿ç”¨qemu-system-x86å¯åŠ¨VMå®‰è£…ç¨‹åºï¼Œè¿™é‡Œä½œè€…è¦æ±‚æ˜¯æœ€å¥½ä½¿ç”¨GUIæ¨¡å¼æ¥æ“ä½œï¼Œæˆ‘å°è¯•äº†nographicå‘ç°å¹¶ä¸èƒ½æ­£ç¡®çš„è¿›å…¥å®‰è£…ç¨‹åºï¼Œé¡ºä¾¿æä¸€ä¸‹ï¼Œé€€å‡ºQEMUçš„æ–¹å¼æ˜¯&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ä¿®é¥°é”®ï¼šCtrl+A å‘½ä»¤é”®ï¼šx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¹Ÿå°±æ˜¯å…ˆæŒ‰ä¸‹Ctrl+Aï¼Œå†æŒ‰ä¸‹xï¼Œç±»ä¼¼tmuxï½ï½&lt;/p&gt;
&lt;p&gt;å¯åŠ¨æŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo qemu-system-x86_64 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-cdrom ubuntu-22.04.1-live-server-amd64.iso &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-hda femu.qcow2 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-boot d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-net nic -net user &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-m &lt;span class=&#34;m&#34;&gt;8192&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-rtc &lt;span class=&#34;nv&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;localtime -smp &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-cpu host &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-enable-kvm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½œè€…æ–‡æ¡£ä¸­ä½¿ç”¨çš„ä¸º&lt;code&gt;-localtime&lt;/code&gt;ï¼Œç›®å‰çš„QEMUç‰ˆæœ¬å·²ç»ç§»é™¤äº†è¯¥æ–¹å¼ï¼Œæ”¹ä¸ºäº†&lt;code&gt;-rtc base=localtime&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸€è·¯å®‰è£…ä¸‹æ¥ä¹‹åï¼Œä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤è¿›å…¥VMä¸­ï¼ˆå»æ‰æŒ‚è½½isoçš„å‚æ•°ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo qemu-system-x86_64 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-hda femu.qcow2 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-boot d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-net nic -net user &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-m &lt;span class=&#34;m&#34;&gt;8192&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-rtc &lt;span class=&#34;nv&#34;&gt;base&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;localtime -smp &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-cpu host &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-enable-kvm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿›å…¥VMåï¼Œç¼–è¾‘&lt;code&gt;/etc/default/grub&lt;/code&gt;ï¼Œå†™å…¥ä»¥ä¸‹å¯åŠ¨é€‰é¡¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;GRUB_CMDLINE_LINUX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip=dhcp console=ttyS0,115200 console=tty console=ttyS0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;GRUB_TERMINAL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;serial
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;GRUB_SERIAL_COMMAND&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;serial --unit=0 --speed=115200 --word=8 --parity=no --stop=1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸ŠæŒ‡ä»¤è®¾ç½®-nographicæ¨¡å¼çš„å¯åŠ¨é€‰é¡¹ï¼ŒåŒæ—¶è®¾ç½®äº†ipçš„è·å–æ–¹å¼&lt;/p&gt;
&lt;p&gt;ä¿å­˜é€€å‡ºåï¼Œæ›´æ–°grubï¼Œå¹¶é€€å‡ºvm&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo update-grub
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo shutdown -h now
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶é•œåƒå°±åˆ¶ä½œæˆåŠŸäº†ï¼Œå¯ä»¥é€šè¿‡FEMUæ¥å¯åŠ¨è¿›è¡Œ&lt;/p&gt;
&lt;h2 id=&#34;run-qemu&#34;&gt;Run Qemu&lt;/h2&gt;
&lt;p&gt;é’ˆå¯¹ä¸åŒçš„ç ”ç©¶æ–¹å‘ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œä¸åŒçš„å¯åŠ¨è„šæœ¬æ¥è¿è¡ŒFEMU&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;p&gt;è¿è¡Œé»‘ç›’æ¨¡å¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./run-blackbox.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œç™½ç›’æ¨¡å¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./run-whitebox.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡ŒNoSSDæ¨¡å¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./run-nossd.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡ŒZNSSDæ¨¡å¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./run-zns.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»¥é»‘ç›’æ¨¡å¼çš„è¿è¡Œä¸ºä¾‹ï¼Œè„šæœ¬ä¸»è¦å†…å®¹å³FEMUçš„è¿è¡Œï¼Œè¿™é‡Œä½¿ç”¨çš„qemu-system-x86_64æ˜¯FEMUçš„ç¼–è¯‘äº§ç‰©ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹è„šæœ¬çš„é…ç½®æ¥ä½¿FEMUé€‚é…è‡ªå·±çš„æœºå™¨ï¼Œå‚æ•°ä¿®æ”¹å‚è€ƒä¸Šæ–‡æˆ–è€…FEMU Wiki&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# Huaicheng Li &amp;lt;huaicheng@cs.uchicago.edu&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Run FEMU as a black-box SSD (FTL managed by the device)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# image directory&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;IMGDIR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/images
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Virtual machine disk image&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;OSIMGF&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$IMGDIR&lt;/span&gt;/u20s.qcow2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[[&lt;/span&gt; ! -e &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$OSIMGF&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;VM disk image couldn&amp;#39;t be found ...&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Please prepare a usable VM image and place it as &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$OSIMGF&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Once VM disk image is ready, please rerun this script again&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nb&#34;&gt;exit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo x86_64-softmmu/qemu-system-x86_64 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -name &lt;span class=&#34;s2&#34;&gt;&amp;#34;FEMU-BBSSD-VM&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -enable-kvm &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -cpu host &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -smp &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -m 4G &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -device virtio-scsi-pci,id&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;scsi0 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -device scsi-hd,drive&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;hd0 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -drive &lt;span class=&#34;nv&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$OSIMGF&lt;/span&gt;,if&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;none,aio&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;native,cache&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;none,format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;qcow2,id&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;hd0 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -device femu,devsz_mb&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;4096,femu_mode&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -net user,hostfwd&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;tcp::8080-:22 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -net nic,model&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;virtio &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -nographic &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -qmp unix:./qmp-sock,server,nowait 2&amp;gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tee log
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åç»­è¿›è¡Œä¸€äº›å…·ä½“å®éªŒåå†è¡¥å……ä¸€äº›FEMUåœ¨å®é™…ç ”ç©¶è¿‡ç¨‹ä¸­çš„ä½¿ç”¨æ­¥éª¤&lt;/p&gt;
&lt;h1 id=&#34;reference&#34;&gt;Reference&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/vtess/FEMU&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/vtess/FEMU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/vtess/FEMU/wiki&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/vtess/FEMU/wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.qemu.org/docs/master/about/removed-features.html#localtime-removed-in-3-1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.qemu.org/docs/master/about/removed-features.html#localtime-removed-in-3-1&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>Dartå­¦ä¹ ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/dart%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Fri, 09 Dec 2022 22:20:03 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/dart%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h1 id=&#34;a-tour-of-dart&#34;&gt;A Tour Of Dart&lt;/h1&gt;
&lt;p&gt;åœ¨macOSä¸Šæ­å»ºDart/Flutterç¯å¢ƒ&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.flutter.dev/get-started/install/macos&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åœ¨Flutterå®˜ç½‘ä¸‹è½½SDK&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å°†SDKä¸­çš„binç›®å½•æ·»åŠ åˆ°system path&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œ&lt;code&gt;flutter doctor&lt;/code&gt;çœ‹æŸ¥æœ¬åœ°ç¯å¢ƒï¼Œå¦‚æœæ­¤å‰æ²¡æœ‰é…ç½®è¿‡å®‰å“å¼€å‘ç¯å¢ƒçš„è¯ï¼Œæ­¤æ—¶ä¼šæç¤ºç¼ºå°‘android command line toolsï¼Œè¿™é‡Œæˆ‘é€šè¿‡Android Studioæ¥è¿›è¡Œå®‰è£…&lt;/p&gt;
&lt;p&gt;å®‰è£…Android Studioåï¼Œè¿›å…¥åä¼šæç¤ºå®‰è£…éƒ¨åˆ†ç»„ä»¶ï¼Œå‹¾é€‰Android Command Line Toolsè¿›è¡Œå®‰è£…ï¼Œå¦‚æœè¿™é‡Œé”™è¿‡äº†ï¼Œå¯ä»¥åœ¨Preferenceè¿›è¡Œå®‰è£…ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®°ä½ä¸Šæ–¹çš„Android SDK locationã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221210104359404.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221210104359404&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…å®Œæˆåï¼Œå°†å®‰è£…SDK locationæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ANDROID_HOMEï¼Œå¯ä»¥å°†é…ç½®å†™å…¥&lt;code&gt;.zshrc&lt;/code&gt;ä¸­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;ANDROID_HOME&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/Users/***/Library/Android/sdk&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;PATH&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ANDROID_HOME&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/tools:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ANDROID_HOME&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/tools/bin:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$ANDROID_HOME&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;/platform-tools:&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$PATH&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åæ‰§è¡Œ&lt;code&gt;source ~/.zshrc&lt;/code&gt;ï¼Œå†æ‰§è¡Œ&lt;code&gt;flutter doctor&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ°è¦æ±‚æ¥å—android licenses&lt;/p&gt;
&lt;p&gt;è¿è¡Œ&lt;code&gt;flutter doctor --android-licenses&lt;/code&gt;ï¼Œä¸€è·¯æŒ‰yæ¥å—&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶flutterå…¨éƒ¨çš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†&lt;/p&gt;
&lt;p&gt;å¦‚æœè¦åœ¨neovimä¸­è¿›è¡Œä»£ç è¡¥å…¨ï¼Œæ¨èå®‰è£…coc.nvimæ’ä»¶ï¼ŒåŒæ—¶æ‰§è¡Œ&lt;code&gt;:CocInstall coc-flutter&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸¤ä¸ªæœ‰å…³flutterçš„coc.nvimæ‰©å±•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/iamcco/coc-flutter&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;coc-flutter&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/theniceboy/coc-flutter-tools&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;coc-flutter-tools&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;important-concepts&#34;&gt;Important Concepts&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Dartä¸­æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ï¼ŒåŒ…æ‹¬æ•°å­—ã€å‡½æ•°å’Œnullï¼Œé™¤äº†nullï¼Œæ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿è‡ªObject&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œä½†æ˜¯&lt;code&gt;var&lt;/code&gt;å¯ä»¥æ¨å¯¼å˜é‡ç±»å‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;null safety&lt;/code&gt;å¼€å¯åï¼Œå˜é‡ä¸ä¼šåŒ…å«nullï¼Œä½¿ç”¨&lt;code&gt;int?&lt;/code&gt;å£°æ˜å˜é‡å¯ä»¥ä½¿å¾—å˜é‡å¯ä¸ºnullï¼Œåœ¨èµ‹å€¼çš„å­—é¢é‡åæ·»åŠ &lt;code&gt;!&lt;/code&gt;å¯ä»¥ä¿è¯å˜é‡ä¸ä¸ºnull&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-dart&#34; data-lang=&#34;dart&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NullableNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;unNullableNumber&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Objectå¯ä»¥ç”¨æ¥ä½œä¸ºèŒƒå‹çš„æ¨¡ç‰ˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dartçš„å‡½æ•°å¯ä»¥ä¸ä¾èµ–ä»»ä½•classï¼Œtop-level&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dartçš„å˜é‡ä¹Ÿæ˜¯top-levelçš„ï¼Œtop-levelæˆ‘çš„ç†è§£çš„è¯å°±æ˜¯ä¸åƒJavaé‚£ç§éœ€è¦å°†å‡½æ•°å’Œå˜é‡å’Œç±»è¿›è¡Œå¼ºè¡Œç»‘å®š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dartä¸ä½¿ç”¨publicã€protectedã€privateæ¥ä¿®é¥°å˜é‡ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿æ¥è¿›è¡Œä¿®é¥°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DartåŒ…å«warningså’Œerrorsæœºåˆ¶ï¼Œerrorsä¸»è¦åœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;variables&#34;&gt;Variables&lt;/h1&gt;
</description>
        </item>
        <item>
        <title>[ACM Trans. On Storage] HintStor: A Framework to Study I/O Hints in Heterogeneous Storage</title>
        <link>https://blog.ipandai.club/p/acm-trans.-on-storage-hintstor-a-framework-to-study-i/o-hints-in-heterogeneous-storage/</link>
        <pubDate>Wed, 30 Nov 2022 10:58:22 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/acm-trans.-on-storage-hintstor-a-framework-to-study-i/o-hints-in-heterogeneous-storage/</guid>
        <description>&lt;h1 id=&#34;0x00-everyday-english&#34;&gt;0x00 Everyday English&lt;/h1&gt;
&lt;p&gt;Heterogeneous å„ç§å„æ ·çš„&lt;/p&gt;
&lt;p&gt;semantic è¯­ä¹‰ä¸Šçš„&lt;/p&gt;
&lt;p&gt;conservative ä¿å®ˆçš„ã€ä¼ ç»Ÿçš„ &amp;mdash;aggressive æ¿€è¿›çš„&lt;/p&gt;
&lt;p&gt;aggregate åˆè®¡&lt;/p&gt;
&lt;p&gt;orchestrate ç²¾å¿ƒç­–åˆ’&lt;/p&gt;
&lt;p&gt;proactive ç§¯æä¸»åŠ¨çš„&lt;/p&gt;
&lt;p&gt;by means of é€šè¿‡ï¼Œå€ŸåŠ©äº&lt;/p&gt;
&lt;p&gt;off-the-shelf ç°æˆçš„&lt;/p&gt;
&lt;p&gt;elaborate è¯¦ç»†é˜è¿°&lt;/p&gt;
&lt;h1 id=&#34;0x01-intro&#34;&gt;0x01 Intro&lt;/h1&gt;
&lt;p&gt;éšç€å­˜å‚¨æŠ€æœ¯çš„å‘å±•ï¼Œç”±SCMã€SSDã€HDDä»¥åŠä¸€ç³»åˆ—äº‘å­˜å‚¨æ„æˆäº†ç›®å‰å¼‚æ„å­˜å‚¨ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;å¼‚æ„å­˜å‚¨ç³»ç»Ÿå°†å†·æ•°æ®æ”¾åœ¨æ›´æ…¢çš„å±‚æ¬¡ï¼Œçƒ­æ•°æ®æ”¾åœ¨æ›´å¿«çš„å±‚æ¬¡ï¼Œå­˜å‚¨æœºåˆ¶çš„æ¿€è¿›å’Œä¿å®ˆéƒ½ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½æŸå¤±ï¼Œè€Œä¸”å¼‚æ„å­˜å‚¨ç³»ç»Ÿç”±ä¸åŒé€Ÿåº¦å’Œç‰¹ç‚¹çš„å­˜å‚¨è®¾å¤‡ç»„æˆ&lt;/p&gt;
&lt;p&gt;åœ¨å¼‚æ„å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œè¿˜å­˜åœ¨å‰å°å’Œåå°I/Oçš„å¹²æ‰°é—®é¢˜ï¼Œå¸¦æ¥æ˜æ˜¾çš„å»¶è¿Ÿï¼Œç¡¬ç›˜çš„ç®¡ç†å±‚å¾€å¾€ä¸èƒ½åˆ†è¾¨å‡ºI/Oè¯·æ±‚çš„ä¼˜å…ˆçº§é«˜ä½ï¼Œå¹¶å†³å®šå°†å…¶æ•°æ®å­˜å‚¨åˆ°å“ªä¸€å±‚æ¬¡&lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µè¢«ç§°ä¸ºI/Oæ ˆé«˜å±‚æ¬¡ä¸åº•å±‚å­˜å‚¨ç³»ç»Ÿä¹‹é—´çš„è¯­ä¹‰é¸¿æ²Ÿï¼Œå…¶ä¸­ä¸€ä¸ªè§£å†³æ–¹æ¡ˆä¸ºä½¿ç”¨I/O access hintsï¼Œå½“appè¯»å–ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å—å¯èƒ½æ•£è½åœ¨ä¸åŒè®¾å¤‡ä¸­ï¼Œä¸Šå±‚å¯ä»¥å‘ŠçŸ¥å­˜å‚¨ç³»ç»Ÿï¼Œä½¿å¾—å­˜å‚¨ç³»ç»Ÿæå‰å°†è¯¥æ–‡ä»¶çš„æ•°æ®æ±‡æ€»åˆ°è¯»å–é€Ÿåº¦æ›´é«˜çš„å±‚æ¬¡ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œå…è®¸å­˜å‚¨åç«¯æ§åˆ¶å™¨é’ˆå¯¹ä¸åŒçš„I/OæŒ‡ä»¤å®æ–½ä¸åŒçš„I/Oç­–ç•¥ï¼Œä¾‹å¦‚SSDå¯ä»¥ä¼˜å…ˆå¤„ç†å…ƒæ•°æ®å’Œå°æ–‡ä»¶ï¼Œä½¿å…¶å…ˆç¼“å­˜è‡³æ–‡ä»¶ç³»ç»Ÿä¸­&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æå‡ºäº†ä¸€ä¸ªé€šç”¨çµæ´»çš„æ¡†æ¶ï¼ŒHintStorï¼Œä¸ºå¼‚æ„å­˜å‚¨ç³»ç»Ÿæä¾›access hints&lt;/p&gt;
&lt;p&gt;è®¾è®¡å’Œå®ç°äº†ä¸€å¥—æ–°çš„ç”¨æˆ·å±‚é¢çš„æ¥å£ï¼Œæ–‡ä»¶ç³»ç»Ÿæ’ä»¶ï¼Œå—å­˜å‚¨æ•°æ®ç®¡ç†å™¨ï¼Œåœ¨å­˜å‚¨ç®¡ç†æ–¹é¢ï¼ŒHintStroré€šè¿‡åœ¨blockçº§åˆ«è¿›è¡Œç»Ÿè®¡ï¼ˆçƒ­åŠ›å›¾ç­‰ï¼‰æ¥è§¦å‘æ•°æ®è¿ç§»ï¼Œå¹¶é€šè¿‡FIFOé˜Ÿåˆ—å¤„ç†I/Oï¼›HintStorè¿˜æä¾›äº†access hintçš„è¯„ä¼°ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–°çš„app/userå±‚é¢çš„æ¥å£å…è®¸ç”¨æˆ·å®šä¹‰å’Œé…ç½®æ–°çš„hint&lt;/li&gt;
&lt;li&gt;VFSä¸­çš„æ–‡ä»¶ç³»ç»Ÿæ’ä»¶æå–æ–‡ä»¶å¸ƒå±€ä¿¡æ¯å¹¶å»ºç«‹æ–‡ä»¶å±‚é¢çš„æ•°æ®åˆ†ç±»å™¨ï¼Œç”¨äºä¸‹å±‚å„ç§æ–‡ä»¶ç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;åœ¨åŸºäºDMçš„Linuxä¸­ï¼Œå—å­˜å‚¨æ•°æ®ç®¡ç†å™¨å®ç°äº†å››ä¸ªåŸå­access hintæ“ä½œï¼Œè§¦å‘æ•°æ®è¿ç§»å’ŒI/Oè°ƒåº¦ï¼Œå› æ­¤å¯ä»¥æ‰§è¡Œå’Œåˆ†æä¸ä¸Šå±‚hintæœ‰å…³çš„ä¸åŒç­–ç•¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½œè€…åŸºäºSSDã€HDDã€SCMä»¥åŠäº‘å­˜å‚¨è¿›è¡Œäº†è¯„ä¼°ï¼Œä»¥ä½“ç°ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œå®ç°å¹¶åˆ†æäº†ä»¥ä¸‹å››ä¸ªhintsï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå†…éƒ¨çš„æ•°æ®è¿›è¡Œåˆ†ç±»ï¼ˆå…ƒæ•°æ®ï¼Œæ–‡ä»¶æ•°æ®ï¼Œæ–‡ä»¶å¤§å°ï¼‰&lt;/li&gt;
&lt;li&gt;Stream IDï¼Œè¯¥IDç”¨äºå¯¹ä¸åŒæ•°æ®è¿›è¡Œåˆ†ç±»ï¼Œå¹¶å°†ç›¸å…³æ•°æ®å­˜å‚¨åœ¨ä¸€èµ·æˆ–ç´§å¯†åœ°å­˜å‚¨åœ¨åŒä¸€ä¸ªè®¾å¤‡ä¸Š&lt;/li&gt;
&lt;li&gt;äº‘é¢„å–ï¼Œcloud prefetchï¼Œè°ƒç ”äº†åœ¨access hintsæƒ…å†µä¸‹ï¼Œå¦‚ä½•å¸®åŠ©æœ‰æ•ˆåœ°é›†æˆæœ¬åœ°å­˜å‚¨å’Œäº‘å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;I/Oä»»åŠ¡è°ƒåº¦ï¼Œç”¨æˆ·å¯ä»¥åœ¨åº”ç”¨å±‚é¢å‘å—å­˜å‚¨è®¾å¤‡å‘èµ·hintsï¼Œæ¥å¯¹å‰å°å’Œåå°ä»»åŠ¡è¿›è¡ŒåŒºåˆ†&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;0x02-bg&#34;&gt;0x02 Bg&lt;/h1&gt;
&lt;p&gt;åœ¨ç›®å‰çš„hintsæœºåˆ¶ä¸­ï¼Œä¸»è¦è€ƒè™‘çš„æ˜¯å®¿ä¸»æœºçš„page cacheå’Œé¢„å–æœºåˆ¶ï¼Œç›®å‰systemä¸­çš„ç³»ç»Ÿè°ƒç”¨å¯ä»¥é€šè¿‡æŒ‡å®šä¸€ä¸ªéšæœºè®¿é—®flagæ¥å‘ŠçŸ¥å†…æ ¸é€‰å–æ­£ç¡®çš„é¢„å–å’Œpage cacheç­–ç•¥ä»¥ä¼˜åŒ–å¯¹æŸä¸ªæ–‡ä»¶çš„è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰å¾ˆå°‘æœ‰å¯¹å¼‚æ„å­˜å‚¨ç³»ç»Ÿçš„ä¼˜åŒ–ï¼Œéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯åœ¨ä¸åŒçš„å­˜å‚¨è®¾å¤‡ä¸Šçš„æ™ºèƒ½æ•°æ®ç§»åŠ¨ï¼Œ&lt;code&gt;fadvise()&lt;/code&gt;å’Œ&lt;code&gt;inoice()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å¯ä»¥æ”¹å–„prefetchingï¼Œä½†æ˜¯ä¸èƒ½è§£å†³æ•°æ®ç§»åŠ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;MPI-I/O hintsåœ¨é«˜æ€§èƒ½è®¡ç®—ç³»ç»Ÿä¸­ä¼˜åŒ–æ–‡ä»¶ç³»ç»Ÿï¼Œç›®å‰è¿™äº›ç ”ç©¶ç€çœ¼äºä¼˜åŒ–å­˜å‚¨ç³»ç»Ÿä¸­çš„buffer/cacheéƒ¨åˆ†ï¼Œred haté€šè¿‡åœ¨ç”¨æˆ·ç©ºé—´é™åˆ¶I/Oæ¥å¯¹ä¸åŒä¾›åº”å•†çš„å­˜å‚¨è®¾å¤‡è¿›è¡Œblockå¯¹é½ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰æœ‰äº›æ–‡ä»¶ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰ç±»åˆ«ï¼Œbtrfså¯ä»¥åœ¨åŒä¸€æ–‡ä»¶ç³»ç»Ÿä¸­æ”¯æŒä¸åŒçš„å·ï¼ŒåŒæ—¶éœ€è¦ç”¨æˆ·ä¸ºå­˜å‚¨è®¾å¤‡é™æ€é…ç½®å·ï¼Œç”¨æˆ·å¯èƒ½è®©å¤šä¸ªåº”ç”¨è¿è¡Œåœ¨ä¸€ä¸ªé€»è¾‘å·ä¸­ï¼Œä¸ºäº†å®ç°é«˜æ•ˆçš„æ•°æ®ç®¡ç†ï¼Œä½œè€…è€ƒè™‘åœ¨å·ä¸Šæ”¯æŒåŠ¨æ€çš„access hintsã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x03-hintstor-design&#34;&gt;0x03 HintStor Design&lt;/h1&gt;
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221202204914922.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221202204914922&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;HintStorçš„æ¶æ„å›¾å¦‚ä¸Šå›¾æ‰€ç¤º&lt;/p&gt;
&lt;p&gt;Device Mapperæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œä¸ºç”±å¤šç§å—è®¾å¤‡ç»„æˆçš„å·æä¾›æ˜ å°„&lt;/p&gt;
&lt;p&gt;æ•´ä½“åŒ…å«ä¸‰å±‚ï¼Œåœ¨åº”ç”¨å±‚ã€æ–‡ä»¶ç³»ç»Ÿå±‚ã€å—å±‚æä¾›äº†æ–°çš„æ¥å£å’Œæ’ä»¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç”¨æˆ·å±‚é€šè¿‡æ¥å£è¿æ¥Block Storage Data Managerå’Œæ–‡ä»¶ç³»ç»Ÿï¼Œä½¿å¾—åº”ç”¨å¯ä»¥æ¥å—æ•°æ®å’Œå‘é€access hints&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æå–chunkçš„æ–‡ä»¶ç³»ç»Ÿè¯­ä¹‰ï¼ŒHintStorå°†ä¸€ä¸ªæ’ä»¶ç»‘å®šåˆ°æ–‡ä»¶ç³»ç»Ÿå±‚ï¼Œæ¥åˆ©ç”¨å†…éƒ¨æ–‡ä»¶çš„æ–‡ä»¶æ•°æ®ç»“æ„å’Œæ–‡ä»¶æ•°æ®å¸ƒå±€&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æ§åˆ¶å¯¹å¤§chunkçš„æ•°æ®ç®¡ç†ï¼ŒHintStorå®ç°äº†æ–°çš„block storage managerï¼Œå¯ä»¥å®ç°å¯¹å­˜å‚¨è®¾å¤‡çš„access hintsç­–ç•¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨Device Mapperä¸­å®ç°äº†ä¸¤ä¸ªåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Redirector å°†I/Oè¯·æ±‚è½¬å‘åˆ°ç›¸åº”çš„è®¾å¤‡&lt;/li&gt;
&lt;li&gt;Migrator æä¾›å—è®¾å¤‡é—´çš„å¼‚æ­¥æ•°æ®æ‹·è´ï¼Œä¸ºäº†é˜²æ­¢æ‹·è´è¿‡ç¨‹ä¸­å¯¹å¸¦å®½çš„å ç”¨ï¼Œä¼šå¯¹æµé‡è¿›è¡Œé™åˆ¶ï¼Œè¿ç§»åä¼šé€šè¿‡ä¸€ä¸ªflagæ¥å†³å®šæ˜¯å¦åˆ é™¤æ‹·è´çš„åŸå§‹æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;interface&#34;&gt;Interface&lt;/h2&gt;
&lt;p&gt;HintStorä½¿ç”¨sysfsæ¥å£ä¸ºI/Oè¯·æ±‚è®¾ç½®ä¸€äº›å±æ€§ï¼Œä¸å—è®¾å¤‡å’Œæ–‡ä»¶ç³»ç»Ÿé€šä¿¡ï¼Œç±»ä¼¼äºä¸€ä¸ªä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥ä»å…¶ä»–å†…æ ¸çš„å­ç³»ç»Ÿä¸­æå–ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å†…æ ¸å®ç°äº†éƒ¨åˆ†ç³»ç»Ÿè°ƒç”¨ï¼Œä½¿ç”¨JSONæ ¼å¼çš„è¯·æ±‚è¿›è¡Œé€šä¿¡ï¼ŒJSONçš„ç¼–è§£ç å¯èƒ½æœ‰æ€§èƒ½æŸå¤±ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸€äº›åº”ç”¨ç¨‹åºå¯èƒ½è¦å¯¹ä»£ç è¿›è¡Œå°‘é‡ä¿®æ”¹&lt;/p&gt;
&lt;h2 id=&#34;file-system-plugin&#34;&gt;File System Plugin&lt;/h2&gt;
&lt;p&gt;HintStorå¯ä»¥è·å–ä¸è¯·æ±‚ç›¸å…³çš„data blockä¿¡æ¯ï¼Œæå‰è§¦å‘æ•°æ®è¿ç§»ï¼Œä¼˜åŒ–åç»­çš„è®¿é—®&lt;/p&gt;
&lt;p&gt;HintStorå¯ä»¥åŒºåˆ†å‰å°å’Œåå°I/O ï¼Œä¼˜å…ˆå¯¹å‰å°I/Oè¿›è¡Œæ»¡è¶³&lt;/p&gt;
&lt;p&gt;HintStoråœ¨VFSæä¾›äº†ä¸€ä¸ªFS_HINTè°ƒç”¨ï¼Œç”¨äºè·å–æ–‡ä»¶çš„æ•°æ®å¸ƒå±€ä¿¡æ¯ï¼Œè·å–æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®ï¼Œè¯¥æ¥å£ä¾›ç”¨æˆ·ç©ºé—´å’Œåº”ç”¨è¿›è¡Œè°ƒç”¨ï¼ŒåŒæ—¶æ”¯æŒæŸ¥è¯¢å¤šä¸ªæ–‡ä»¶çš„æ˜ å°„ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥åŠŸèƒ½æä¾›åœ¨ext2ã€ext4å’Œbtrfsç­‰Linuxä¸­ä¸»æµçš„æ–‡ä»¶ç³»ç»Ÿä¸­&lt;/p&gt;
&lt;p&gt;FS_HINTä¼šç»´æŠ¤ext4é¢„åˆ†é…çš„block groupï¼Œbtrfså¯ä»¥å°†ä¸€ä¸ªå—è®¾å¤‡æŒ‚è½½ä¸ºsub-Volumeï¼Œç”¨äºè·¨è®¾å¤‡ç®¡ç†æ•°æ®&lt;/p&gt;
&lt;p&gt;é€šè¿‡ioctlæ¥å£æ¥è·å–æ–‡ä»¶çš„è¾¹ç•Œï¼Œæ¥è§¦å‘æ•°æ®è¿ç§»æˆ–è€…I/Oè°ƒåº¦&lt;/p&gt;
&lt;h2 id=&#34;block-storage-data-manager&#34;&gt;Block Storage Data Manager&lt;/h2&gt;
&lt;p&gt;ä¸»è¦åŒ…å«ï¼š&lt;/p&gt;
&lt;p&gt;chunkçš„æ˜ å°„è¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»´æŠ¤LBAåˆ°Physical Block Addressçš„æ˜ å°„&lt;/li&gt;
&lt;li&gt;chunk size å¯è‡ªå®šä¹‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;chunk-level I/O åˆ†æå™¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨äºç›‘æ§æ¯ä¸ªchunkä¸Šçš„I/Oè®¿é—®ç»Ÿè®¡ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;ä¼°ç®—æ¯ä¸ªchunkçš„è®¿é—®é¢‘ç‡ï¼Œç”Ÿæˆçƒ­åŠ›å›¾ï¼Œè¯¥ä¿¡æ¯ç”¨äºå‘¨æœŸæ€§çš„è¿›è¡Œæ•°æ®è¿ç§»&lt;/li&gt;
&lt;li&gt;è™½ç„¶è¿™äº›ä¿¡æ¯å¯èƒ½ä¸å‡†ç¡®ï¼Œä»ç„¶å¯ä»¥ç”¨æ¥ä½œä¸ºæ•°æ®ç§»åŠ¨çš„æ­£ç¡®æ€§è¯„ä¼°æŒ‡æ ‡&lt;/li&gt;
&lt;li&gt;å½“chunkè¢«è¿ç§»åˆ°æ›´ä½é€Ÿçš„å±‚æ¬¡ï¼Œè®¿é—®é¢‘ç‡å¯èƒ½ä¼šå‡é«˜ï¼Œè¿›è€Œå°†æ•°æ®è½¬ç§»åˆ°æ›´å¿«çš„å±‚æ¬¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;chunk è°ƒåº¦å™¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨äºè¯„ä¼°ä¸åŒä»»åŠ¡çš„ä¼˜å…ˆçº§è¿›è¡Œè°ƒåº¦&lt;/li&gt;
&lt;li&gt;ç›®å‰æ”¯æŒä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—å’Œä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œé»˜è®¤ä½¿ç”¨FIFOæœºåˆ¶æ¥ç»´æŠ¤åŸæœ‰çš„è¯·æ±‚é¡ºåº&lt;/li&gt;
&lt;li&gt;å½“ä»»åŠ¡ä¼˜å…ˆçº§ç›¸å…³çš„Hintå‘èµ·æ—¶ï¼Œä¼šå°†ä½ä¼˜å…ˆçº§çš„è¯·æ±‚æ”¾åˆ°ç­‰å¾…é˜Ÿåˆ—å°¾éƒ¨&lt;/li&gt;
&lt;li&gt;åº”ç”¨å¯ä»¥è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨æ¥è°ƒç”¨ä¸€ä¸ªè¯·æ±‚ï¼Œç”¨äºå°†æ¥è¿‘deadlineçš„è¯·æ±‚ä»ç­‰å¾…é˜Ÿåˆ—ç§»åŠ¨åˆ°å·¥ä½œé˜Ÿåˆ—&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;access hinitåŸå­æ“ä½œçš„åˆ†ç±»æ¨¡å‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HintStorå°†æ•°æ®çš„å¸ƒå±€å’Œç§»åŠ¨è§†ä½œæ”¹å–„å¼‚æ„å­˜å‚¨ç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;æ¯ä¸€ä¸ªaccess hintæŒ‡ä»¤æ˜¯ä¸€ä¸ªå››å…ƒç»„&lt;code&gt;(op,chunk_id,src_addr,dest_addr)&lt;/code&gt;ï¼ŒåŒ…æ‹¬æ“ä½œç±»å‹ã€chunk IDã€åœ¨é€»è¾‘å·ä¸­çš„æºåœ°å€å’Œç›®çš„åœ°å€&lt;/li&gt;
&lt;li&gt;å…±æœ‰å››ä¸ªåŸå­æ“ä½œï¼š
&lt;ul&gt;
&lt;li&gt;Redirectï¼šå½“æœ€åˆè¯·æ±‚çš„åŸåœ°å€è¢«é‡å®šå‘åˆ°å…¶ä»–åœ°å€æ—¶è§¦å‘ï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªç”±å¤šä¸ªSSDå’ŒHDDç»„æˆçš„é€»è¾‘å·ä¸­ï¼Œå¯ä»¥å°†å­˜å‚¨åˆ°HDDä¸Šçš„è¾ƒå°çš„æ–‡ä»¶é‡å®šå‘åˆ°SSDä¸­ã€‚è¯¥å¤„ç†å‡½æ•°ä¼šè°ƒç”¨DMä¸­çš„é©±åŠ¨å¹¶ç®¡ç†è¢«é‡å®šå‘çš„è¯·æ±‚ï¼Œå½“bioåˆ°è¾¾DMæ—¶ï¼Œå°†å¯¹data chunké‡æ–°èµ‹å€¼ä¸ºç›®çš„åœ°å€&lt;/li&gt;
&lt;li&gt;Migrateï¼šä½œä¸ºHintStorä¸­å…³é”®çš„éƒ¨åˆ†ï¼Œåœ¨åå°ä¼šä¿ç•™ä¸€ä¸ªmigration daemonåå°é©»ç•™ç¨‹åºï¼Œèµ·åˆå½“æ•°æ®å—å­˜æ”¾äºä¸åŒçš„å­˜å‚¨è®¾å¤‡æ—¶ï¼Œæ•°æ®çš„è®¿é—®é¢‘ç‡ä¼šæ—¶ä¸æ—¶å‘ç”Ÿå˜åŒ–ï¼ŒMigrationæ“ä½œé€šè¿‡è°ƒç”¨DMä¸­çš„migrator target driverï¼Œå°†data chunkä»åŸæœ‰çš„ä½ç½®è½¬ç§»åˆ°ç›®çš„ä½ç½®ã€‚ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œè¿ç§»è¿‡ç¨‹ä¸­è¯¥chunkå°†åŠ é”è¿›è¡Œä¿æŠ¤ï¼Œå¿½ç•¥å¯¹chunkçš„è®¿é—®ã€‚HintStoræä¾›ä¸»åŠ¨å’Œç­–ç•¥ä¸¤ç§è¿ç§»æ–¹å¼ï¼Œä¸»åŠ¨å³ç”¨æˆ·ä¸»åŠ¨è§¦å‘ï¼ŒåŒæ—¶å®ç°äº†åŸºäºæ—¶é—´çš„å¯å‘å¼è¿ç§»ç­–ç•¥ï¼Œå¯ä»¥é…ç½®ä¸ºæ¯ä¸¤ä¸ªå°æ—¶è¿ç§»top-kè®¿é—®æœ€é¢‘ç¹çš„chunkåˆ°æ›´å¿«çš„å­˜å‚¨è®¾å¤‡ä¸­&lt;/li&gt;
&lt;li&gt;Replicateï¼šç”¨äºå°†æ•°æ®çš„å‰¯æœ¬è¿›è¡Œä¿ç•™ï¼Œä½¿ç”¨DMä¸­çš„migrator target driverï¼Œä¿ç•™åŸæ¥æ•°æ®çš„æŒ‡é’ˆï¼Œä½¿å¾—çƒ­ç‚¹æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªå­˜å‚¨è®¾å¤‡ä¸Šï¼Œæé«˜æ•°æ®è®¿é—®çš„å¹³å‡æ—¶é—´ï¼ŒåŒæ—¶å¯ä»¥åˆ©ç”¨Replicateåˆ›å»ºæ•°æ®çš„å¤šä¸ªå‰¯æœ¬ï¼Œéœ€è¦åŠ é”&lt;/li&gt;
&lt;li&gt;Prefetchï¼šç±»ä¼¼äºBufferingï¼Œ HintStoré¢„ç•™ä¸€ä¸ªbuffer spaceç©ºé—´ç”¨äºé¢„å–ï¼Œå°†data chunkåŠ è½½åˆ°buffer spaceä¸­ï¼Œå®ç°ç±»ä¼¼äºMigrateå’ŒReplicateï¼Œä¸»è¦åŒºåˆ«æ˜¯Prefetchåœ¨æ‹·è´æ—¶ä¸éœ€è¦åŠ é”è¿›è¡Œä¿æŠ¤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;classification&#34;&gt;Classification&lt;/h2&gt;
&lt;p&gt;I/O access hintså¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸ºä»æ“ä½œç³»ç»ŸåŠ¨æ€åœ°è¿›è¡Œæ•è·å’Œä»æ–‡ä»¶ç³»ç»Ÿé™æ€åœ°è·å–&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221209005726034.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221209005726034&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åŠ¨æ€çš„access hintsä¸»è¦å¸®åŠ©å—å­˜å‚¨è®¾å¤‡åœ¨è¿è¡Œæ—¶ç®¡ç†æ•°æ®çš„å¸ƒå±€ï¼Œå¯¹äºå†·æ•°æ®ï¼Œä¾¿äºæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œé¢„å–ã€‚&lt;/p&gt;
&lt;p&gt;HintStoråœ¨chunkçº§åˆ«å¤„ç†I/Oè¯·æ±‚ï¼Œå¹¶ä¸”ç»‘å®šä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ–‡ä»¶ç»“æ„å’Œç”¨æˆ·çš„æç¤ºï¼Œä»»åŠ¡è°ƒåº¦åˆ™åœ¨è¿›ç¨‹levelå®ç°&lt;/p&gt;
&lt;h1 id=&#34;conclusion--thinking&#34;&gt;Conclusion &amp;amp;&amp;amp; Thinking&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹æ¯”Flash Shareï¼ŒHintStorä¸»è¦é’ˆå¯¹Linux I/Oæ ˆå’Œæ–‡ä»¶ç³»ç»Ÿå±‚é¢ï¼ŒFlash Share è¿˜è€ƒè™‘åˆ°äº†NVMeåè®®æ–¹é¢å’ŒSSDå±‚é¢&lt;/li&gt;
&lt;li&gt;åœ¨å¤„ç†å‰å°/åå°I/Oéƒ¨åˆ†äºŒè€…æ¯”è¾ƒç±»ä¼¼&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>[ATC&#39;20] PinK: High-speed In-storage Key-value Store with Bounded Tails</title>
        <link>https://blog.ipandai.club/p/atc20-pink-high-speed-in-storage-key-value-store-with-bounded-tails/</link>
        <pubDate>Sat, 26 Nov 2022 13:40:59 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/atc20-pink-high-speed-in-storage-key-value-store-with-bounded-tails/</guid>
        <description>&lt;h1 id=&#34;0x00-everyday-english&#34;&gt;0x00 Everyday English&lt;/h1&gt;
&lt;p&gt;preferable æ›´å¯å–çš„&lt;/p&gt;
&lt;p&gt;consequently å› æ­¤&lt;/p&gt;
&lt;p&gt;inevitably å¿…ç„¶çš„&lt;/p&gt;
&lt;p&gt;conventional å¸¸è§„çš„ã€ä¼ ç»Ÿçš„&lt;/p&gt;
&lt;p&gt;exacerbates åŠ å‰§&lt;/p&gt;
&lt;p&gt;deteriorates æ¶åŒ–&lt;/p&gt;
&lt;p&gt;deterministic ç¡®å®šæ€§&lt;/p&gt;
&lt;h1 id=&#34;0x01-intro&#34;&gt;0x01 Intro&lt;/h1&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦æå‡ºäº†Pinkï¼ŒåŸºäºLSM treeçš„KV-SSDï¼Œä¸»è¦é€šè¿‡é¿å…ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œè€Œæ˜¯ä½¿ç”¨å°‘é‡DRAMæ¥è¿›è¡Œä¼˜åŒ–&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿçš„KV-SSDä¸»è¦é€šè¿‡åœ¨æ§åˆ¶å™¨çš„DRAMä¸­ç»´æŠ¤ä¸€ä¸ªhash tableæ¥å¯»å€ï¼Œå—åˆ°DRAMçš„å®¹é‡é™åˆ¶ï¼Œè¶…å‡ºå®¹é‡çš„éƒ¨åˆ†ä¼šæš‚æ—¶å­˜æ”¾åœ¨é—ªå­˜ä¸­ï¼Œå› æ­¤åœ¨å¯»å€æ—¶å¸¦æ¥äº†è®¿é—®é—ªå­˜çš„é¢å¤–å¼€é”€ï¼ŒåŒæ—¶å½“å‘ç”Ÿå“ˆå¸Œç¢°æ’æ—¶ï¼Œå¯èƒ½ä¼šæ“ä½œå¤šä¸ªé—ªå­˜ï¼Œé€ æˆäº†å¤§é‡ä¸å¯é¢„æµ‹çš„å¼€é”€&lt;/p&gt;
&lt;p&gt;å•çº¯ä½¿ç”¨LSMåšä¸ºæ›¿æ¢çš„è¯ï¼Œå¯ä»¥å‡å°‘DRAMçš„å­˜å‚¨ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›æ€§èƒ½é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°¾å»¶è¿Ÿï¼šå¾ˆå¤šLSM-treeä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥å¿«é€Ÿæ£€ç´¢ï¼Œå¯é æ€§å·®ï¼Œå­˜åœ¨å°¾å»¶è¿Ÿé—®é¢˜&lt;/li&gt;
&lt;li&gt;å†™æ”¾å¤§ï¼šç”±äºLSMå¯¹KVç´¢å¼•çš„æ’åºå’Œåˆå¹¶æ“ä½œï¼Œå¸¦æ¥äº†å¾ˆå¤šå¯¹é—ªå­˜é¢å¤–çš„è®¿é—®ï¼Œè¿˜å¢å¤§äº†FTLè¿›è¡ŒGCçš„è´Ÿæ‹…&lt;/li&gt;
&lt;li&gt;å¸ƒéš†è¿‡æ»¤å™¨çš„é‡å»ºå’ŒKVæ’åºï¼šæ¶ˆè€—äº†å¤§é‡çš„CPUèµ„æºï¼Œå¸¦æ¥I/Oæ€§èƒ½çš„å¤§å¹…ä¸‹é™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäºLSM-treeçš„KVå­˜å‚¨å¼•æ“-PinKï¼Œè§£å†³äº†ä¸Šè¿°ä¸‰ä¸ªé—®é¢˜ã€‚PinKä½¿ç”¨äº†å››ç§æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;PinKçš„æ ¸å¿ƒæ˜¯level pinningï¼Œå°†å›ºå®šåœ¨LSM-treeæœ€é¡¶å±‚çš„KVç´¢å¼•å›ºå®šåˆ°DRAMä¸­&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”±äºéƒ¨åˆ†levelå›ºå®šåœ¨DRAMä¸­ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è¿›è¡Œcompactionï¼Œæ— éœ€å ç”¨é—ªå­˜çš„I/Oï¼Œè¢«å›ºå®šçš„ç´¢å¼•é€šè¿‡ç”µå®¹è¿›è¡Œä¿æŠ¤ï¼Œå› æ­¤ä¹Ÿä¸éœ€è¦å®šæœŸè¿›è¡Œåˆ·æ–°ï¼Œè¿™é‡Œè¦æ³¨æ„ä½œè€…ä½¿ç”¨DRAMå®¹é‡å¾ˆå°ï¼Œä½¿ç”¨ç”µå®¹è¶³ä»¥ä¿è¯æŒä¹…åŒ–&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GCçš„ä¸»è¦I/Oå¼€é”€æ¥è‡ªå¯¹LSM-treeç´¢å¼•çš„æ›´æ–°ï¼ŒPinké€šè¿‡å»¶è¿ŸLSM-treeä¸­ç´¢å¼•æ›´æ–°åˆ°compactioné˜¶æ®µæ¥å‡å°‘GCçš„I/Oå¼€é”€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨SSDæ§åˆ¶å™¨å’ŒNANDèŠ¯ç‰‡ä¹‹é—´æ·»åŠ æ¯”è¾ƒå™¨ï¼ŒPinKåœ¨è¯»å–KVå¯¹è±¡æ—¶æ‰§è¡ŒKVæ’åºï¼Œå®Œå…¨æ¶ˆé™¤äº†compactionçš„CPUæˆæœ¬&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;0x02-bg&#34;&gt;0x02 Bg&lt;/h1&gt;
&lt;p&gt;äº†è§£ä¸€äº›æœ‰å…³NANDé—ªå­˜SSDã€KV-SSDã€Hash-based KV-SSDã€LSM-Tree-based KV-SSDçš„ç°çŠ¶ï¼Œå¹¶å¯¹Hashå’ŒLSM-treeè¿›è¡Œæ¯”è¾ƒ&lt;/p&gt;
&lt;p&gt;ä½œè€…å¯¹LSM-treeçš„è®¾è®¡ï¼ŒL0ä½äºDRAMä¸­ï¼Œå¹¶ä½œä¸ºwrite bufferï¼Œå…¶ä½™å„å±‚å­˜å‚¨åœ¨é—ªå­˜ä¸­&lt;/p&gt;
&lt;h1 id=&#34;0x03-design&#34;&gt;0x03 Design&lt;/h1&gt;
&lt;p&gt;Pinkæœ‰å››ä¸ªä¸»è¦çš„æ•°æ®ç»“æ„&lt;/p&gt;
&lt;p&gt;ä½äºDRAMä¸­çš„level listså’ŒSkiplist&lt;/p&gt;
&lt;p&gt;ä½äºé—ªå­˜ä¸­çš„meta segmentså’Œdata segments&lt;/p&gt;
&lt;p&gt;åœ¨LSM-tree KV æ–‡ä»¶ç³»ç»Ÿæ–¹é¢ï¼Œä½œè€…ä¸»è¦å‚è€ƒäº†&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/conference/fast16/technical-sessions/presentation/lu&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;WiscKey FAST&#39;16&lt;/a&gt;ï¼Œå–ä»£FTLè¿›è¡ŒGCã€ç´¢å¼•å’Œç£¨æŸå‡è¡¡&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221128145842322.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221128145842322&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;skiplist&#34;&gt;Skiplist&lt;/h2&gt;
&lt;p&gt;Skiplistä½œä¸ºLSM-treeä¸­çš„L0ï¼Œèµ·åˆ°ç±»ä¼¼write bufferçš„ä½œç”¨ï¼Œæš‚æ—¶ä¿å­˜KVå¯¹è±¡ï¼ŒSkiplistä¸­çš„å¯¹è±¡ä¸ºï¼š&lt;code&gt;&amp;lt;key size, key, value size, value&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å½“Skiplistæ»¡æ—¶ï¼Œä¼šå°†ç¼“å­˜çš„å¯¹è±¡ä»¥meta segmentå’Œdata segmentçš„å½¢å¼åˆ·æ–°åˆ°L1ä¸­ï¼Œåœ¨L1å’Œæ›´ä½çš„levelä¸­ï¼ŒKeyå’ŒValueå°†è¢«åˆ†ç¦»å­˜å‚¨åˆ°meta/data segmentä¸­ï¼Œdata segmentä¸­å­˜å‚¨valueã€keyå’Œkey sizeç”¨äºGC&lt;/p&gt;
&lt;h2 id=&#34;level-list&#34;&gt;Level list&lt;/h2&gt;
&lt;p&gt;ç”¨äºè·Ÿè¸ªé—ªå­˜ä¸­æ¯ä¸ªlevelçš„meta segment&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªlevel listæ˜¯ä¸€ä¸ªä¿å­˜å›ºå®šå¤§å°çš„æŒ‡é’ˆå¯¹çš„æ•°ç»„ï¼Œæ¯ä¸ªæŒ‡é’ˆ4Bï¼Œç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘meta segmentåœ¨é—ªå­˜ä¸­çš„ç‰©ç†åœ°å€ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆæŒ‡å‘meta segmentçš„start key&lt;/p&gt;
&lt;p&gt;meta segmentçš„start keyå•ç‹¬å­˜å‚¨åœ¨DRAMä¸­ï¼Œå¯ä»¥æ”¯æŒåŠ¨æ€å¤§å°çš„keyï¼ŒåŒæ—¶å¯ä»¥å®ç°åœ¨level listæŸ¥æ‰¾meta segmentæ—¶è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾&lt;/p&gt;
&lt;p&gt;å¦‚æœLSM-treeæœ‰5ä¸ªLevelï¼Œå³h=5ï¼Œé™¤äº†L0ä¹‹å¤–ï¼Œæ¯ä¸ªleveléƒ½ä¼šæœ‰ä¸€ä¸ªlevel list&lt;/p&gt;
&lt;p&gt;L0å’ŒLevel listé€šè¿‡ç”µå®¹æ¥ä¿æŠ¤ï¼ŒPinkä¸éœ€è¦ä½¿ç”¨æ—¥å¿—æ¥ç»´æŠ¤åŸå­æ€§å’Œæ•°æ®çš„æŒä¹…æ€§&lt;/p&gt;
&lt;h2 id=&#34;level-pinning&#34;&gt;Level Pinning&lt;/h2&gt;
&lt;p&gt;æ¶ˆé™¤å°¾å»¶è¿Ÿï¼Œå°†$top-k\ \  level(k&amp;lt;=h-1)$ çš„meta segmentä¿å­˜åœ¨DRAMä¸­ï¼Œå‡å°‘äº†readè¿‡ç¨‹çš„å°¾éƒ¨å»¶è¿Ÿ&lt;/p&gt;
&lt;p&gt;å½“å¤„ç†GETæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆåœ¨DRAMä¸­å¯¹Keyè¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“DRAMä¸­æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œå°†å¯¹å‰©ä½™çš„å‡ ä¸ªlevelåœ¨é—ªå­˜ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œåœ¨ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ—¶ï¼Œæœ€åçš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ä¸º$O(h-1)$ï¼Œè¯¥ç­–ç•¥ä¸‹å¯ä»¥ä¼˜åŒ–ä¸º$O(h-k-1)$&lt;/p&gt;
&lt;p&gt;å› æ­¤LSM-treeå„levelæŒ‰ç…§å‚æ•°Tè¿›è¡Œå¢é•¿ï¼Œå› æ­¤topkç­–ç•¥ä¸‹ç©ºé—´å ç”¨ä¸ä¼šè¿‡å¤§&lt;/p&gt;
&lt;p&gt;åŒæ—¶å¯ä»¥ç›´æ¥åœ¨DRAMä¸­è¿›è¡Œcompactionæ“ä½œï¼Œæ— éœ€å ç”¨é—ªå­˜I/Oï¼Œå› ä¸ºæœ‰ç”µå®¹çš„å­˜åœ¨ï¼Œæ— éœ€å®šæœŸåˆ·æ–°è„segmentåˆ°é—ªå­˜ä¸­&lt;/p&gt;
&lt;h2 id=&#34;optimizing-search-path&#34;&gt;Optimizing Search Path&lt;/h2&gt;
&lt;p&gt;åœ¨å¯¹Keyè¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒLSM-treeå°†å¯¹å„ä¸ªLevelè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221129190239823.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221129190239823&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æœ´ç´ çš„LSM-treeæœ€åçš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ä¸º$O(h^2\cdot log(T))$ï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨çš„æƒ…å†µä¸‹å¯ä»¥æ›´ä½&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;PinKé€šè¿‡prefixæ¥å‡å°‘å­—ç¬¦ä¸²æ¯”è¾ƒçš„å¼€é”€ï¼Œå¹¶ä¸”å…ˆæ¯”è¾ƒkeyçš„å‰4ä¸ªå­—èŠ‚ï¼Œå¦‚æœåŒ¹é…æˆåŠŸæ‰ä¼šæ¯”è¾ƒåé¢çš„éƒ¨åˆ†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨level listä¸Šæ¯ä¸ªè®°å½•å¼•å…¥ä¸€ä¸ª4å­—èŠ‚çš„èŒƒå›´æŒ‡é’ˆï¼Œå®ç°å¤šçº§cascadingèŒƒå›´æŸ¥æ‰¾&lt;/p&gt;
&lt;p&gt;æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€çº§æœ‰æœ€å¤§çš„start keyåŒæ—¶key å°äºç­‰äºä¸Šä¸€çº§ä¸­çš„è®°å½•ï¼Œåœ¨ä¸€çº§ä¸€çº§çš„ä¼ é€’ä¸­ä¸æ–­å‡å°‘æœç´¢çš„èŒƒå›´ï¼Œå¦‚ä¸Šå›¾bæ‰€ç¤ºï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º$O(h\cdot log(T))$&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;speeding-up-compaction&#34;&gt;Speeding up Compaction&lt;/h2&gt;
&lt;p&gt;åœ¨compactioné˜¶æ®µï¼Œå¼•å…¥ä¸€ä¸ªç¡¬ä»¶åŠ é€Ÿå™¨ï¼Œä½äºé—ªå­˜å’Œæ•°æ®ä¸»æ€»çº¿ä¹‹é—´ï¼Œå¯ä»¥æ–¹ä¾¿çš„åˆå¹¶ä¸¤ä¸ªé—ªå­˜ä¸­çš„level&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221129225719057.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221129225719057&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å·¥ä½œæµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;PinKå‘åŠ é€Ÿå™¨å‘èµ·compactionè¯·æ±‚ï¼Œè¯·æ±‚å‚æ•°ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸¤ä¸ªlevelçš„meta segmentçš„é—ªå­˜åœ°å€$(L_i,L_{i+1})$&lt;/li&gt;
&lt;li&gt;å›å†™çš„é—ªå­˜åœ°å€$L_{i+1}$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘å¤šä¸ªé—ªå­˜å‘èµ·è¯»å–è¯·æ±‚ï¼ŒåŒæ—¶è¿˜è¦å¯¹ä¸åŒchannelè¿”å›çš„æ•°æ®è¿›è¡Œé‡æ–°æ’åºï¼Œåºåˆ—åŒ–meta segment&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸Šå›¾ä¸­ç°è‰²çš„æ¯”è¾ƒå™¨ï¼Œä¼šä¸æ–­çš„è·å–ä¸¤ä¸ªlevelä¸­çš„æ•°æ®ï¼Œè¾“å‡ºkeyè¾ƒå°çš„é‚£ä¸€ä¸ª&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äºæ— æ•ˆçš„keyï¼Œå°†é€šçŸ¥PinKè¿›è¡ŒGC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¾“å‡ºçš„æ’åºåç»“æœå°†ä¿å­˜åœ¨write bufferä¸­è¿›è¡Œå›å†™&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ“ä½œç»“æŸåï¼ŒåŠ é€Ÿå™¨é€šçŸ¥PinKå½“å‰$L_{i+1}$ä½¿ç”¨çš„é—ªå­˜é¡µçš„æ•°é‡ï¼Œä¾¿äºå’Œæ­¤å‰æä¾›çš„è¿›è¡Œæ¯”è¾ƒï¼Œç”¨äºGC&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;PinKåœ¨DRAMçš„pinned levelä¸­ä¹Ÿä½¿ç”¨äº†ç±»ä¼¼çš„åŠ é€Ÿå™¨ï¼ŒåŸºäºDMA&lt;/p&gt;
&lt;h2 id=&#34;optimizing-gc&#34;&gt;Optimizing GC&lt;/h2&gt;
&lt;p&gt;éœ€è¦é’ˆå¯¹meta/data segmentåˆ†åˆ«åˆ¶å®šGCç­–ç•¥&lt;/p&gt;
&lt;h2 id=&#34;durability--scalability&#34;&gt;Durability &amp;amp;&amp;amp; Scalability&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ç”µå®¹æ¥ä¿æŠ¤æ•´ä¸ªDRAMï¼Œå¯¹äºæ¯”è¾ƒä½ç«¯çš„SSDï¼Œæ²¡æœ‰è¶³å¤Ÿçš„ç”µå®¹æ¥ç»´æŒï¼Œåªèƒ½ç»§ç»­ä½¿ç”¨å®šæœŸå†™å›åˆ°é—ªå­˜çš„æœºåˆ¶ï¼ˆè¦ä¿æŠ¤level listsï¼Œpinned levelï¼ŒL0ï¼‰ï¼ŒåŒæ—¶è¿˜è¦è®°å½•æ—¥å¿—ï¼Œç”±äºLSM-treeçš„ç‰¹æ€§ï¼Œè¯¥æ“ä½œæ¯”åŸºäºhashçš„KV-SSDå¼€é”€ç•¥å°&lt;/p&gt;
&lt;h1 id=&#34;conclusion--thinking&#34;&gt;Conclusion &amp;amp;&amp;amp; Thinking&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ä¹‹å‰é˜…è¯»çš„KV-SSDç›¸æ¯”ï¼ŒPinKå°†éƒ¨åˆ†Levelå›ºå®šåˆ°DRAMä¸­ï¼Œä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†å»¶è¿Ÿ&lt;/li&gt;
&lt;li&gt;PinKå¼ƒç”¨äº†å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä½¿ç”¨ä¸€ç§å±‚çº§ç¼©å°æŸ¥æ‰¾èŒƒå›´çš„æ–¹å¼ï¼Œä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡&lt;/li&gt;
&lt;li&gt;å¼•å…¥äº†ä¸€ä¸ªåŠ é€Ÿå™¨æ¥å‡å°‘LSM-tree compactionæ“ä½œçš„å¼€é”€&lt;/li&gt;
&lt;li&gt;è®ºæ–‡éƒ½æé«˜äº†å¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨æ—¶é‡å»ºçš„å¼€é”€ç•¥é«˜ï¼Œæ˜¯å¦å¯ä»¥è€ƒè™‘ä½¿ç”¨å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼Œè¿™éƒ¨åˆ†ä¸»è¦ç€çœ¼äºLSM-treeçš„ä¼˜åŒ–ï¼Œå¯èƒ½å¹¶ä¸æ˜¯çœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆ&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>[FAST&#39;18] FEMUé—ªå­˜æ¨¡æ‹Ÿç³»ç»Ÿä»‹ç»</title>
        <link>https://blog.ipandai.club/p/fast18-femu%E9%97%AA%E5%AD%98%E6%A8%A1%E6%8B%9F%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D/</link>
        <pubDate>Wed, 23 Nov 2022 19:44:51 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/fast18-femu%E9%97%AA%E5%AD%98%E6%A8%A1%E6%8B%9F%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D/</guid>
        <description>&lt;h1 id=&#34;0x00-everyday-english&#34;&gt;0x00 Everyday English&lt;/h1&gt;
&lt;p&gt;LOC == line of code&lt;/p&gt;
&lt;p&gt;Guest OS == VM&lt;/p&gt;
&lt;p&gt;intricacies é”™ç»¼å¤æ‚&lt;/p&gt;
&lt;p&gt;drop-in replacement é€šå¸¸è¡¨ç¤ºç›´æ¥æ›¿æ¢ï¼Œå¹¶ä¸”æ›¿æ¢åä¸ä¼šäº§ç”Ÿå½±å“ï¼Œç”šè‡³ä¼šæœ‰ä¸€äº›æ–°çš„åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;leverage å¯¹&amp;hellip;äº§ç”Ÿå½±å“ï¼›ä¸€èˆ¬ä¹Ÿå¯ä»¥ç†è§£ä¸º å……åˆ†åˆ©ç”¨ï¼Œæ¯”utilizeè¯­æ°”å¼ºä¸€äº›&lt;/p&gt;
&lt;h1 id=&#34;0x01-intro&#34;&gt;0x01 Intro&lt;/h1&gt;
&lt;p&gt;FEMUæ˜¯ç”¨äºè½¯ç¡¬ä»¶å…¨æ ˆçš„SSDç ”ç©¶æ¨¡æ‹Ÿå¹³å°ï¼ŒåŸºäºQEMUå¼€å‘ï¼Œç›¸æ¯”äºOpenChannel SSDå®ç°äº†è¾ƒé«˜çš„å‡†ç¡®ç‡&lt;/p&gt;
&lt;p&gt;æ­¤å‰çš„SSDç ”ç©¶æ¨¡æ‹Ÿå·¥å…·å¤§å¤šä¸å¼€æºï¼Œå¯æ‰©å±•æ€§å·®ï¼Œç ”ç©¶æˆæœ¬é«˜ï¼Œå¹¶ä¸”å·²ç»è¿‡æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;FEMUé¦–å…ˆå¼€æºå…è´¹ï¼Œå¹¶ä¸”æœ‰è¾ƒé«˜çš„å‡†ç¡®åº¦ï¼ŒåŒæ—¶å¯ä¼¸ç¼©æ€§å¼ºï¼Œæœ€å¤§æ”¯æŒ32 I/O çº¿ç¨‹å¹¶æ¨¡æ‹Ÿ32ä¸ªå¹¶è¡Œçš„SSD channels/chipsï¼Œå¯æ‰©å±•æ€§é«˜ï¼Œå¾—ç›ŠäºåŸºäºQEMUçš„ä¼˜ç‚¹ï¼ŒFEMUå¯ä»¥æ”¯æŒé’ˆå¯¹äºSSDçš„ç ”ç©¶ï¼Œé’ˆå¯¹os å†…æ ¸çš„ç ”ç©¶ï¼Œæˆ–è€…åŸºäºoså†…æ ¸å’ŒSSDçš„ç ”ç©¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/vtess/FEMU&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;FEMU GitHub ä»“åº“åœ°å€ï¼š https://github.com/vtess/FEMU&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;0x02-femu&#34;&gt;0x02 FEMU&lt;/h1&gt;
&lt;p&gt;FEMUæœ¬èº«ä»…æœ‰3929è¡Œä»£ç ï¼ŒåŸºäºQEMU v2.9ï¼ŒFEMUè¿‘äº›å¹´çš„æ›´æ–°ä¹Ÿä¸»è¦ä¸ºä¿®å¤ä¸€äº›bugã€åˆå¹¶QEMUçš„ç‰ˆæœ¬ï¼Œå°†ä¼ ç»Ÿçš„App+å®¿ä¸»æœº+SSDçš„ç ”ç©¶æ¶æ„è½¬å˜ä¸ºäº†App+è™šæ‹Ÿæœº+FEMUã€‚&lt;/p&gt;
&lt;p&gt;FEMUä¸­çš„FTLæ¨¡å—ã€GCã€I/Oè°ƒåº¦ä¸»è¦åŸºäºVSSIM&lt;a class=&#34;link&#34; href=&#34;https://ieeexplore.ieee.org/document/6558443&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;VSSIM: Virtual machine based SSD simulator | IEEE Conference Publication | IEEE Xplore&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¯ä¼¸ç¼©æ€§&#34;&gt;å¯ä¼¸ç¼©æ€§&lt;/h2&gt;
&lt;p&gt;å¯¹äºå½“å‰çš„é«˜å¹¶è¡ŒåŒ–çš„SSDï¼Œå¯ä¼¸ç¼©æ€§å¯¹æ¨¡æ‹Ÿé—ªå­˜è‡³å…³é‡è¦ã€‚é€šè¿‡virtioå’Œdataplaneæ¥å£è¿›è¡Œæ¨¡æ‹Ÿï¼Œä¸èƒ½è¾¾åˆ°è¶³å¤Ÿçš„å¯ä¼¸ç¼©æ€§ï¼ŒåŒæ—¶å­˜åœ¨è¾ƒé«˜çš„å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;åœ¨QEMUä¸­å­˜åœ¨çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜æ˜¯&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;QEMUä½¿ç”¨ä¼ ç»Ÿçš„trap-and-emulateæ–¹æ³•è¿›è¡ŒI/Oæ¨¡æ‹Ÿï¼Œè™šæ‹Ÿæœºçš„NVMeé©±åŠ¨é€šè¿‡doorbellå¯„å­˜å™¨å‘ŠçŸ¥QEMUæ¨¡æ‹Ÿçš„I/Oè®¾å¤‡ã€‚è¯¥doorbellå°†å¼•èµ·å¼€é”€è¾ƒå¤§çš„VM-exitï¼ŒåŒæ—¶åœ¨I/Oå®Œæˆé˜¶æ®µï¼Œä¹Ÿä¼šäº§ç”Ÿè¯¥è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;QEMUä½¿ç”¨å¼‚æ­¥I/Oæ¥å®ç°read/writeï¼ŒAIOçš„æ‰§è¡Œéœ€è¦é¿å…QEMUçš„I/Oè¢«é˜»å¡ï¼Œå½“åœ¨å­˜å‚¨åç«¯æ˜¯åŸºäºRAMçš„é•œåƒæ—¶ï¼ŒAIOäº§ç”Ÿçš„è´Ÿè½½å°¤ä¸ºæ˜æ˜¾&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨åŸºäºè½®è¯¢çš„æ–¹æ¡ˆï¼Œå¹¶ä¸”ç¦ç”¨äº†è™šæ‹Ÿæœºçš„doorbellå†™æ“ä½œï¼Œé€šè¿‡ä¸€ä¸ªçº¿ç¨‹æ¥è½®è¯¢å­˜å‚¨è®¾å¤‡é˜Ÿåˆ—çš„çŠ¶æ€ï¼Œé¿å…äº†VM-exit&lt;/li&gt;
&lt;li&gt;ä¸ä½¿ç”¨è™šæ‹Ÿçš„é•œåƒæ–‡ä»¶ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ä»¥RAMä¸ºåç«¯çš„å­˜å‚¨æ¨¡æ‹Ÿï¼Œå®šä¹‰åœ¨QEMUçš„å †ç©ºé—´ä¸­ï¼Œå°†QEMUä¸­DMAä¿®æ”¹ä¸ºä»QEMU heapä¸­è¯»å†™æ•°æ®ï¼Œè¿™ä¸ªæ”¹å˜å¯¹VMæ¥è¯´æ˜¯é€æ˜çš„&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å‡†ç¡®åº¦&#34;&gt;å‡†ç¡®åº¦&lt;/h2&gt;
&lt;h3 id=&#34;å»¶è¿Ÿæ¨¡æ‹Ÿ&#34;&gt;å»¶è¿Ÿæ¨¡æ‹Ÿ&lt;/h3&gt;
&lt;p&gt;å½“I/Oè¯·æ±‚åˆ°è¾¾åï¼ŒFEMUå‘èµ·DMA R/Wï¼Œå¹¶ç”¨æ¨¡æ‹Ÿçš„å®Œæˆæ—¶é—´$(T_{endio})$å¯¹I/Oè¯·æ±‚è¿›è¡Œæ ‡è®°ï¼Œæ·»åŠ åˆ°endio queueä¸­ï¼Œé˜Ÿåˆ—æŒ‰ç…§I/Oçš„å®Œæˆæ—¶é—´è¿›è¡Œæ’åºã€‚ä¸€æ—¦I/Oè¯·æ±‚çš„é¢„ä¼°å®Œæˆæ—¶é—´å¤§äºå½“å‰æ—¶é—´ï¼Œä¼šç”±ä¸“é—¨çš„end I/O å¤„ç†çº¿ç¨‹è´Ÿè´£å°†å…¶é€šè¿‡ä¸­æ–­å‘é€ç»™è™šæ‹Ÿæœºã€‚&lt;/p&gt;
&lt;p&gt;FEMUå¯¹æ¯ä¸ªI/Oè¯·æ±‚éƒ½è®¾ç½®äº†&lt;code&gt;+50us&lt;/code&gt;çš„å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;h3 id=&#34;å»¶è¿Ÿæ¨¡å‹&#34;&gt;å»¶è¿Ÿæ¨¡å‹&lt;/h3&gt;
&lt;p&gt;å¯¹äº$T_{endio}$çš„è®¡ç®—ï¼š&lt;/p&gt;
&lt;p&gt;æ ‡è®°æ¯ä¸ªplaneå’Œchannelçš„ä¸‹ä¸€æ¬¡ç©ºé—²æ—¶é—´$T_{free}$ï¼Œ&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸€ä¸ªpageå†™å…¥éœ€è¦channel #1 å’Œplane #2æ¥æ‰§è¡Œï¼Œé‚£ä¹ˆchannelçš„ä¸‹ä¸€æ¬¡ç©ºé—²æ—¶é—´å°†ä¸º$T_{freeOfChannel1}=T_{now}+T_{transfer}$ï¼Œå…¶ä¸­çš„$T_{transfer}$ä¸ºä¸€ä¸ªå¯é…ç½®çš„pageåœ¨channelä¸­çš„ä¼ è¾“æ—¶é—´ï¼Œplaneçš„ä¸‹ä¸€æ¬¡ç©ºé—²æ—¶é—´åˆ™ä¸º$T_{freeOfPlane2}+=T_{write}$ï¼Œå…¶ä¸­$T_{write}$æ˜¯å¯é…ç½®çš„NAND pageå†™å…¥æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤è¯¥å†™å…¥æ“ä½œçš„$T_{endio}=T_{freeOfPlane2}$ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªå†™å…¥è¿‡ç¨‹æ­£åœ¨æ‰§è¡Œæ—¶ï¼Œå¯¹äºæ–°åˆ°è¾¾çš„page readï¼Œå°†ä»¤$T_{freeOfPlane2} += T_{read}$ï¼Œå…¶ä¸­$T_{read}$ä¸ºå¯é…ç½®çš„å‚æ•°NAND pageè¯»å–æ—¶é—´ï¼Œå¹¶ä¸”$T_{freeOf Channel1} += T_{transfer}$ï¼Œ&lt;/p&gt;
&lt;p&gt;å› æ­¤è¯¥page writeçš„$T_{endio}=T_{freeOf Channel1}$ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ™®é€šçš„SSD planeåªæœ‰ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå•ä¸ªplaneä¸èƒ½å®ç°I/Oå¹¶è¡Œï¼Œæ‰€ä»¥è¯¥æ¨¡å‹å¯ä»¥æ»¡è¶³å®é™…è¦æ±‚&lt;/p&gt;
&lt;p&gt;è¯¥æ¨¡å‹å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ª$T_{erase}$æ¥æ¨¡æ‹ŸGCçš„å»¶è¿Ÿ&lt;/p&gt;
&lt;h3 id=&#34;openchannelå»¶è¿Ÿæ¨¡å‹&#34;&gt;OpenChannelå»¶è¿Ÿæ¨¡å‹&lt;/h3&gt;
&lt;p&gt;OpenChannel SSDï¼ŒOCä½¿ç”¨åŒå¯„å­˜å™¨çš„planeï¼Œdata registerå’Œcache registerï¼Œå› æ­¤åœ¨ä¸€ä¸ªplaneä¸­å¯¹ä¸€ä¸ªNAND pageçš„read/writeå¯ä»¥å¹¶è¡Œï¼Œå› æ­¤æ•ˆç‡é«˜ï¼Œä¸‹å›¾ç›´è§‚çš„å±•ç¤ºäº†äºŒè€…çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221125195232028.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221125195232028&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;OCæœ‰ç€ä¸ç»Ÿä¸€çš„å»¶è¿Ÿæ¨¡å‹ï¼Œæ˜ å°„åˆ°MLCé¢—ç²’cellé«˜ä½bitsçš„pageæœ‰ç€æ›´é«˜çš„å»¶è¿Ÿï¼Œå®é™…ä¸Šä¸€ä¸ªNANDä¸­çš„512ä¸ªpageä»¥ä¸€ç§ç‰¹åˆ«çš„æ–¹å¼è¿›è¡Œç»„ç»‡ï¼Œ&lt;code&gt;LLLLLLuLLuLLuuLLuu...(repeate of LLuu)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;FEMUå¯¹OCçš„å®ç°æ–¹å¼è¿›è¡Œäº†æ•´åˆï¼Œå®ç°äº†è¾ƒå¥½çš„æ•ˆæœ&lt;/p&gt;
&lt;h2 id=&#34;å…¶ä»–åŠŸèƒ½&#34;&gt;å…¶ä»–åŠŸèƒ½&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;FTLå’ŒGCï¼šé»˜è®¤ä½¿ç”¨åŠ¨æ€æ˜ å°„FTLï¼Œchannelé˜»å¡çš„GCã€‚åŒæ—¶è¿˜æ”¯æŒchannelã€controllerã€planeå±‚é¢è¿›è¡Œé˜»å¡çš„GCç­–ç•¥&lt;/li&gt;
&lt;li&gt;ç™½ç›’æ¨¡å¼/é»‘ç›’æ¨¡å¼&lt;/li&gt;
&lt;li&gt;å¤šè®¾å¤‡æ”¯æŒï¼šæ”¯æŒè™šæ‹Ÿæœºè¿æ¥å¤šä¸ªSSDï¼Œæ¯ä¸ªSSDåŒ…å«ç‹¬ç«‹çš„NVMeå®ä¾‹å’ŒFTL&lt;/li&gt;
&lt;li&gt;æ‰©å±•NVMeæŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;Page-Levelå»¶è¿Ÿå¯è‡ªå®šä¹‰ï¼šæ¨¡æ‹Ÿé—ªå­˜èŠ¯ç‰‡çš„è‰¯å“ç‡å¸¦æ¥çš„å»¶è¿Ÿä¸ç»Ÿä¸€æ€§&lt;/li&gt;
&lt;li&gt;åˆ†å¸ƒå¼SSDï¼šè¯„ä¼°ç±»ä¼¼Hadoopçš„åº”ç”¨&lt;/li&gt;
&lt;li&gt;Page-Levelæ•…éšœæ³¨å…¥ï¼šè¿›è¡Œé—ªå­˜å¯é æ€§ç ”ç©¶&lt;/li&gt;
&lt;li&gt;ä¸€äº›é™åˆ¶ï¼šFEMUåŸºäºDRAMï¼Œä¸èƒ½æ¨¡æ‹Ÿå®¹é‡å¤ªå¤§çš„SSDï¼Œå¿…é¡»æ‰‹åŠ¨æ¨¡æ‹ŸSSDå´©æºƒçš„æƒ…æ™¯ï¼Œå› ä¸ºDRAMé‡å¯å°†ä¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>[OSDI&#39;21] Modernizing File System through In-Storage Indexing</title>
        <link>https://blog.ipandai.club/p/osdi21-modernizing-file-system-through-in-storage-indexing/</link>
        <pubDate>Sat, 29 Oct 2022 16:48:32 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/osdi21-modernizing-file-system-through-in-storage-indexing/</guid>
        <description>&lt;h1 id=&#34;questions&#34;&gt;Questions&lt;/h1&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³éƒ¨åˆ†éœ€è¦å†æ€è€ƒå’Œæ¢³ç†ä¸‹ï¼Œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸ºä»€ä¹ˆé‡‡ç”¨ KV SSD æ›¿ä»£ä¼ ç»Ÿ block SSD èƒ½å¤Ÿè§£å†³ä¸Šè¿°é—®é¢˜ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å…¶ä¸­ï¼Œåˆ©ç”¨äº† KV SSD çš„ä»€ä¹ˆç‰¹æ€§ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¯¹æ–‡ä»¶ç³»ç»Ÿå“ªäº›åœ°æ–¹åšäº†ä»€ä¹ˆä»¥ä¼˜åŒ–ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è®ºæ–‡è¯•å›¾è§£å†³çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;éšç€å­˜å‚¨è®¾å¤‡çš„ä¸æ–­å‘å±•ï¼Œå­˜å‚¨è®¾å¤‡çš„æ€§èƒ½è¶Šæ¥è¶Šé«˜ï¼Œä½†å½“å‰æ“ä½œç³»ç»Ÿå†…æ ¸çš„æ–‡ä»¶ç³»ç»Ÿåœ¨ä¸€äº›æ“ä½œä¸Šå¹¶ä¸èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¦‚ä»Šå­˜å‚¨è®¾å¤‡çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿåœ¨æ‰§è¡Œæ•°æ®å†™å…¥æ—¶ï¼Œéœ€è¦æ‰§è¡Œå¤§é‡æ“ä½œç»´æŠ¤å…ƒæ•°æ®ã€è¿›è¡Œç¡¬ç›˜çš„ç©ºé—´ç®¡ç†ã€ç»´æŠ¤æ–‡ä»¶ç³»ç»Ÿçš„ä¸€è‡´æ€§ï¼Œå·¥ä½œé‡å¤§ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³ï¼š&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨Key-Valueå­˜å‚¨æ¥å£å–ä»£ä¼ ç»Ÿçš„å¿«è®¾å¤‡æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“å®ç°ï¼š&lt;/p&gt;
&lt;p&gt;æå‡ºKevinï¼Œåˆ†ä¸ºKevin=KevinFS + KevinSSD&lt;/p&gt;
&lt;p&gt;KevinFS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»´æŠ¤æ–‡ä»¶å’Œç›®å½•åˆ°KVå¯¹è±¡çš„æ˜ å°„å…³ç³»&lt;/li&gt;
&lt;li&gt;å°†POSIXç³»ç»Ÿè°ƒç”¨è½¬è¯‘æˆKVæ“ä½œæŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;ä¿è¯KV-SSDçš„ä¸€è‡´æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;KevinSSD&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å­˜å‚¨è®¾å¤‡ä¸­ç´¢å¼•KVå¯¹è±¡&lt;/li&gt;
&lt;li&gt;å¯¹å¤šä¸ªKVå¯¹è±¡æä¾›äº‹åŠ¡æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;0x00-intro&#34;&gt;0x00 Intro&lt;/h1&gt;
&lt;p&gt;Keviné¿å…äº†å¤§é‡å…ƒæ•°æ®çš„ç»´æŠ¤å¸¦æ¥çš„I/Oæ”¾å¤§&lt;/p&gt;
&lt;p&gt;ä¸éœ€è¦æ—¥å¿—å³å¯å®Œæˆå´©æºƒä¸€è‡´æ€§çš„ç»´æŠ¤&lt;/p&gt;
&lt;p&gt;å¯ä»¥æŠµå¾¡æ–‡ä»¶åˆ†æ®µåé€ æˆçš„æ€§èƒ½ä¸‹é™&lt;/p&gt;
&lt;p&gt;å­˜å‚¨çš„æ–‡ä»¶å—é€šè¿‡LSMè¿›è¡Œåˆ†éƒ¨æ’åºå’Œç´¢å¼•&lt;/p&gt;
&lt;h1 id=&#34;0x01-bg--related-work&#34;&gt;0x01 BG &amp;amp;&amp;amp; Related Work&lt;/h1&gt;
&lt;h2 id=&#34;ä¼ ç»Ÿå—è®¾å¤‡&#34;&gt;ä¼ ç»Ÿå—è®¾å¤‡&lt;/h2&gt;
&lt;p&gt;æä¾›å—ç²’åº¦ï¼ˆ512B or 4KBï¼‰çš„è®¿é—®&lt;/p&gt;
&lt;p&gt;HDDé€šè¿‡ç»´æŠ¤ä¸€ä¸ªé—´æ¥è¡¨æ¥å¤„ç†åå—&lt;/p&gt;
&lt;p&gt;åŸºäºé—ªå­˜çš„SSDé€šè¿‡FTLæ¥ç»´æŠ¤é€»è¾‘å—åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„ç´¢å¼•è¡¨ï¼Œä»¥ä¾¿åœ¨å¼‚åœ°æ›´æ–°çš„NANDä¸Šæ¨¡æ‹Ÿå¯é‡å†™ä»‹è´¨å¹¶ä¸”æ’é™¤åå—ã€‚&lt;/p&gt;
&lt;p&gt;ç°æœ‰ç ”ç©¶ç¼“è§£äº†I/Oè°ƒåº¦ã€æ–‡ä»¶ç¢ç‰‡åŒ–ã€æ—¥å¿—ç›¸å…³é—®é¢˜ï¼Œæ²¡èƒ½æ¶ˆé™¤å…ƒæ•°æ®çš„ä¿®æ”¹å¸¦æ¥çš„I/Oæµé‡&lt;/p&gt;
&lt;p&gt;DevFSå®ç°äº†åœ¨å­˜å‚¨è®¾å¤‡å†…éƒ¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œç›´æ¥å°†æ¥å£æš´éœ²ç»™åº”ç”¨ï¼Œè°ƒç”¨æ—¶ä¸ç”¨å‘ç”ŸTrapï¼Œå¯¹äºå…ƒæ•°æ®çš„ç»´æŠ¤éƒ½åœ¨å­˜å‚¨è®¾å¤‡ç«¯æ‰§è¡Œï¼Œç§»é™¤äº†I/O æ ˆå‡å°‘äº†é€šä¿¡æ¥å£çš„å¼€é”€ã€‚ç¼ºç‚¹æ˜¯éœ€è¦å¤§é‡çš„DRAMå’Œå¤šæ ¸å¿ƒçš„CPUã€èƒ½æä¾›çš„åŠŸèƒ½æœ‰é™ï¼Œè¿˜é™åˆ¶äº†å¿«ç…§ã€é‡å¤æ•°æ®åˆ é™¤ç­‰æ–‡ä»¶ç³»ç»Ÿé«˜çº§åŠŸèƒ½çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;KVå­˜å‚¨å¯ä»¥é«˜æ•ˆå¤„ç†å…ƒæ•°æ®å’Œå°æ–‡ä»¶çš„å†™å…¥&lt;/p&gt;
&lt;h2 id=&#34;lsm-tree&#34;&gt;LSM-Tree&lt;/h2&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221102145019013.png&#34; alt=&#34;image-20221102145019013&#34; style=&#34;zoom:70%;&#34; /&gt;
&lt;p&gt;LSM Treeæœ‰å¤šçº§ï¼ŒåŒ…æ‹¬$L_1,L_2,&amp;hellip;,L_{h-1},L_{h}$ï¼Œhæ˜¯æ ‘çš„é«˜åº¦ï¼Œå¯¹äºå„çº§çš„å¤§å°æœ‰å¦‚ä¸‹å…³ç³»ï¼Œ$Size(L_{i+1})&amp;gt;=T*Size(L_i)$&lt;/p&gt;
&lt;p&gt;æ¯å±‚éƒ½æœ‰æŒ‰Keyæ’åºçš„å”¯ä¸€KVå¯¹è±¡ã€‚å„å±‚ä¹‹é—´çš„KeyèŒƒå›´å¯èƒ½ä¼šå‡ºç°é‡å ã€‚&lt;/p&gt;
&lt;p&gt;KVå¯¹è±¡é¦–å…ˆå†™å…¥DRAMä¸­çš„Memtableï¼Œå½“Memtableä¸ä¸ºç©ºæ—¶ï¼Œç¼“å­˜çš„KVå¯¹è±¡å°†åˆ·æ–°åˆ°L1ä¸­è¿›è¡ŒæŒä¹…åŒ–ï¼Œå½“L1ä¸ä¸ºç©ºæ—¶ï¼ŒKVå¯¹è±¡åˆ·æ–°åˆ°L2ä¸­ï¼Œä¾æ­¤ç±»æ¨ã€‚åœ¨åˆ·æ–°è¿‡ç¨‹ä¸­ä¼šæ‰§è¡Œå‹ç¼©æ“ä½œæ¥å¯¹ä¸¤å±‚ä¹‹é—´çš„KVå¯¹è±¡è¿›è¡Œåˆå¹¶å’Œæ’åºï¼Œåœ¨æ’åºåå†™å›ç£ç›˜ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ”¹å–„å‹ç¼©æ“ä½œçš„I/Oå¼€é”€ï¼Œå¯ä»¥å°†æ‰€æœ‰çš„valueå­˜å‚¨åœ¨value logä¸­ï¼Œåœ¨LSM treeä¸­åªä¿å­˜valueæŒ‡é’ˆï¼Œå­˜å‚¨&lt;code&gt;&amp;lt;key, value pointer&amp;gt;&lt;/code&gt;å½¢å¼ã€‚å¯¹äºå¤±æ•ˆçš„valueè¦è€ƒè™‘åƒåœ¾å›æ”¶é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¯¹KVå¯¹è±¡è¿›è¡Œæ£€ç´¢æ—¶ï¼Œå¯èƒ½éœ€è¦åœ¨å¤šçº§è¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“åœ¨Liä¸åŒ¹é…æ—¶ï¼ŒæŸ¥æ‰¾Li+1ã€‚ä¸ºäº†å‡å°‘å¤šçº§æŸ¥æ‰¾çš„è¯»å–ï¼Œå¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨è¿›è¡Œä¼˜åŒ–ï¼Œå½“æ£€ç´¢åˆ°ç›®æ ‡KVå¯¹è±¡æ—¶ï¼ŒLSM treeå°†ä¼šè¿”å›ç›¸åº”çš„valueï¼ŒKVåˆ†ç¦»å­˜å‚¨çš„æƒ…å†µä¸‹ï¼Œå°†ä¼šé¢å¤–å»è¯»ä¸€æ¬¡value logã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x02-architecture&#34;&gt;0x02 Architecture&lt;/h1&gt;
&lt;p&gt;KEVINåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†&lt;/p&gt;
&lt;p&gt;KEVINFSï¼šç»´æŠ¤æ–‡ä»¶ã€ç›®å½•åˆ°KVå¯¹è±¡æ˜ å°„çš„æ–‡ä»¶ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;KEVINSSDï¼šç´¢å¼•KVå¯¹è±¡åˆ°é—ªå­˜çš„LSM-tree&lt;/p&gt;
&lt;h2 id=&#34;kv-command&#34;&gt;KV Command&lt;/h2&gt;
&lt;p&gt;æ”¯æŒå¤šç§KVæŒ‡ä»¤ï¼ŒåŒæ—¶æ”¯æŒäº‹åŠ¡&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221102154423353.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221102154423353&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä½œè€…å°†Keyé™åˆ¶ä¸º256Bï¼Œvalueå¤§å°æ²¡æœ‰é™åˆ¶&lt;/p&gt;
&lt;h2 id=&#34;æ–‡ä»¶å’Œç›®å½•çš„æ˜ å°„&#34;&gt;æ–‡ä»¶å’Œç›®å½•çš„æ˜ å°„&lt;/h2&gt;
&lt;p&gt;KevinFSåªä½¿ç”¨ä¸‰ä¸ªç±»å‹çš„KVå¯¹è±¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;$superblock$ï¼šä¿å­˜æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼Œå¤§å°128B&lt;/li&gt;
&lt;li&gt;$meta$ï¼šä¿å­˜æ–‡ä»¶ã€ç›®å½•çš„å…ƒæ•°æ®ï¼Œå¤§å°256B&lt;/li&gt;
&lt;li&gt;$data$ï¼šä¿å­˜æ–‡ä»¶æ•°æ®ï¼Œunlimitedï¼Œä¸è¶…è¿‡æ–‡ä»¶å¤§å°&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºç›®å½•çš„éå†é€šè¿‡ITERATE&lt;/p&gt;
&lt;p&gt;Keyçš„å‘½åéµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;metaå¯¹è±¡çš„keyç»„æˆï¼š
&lt;ul&gt;
&lt;li&gt;å‰ç¼€&lt;code&gt;m:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;çˆ¶ç›®å½•çš„inode number&lt;/li&gt;
&lt;li&gt;åˆ†éš”ç¬¦&lt;code&gt;:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶/ç›®å½•å&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;dataå¯¹è±¡çš„keyç»„æˆï¼š
&lt;ul&gt;
&lt;li&gt;å‰ç¼€&lt;code&gt;d:&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶çš„inode number&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Keyå‘½åè§„èŒƒå‚è€ƒäº†å…¶ä»–è®ºæ–‡ï¼ˆKai Ren and Garth Gibson. TABLEFS: Enhancing Metadata Efficiency in the Local File System. In Proceedings of the USENIX Annual Technical Conference, pages 145â€“156, 2013.ï¼‰ï¼Œæœ¬ç¯‡æ–‡ç« å°†å…¶æ‰©å±•åˆ°äº†å­˜å‚¨è®¾å¤‡å±‚é¢&lt;/p&gt;
&lt;p&gt;KevinFSæ²¡æœ‰å®ç°dentryï¼Œå¦‚æœéœ€è¦è®¿é—®ä¸€ä¸ªç›®å½•å†…çš„æ‰€æœ‰é¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;ITERATE(m:50:, 2)&lt;/code&gt;ï¼Œæ¥è·å–ä¸¤ä¸ªçˆ¶ç›®å½•inodeä¸º50ï¼ˆå‰ç¼€åŒ¹é…ç»™å®šçš„patternï¼‰çš„å­ç›®å½•/æ–‡ä»¶çš„å…ƒæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä¼˜åŒ–ï¼šä¸ºäº†é˜²æ­¢ITERATEæ¶ˆè€—å¤ªé•¿æ—¶é—´ï¼Œå»ºè®®æŒ‡å®šcnt&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä¼˜åŒ–ï¼šä¸ºäº†é«˜æ•ˆå¤„ç†å°æ–‡ä»¶ï¼ŒKevinFSå°†æ€»ä½“å°äº4KBçš„å°æ–‡ä»¶çš„å…ƒæ•°æ®å’Œæ•°æ®å†…å®¹æ‰“åŒ…ï¼ŒI/Oç›´æ¥æ“ä½œmetaå¯¹è±¡GET/SETæ¥è¿›è¡Œè¯»å†™&lt;/p&gt;
&lt;p&gt;@TODO ä¸€ä¸ªä¼˜åŒ–ï¼šä½¿ç”¨å…¨è·¯å¾„ç´¢å¼•æ¥å–ä»£åŸºäºinodeçš„ç´¢å¼•ï¼Œè¿™æé«˜äº†åŸºäºæ’åºç®—æ³•çš„KVå­˜å‚¨çš„æ‰«ææ€§èƒ½ï¼Œä¸»è¦å¯¹seek timeå¼€é”€å¤§çš„HDDä¼˜åŒ–æ¯”è¾ƒæ˜æ˜¾&lt;/p&gt;
&lt;h2 id=&#34;kvå¯¹è±¡ç´¢å¼•&#34;&gt;KVå¯¹è±¡ç´¢å¼•&lt;/h2&gt;
&lt;p&gt;KevinSSDåŸºæœ¬å®ç°äº†ä¼ ç»ŸSSD ä¸­FTLçš„æ‰€æœ‰åŠŸèƒ½ï¼Œå°†KVå¯¹è±¡æ˜ å°„åˆ°é—ªå­˜ã€åˆ†é…å’Œé‡Šæ”¾é—ªå­˜çš„ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;FTLåªåšåå—ç®¡ç†å’Œç£¨æŸå‡è¡¡ç­‰ç®€å•å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªLevelç»´æŠ¤ä¸€ä¸ªå†…å­˜è¡¨ï¼Œæ¥è®°å½•Flashä¸­çš„KVå¯¹è±¡ã€‚è¡¨çš„æ¯ä¸ªè®°å½•éƒ½æœ‰&lt;code&gt;&amp;lt;start key, end key, pointer&amp;gt;&lt;/code&gt;ï¼Œå…¶ä¸­æŒ‡é’ˆæŒ‡å‘ä¿å­˜KVå¯¹è±¡çš„é—ªå­˜é¡µé¢çš„ä½ç½®ï¼Œstart keyå’Œend keyæ˜¯é¡µé¢ä¸­keyçš„èŒƒå›´ã€‚keyçš„èŒƒå›´å¯ä»¥åœ¨å¤šä¸ªLevelä¸Šé‡å ã€‚ä¸ºäº†å¿«é€ŸæŸ¥æ‰¾ï¼Œæ‰€æœ‰è®°å½•éƒ½æŒ‰å¼€å§‹é”®æ’åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221102165350981.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221102165350981&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;metaå’Œdataå¯¹è±¡çš„Keyå’ŒValueä¼šè¢«åˆ†ç¦»å­˜å‚¨ã€‚é€šè¿‡&lt;code&gt;&amp;lt;key, value pointer&amp;gt;&lt;/code&gt;çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œä¼šæœ‰ä¸“é—¨çš„flash pageæ¥åˆ†åˆ«å­˜å‚¨è¿™äº›ä¿¡æ¯ï¼ˆmetaå’Œdataå¯¹è±¡ä½¿ç”¨ä¸åŒçš„flash pageï¼‰ï¼Œkey-index pages&lt;/p&gt;
&lt;h3 id=&#34;meta-object&#34;&gt;Meta object&lt;/h3&gt;
&lt;p&gt;åœ¨å¯¹KVå¯¹è±¡è¿›è¡Œæ£€ç´¢æ—¶ï¼Œå¯èƒ½éœ€è¦åœ¨å¤šçº§è¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“åœ¨Liä¸åŒ¹é…æ—¶ï¼ŒæŸ¥æ‰¾Li+1ã€‚ä¸ºäº†å‡å°‘å¤šçº§æŸ¥æ‰¾çš„è¯»å–ï¼Œå¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨è¿›è¡Œä¼˜åŒ–ï¼Œå½“æ£€ç´¢åˆ°ç›®æ ‡KVå¯¹è±¡æ—¶ï¼ŒLSM treeå°†ä¼šè¿”å›ç›¸åº”çš„valueï¼ŒKVåˆ†ç¦»å­˜å‚¨çš„æƒ…å†µä¸‹ï¼Œå°†ä¼šé¢å¤–å»è¯»ä¸€æ¬¡value logã€‚&lt;/p&gt;
&lt;p&gt;å¯¹ç›®å½•é¡¹çš„æ›´æ–°åªéœ€è¦ä¿®æ”¹å…¶å…ƒæ•°æ®å³å¯å®Œæˆï¼Œè€Œä¸éœ€è¦ä¿®æ”¹4KBçš„å—&lt;/p&gt;
&lt;h3 id=&#34;data-object&#34;&gt;Data object&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†é¿å…å¯¹å¤§æ•°æ®çš„å°èŒƒå›´æ›´æ–°å¸¦æ¥çš„I/Oé«˜è´Ÿè½½ï¼ŒKevinSSDå°†data objectåˆ†å‰²ä¸º4KBå¤§å°çš„å­å¯¹è±¡ï¼Œä½¿ç”¨å•ç‹¬çš„åç¼€æ¥å¯¹ä»–ä»¬è¿›è¡Œè¡¨ç¤ºï¼Œåç¼€ä»0å¼€å§‹ï¼Œæ‹¼æ¥åœ¨åŸå§‹çš„data object Keyåï¼Œå› æ­¤data objectçš„keyæœ€ç»ˆæ„æˆä¸º
$$
d:{inode\ \ \ number}:{subobject \ \ number,start\ with \ 0}
$$
ä¸éœ€è¦ä¸­é—´è¡¨è¿›è¡Œç´¢å¼•ï¼Œåªéœ€è¦é€šè¿‡åç§»é‡å³å¯å®šä½è¦ä¿®æ”¹çš„å¯¹è±¡&lt;/p&gt;
&lt;p&gt;Data objectåŒæ ·ä½¿ç”¨ä¿å­˜æŒ‡é’ˆçš„æ–¹å¼å°†æ˜ å°„å­˜å‚¨åœ¨key-index pagesä¸­ï¼Œkey-index pagesä¼šå¯¹é”®è¿›è¡Œæ’åºï¼Œå› æ­¤å±äºåŒä¸€ä¸ªæ–‡ä»¶çš„subobjectä¸€èˆ¬ä¼šåœ¨åŒä¸€ä¸ªflash pageä¸­ã€‚&lt;/p&gt;
&lt;p&gt;==ä¼˜åŒ–==ï¼šåœ¨æŸ¥æ‰¾æŒ‡é’ˆæ—¶ï¼Œä¼šå°†ä¸€æ•´ä¸ªé—ªå­˜é¡µå†…çš„æ•°æ®å…¨éƒ¨å–å‡ºï¼Œå­˜å‚¨åœ¨æ§åˆ¶å™¨çš„DRAMä¸­ï¼Œå‡è½»åç»­æŸ¥æ‰¾å¯èƒ½å¸¦æ¥çš„è´Ÿè½½&lt;/p&gt;
&lt;h2 id=&#34;ç¼“è§£ç´¢å¼•è´Ÿè½½&#34;&gt;ç¼“è§£ç´¢å¼•è´Ÿè½½&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨LSM-treeç”±äºå¤šçº§æŸ¥æ‰¾å¸¦æ¥é¢å¤–çš„I/Oï¼Œä¼ ç»ŸFTLçš„æ˜ å°„éƒ½ä¿å­˜åœ¨DRAMï¼Œå› æ­¤æ²¡æœ‰é¢å¤–å¼€é”€ã€‚ä½œè€…ä»‹ç»äº†ä¸‰ç§ä¸»è¦åŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‹ç¼©æ“ä½œçš„å¼€é”€&#34;&gt;å‹ç¼©æ“ä½œçš„å¼€é”€&lt;/h3&gt;
&lt;p&gt;åŒä¸Šæ–‡ä»‹ç»çš„æ–¹æ¡ˆï¼Œé€šè¿‡åˆ†ç¦»Valueå¯ä»¥æ˜¾è‘—ç¼“è§£I/Oçš„æ•°æ®ä¼ è¾“è´Ÿè½½ï¼Œå¯¹dataè¿›è¡Œåˆ†ç‰‡æˆ‘ä¸ªäººæ„Ÿè§‰åè€Œä¼šåŠ å¤§å‹ç¼©æ“ä½œçš„åˆå¹¶è¿‡ç¨‹ï¼Œå³ä½¿åˆ†ç‰‡åé”®å€¼éƒ½æ˜¯æœ‰åºçš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å±‚çº§æŸ¥æ‰¾çš„å¼€é”€&#34;&gt;å±‚çº§æŸ¥æ‰¾çš„å¼€é”€&lt;/h3&gt;
&lt;p&gt;ç”±äºLSM-treeçš„ç‰¹æ€§ï¼Œéœ€è¦é€å±‚è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¸ºäº†é˜²æ­¢å¤§é‡çš„é¡ºåºæŸ¥æ‰¾ï¼Œä½œè€…ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨è¿›è¡Œäº†ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶è¿˜ç¼“å­˜äº†çƒ­ç‚¹K2Vç´¢å¼•æ•°æ®ï¼ˆä¸ç›®æ ‡ç´¢å¼•å¤„åœ¨åŒä¸€ä¸ªflash pageä¸­çš„ï¼‰&lt;/p&gt;
&lt;p&gt;ä¸ºäº†åˆ©ç”¨å¤§å®¹é‡SSDä¸­æä¾›çš„è¶…å¤§DRAMï¼Œä½œè€…é‡‡ç”¨å‹ç¼©å­˜å‚¨K2Vç´¢å¼•ï¼Œå¹¶åœ¨å…¶ä¸­æ’å…¥æ²¡æœ‰å‹ç¼©çš„K2Vç´¢å¼•æ¥ä½œä¸ºäºŒåˆ†æŸ¥æ‰¾çš„å‚ç…§ç‰©ã€‚ï¼ˆå¿«é€Ÿåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Ÿä¸å¦‚ç»§ç»­ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;åˆ†æ•£çš„å¯¹è±¡å¸¦æ¥çš„å¼€é”€&#34;&gt;åˆ†æ•£çš„å¯¹è±¡å¸¦æ¥çš„å¼€é”€&lt;/h3&gt;
&lt;p&gt;LSM-treeå…è®¸å„å±‚ä¹‹é—´çš„keyèŒƒå›´é‡å ï¼Œå› æ­¤æœ‰åŒä¸€ä¸ªå‰ç¼€çš„ç›®å½•æˆ–è€…æ–‡ä»¶å¯èƒ½è¢«åˆ†é…åˆ°ä¸åŒçš„Levelä¸­ï¼Œå¯¹äºè·å–ä¸€ä¸ªç›®å½•ä¸­æ‰€æœ‰ç›®å½•ã€æ–‡ä»¶çš„æ“ä½œï¼Œéœ€è¦å¯¹å¤šä¸ªé—ªå­˜é¡µè¿›è¡Œè®¿é—®ã€‚è¿™ä¸ªé—®é¢˜ä½œè€…æ²¡æœ‰ç»™å‡ºä¸€ä¸ªæ˜ç¡®çš„æ–¹æ¡ˆï¼ˆåœ¨å‹ç¼©åˆå¹¶æ—¶éšå¼è§£å†³ï¼‰ï¼Œä½†æ˜¯æä¾›äº†ä¸€ä¸ªç”¨æˆ·å·¥å…·æ¥ä¸»åŠ¨è§¦å‘åˆå¹¶ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚&lt;/p&gt;
&lt;p&gt;ä½œè€…å¯¹æ¯”äº†å„ç§æ–¹æ³•åœ¨éšæœºè¯»ã€å±€éƒ¨è¯»ï¼ˆï¼Ÿï¼‰ã€é¡ºåºè¯»æƒ…å†µä¸‹å¯¹é—ªå­˜é¡µçš„è¯»å–æ¬¡æ•°ï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨çš„æ—¶å€™ç¨³å®šä¼šæœ‰ä¸€æ¬¡è¯»å–&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨äº†KevinSSDåå¯¹äºSSDè€Œè¨€ï¼ŒI/Oå»¶è¿Ÿæœ‰è½»å¾®çš„å¢åŠ ï¼Œæ•´ä½“è€Œè¨€æ•ˆç‡æé«˜äº†&lt;/p&gt;
&lt;h1 id=&#34;0x03-implement-vfs&#34;&gt;0x03 Implement VFS&lt;/h1&gt;
&lt;h2 id=&#34;write&#34;&gt;write&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰çš„å†™ç›¸å…³ç³»ç»Ÿè°ƒç”¨å¯ä»¥é€šè¿‡SETå’ŒDELETEæ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚unlinkï¼Œåªéœ€è¦ä¸¤æ¬¡DELETEæŒ‡ä»¤ï¼Œç§»é™¤metaå’Œdata objectã€‚&lt;/p&gt;
&lt;p&gt;SETæ—¶ç°åœ¨Memtableä¸­ä¿å­˜ä¸€ä¸ªKVå¯¹è±¡ï¼Œç„¶åæŒä¹…åŒ–åˆ°flashä¸­ï¼Œè‹¥Keyå·²å­˜åœ¨åˆ™ä¸¢å¼ƒæ—§çš„å¯¹è±¡&lt;/p&gt;
&lt;p&gt;DELETEæ—¶åœ¨æ ‘ä¸Šå†™å…¥ä¸€ä¸ª4Bå¤§å°çš„å¢“ç¢‘&lt;/p&gt;
&lt;p&gt;å¤±æ•ˆçš„å¯¹è±¡ï¼ˆè¢«SETè¦†ç›–ï¼‰å’Œåˆ é™¤çš„å¯¹è±¡åœ¨å‹ç¼©æœŸé—´è¢«æ°¸ä¹…åˆ é™¤&lt;/p&gt;
&lt;h2 id=&#34;read&#34;&gt;read&lt;/h2&gt;
&lt;p&gt;é€šè¿‡GETå’ŒITERATEå®ç°&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œopenç³»ç»Ÿè°ƒç”¨æ—¶ï¼ŒæŸ¥è¯¢meta objectè·å–æ–‡ä»¶çš„inodeï¼Œé€šè¿‡GETå‘½ä»¤å®ç°&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œlookupç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œç»™å®šä¸€ä¸ªå®Œæ•´çš„è·¯å¾„&lt;code&gt;/home/alice/&lt;/code&gt;ï¼Œä»æ ¹ç›®å½•å¼€å§‹è·å–å¤šä¸ªmeta objectï¼Œæœ€ç»ˆè·å–ç›®æ ‡æ–‡ä»¶çš„inode&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œreadç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œå°†GETä¸€ä¸ªdata object&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œreaddirç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä½¿ç”¨ITERATEï¼Œæ‰¹é‡è·å–ä¸€ç»„meta objectsæ¥è·å–inode&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221102210344432.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221102210344432&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç›¸è¾ƒäºExt4ï¼ŒKevinFSå¯ä»¥æ›´å¥½çš„é˜²æ­¢æ–‡ä»¶ç¢ç‰‡åŒ–å¸¦æ¥çš„å½±å“ã€‚&lt;/p&gt;
&lt;h1 id=&#34;0x04-crash-consistency&#34;&gt;0x04 Crash Consistency&lt;/h1&gt;
&lt;h2 id=&#34;ä¸€è‡´æ€§ç»´æŠ¤&#34;&gt;ä¸€è‡´æ€§ç»´æŠ¤&lt;/h2&gt;
&lt;p&gt;é€šè¿‡äº‹åŠ¡å³å¯å®ç°åŸå­åŒ–çš„æ“ä½œ&lt;/p&gt;
&lt;p&gt;åœ¨ä¼ ç»Ÿçš„æ—¥å¿—ç»“æ„ä¸­ï¼Œç”±äºäº‹åŠ¡çš„å¤§å°å—æ—¥å¿—å¤§å°çš„é™åˆ¶ï¼Œä¸€ä¸ªç³»ç»Ÿè°ƒç”¨å¯èƒ½ä¼šè¢«åˆ’åˆ†åˆ°å¤šä¸ªäº‹åŠ¡ä¸­ã€‚KVFSé€šè¿‡å¼ºåˆ¶é™åˆ¶å¯¹ä¸€ä¸ªæ–‡ä»¶çš„æ“ä½œé©»ç•™åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­æ¥ç¡®ä¿åŸå­æ€§ã€‚&lt;/p&gt;
&lt;p&gt;äº‹åŠ¡çš„éš”ç¦»ï¼Ÿå¯¹==fsync==æŒ‡ä»¤å•ç‹¬åˆ›å»ºä¸€ä¸ªå°å‹äº‹åŠ¡æ¥æé«˜æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;KevinFSåŸºäºKVäº‹åŠ¡çš„ç‰¹æ€§æ¥ç»´æŠ¤ä¸€è‡´æ€§ï¼Œä¸ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h2 id=&#34;kväº‹åŠ¡çš„å®ç°&#34;&gt;KVäº‹åŠ¡çš„å®ç°&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨äº†ä¸‰ä¸ªæ•°æ®ç»“æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡è¡¨$TxTable$ï¼šè®°å½•äº‹åŠ¡åŸºæœ¬ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡æ—¥å¿—$TxLogs$ï¼šç»´æŠ¤äº‹åŠ¡å¯¹è±¡çš„K2Vç´¢å¼•ï¼Œå­˜å‚¨åœ¨DRAMæˆ–è€…é—ªå­˜ä¸­&lt;/li&gt;
&lt;li&gt;æ¢å¤æ—¥å¿—$TxRecovery$ï¼šç”¨äºæ¢å¤å’Œç»ˆæ­¢äº‹åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†æ˜¯æ”¶åˆ°BeginTxæŒ‡ä»¤æ—¶ï¼ŒKevinSSDåœ¨TxTableä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«TIDï¼Œå½“å‰äº‹åŠ¡çš„çŠ¶æ€ï¼Œä¸äº‹åŠ¡ç›¸å…³K2Vç´¢å¼•çš„ä½ç½®ï¼Œåˆå§‹çŠ¶æ€ä¸ºRUNNINGï¼ˆå¦‚â‘ ï¼‰ã€‚å½“åç»­æŒ‡ä»¤åˆ°è¾¾åï¼ŒKevinSSDå°†KVç´¢å¼•è®°å½•åœ¨TxLogsï¼Œå¹¶ç¼“å­˜åœ¨Memtableä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ”¶åˆ°EndTxæŒ‡ä»¤åï¼Œå®Œæˆäº‹åŠ¡çš„æäº¤ï¼Œæ ‡è®°äº‹åŠ¡çŠ¶æ€ä¸ºCOMMITTEDï¼ˆå¦‚â‘¡ï¼‰ã€‚å°†æäº¤çš„KVç´¢å¼•åŒæ­¥åˆ°LSM-treeä¸­&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221103102304181.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221103102304181&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å‡å°‘åœ¨COMMITTEDé˜¶æ®µï¼Œå°†TxLogsä¸­çš„KVç´¢å¼•åŒæ­¥åˆ°LSM tree L1ä¸­æ—¶çš„è´Ÿè½½ï¼Œå¯¹æ¯ä¸ªäº‹åŠ¡åœ¨DRAMä¸­ç»´æŠ¤äº†ä¸€ä¸ªSkiplistï¼Œä¾¿äºå¿«é€ŸæŸ¥æ‰¾KVå¯¹è±¡åœ¨TxLogsä¸­çš„ç´¢å¼•ï¼Œåœ¨L1å’ŒL2éœ€è¦è¿›è¡Œå‹ç¼©æ—¶å†å°†skiplistä¸­çš„æ•°æ®åŒæ­¥åˆ°checkpointï¼Œå½“åŒæ­¥å®Œæˆåï¼Œäº‹åŠ¡çš„çŠ¶æ€å°†å˜ä¸ºCHECKPOINTEDï¼ˆå¦‚â‘¢ï¼‰ï¼Œæœ€ç»ˆå³å°†å¯¹DRAMä¸­çš„TxTableå’ŒTxLogsè¿›è¡Œå›æ”¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;recovery&#34;&gt;Recovery&lt;/h2&gt;
&lt;p&gt;è‹¥å‘ç”Ÿæ‰ç”µï¼ŒKVSSDä¼šåˆ©ç”¨ç”µå®¹å°†KVç´¢å¼•æŒä¹…åŒ–åˆ°é—ªå­˜ä¸­çš„TxLogsï¼ŒTxTableæ›´æ–°å†…éƒ¨çš„æŒ‡é’ˆï¼Œåœ¨TxRecoveryä¸­è¿›è¡Œè®°å½•ã€‚åœ¨ç³»ç»Ÿé‡å¯æ—¶ï¼ŒKVSSDä¼šæ‰«æTx Recoveryï¼ŒåŠ è½½æœ€æ–°çš„TxTableï¼Œå¯¹äºå¤„äºCOMMITTEDçŠ¶æ€çš„äº‹åŠ¡ï¼Œå°†å…¶TxLogsç´¢å¼•åŠ è½½åˆ°Skiplistä¸­ï¼Œå¯¹äºå¤„äºRUNNINGçŠ¶æ€çš„äº‹åŠ¡ï¼Œç›´æ¥è¿›è¡ŒAbortå¹¶å›æ”¶å…¶èµ„æºã€‚&lt;/p&gt;
&lt;h1 id=&#34;conclusion--thinking&#34;&gt;Conclusion &amp;amp;&amp;amp; Thinking&lt;/h1&gt;
&lt;p&gt;æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäºK/Vå­˜å‚¨æ¶æ„çš„æ–‡ä»¶ç³»ç»Ÿï¼Œé€šè¿‡å¯¹Keyçš„è®¾è®¡ä¿è¯äº†åœ¨I/Oæ“ä½œä¸­çš„é«˜æ•ˆæ€§ã€‚é€šè¿‡æœ¬æ–‡äº†è§£äº†ä¸€äº›KVå­˜å‚¨çš„trickï¼Œå¯¹äºKVå­˜å‚¨çš„å„ç§åœºæ™¯ï¼Œæ— è®ºæ˜¯åœ¨Redisä¸­è¿˜æ˜¯åœ¨KVæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¯¹äºKeyçš„è®¾è®¡éƒ½è‡³å…³é‡è¦ï¼Œå¥½çš„è®¾è®¡å¾€å¾€èƒ½å¤Ÿå¸¦æ¥æå¤§çš„æ•ˆç‡æå‡ï¼Œä¾‹å¦‚å¸ƒéš†è¿‡æ»¤å™¨çš„åº”ç”¨ï¼Œæœ‰å¾ˆå¤šç»éªŒå€¼å¾—å­¦ä¹ ã€‚åŒæ—¶äº†è§£äº†å¯¹äº‹åŠ¡çš„ä¸€äº›æ§åˆ¶æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤ç¯‡è®ºæ–‡è®©æˆ‘æƒŠè®¶äºæ–‡ä»¶ç³»ç»Ÿè¿˜èƒ½é€šè¿‡KVå­˜å‚¨æ¥å®ç°çš„é€šçŸ¥ï¼Œè¿˜è®©æˆ‘å›æƒ³èµ·äº†TiDBï¼Œé€šè¿‡KVå­˜å‚¨ç³»ç»Ÿæ¥å®ç°äº†åˆ†å¸ƒå¼å…³ç³»å‹æ•°æ®åº“ï¼Œå¹¶å®Œå…¨å…¼å®¹MySQLï¼Œè¯´æ˜åœ¨åˆ©ç”¨å¥½KVå­˜å‚¨çš„ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§£å†³é—®é¢˜ï¼Œè¦å¤šå»å­¦ä¹ ä»–ä»¬çš„è®¾è®¡æ€æƒ³ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å­˜å‚¨ç³»ç»Ÿã€‘æ–‡ä»¶ç³»ç»Ÿ</title>
        <link>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</link>
        <pubDate>Tue, 11 Oct 2022 13:44:49 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</guid>
        <description>&lt;h1 id=&#34;0x00-åŸºæœ¬æ¦‚å¿µ&#34;&gt;0x00 åŸºæœ¬æ¦‚å¿µ&lt;/h1&gt;
&lt;p&gt;æ–‡ä»¶çš„åŸºæœ¬æ¦‚å¿µï¼Œ åŒ…å«ä¿¡æ¯çš„æ¯”ç‰¹æµ/å—ï¼Œè®¡ç®—æœºå¾€å¾€éœ€è¦å¤„ç†è¿œé«˜äºä¸»å­˜å®¹é‡çš„æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨æ–‡ä»¶æ¥ä¿å­˜ï¼›æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ›´é•¿ï¼Œä¸èƒ½å­˜å‚¨åœ¨å †æ ˆä¸­ï¼›å¯¹æ–‡ä»¶çš„æ•°æ®/ä¿¡æ¯å¯¹å¤–è¿›è¡Œåˆ†äº«çš„åª’ä»‹ã€‚å¯ä»¥ç”¨äºè¿›ç¨‹é—´çš„ä¿¡æ¯å…±äº«ï¼Œè‡ªç”±æ€§å’Œå®¹é‡ä¸Šéƒ½ä¼˜äºå…±äº«å†…å­˜çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½&#34;&gt;æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;Namespace å‘½åç©ºé—´&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶ç›®å½•çš„å»ºç«‹ã€ç»´æŠ¤å’Œæ£€ç´¢ï¼ˆç›®å½•æ ‘ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å­˜å‚¨ç®¡ç†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç©ºé—´ç®¡ç†ï¼šå­˜å‚¨ç©ºé—´çš„åˆ†é…å’Œç®¡ç†ï¼ˆç®¡ç†ç©ºé—²çš„å—ï¼‰&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶å—ç®¡ç†ï¼šé€»è¾‘åœ°å€ä¸å­˜å‚¨ç‰©ç†åœ°å€çš„æ˜ å°„ï¼ˆlogical offsetâ€”Physical Block numberï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ•°æ®ä¿æŠ¤&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶å‡ºç°åå—&lt;/li&gt;
&lt;li&gt;ç¾å¤‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯é æ€§/ä¸€è‡´æ€§&lt;/p&gt;
&lt;h1 id=&#34;0x01-ç”¨æˆ·è§†è§’&#34;&gt;0x01 ç”¨æˆ·è§†è§’&lt;/h1&gt;
&lt;h2 id=&#34;æ–‡ä»¶ç›®å½•æ“ä½œ&#34;&gt;æ–‡ä»¶ç›®å½•æ“ä½œ&lt;/h2&gt;
&lt;p&gt;æ–‡ä»¶æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create/Delete&lt;/li&gt;
&lt;li&gt;Open/Close è¿”å›File Handle&lt;/li&gt;
&lt;li&gt;Read/Write&lt;/li&gt;
&lt;li&gt;Append è¿½åŠ å†™å…¥&lt;/li&gt;
&lt;li&gt;Seek ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ offset&lt;/li&gt;
&lt;li&gt;Getattr/Setattr è¯»å–/ä¿®æ”¹inodeä¸­ä¿å­˜çš„æ–‡ä»¶ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;Rename&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å½•æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Createdir/rmdir&lt;/li&gt;
&lt;li&gt;Link è½¯é“¾æ¥ã€ç¡¬é“¾æ¥ è®²ç›®å½•é¡¹ç›®æŒ‡å‘æ–‡ä»¶çš„inode&lt;/li&gt;
&lt;li&gt;Unlink&lt;/li&gt;
&lt;li&gt;Readdir è¯»å–å­ç›®å½•ä»¥åŠç›®å½•é¡¹&lt;/li&gt;
&lt;li&gt;Rename&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ–‡ä»¶ç›®å½•çš„æ„æˆ&#34;&gt;æ–‡ä»¶ç›®å½•çš„æ„æˆ&lt;/h2&gt;
&lt;p&gt;æ–‡ä»¶çš„ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶å†…å®¹ï¼Œå­—èŠ‚åºåˆ—&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶çš„å…ƒæ•°æ®metadataï¼Œæ–‡ä»¶æ§åˆ¶å—ï¼ŒUnixç³»ç»Ÿä¸­ç§°ä¸ºinode(index node)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å½•çš„ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ¬è´¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå†…å®¹æ˜¯å­ç›®å½•ã€æ–‡ä»¶ç­‰ç›®å½•é¡¹ç›®&lt;/li&gt;
&lt;li&gt;ç›®å½•ä¹Ÿæœ‰inode&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;file-handle&#34;&gt;File Handle&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºåŸæ–‡ä»¶çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå¯¹å…¶è¿›è¡Œè¯»å†™ï¼ŒOffsetå¯ä»¥å…±äº«ç»™ä¸¤ä¸ªFile Handleï¼Œä¹Ÿå¯ä»¥æ¯ä¸ªFile Handleç‹¬æœ‰å„è‡ªçš„Offsetã€‚&lt;/p&gt;
&lt;p&gt;Linux VFSä¸­ä¸ºæ–‡ä»¶æè¿°ç¬¦fdï¼Œå¯¹åº”ä¸€ä¸ªFile Objectï¼ŒåŒ…å«æ–‡ä»¶çš„ä¿¡æ¯ï¼Œæ–‡ä»¶ç³»ç»Ÿç®¡ç†dentryã€inodeçš„ç¼“å­˜ï¼Œç”¨äºæŸ¥æ‰¾æ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„ä½ç½®ã€‚å…³äº&lt;strong&gt;Linux VFS&lt;/strong&gt;çš„å†…å®¹ï¼Œè®¡åˆ’å†å•ç‹¬å¼€ä¸ªåšå®¢è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;file-control-block-inode&#34;&gt;File Control Block (Inode)&lt;/h2&gt;
&lt;p&gt;æ¯ä¸ªæ–‡ä»¶å”¯ä¸€çš„idï¼ŒåŒ…å«ä»¥ä¸‹ç»“æ„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Blockçš„ä¿¡æ¯ï¼Œæ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„ä½ç½®&lt;/li&gt;
&lt;li&gt;æ•°æ®å¤§å°&lt;/li&gt;
&lt;li&gt;Ctimeåˆ›å»ºæ—¶é—´ï¼Œutimeæ›´æ–°æ—¶é—´ï¼Œaccess timeæœ€åä¸€æ¬¡è®¿é—®æ—¶é—´&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰è€…ä¿¡æ¯ï¼ŒACL(access control lists)è®¿é—®æ§åˆ¶&lt;/li&gt;
&lt;li&gt;é“¾æ¥æƒ…å†µç»Ÿè®¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;dirent---directory-entry&#34;&gt;Dirent - Directory Entry&lt;/h2&gt;
&lt;p&gt;ç›®å½•é¡¹çºªå½•å­æ–‡ä»¶å’Œå­ç›®å½•çš„åç§°&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªç›®å½•é¡¹çš„ç»“æ„&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;å¤§å°&lt;/th&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;__le32&lt;/td&gt;
&lt;td&gt;4bytes&lt;/td&gt;
&lt;td&gt;Inode&lt;/td&gt;
&lt;td&gt;inodeç¼–å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;__le16&lt;/td&gt;
&lt;td&gt;2bytes&lt;/td&gt;
&lt;td&gt;Rec_len&lt;/td&gt;
&lt;td&gt;ç›®å½•é¡¹çš„é•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;__u8&lt;/td&gt;
&lt;td&gt;2bytes&lt;/td&gt;
&lt;td&gt;Name_len&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶åé•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;__u8&lt;/td&gt;
&lt;td&gt;2bytes&lt;/td&gt;
&lt;td&gt;File_type&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;char[EXT2_NAME_LEN]&lt;/td&gt;
&lt;td&gt;æœ€å¤§255ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;Name&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶å&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ‰€æœ‰ç›®å½•éƒ½åŒ…å«çš„ç›®å½•é¡¹åŒ…æ‹¬å½“å‰ç›®å½•å’Œä¸Šçº§ç›®å½•:&lt;code&gt;.&lt;/code&gt;,&lt;code&gt;..&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¦å¯¹æ–‡ä»¶åè¿›è¡Œ4å­—èŠ‚å¯¹é½ï¼Œåé¢è¡¥&lt;code&gt;\0&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰ç›®å½•é¡¹é¡ºåºæ‹¼æ¥ç»„æˆç›®å½•ä¿¡æ¯ï¼Œåœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶å¯ä»¥ä½¿ç”¨rec_lenæ¥è®¡ç®—åç§»é‡ï¼Œä¾¿äºæŸ¥æ‰¾ç›®å½•ä¸­çš„æ–‡ä»¶ï¼ˆé¡ºåºéå†ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;ç›®å½•æ ‘&#34;&gt;ç›®å½•æ ‘&lt;/h2&gt;
&lt;p&gt;ç›®å½•æ ‘çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¯ä¸ªç›®å½•éƒ½æœ‰è‡ªå·±çš„inodeï¼ŒåŒæ—¶è¿˜æœ‰direntryï¼Œå¯¹å…¶ä¸­çš„å­ç›®å½•å¯ä»¥æ„å»ºå­æ ‘ï¼Œæ–‡ä»¶å¯ä»¥å»ºç«‹æ–‡ä»¶å­èŠ‚ç‚¹&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221011191955170.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221011191955170&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®PathnameæŸ¥æ‰¾æ–‡ä»¶çš„è¿‡ç¨‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»æ ¹ç›®å½•&lt;code&gt;/&lt;/code&gt;å¼€å§‹æŸ¥è¯¢ï¼Œè§£æå‡ºè¦æŸ¥è¯¢çš„é¡¹ç›®&lt;/li&gt;
&lt;li&gt;è·å–å½“å‰ç›®å½•çš„ç›®å½•é¡¹ï¼ˆå¯èƒ½åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯èƒ½è¦å‘ç£ç›˜è¯·æ±‚ï¼‰&lt;/li&gt;
&lt;li&gt;æ¯”å¯¹ç›¸åº”çš„çºªå½•æ˜¯å¦å­˜åœ¨äºç›®å½•é¡¹ä¸­ï¼Œæ¯”å¯¹æˆåŠŸåˆ™è·å–å…¶inode&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŸ¥æ‰¾è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥æƒé™ï¼šåœ¨æ¯çº§ç›®å½•æŸ¥æ‰¾æ—¶ï¼Œéœ€è¦æ£€æŸ¥æ˜¯å¦æœ‰å¯¹å½“å‰ç›®å½•è¿›è¡Œè®¿é—®çš„æƒé™ï¼Œç„¶åæ‰èƒ½ç»§ç»­è¿›è¡Œæ“ä½œ&lt;/li&gt;
&lt;li&gt;æ£€æµ‹æ˜¯å¦ä¸ºè½¯é“¾æ¥/ç¬¦å·é“¾æ¥(Symbolic link)ï¼šç›®å½•é¡¹å¯èƒ½æŒ‡å‘åŒä¸€ä¸ªinodeï¼Œé˜²æ­¢å‡ºç°å¾ªç¯é“¾æ¥&lt;/li&gt;
&lt;li&gt;æ£€æµ‹æ˜¯å¦æŒ‚è½½äº†å…¶ä»–æ–‡ä»¶ç³»ç»Ÿï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯æŒ‚åœ¨æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ï¼Œè‹¥å‡ºç°æ­¤ç±»æƒ…å†µéœ€è¦è¿›å…¥æ–°çš„æ–‡ä»¶ç³»ç»Ÿè¿›è¡ŒæŸ¥æ‰¾&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;access-control-lists-è®¿é—®æ§åˆ¶&#34;&gt;Access Control Lists è®¿é—®æ§åˆ¶&lt;/h2&gt;
&lt;p&gt;åŸºæœ¬ACLçºªå½•å†…å®¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è®°å½•ç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¼å¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Owner&lt;/td&gt;
&lt;td&gt;user::rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Owning Group&lt;/td&gt;
&lt;td&gt;group::rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Others&lt;/td&gt;
&lt;td&gt;other::rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;rwxä¸ºæ©ç å½¢å¼ï¼Œä½¿ç”¨ä¸‰ä½å…«è¿›åˆ¶ï¼Œ&lt;code&gt;777&lt;/code&gt;ä¸ºå¯è¯»å¯å†™å¯æ‰§è¡Œï¼Œç³»ç»Ÿè°ƒç”¨ä¸º&lt;code&gt;chmod&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœ‰æ‰©å±•ACLï¼Œè®°å½•å†…å®¹ä¸ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è®°å½•ç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¼å¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Owner&lt;/td&gt;
&lt;td&gt;user::rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Named User&lt;/td&gt;
&lt;td&gt;user:name:rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Owning Group&lt;/td&gt;
&lt;td&gt;group::rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Named Group&lt;/td&gt;
&lt;td&gt;group:name:rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mask&lt;/td&gt;
&lt;td&gt;mask::rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Others&lt;/td&gt;
&lt;td&gt;other::rwx&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¯¹äºæ–‡ä»¶çš„è®¿é—®æƒé™é€šè¿‡Named Userï¼ŒOwning Groupå’ŒNamed Groupè¿›è¡Œæˆæƒï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨Maskè®¾ç½®æ©ç å¯¹æƒé™è¿›è¡Œæ§åˆ¶ï¼Œä¾‹å¦‚æœ‰æƒé™&lt;code&gt;r-x&lt;/code&gt;ï¼Œå¯¹äºMask:&lt;code&gt;mask::rw-&lt;/code&gt;ï¼Œæœ€ç»ˆçš„æ“ä½œæƒé™ä¸º&lt;code&gt;r--&lt;/code&gt;ï¼Œå°†æ©ç å’Œæƒé™è¿›è¡Œä¸æ“ä½œ&lt;/p&gt;
&lt;p&gt;ä¸åŒæ–‡ä»¶ç³»ç»Ÿæœ‰å¯¹ACLä¸åŒçš„æ‰©å±•å’Œå®ç°&lt;/p&gt;
&lt;h2 id=&#34;example&#34;&gt;Example&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;int fd = open(&amp;quot;/foo/bar.txt&amp;quot;, RO)&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æŸ¥æ‰¾æ–‡ä»¶çš„inode
&lt;ol&gt;
&lt;li&gt;åœ¨æ ¹ç›®å½•æŸ¥æ‰¾fooç›®å½•&lt;/li&gt;
&lt;li&gt;è¯»å–fooç›®å½•çš„å†…å®¹&lt;/li&gt;
&lt;li&gt;åœ¨fooç›®å½•ä¸­æŸ¥æ‰¾bar&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡æŸ¥è¯¢å…ˆåœ¨ç¼“å­˜ä¸­è¿›è¡ŒæŸ¥æ‰¾&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ä¸ºinodeåˆ›å»ºvnodeç»“æ„
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­inodeæ˜¯å¦åœ¨inode cacheä¸­ï¼Œè‹¥ä¸åœ¨åˆ™éœ€è¦ä»ç£ç›˜ä¸­è¯·æ±‚&lt;/li&gt;
&lt;li&gt;è¯·æ±‚ååˆ›å»ºvnodeç¼“å­˜&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–File Object&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆfdï¼Œå¡«å……æ•°æ®ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;è¿”å›fdç»™è¿›ç¨‹&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;0x02-å®ç°è§’åº¦&#34;&gt;0x02 å®ç°è§’åº¦&lt;/h1&gt;
</description>
        </item>
        <item>
        <title>Linux Block I/O Stackç®€ä»‹</title>
        <link>https://blog.ipandai.club/p/linux-block-i/o-stack%E7%AE%80%E4%BB%8B/</link>
        <pubDate>Sun, 09 Oct 2022 13:44:18 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/linux-block-i/o-stack%E7%AE%80%E4%BB%8B/</guid>
        <description>&lt;p&gt;æœ¬æ–‡å°†ä»æ“ä½œç³»ç»Ÿå†…æ ¸å±‚é¢å»ä»‹ç»Linux I/O æ ˆ&lt;/p&gt;
&lt;p&gt;==æ¶‰åŠLinuxå†…æ ¸çš„éƒ¨åˆ†ä¸»è¦ä¸ºLinux 2.6==&lt;/p&gt;
&lt;h1 id=&#34;linux-io-æ ˆæ¦‚è¿°&#34;&gt;Linux I/O æ ˆæ¦‚è¿°&lt;/h1&gt;
&lt;p&gt;Linux I/O æ ˆçš„ç®€å›¾å¦‚ä¸‹&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221106012036118.png&#34; alt=&#34;image-20221106012036118&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;ä¸‹é¢åˆ†åˆ«ç®€è¿°å„ä¸ªå±‚æ¬¡çš„åŠŸèƒ½&lt;/p&gt;
&lt;h2 id=&#34;åº”ç”¨ç¨‹åºå±‚&#34;&gt;åº”ç”¨ç¨‹åºå±‚&lt;/h2&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºå±‚é€šè¿‡ç³»ç»Ÿè°ƒç”¨å‘VFSå‘èµ·I/Oè¯·æ±‚&lt;/p&gt;
&lt;h2 id=&#34;vfså±‚&#34;&gt;VFSå±‚&lt;/h2&gt;
&lt;p&gt;VFSä¸»è¦å‘ç”¨æˆ·ç©ºé—´æä¾›æ–‡ä»¶ç³»ç»Ÿå±‚é¢çš„æ¥å£ï¼ŒåŒæ—¶å‘ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿå®ç°æä¾›æŠ½è±¡ï¼Œä½¿ä»–ä»¬å¯ä»¥å…±å­˜ã€‚VFSå°†æ–‡ä»¶ç³»ç»Ÿåœ¨ç”¨æˆ·å±‚é¢è¿›è¡ŒæŠ½è±¡ï¼Œä¾¿äºç”¨æˆ·å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ¥è‡ªåº”ç”¨ç¨‹åºçš„è¯·æ±‚åˆ°è¾¾VFSåï¼ŒVFSä¼šåˆ›å»ºåŒ…å«I/Oè¯·æ±‚ä¿¡æ¯çš„ç»“æ„ä½“æäº¤ç»™å—I/Oå±‚ã€‚&lt;/p&gt;
&lt;p&gt;Linuxåœ¨æ–‡ä»¶ç³»ç»Ÿå±‚æä¾›ä¸‰ç§IOè®¿é—®çš„å½¢å¼ï¼šBuffered IOã€MMap ã€Direct I/Oã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Buffered I/Oï¼šè¿™ç§è®¿é—®æƒ…å†µä¸‹æ–‡ä»¶æ•°æ®éœ€è¦ç»è¿‡è®¾å¤‡ã€Page Cacheã€ç”¨æˆ·æ€ç¼“å­˜ï¼Œéœ€è¦è¿›è¡Œä¸¤æ¬¡çš„æ‹·è´åŠ¨ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MMapï¼šå†…å­˜æ˜ å°„æŠ€æœ¯ï¼Œå°†å†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†ç©ºé—´ä¸è®¾å¤‡è¿›è¡Œæ˜ å°„ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿå‘è®¿é—®æ™®é€šå†…å­˜ä¸€æ ·å¯¹æ–‡ä»¶è¿›è¡Œè®¿é—®ã€‚ä½¿æ–‡ä»¶æ•°æ®ä»…ç»è¿‡è®¾å¤‡ã€Page Cacheå³å¯ç›´æ¥ä¼ é€’åˆ°åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Direct I/Oï¼šé‡‡ç”¨Direct IOçš„æ–¹å¼å¯ä»¥è®©ç”¨æˆ·æ€ç›´æ¥ä¸å—è®¾å¤‡è¿›è¡Œå¯¹æ¥ï¼Œè·³è¿‡äº†Page Cacheï¼Œä»ç¡¬ç›˜å’Œç”¨æˆ·æ€ä¸­æ‹·è´æ•°æ®ï¼Œæé«˜æ–‡ä»¶ç¬¬ä¸€æ¬¡è¯»å†™çš„æ•ˆç‡ï¼Œè‹¥ä¹‹åéœ€è¦é‡å¤è®¿é—®åŒä¸€æ•°æ®ï¼Œéœ€è¦æ¶ˆè€—æ¯”åˆ©ç”¨Page Cacheæ›´å¤šçš„æ—¶é—´ï¼Œä¸€èˆ¬ç”¨äºæ•°æ®åº“ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å—ioå±‚&#34;&gt;å—I/Oå±‚&lt;/h2&gt;
&lt;p&gt;ç³»ç»Ÿèƒ½å¤Ÿéšæœºè®¿é—®å›ºå®šå¤§å°çš„æ•°æ®ç‰‡çš„è®¾å¤‡è¢«ç§°ä¸ºå—è®¾å¤‡ï¼Œæœ€å¸¸è§çš„å—è®¾å¤‡ä¸ºç¡¬ç›˜ï¼ˆæœºæ¢°ç¡¬ç›˜ï¼Œå›ºæ€ç›˜ï¼‰ï¼Œå¯¹å—è®¾å¤‡çš„è®¿é—®é€šå¸¸æ˜¯åœ¨å…¶å†…éƒ¨å®‰è£…æ–‡ä»¶ç³»ç»Ÿã€‚æ“ä½œç³»ç»Ÿä¸ºäº†å¯¹å…¶è®¿é—®å’Œä¿è¯æ€§èƒ½ï¼Œéœ€è¦ä¸€ä¸ªå­ç³»ç»Ÿæ¥å¯¹å—è®¾å¤‡å’Œå¯¹å—è®¾å¤‡çš„è¯·æ±‚è¿›è¡Œç®¡ç†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;scsiåº•å±‚--è®¾å¤‡é©±åŠ¨å±‚&#34;&gt;SCSIåº•å±‚ &amp;amp;&amp;amp; è®¾å¤‡é©±åŠ¨å±‚&lt;/h2&gt;
&lt;p&gt;å—I/Oå±‚å°†è¯·æ±‚å‘å¾€SCSIå±‚ï¼ŒSCSIå°±å¼€å§‹çœŸå®å¤„ç†è¿™äº›IOè¯·æ±‚ï¼Œä½†æ˜¯SCSIå±‚åˆå¯¹å…¶å†…éƒ¨æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†äº†ä¸åŒå±‚æ¬¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;SCSIé«˜å±‚ï¼šé«˜å±‚é©±åŠ¨è´Ÿè´£ç®¡ç†diskï¼Œæ¥æ”¶å—I/Oå±‚å‘å‡ºçš„IOè¯·æ±‚ï¼Œæ‰“åŒ…æˆSCSIå±‚å¯è¯†åˆ«çš„å‘½ä»¤æ ¼å¼ï¼Œç»§ç»­å¾€ä¸‹å‘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SCSIä¸­å±‚ï¼šä¸­å±‚è´Ÿè´£é€šç”¨åŠŸèƒ½ï¼Œå¦‚é”™è¯¯å¤„ç†ï¼Œè¶…æ—¶é‡è¯•ç­‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SCSIä½å±‚ï¼šåº•å±‚è´Ÿè´£è¯†åˆ«ç‰©ç†è®¾å¤‡ï¼Œå°†å…¶æŠ½è±¡æä¾›ç»™é«˜å±‚ï¼ŒåŒæ—¶æ¥æ”¶é«˜å±‚æ´¾å‘çš„SCSIå‘½ä»¤ï¼Œäº¤ç»™ç‰©ç†è®¾å¤‡å¤„ç†&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ›´æ­£ï¼šå¯¹äºä¼ ç»Ÿçš„å—è®¾å¤‡è€Œè¨€ï¼ŒæœåŠ¡å™¨é€šè¿‡SCSIåè®®ã€SASæ¥å£è¿æ¥ï¼Œä¸ªäººç”µè„‘é€šè¿‡AHCIåè®®/SATAæ¥å£è¿æ¥ï¼Œç›®å‰ä¸»æµçš„å‘å±•æ–¹å‘ä¸ºNVMeåè®®/M.2æ¥å£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç‰©ç†å¤–è®¾å±‚&#34;&gt;ç‰©ç†å¤–è®¾å±‚&lt;/h2&gt;
&lt;p&gt;åœ¨I/Oä¸­ä¸€èˆ¬ä¸ºç£ç›˜ã€å›ºæ€ç¡¬ç›˜ç­‰å­˜å‚¨è®¾å¤‡&lt;/p&gt;
&lt;h1 id=&#34;vfsç®€ä»‹&#34;&gt;VFSç®€ä»‹&lt;/h1&gt;
&lt;h2 id=&#34;intro&#34;&gt;Intro&lt;/h2&gt;
&lt;p&gt;VFSä¸»è¦å‘ç”¨æˆ·ç©ºé—´æä¾›æ–‡ä»¶ç³»ç»Ÿå±‚é¢çš„æ¥å£ï¼ŒåŒæ—¶å‘ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿå®ç°æä¾›æŠ½è±¡ï¼Œä½¿ä»–ä»¬å¯ä»¥å…±å­˜ã€‚&lt;/p&gt;
&lt;p&gt;VFSå°†æ–‡ä»¶ç³»ç»Ÿåœ¨ç”¨æˆ·å±‚é¢è¿›è¡ŒæŠ½è±¡ï¼Œä¾¿äºç”¨æˆ·å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;VFSä¸­æœ‰å››ä¸ªæœ€é‡è¦çš„æ•°æ®ç»“æ„ï¼Œåˆ†åˆ«æ˜¯dentryã€fileã€inodeã€superblockï¼Œä¸‹æ–‡å¯¹ä»–ä»¬åˆ†åˆ«è¿›è¡Œä»‹ç»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;directory-entry-cache-dcache&#34;&gt;Directory Entry Cache (dcache)&lt;/h2&gt;
&lt;p&gt;VFSæä¾›äº†openï¼Œstatï¼Œchmodç­‰ç³»ç»Ÿè°ƒç”¨ï¼Œéœ€è¦å‘ä»–ä»¬æä¾›æ–‡ä»¶çš„è·¯å¾„åï¼ŒVFSä¼šåœ¨dcacheä¸­å»æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;dcacheæä¾›äº†éå¸¸å¿«çš„æŸ¥æ‰¾æœºåˆ¶å°†è·¯å¾„åè½¬æ¢åˆ°ä¸€ä¸ªå…·ä½“çš„dentryç›®å½•é¡¹ï¼Œç¼“å­˜çš„ç›®å½•é¡¹å­˜å‚¨åœ¨RAMä¸­å¹¶ä¸”ä¸ä¼šæŒä¹…åŒ–åˆ°ç¡¬ç›˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ²¡æœ‰å‘½ä¸­ç¼“å­˜æ—¶ï¼ŒVFSä¼šé€šè¿‡æŸ¥æ‰¾å’ŒåŠ è½½inodeæ¥åˆ›å»ºdentryç¼“å­˜ï¼Œæœ€ç»ˆå®ç°å¯ä»¥é€šè¿‡path nameæŸ¥æ‰¾åˆ°å¯¹åº”çš„dentryç›®å½•é¡¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;the-inode-object&#34;&gt;The Inode Object&lt;/h2&gt;
&lt;p&gt;æ¯ä¸ªç‹¬ç«‹çš„dentryéƒ½æœ‰ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªinodeçš„æŒ‡é’ˆï¼Œinodeä¸€èˆ¬ä¿å­˜åœ¨discï¼ˆå—è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿï¼‰ä¸­æˆ–è€…å†…å­˜ä¸­ï¼ˆè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚discä¸­çš„inodeåœ¨è¢«è¯·æ±‚æˆ–ä¿®æ”¹æ—¶ä¼šå¤åˆ¶åˆ°å†…å­˜ä¸­ï¼Œå¹¶åœ¨ä¿®æ”¹åå›å†™åˆ°discã€‚å¤šä¸ªdentryå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªinodeï¼ˆç¡¬é“¾æ¥ï¼‰&lt;/p&gt;
&lt;p&gt;å¯¹äºæŸ¥æ‰¾inodeçš„è¯·æ±‚ï¼ŒVFSåœ¨çˆ¶ç›®å½•çš„inodeè°ƒç”¨lookupå‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;the-file-object&#34;&gt;The File Object&lt;/h2&gt;
&lt;p&gt;åœ¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œéœ€è¦åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç»“æ„ä½“ï¼ˆå†…æ ¸å±‚é¢å¯¹file descriptorçš„å®ç°ï¼‰ï¼Œç»“æ„ä½“å†…å®¹çš„åˆ›å»ºé€šè¿‡dentryæŒ‡é’ˆæ¥è·å–ï¼Œæ–‡ä»¶ç»“æ„ä½“å­˜å‚¨åœ¨è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹æ–‡ä»¶çš„è¯»å†™ã€å…³é—­é€šè¿‡ç”¨æˆ·ç©ºé—´çš„fdæ¥æ“ä½œæ­£ç¡®çš„æ–‡ä»¶ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;åªè¦æ–‡ä»¶æ‰“å¼€ï¼Œå®ƒå°±ä¼šä¿æŒå¯¹dentryçš„ä½¿ç”¨çŠ¶æ€ï¼Œè¿™åŒæ—¶æ„å‘³ç€inodeä»åœ¨ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;the-dentry-object&#34;&gt;The Dentry Object&lt;/h2&gt;
&lt;p&gt;ç›®å½•é¡¹çºªå½•å­æ–‡ä»¶å’Œå­ç›®å½•çš„åç§°&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªç›®å½•é¡¹çš„ç»“æ„&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;å¤§å°&lt;/th&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;__le32&lt;/td&gt;
&lt;td&gt;4bytes&lt;/td&gt;
&lt;td&gt;Inode&lt;/td&gt;
&lt;td&gt;inodeç¼–å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;__le16&lt;/td&gt;
&lt;td&gt;2bytes&lt;/td&gt;
&lt;td&gt;Rec_len&lt;/td&gt;
&lt;td&gt;ç›®å½•é¡¹çš„é•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;__u8&lt;/td&gt;
&lt;td&gt;2bytes&lt;/td&gt;
&lt;td&gt;Name_len&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶åé•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;__u8&lt;/td&gt;
&lt;td&gt;2bytes&lt;/td&gt;
&lt;td&gt;File_type&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;char[EXT2_NAME_LEN]&lt;/td&gt;
&lt;td&gt;æœ€å¤§255ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;Name&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶å&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ‰€æœ‰ç›®å½•éƒ½åŒ…å«çš„ç›®å½•é¡¹åŒ…æ‹¬å½“å‰ç›®å½•å’Œä¸Šçº§ç›®å½•:&lt;code&gt;.&lt;/code&gt;,&lt;code&gt;..&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¦å¯¹æ–‡ä»¶åè¿›è¡Œ4å­—èŠ‚å¯¹é½ï¼Œåé¢è¡¥&lt;code&gt;\0&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰ç›®å½•é¡¹é¡ºåºæ‹¼æ¥ç»„æˆç›®å½•ä¿¡æ¯ï¼Œåœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶å¯ä»¥ä½¿ç”¨rec_lenæ¥è®¡ç®—åç§»é‡ï¼Œä¾¿äºæŸ¥æ‰¾ç›®å½•ä¸­çš„æ–‡ä»¶ï¼ˆé¡ºåºéå†ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;the-superblock-object&#34;&gt;The SuperBlock Object&lt;/h2&gt;
&lt;p&gt;superblockå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨æœ‰å…³æ–‡ä»¶ç³»ç»Ÿçš„ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;h3 id=&#34;æ³¨å†Œå’ŒæŒ‚è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ&#34;&gt;æ³¨å†Œå’ŒæŒ‚è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨å¦‚ä¸‹çš„API&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;linux/fs.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;register_filesystem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_system_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;unregister_filesystem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_system_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½å¯ä»¥é€šè¿‡&lt;code&gt;-&amp;gt;mount()&lt;/code&gt;æ–¹æ³•å°†æ–°çš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°æŒ‚è½½ç‚¹ï¼Œå½“pathnameè§£æè§£æåˆ°æŒ‚è½½ç‚¹æ—¶ï¼Œä¼šè·³è½¬åˆ°è¢«æŒ‚åœ¨æ–‡ä»¶ç³»ç»Ÿçš„rootã€‚&lt;/p&gt;
&lt;p&gt;å†…æ ¸æ‰€æ³¨å†Œçš„æ–‡ä»¶ç³»ç»Ÿåœ¨&lt;code&gt;/proc/filesystems&lt;/code&gt;æ–‡ä»¶ä¸­&lt;/p&gt;
&lt;p&gt;&lt;code&gt;file_system_type&lt;/code&gt;ç»“æ„çš„å®šä¹‰å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_system_type&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fs_flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dentry&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_system_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                 &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kill_sb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;super_block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;module&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;owner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_system_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list_head&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fs_supers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_class_key&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s_lock_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_class_key&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s_umount_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;mount()&lt;/code&gt;æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_system_type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fs_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dev_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;page-cache&#34;&gt;Page Cache&lt;/h1&gt;
&lt;p&gt;â€‹	é¡µé«˜é€Ÿç¼“å­˜(Page Cache)æ˜¯Linuxå†…æ ¸æ‰€ä½¿ç”¨çš„ä¸»è¦ç¡¬ç›˜é«˜é€Ÿç¼“å­˜ã€‚åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå†…æ ¸åœ¨è¯»å†™ç¡¬ç›˜æ—¶éƒ½å¼•ç”¨é¡µé«˜é€Ÿç¼“å­˜ã€‚æ–°é¡µè¢«è¿½åŠ åˆ°é¡µé«˜é€Ÿç¼“å­˜ä»¥æ»¡è¶³ç”¨æˆ·æ€è¿›ç¨‹çš„è¯»è¯·æ±‚ã€‚å¦‚æœé¡µä¸åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œæ–°é¡µå°±è¢«åŠ åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œç„¶åç”¨ä»ç¡¬ç›˜è¯»å‡ºçš„æ•°æ®å¡«å……å®ƒ ã€‚ å¦‚ æœå†…å­˜æœ‰è¶³å¤Ÿçš„ç©ºé—²ç©ºé—´ ï¼Œå°±è®©è¯¥é¡µåœ¨é«˜é€Ÿç¼“å­˜ä¸­é•¿æœŸä¿ç•™ ï¼Œä½¿å…¶ä»–è¿›ç¨‹å†ä½¿ç”¨è¯¥é¡µæ—¶ä¸å†è®¿é—®ç¡¬ç›˜ã€‚&lt;/p&gt;
&lt;p&gt;â€‹	åŒæ—¶ï¼Œ åœ¨æŠŠä¸€é¡µæ•°æ®å†™åˆ°å—è®¾å¤‡ä¹‹å‰ï¼Œå†…æ ¸é¦–å…ˆæ£€æŸ¥å¯¹åº”çš„é¡µæ˜¯å¦å·²ç»åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œ å¦‚æœä¸åœ¨ï¼Œå°±è¦å…ˆåœ¨å…¶ä¸­å¢åŠ  ä¸€ä¸ªæ–°é¡¹ï¼Œå¹¶ç”¨è¦å†™åˆ°ç¡¬ç›˜ä¸­çš„æ•°æ®å¡«å……è¯¥é¡¹ã€‚I/Oæ•°æ®çš„ä¼ é€å¹¶ä¸æ˜¯é©¬ ä¸Šå¼€å§‹ï¼Œè€Œæ˜¯è¦å»¶è¿Ÿå‡ ç§’ä¹‹åæ‰å¯¹ç¡¬ç›˜è¿›è¡Œæ›´æ–°ï¼Œä»è€Œä½¿è¿›ç¨‹æœ‰æœºä¼šå¯¹è¦å†™äººç¡¬ç›˜çš„æ•°æ®åšè¿› ä¸€æ­¥çš„ä¿®æ”¹ (å†…æ ¸æ‰§è¡Œå»¶è¿Ÿçš„å†™æ“ä½œ)ã€‚&lt;/p&gt;
&lt;p&gt;â€‹	å‡ ä¹æ‰€æœ‰çš„è¯»å†™éƒ½ä¾èµ–Page Cacheï¼Œé™¤éæŒ‡å®šäº†O_DIRECTæ ‡å¿—ä½ï¼Œæ­¤æ—¶I/Oå°†ä½¿ç”¨è¿›ç¨‹ç”¨æˆ·æ€åœ°å€ç©ºé—´çš„ç¼“å†²åŒºï¼Œä¸€èˆ¬æ•°æ®åº“åº”ç”¨ä¼šä½¿ç”¨æ­¤æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;â€‹	å¯¹Page Cacheä¸­é¡µçš„è¯†åˆ«é€šè¿‡ç´¢å¼•èŠ‚ç‚¹å’Œåœ¨ç›¸åº”æ–‡ä»¶ä¸­çš„åç§»é‡æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸»è¦æ•°æ®ç»“æ„&#34;&gt;ä¸»è¦æ•°æ®ç»“æ„&lt;/h2&gt;
&lt;p&gt;â€‹	Page Cacheä¸­çš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯&lt;code&gt;address_space&lt;/code&gt;ï¼Œè¯¥å¯¹è±¡åœ¨é¡µé¢æ‰€å±çš„inodeä¸­ï¼Œç”±äºå¤šä¸ªé¡µé¢å¯èƒ½å±äºåŒä¸€ä¸ªæ‰€æœ‰è€…ï¼Œå› æ­¤å¤šä¸ªé¡µé¢å¯èƒ½è¢«è¿æ¥åˆ°åŒä¸€ä¸ªaddress spaceï¼Œè¯¥å¯¹è±¡åŒæ—¶è¿˜å°†æ‰€æœ‰è€…çš„é¡µé¢å’Œå¯¹é¡µé¢çš„æ“ä½œå»ºç«‹è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å…³é¡µé¢çš„æ“ä½œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;==writepage== å†™æ“ä½œï¼Œå°†é¡µå†™å…¥åˆ°ç¡¬ç›˜æ˜ åƒ&lt;/li&gt;
&lt;li&gt;==readpage== è¯»æ“ä½œï¼Œå°†æ•°æ®ä»ç¡¬ç›˜æ˜ åƒåŠ è½½åˆ°é¡µ&lt;/li&gt;
&lt;li&gt;sync_page åœ¨æ‰€æœ‰è€…çš„é¡µé¢å·²ç»å‡†å¤‡å°±ç»ªåï¼Œå¯åŠ¨I/Oæ•°æ®çš„ä¼ è¾“&lt;/li&gt;
&lt;li&gt;wirtepages æŠŠæŒ‡å®šæ•°é‡çš„æ‰€æœ‰è€…è„é¡µå†™å›ç¡¬ç›˜&lt;/li&gt;
&lt;li&gt;==prepare_write== ä¸ºå†™æ“ä½œåšå‡†å¤‡ï¼ˆç¡¬ç›˜æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ï¼‰&lt;/li&gt;
&lt;li&gt;==commit_write== å®Œæˆå†™æ“ä½œï¼ˆç¡¬ç›˜æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ï¼‰&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åŸºæ•°æ ‘-radix-tree&#34;&gt;åŸºæ•°æ ‘ Radix Tree&lt;/h2&gt;
&lt;p&gt;åŸºæ•°æ ‘ç±»ä¼¼äºå­—å…¸æ ‘ï¼Œé€šè¿‡è¦æŸ¥æ‰¾çš„IDçš„äºŒè¿›åˆ¶åºåˆ—ï¼Œæ¥ä¸€çº§ä¸€çº§çš„è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¸ºäº†å‡å°‘æ ‘çš„é«˜åº¦å’Œå¶å­éç»“ç‚¹ä¸ªæ ‘ï¼Œå¯ä»¥ä½¿ç”¨2 bitæˆ–è€…4 bitä½œä¸ºæ ‘çš„ç»“ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å†…æ ¸ä¸­ï¼ŒRadix Treeçš„å¶å­ç»“ç‚¹ä¿å­˜äº†æŒ‡å‘æ‰€æœ‰è€…é¡µæè¿°ç¬¦çš„æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;p&gt;Page Cache ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€æ£µåŸºæ•°æ ‘ï¼ˆradix treeï¼Œæœ¬è´¨ä¸Šæ˜¯å¤šå‰æœç´¢æ ‘ï¼‰ï¼Œæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªé¡µã€‚&lt;/p&gt;
&lt;p&gt;å†…æ ¸é€šè¿‡æŠŠé¡µç´¢å¼•è½¬æ¢ä¸ºRadix Treeä¸­çš„è·¯å¾„ï¼Œä½¿ç”¨Radix Treeæ¥å¿«é€Ÿæœç´¢é¡µæè¿°ç¬¦æ‰€åœ¨çš„ä½ç½®ã€‚å†…æ ¸é€šè¿‡é¡µæè¿°ç¬¦å¯ä»¥ç¡®å®šé¡µé¢æ˜¯å¦ä¸ºç­‰å¾…åˆ·æ–°åˆ°ç¡¬ç›˜çš„è„é¡µæˆ–å…¶ä¸­æ•°æ®çš„I/Oä¼ è¾“æ˜¯å¦æ­£åœ¨è¿›è¡Œã€‚&lt;/p&gt;
&lt;p&gt;Radix Treeä¸­çš„æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹æŒ‡å‘æ–‡ä»¶å†…ç›¸åº”åç§»æ‰€å¯¹åº”çš„Cacheé¡¹&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221101143123364.png&#34; alt=&#34;image-20221101143123364&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h2 id=&#34;page-cacheå¤„ç†å‡½æ•°&#34;&gt;Page Cacheå¤„ç†å‡½æ•°&lt;/h2&gt;
&lt;h3 id=&#34;find_get_page&#34;&gt;find_get_page()&lt;/h3&gt;
&lt;p&gt;ä¼ å…¥ address spaceå¯¹è±¡æŒ‡é’ˆå’Œä¾¿å®œäº†ï¼Œè·å–è‡ªæ—‹é”ï¼Œåœ¨Radix Treeä¸­æœç´¢å…·æœ‰æŒ‡å®šåç§»é‡çš„å¶å­ç»“ç‚¹ï¼Œè‹¥æˆåŠŸæ‰¾åˆ°ï¼Œä¼šå¢åŠ é¡µé¢ä½¿ç”¨è®¡æ•°å™¨ï¼Œé‡Šæ”¾è‡ªæ—‹é”ï¼Œå¹¶è¿”å›é¡µæè¿°ç¬¦çš„æŒ‡é’ˆï¼Œå¦åˆ™å°†é‡Šæ”¾è‡ªæ—‹é”å¹¶è¿”å›NULLã€‚&lt;/p&gt;
&lt;h3 id=&#34;add_to_page_cache&#34;&gt;add_to_page_cache()&lt;/h3&gt;
&lt;p&gt;ä¼ å…¥é¡µæè¿°ç¬¦åœ°å€ï¼Œaddress spaceå¯¹è±¡çš„address mappingå­—æ®µï¼Œé¡µç´¢å¼•åœ¨åœ°å€ç©ºé—´çš„åç§»é‡ï¼Œä¸ºRadix Treeåˆ†é…æ–°èŠ‚ç‚¹æ‰€ä½¿ç”¨çš„å†…å­˜åˆ†é…æ ‡å¿—gfp_maskï¼Œæ’å…¥æˆåŠŸåˆ™è¿”å›0&lt;/p&gt;
&lt;h3 id=&#34;remove_from_page_cache&#34;&gt;remove_from_page_cache()&lt;/h3&gt;
&lt;p&gt;è·å–è‡ªæ—‹é”ã€å…³é—­ä¸­æ–­ååœ¨Radix Treeä¸­åˆ é™¤èŠ‚ç‚¹ï¼Œè¿”å›åˆ é™¤é¡µçš„æè¿°ç¬¦æŒ‡é’ˆï¼Œpage-&amp;gt;mappingå­—æ®µè®¾ç½®ä¸ºNULLï¼Œå°†æ‰€ç¼“å­˜é¡µçš„page-&amp;gt;mapping-&amp;gt;nrpagesè®¡æ•°å™¨å€¼å‡1ï¼Œæœ€åé‡Šæ”¾è‡ªæ—‹é”ï¼Œæ‰“å¼€ä¸­æ–­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;read_cache_page&#34;&gt;read_cache_page()&lt;/h3&gt;
&lt;p&gt;ç¡®ä¿Page Cacheä¸­åŒ…æ‹¬æŒ‡å®šé¡µçš„æœ€æ–°ç‰ˆæœ¬ï¼Œé¦–å…ˆæ£€æŸ¥é¡µé¢æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™æ–°ç”³è¯·åˆ†é…ç©ºé—´ï¼Œè°ƒç”¨add_to_page_cacheæ’å…¥ç›¸åº”çš„é¡µæè¿°ç¬¦ï¼Œè°ƒç”¨lru cache addæ’å…¥åˆ°è¯¥åœ°å€ç©ºé—´çš„éæ´»è·ƒLRUé“¾è¡¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¿è¯é¡µé¢å­˜åœ¨äºPage Cacheåï¼Œä½¿ç”¨mark page accessedè®°å½•é¡µé¢å·²ç»è¢«è®¿é—®è¿‡ï¼Œè‹¥PG_uptodateæ ‡å¿—ä½0ï¼Œåˆ™é¡µé¢ä¸æ˜¯æœ€æ–°çš„ï¼Œéœ€è¦ä»ç¡¬ç›˜é‡æ–°è¯»å–è¯¥é¡µ&lt;/p&gt;
&lt;h2 id=&#34;buffer-cache&#34;&gt;Buffer Cache&lt;/h2&gt;
&lt;p&gt;åœ¨Linuxå†…æ ¸2.4ç‰ˆæœ¬ä¹‹å‰ï¼ŒBuffer Cacheå’ŒPage Cacheæ˜¯ç‹¬ç«‹çš„ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿå¯¹ç¡¬ç›˜ç­‰å—è®¾å¤‡çš„è¯»å†™æ˜¯åŸºäºå—çš„ï¼Œè€Œéé¡µï¼Œæ–‡ä»¶çš„æ•°æ®åœ¨Page Cacheä¸­ç¼“å­˜ï¼Œç¡¬ç›˜çš„å—æ•°æ®åœ¨Buffer Cacheä¸­ç¼“å­˜ã€‚ä½†æ˜¯è¿™ç§è¡¨ç¤ºæ–¹å¼æ•ˆç‡éå¸¸ä½ï¼Œè‡ª2.4ç‰ˆæœ¬çš„å†…æ ¸å¼€å§‹ï¼ŒäºŒè€…å¼€å§‹ç»Ÿä¸€è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºVFSå’Œæ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯é€šè¿‡å—Blockæ¥ç»„ç»‡ç¡¬ç›˜ä¸Šçš„æ•°æ®ï¼Œå› æ­¤Buffer Cacheå¿…é¡»å­˜åœ¨ï¼Œç›®å‰å®ƒä½œä¸ºBuffer Pageå­˜å‚¨åœ¨ç‰¹å®šçš„é¡µä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ–‡ä»¶è¿™ç§é€šè¿‡Page Cacheæ¥è¡¨ç¤ºçš„æ•°æ®ï¼Œé€šè¿‡Page Cacheæ¥è¡¨ç¤ºBuffer Cacheï¼Œè€Œå¯¹äºæ–‡ä»¶çš„metadataï¼Œç›´æ¥ä½¿ç”¨Buffer Cacheæ¥è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;è„é¡µçš„å¤„ç†&#34;&gt;è„é¡µçš„å¤„ç†&lt;/h2&gt;
&lt;p&gt;åœ¨è¿›ç¨‹ä¿®æ”¹äº†é¡µé¢æ•°æ®åï¼Œè¯¥é¡µé¢å°±æˆä¸ºäº†è„é¡µï¼Œå¹¶å°†è„é¡µåˆ·æ–°åˆ°å—è®¾å¤‡ä¸Šçš„æ“ä½œå»¶è¿Ÿï¼Œè¿™æ ·å¯ä»¥æ˜¾è‘—æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢ç¡¬ä»¶é”™è¯¯ã€æ‰ç”µç­‰æƒ…å†µå¯¼è‡´RAMå†…å®¹çš„ä¸¢å¤±ï¼Œä»¥åŠRAMå®¹é‡è¿‡å¤§çš„éœ€æ±‚ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸»åŠ¨åˆ·æ–°è„é¡µåˆ°ç¡¬ç›˜ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Page Cacheå¤ªæ»¡ï¼Œæˆ–è„é¡µæ•°é‡å¤ªå¤š&lt;/li&gt;
&lt;li&gt;è„é¡µå·²ç»å­˜åœ¨äº†è¾ƒé•¿çš„æ—¶é—´&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹è¯·æ±‚å¯¹å—è®¾å¤‡æˆ–æ–‡ä»¶çš„å˜åŒ–è¿›è¡Œåˆ·æ–°ï¼ˆsyncã€fsyncå’Œfdatasyncç³»ç»Ÿè°ƒç”¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ–‡ä»¶çš„è®¿é—®&#34;&gt;æ–‡ä»¶çš„è®¿é—®&lt;/h1&gt;
&lt;p&gt;æ–‡ä»¶çš„è®¿é—®ä¸€èˆ¬æœ‰äº”ç§æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;==è§„èŒƒæ¨¡å¼==ï¼šç”±ç³»ç»Ÿè°ƒç”¨readå’Œwriteæ¥è¯»å†™ï¼Œreadå°†é˜»å¡è°ƒç”¨è¿›ç¨‹ï¼Œç›´åˆ°æ•°æ®è¢«æ‹·è´åˆ°ç”¨æˆ·åœ°å€ç©ºé—´ï¼Œwriteåˆ™åœ¨æ•°æ®æ‹·è´åˆ°Page Cacheåç«‹å³ç»“æŸ&lt;/li&gt;
&lt;li&gt;==åŒæ­¥æ¨¡å¼==ï¼š&lt;code&gt;O_SYNC&lt;/code&gt;æ ‡å¿—ä¸º1ï¼Œå½±å“å†™æ“ä½œï¼ˆè¯»æ“ä½œæ€»æ˜¯é˜»å¡çš„ï¼‰ï¼Œå°†é˜»å¡å†™æ“ä½œï¼Œç›´åˆ°æ•°æ®è¢«æœ‰æ•ˆçš„å†™å…¥ç¡¬ç›˜ã€‚&lt;/li&gt;
&lt;li&gt;==å†…å­˜æ˜ å°„æ¨¡å¼==ï¼šæ–‡ä»¶æ‰“å¼€åï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨&lt;code&gt;mmap&lt;/code&gt;å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œæ­¤åæ–‡ä»¶æˆä¸ºå®Œå…¨ä¿å­˜åœ¨RAMä¸­çš„å­—èŠ‚æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;==ç›´æ¥I/Oæ¨¡å¼==ï¼šO_DIRECTæ ‡å¿—ä¸º1ï¼Œä»»ä½•è¯»å†™æ“ä½œéƒ½åœ¨ç”¨æˆ·åœ°å€ç©ºé—´å’Œç¡¬ç›˜é—´è¿›è¡Œä¼ è¾“ï¼Œç›´æ¥è·³è¿‡Page Cacheã€‚&lt;/li&gt;
&lt;li&gt;==å¼‚æ­¥æ¨¡å¼==ï¼šè¯¥æ¨¡å¼ä¸‹ï¼Œæ–‡ä»¶å¯ä»¥é€šè¿‡ä¸€ç»„POSIX APIæˆ–è€…Linuxç³»ç»Ÿè°ƒç”¨æ¥è¿›è¡Œè®¿é—®ï¼Œå¼‚æ­¥æ¨¡å¼ä¸‹æ•°æ®ä¼ è¾“è¯·æ±‚ä¸é˜»å¡è°ƒç”¨çš„è¿›ç¨‹ï¼Œè€Œæ˜¯åœ¨åå°æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¯»æ–‡ä»¶&#34;&gt;è¯»æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;å†…æ ¸å®ç°äº†&lt;code&gt;read()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ä¸ºè¿›ç¨‹æä¾›æ–‡ä»¶çš„è¯»å–åŠŸèƒ½ï¼Œå…¥å£ä¸º&lt;code&gt;sys_read()&lt;/code&gt;éœ€è¦æä¾›ä¸‰ä¸ªå‚æ•°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶æè¿°ç¬¦&lt;/li&gt;
&lt;li&gt;ä¿å­˜æ•°æ®çš„ç¼“å†²åŒº&lt;/li&gt;
&lt;li&gt;è¯»å–å­—ç¬¦æ•°ç›®çš„é•¿åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºVFSè€Œè¨€ï¼Œé¦–å…ˆæ ¹æ®æ–‡ä»¶æè¿°ç¬¦ç¼–å·ï¼Œå†…æ ¸(ä½¿ç”¨&lt;code&gt;fs/file_table.c&lt;/code&gt;ä¸­çš„&lt;code&gt;fget_light()&lt;/code&gt;å‡½æ•°)ä»è¿›ç¨‹çš„ &lt;code&gt;task_struct&lt;/code&gt;ä¸­æ‰¾åˆ°ä¸ä¹‹ç›¸å…³çš„æ–‡ä»¶å®ä¾‹ï¼Œ&lt;code&gt;file_pos_read()&lt;/code&gt;å‡½æ•°ç¡®å®šè¯»å–å½“å‰æ–‡ä»¶çš„ä½ç½®ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‚æ•°&lt;code&gt;file-&amp;gt;file_pos&lt;/code&gt;ï¼Œå®é™…çš„è¯»å–æ“ä½œé€šè¿‡&lt;code&gt;vfs_read()&lt;/code&gt;å‡½æ•°æ¥æ‰§è¡Œï¼Œè¯¥å‡½æ•°ä¼šåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰&lt;code&gt;file-&amp;gt;f_op-&amp;gt;read&lt;/code&gt;æ–¹æ³•ï¼Œä»è€Œç¡®å®šåç»­ä½¿ç”¨çš„å‡½æ•°ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ä¼šè°ƒç”¨&lt;code&gt;do_sync_read&lt;/code&gt;å‡½æ•°ã€‚æœ€åé€šè¿‡&lt;code&gt;file_pos_write&lt;/code&gt;å‡½æ•°æ¥è®°å½•æ–‡ä»¶æ–°çš„è¯»å†™ä½ç½®ï¼Œé€šè¿‡ä¿®æ”¹&lt;code&gt;file_ops&lt;/code&gt;çš„å€¼æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221022151840698.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221022151840698&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æé«˜åœ¨æ–‡ä»¶è¯»å–æ—¶çš„æ€§èƒ½ï¼ŒLinux kernelæä¾›äº†ç¼“å†²åŒºå’Œç¼“å†²ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;Linuxå¯¹æ–‡ä»¶çš„è¯»æ˜¯åŸºäºé¡µçš„ï¼Œå†…æ ¸æ€»æ˜¯ä¸€æ¬¡ä¼ é€å‡ ä¸ªå®Œæ•´çš„æ•°æ®é¡µã€‚è‹¥å‘èµ·readè°ƒç”¨æ—¶æ•°æ®ä¸åœ¨RAMä¸­ï¼Œå†…æ ¸åˆ™åˆ†é…ä¸€ä¸ªæ–°çš„page frameï¼Œå¹¶è°ƒå–æ–‡ä»¶çš„ç›¸åº”éƒ¨åˆ†å¡«å…¥å…¶ä¸­ï¼Œå°†å…¶åŠ å…¥åˆ°Page Cacheä¸­ï¼Œæœ€åæŠŠè¯·æ±‚çš„æ•°æ®æ‹·è´åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°ç¡¬ç›˜æ–‡ä»¶ç³»ç»Ÿï¼Œä½¿ç”¨é€šç”¨å‡½æ•°generic_file_readæ¥å®ç°readç³»ç»Ÿè°ƒç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;generic_file_read&#34;&gt;generic_file_read()&lt;/h3&gt;
&lt;p&gt;è¯¥å‡½æ•°æœ‰å¦‚ä¸‹å‡ ä¸ªå‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;filp æ–‡ä»¶å¯¹è±¡çš„åœ°å€&lt;/li&gt;
&lt;li&gt;buf ç”¨æˆ·æ€å†…å­˜åŒºåŸŸçš„çº¿æ€§åœ°å€ï¼Œç”¨äºå­˜æ”¾è¯»å–å‡ºçš„æ–‡ä»¶æ•°æ®&lt;/li&gt;
&lt;li&gt;count è¯»å–å­—ç¬¦çš„ä¸ªæ•°&lt;/li&gt;
&lt;li&gt;ppos å­˜æ”¾è¯»æ“ä½œå¼€å§‹å¤„çš„æ–‡ä»¶åç§»é‡ï¼Œä¸€èˆ¬ä¸º&lt;code&gt;filp-&amp;gt;f_pos&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¦–å…ˆï¼Œå‡½æ•°åˆå§‹åŒ–ä¸¤ä¸ªæè¿°ç¬¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å±€éƒ¨å˜é‡iovecç±»å‹çš„local_iovï¼ŒåŒ…å«bufå’Œcountå­—æ®µ&lt;/li&gt;
&lt;li&gt;å±€éƒ¨å˜é‡kiocbç±»å‹çš„kiocbï¼Œè·Ÿè¸ªæ­£åœ¨è¿›è¡Œçš„åŒæ­¥å’Œå¼‚æ­¥I/Oæ“ä½œçš„å®ŒæˆçŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åè°ƒç”¨&lt;code&gt;__generic_file_aio_read()&lt;/code&gt;è·å–ä¸Šé¢ä¸¤ä¸ªæè¿°ç¬¦çš„åœ°å€ï¼Œè¿”å›å€¼æ—¶æ–‡ä»¶æœ‰æ•ˆè¯»å…¥çš„å­—èŠ‚æ•°ï¼Œåœ¨è¯¥å‡½æ•°è¿”å›åï¼Œ&lt;code&gt;generic_file_read()&lt;/code&gt;ä¹Ÿå°†ç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;h3 id=&#34;__generic_file_aio_read&#34;&gt;__generic_file_aio_read()&lt;/h3&gt;
&lt;p&gt;æ¥æ”¶å››ä¸ªå‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;kiocbæè¿°ç¬¦åœ°å€ï¼šiocb&lt;/li&gt;
&lt;li&gt;iovecæè¿°ç¬¦æ•°ç»„çš„åœ°å€ï¼šiovï¼ˆæè¿°ç­‰å¾…æ¥æ”¶æ•°æ®çš„ç”¨æˆ·æ€ç¼“å†²åŒºï¼‰&lt;/li&gt;
&lt;li&gt;iovecæè¿°ç¬¦æ•°ç»„çš„é•¿åº¦&lt;/li&gt;
&lt;li&gt;å­˜æ”¾æ–‡ä»¶å½“å‰æŒ‡é’ˆçš„å˜é‡åœ°å€ï¼šppos&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯¥å‡½æ•°åœ¨å¯¹Page Cachè§¦å‘readæ—¶çš„æ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è°ƒç”¨access_ok()æ¥æ£€æŸ¥iovecæè¿°çš„ç”¨æˆ·æ€ç¼“å†²åŒºæ˜¯å¦åˆæ³•&lt;/li&gt;
&lt;li&gt;å»ºç«‹è¯»æ“ä½œæè¿°ç¬¦ï¼Œå­˜æ”¾ä¸ç”¨æˆ·ç¼“å†²åŒºæœ‰å…³çš„ã€æ­£åœ¨è¿›è¡Œçš„æ–‡ä»¶æ“ä½œçš„çŠ¶æ€&lt;/li&gt;
&lt;li&gt;è°ƒç”¨&lt;code&gt;do_generic_file_read()&lt;/code&gt;ï¼Œç»™å®šå‚æ•°æ–‡ä»¶å¯¹è±¡æŒ‡é’ˆfilpï¼Œæ–‡ä»¶åç§»é‡æŒ‡é’ˆpposï¼Œè¯»æ“ä½œæè¿°ç¬¦åœ°å€ã€å‡½æ•°file_read_actor()çš„åœ°å€&lt;/li&gt;
&lt;li&gt;è¿”å›æ‹·è´åˆ°ç”¨æˆ·æ€ç¼“å†²åŒºçš„å­—èŠ‚æ•°ï¼Œå¯¹åº”è¯»æ“ä½œæè¿°ç¬¦çš„writtenå­—æ®µ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;do_generic_file_read()&lt;/p&gt;
&lt;h2 id=&#34;å†™æµç¨‹&#34;&gt;å†™æµç¨‹&lt;/h2&gt;
&lt;p&gt;â€‹	å¾ˆå¤šç¡¬ç›˜æ–‡ä»¶ç³»ç»Ÿé€šè¿‡é€šç”¨å‡½æ•°generic_file_writeå®ç°writeæ–¹æ³•ã€‚writeç³»ç»Ÿè°ƒç”¨è´Ÿè´£å°†ç”¨æˆ·åœ°å€ç©ºé—´ä¸­çš„æ•°æ®ç§»åŠ¨åˆ°å†…æ ¸æ•°æ®ç»“æ„ä¸­ï¼Œç„¶åå°†æ•°æ®æ‹·è´åˆ°Page Cacheä¸­ï¼Œå°†è¿™äº›é¡µæ ‡è®°ä¸ºè„ï¼Œç„¶åæŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;â€‹	writeç³»ç»Ÿè°ƒç”¨çš„ç»“æ„ä¸readåŒæ ·ç®€å•ã€‚é™¤äº†ç”¨f_op-&amp;gt;writeå’Œdo_sync_writeæ›¿æ¢äº†readä¸­å¯¹åº”çš„ä¾‹ç¨‹ä¹‹å¤–ï¼ŒäºŒè€…çš„ä»£ç æµç¨‹å›¾å‡ ä¹å®Œå…¨ç›¸åŒã€‚&lt;/p&gt;
&lt;p&gt;â€‹	ä»å½¢å¼ä¸Šçœ‹æ¥ï¼Œsys_writeä¸sys_readçš„å‚æ•°ç›¸åŒ:ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€ä¸€ä¸ªæŒ‡é’ˆå˜é‡ã€ä¸€ä¸ªé•¿åº¦æŒ‡ç¤º(è¡¨ç¤ºä¸ºæ•´æ•°)ã€‚æ˜¾ç„¶ï¼Œå…¶è¯­ä¹‰ç¨æœ‰ä¸åŒã€‚æŒ‡é’ˆå¹¶éæŒ‡å‘å­˜å‚¨è¯»å–æ•°æ®çš„ç¼“å†²åŒºï¼Œè€Œæ˜¯æŒ‡å‘éœ€è¦ å†™å…¥æ–‡ä»¶çš„æ•°æ®ã€‚é•¿åº¦å‚æ•°æŒ‡å®šäº†æ•°æ®çš„å­—èŠ‚é•¿åº¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¢„å–æœºåˆ¶&#34;&gt;é¢„å–æœºåˆ¶&lt;/h2&gt;
&lt;p&gt;â€‹	å¾ˆå¤šç¡¬ç›˜çš„è®¿é—®éƒ½æ˜¯é¡ºåºçš„ã€‚æ™®é€šæ–‡ä»¶ä»¥ç›¸é‚»æ‰‡åŒºæˆç»„å­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šï¼Œå› æ­¤å¾ˆå°‘ç§»åŠ¨ç£å¤´å°±å¯ä»¥å¿«é€Ÿæ£€ç´¢åˆ°æ–‡ä»¶ã€‚å½“ç¨‹åºè¯»æˆ–æ‹·è´ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå®ƒé€šå¸¸ä»ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ°æœ€åä¸€ä¸ªå­—èŠ‚é¡ºåºåœ°è®¿é—®æ–‡ä»¶ã€‚å› æ­¤ï¼Œåœ¨å¤„ç†è¿›ç¨‹å¯¹åŒä¸€æ–‡ä»¶çš„ä¸€ç³»åˆ—è¯»è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä»ç¡¬ç›˜ä¸Šå¾ˆå¤šç›¸é‚»çš„æ‰‡åŒºè¯»å–ã€‚&lt;/p&gt;
&lt;p&gt;â€‹	é¢„è¯»(Read-ahead)æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œè¿™ç§æŠ€æœ¯åœ¨äºåœ¨å®é™…è¯·æ±‚å‰è¯»æ™®é€šæ–‡ä»¶æˆ–å—è®¾å¤‡æ–‡ä»¶çš„å‡ ä¸ªç›¸é‚»çš„æ•°æ®é¡µã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé¢„è¯»èƒ½æå¤§åœ°æé«˜ç¡¬ç›˜çš„æ€§èƒ½ï¼Œå› ä¸ºé¢„è¯»ä½¿ç¡¬ç›˜æ§åˆ¶å™¨å¤„ç†è¾ƒå°‘çš„å‘½ä»¤ï¼Œå…¶ä¸­çš„æ¯æ¡å‘½ä»¤éƒ½æ¶‰åŠä¸€å¤§ç»„ç›¸é‚»çš„æ‰‡åŒºã€‚æ­¤å¤–ï¼Œé¢„è¯»è¿˜èƒ½æé«˜ç³»ç»Ÿçš„æ™Œåº”èƒ½åŠ›ã€‚é¡ºåºè¯»å–æ–‡ä»¶çš„è¿›ç¨‹é€šå¸¸ä¸éœ€è¦ç­‰å¾…è¯·æ±‚çš„æ•°æ®ï¼Œå› ä¸ºè¯·æ±‚çš„æ•°æ®å·²ç»åœ¨RAMä¸­äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¼“å­˜å›å†™æœºåˆ¶&#34;&gt;ç¼“å­˜å›å†™æœºåˆ¶&lt;/h2&gt;
&lt;p&gt;ç¼“å­˜å›å†™æœºåˆ¶ä¹Ÿå°±æ˜¯Page Cacheå¯¹è„é¡µè¿›è¡Œå›å†™ï¼Œå°†å¯¹æ–‡ä»¶çš„I/Oä¿®æ”¹æ°¸ä¹…æŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¸Šçš„è¿‡ç¨‹ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚åç»­è®¡åˆ’æ·±å…¥äº†è§£Linuxå†…æ ¸å¯¹å›å†™çš„æ§åˆ¶ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ–‡ä»¶ç³»ç»Ÿ&#34;&gt;æ–‡ä»¶ç³»ç»Ÿ&lt;/h1&gt;
&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿä½œä¸ºæ“ä½œç³»ç»Ÿä¸­ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ï¼Œè´Ÿè´£åœ¨å­˜å‚¨è®¾å¤‡ä¸Šç®¡ç†ã€å­˜å‚¨ã€è·å–æ•°æ®ã€ç»´æŠ¤ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Linuxä¸­ï¼Œå†…æ ¸é€šè¿‡VFSè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå‘ç”¨æˆ·æä¾›é€šç”¨çš„æ¥å£ï¼Œå‘ä¸‹å¯¹æ¥å„ç§ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆé¿å…ä¸åŒæ–‡ä»¶ç³»ç»Ÿçš„å®ç°å·®å¼‚å¯¹ä¸Šå±‚å¸¦æ¥å½±å“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ext4&#34;&gt;ext4&lt;/h2&gt;
&lt;p&gt;æœ¬éƒ¨åˆ†å¤§é‡å†…å®¹æ¥è‡ªkernel.orgçš„æ–‡æ¡£&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.kernel.org/doc/html/latest/filesystems/ext4/index.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ext4 Data Structures and Algorithms â€” The Linux Kernel documentation&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;ext-æ–‡ä»¶ç³»ç»Ÿå‘å±•å†å²&#34;&gt;ext æ–‡ä»¶ç³»ç»Ÿå‘å±•å†å²&lt;/h3&gt;
&lt;h4 id=&#34;ext1&#34;&gt;ext1&lt;/h4&gt;
&lt;p&gt;Extended file systemï¼Œæ‰©å±•æ–‡ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;Linuxæœ€æ—©ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿä¸ºMinixçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯è¯¥ç³»ç»Ÿå­˜åœ¨æ–‡ä»¶å¤§å°é™åˆ¶çš„é—®é¢˜ï¼ŒåŒæ—¶æ€§èƒ½ä¸ä½³ã€‚åœ¨1992å¹´4æœˆï¼ŒRÃ©my Cardå¼€å‘äº†æ‰©å±•æ–‡ä»¶ç³»ç»Ÿï¼Œé¦–ä¸ªç‰ˆæœ¬ä½œä¸ºLinuxä¸­çš„æ–‡ä»¶ç³»ç»Ÿä¸€èµ·å‘è¡Œï¼Œæœ€å¤§æ”¯æŒ2GBç©ºé—´ï¼ŒåŒæ—¶å®ƒè¿˜æ˜¯Linuxä¸­ç¬¬ä¸€ä¸ªä½¿ç”¨VFSå®ç°å‡ºçš„æ–‡ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h4 id=&#34;ext2&#34;&gt;ext2&lt;/h4&gt;
&lt;p&gt;åœ¨é¦–ä¸ªextæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶è®¿é—®ã€å­˜åœ¨inodeä¿®æ”¹ä»¥åŠæ–‡ä»¶å†…å®¹ä¿®æ”¹æ²¡æœ‰ä½¿ç”¨ç‹¬ç«‹æ—¶é—´æˆ³çš„é—®é¢˜ï¼ŒåŒæ—¶æœ€å¤§ä»…æ”¯æŒ255ä¸ªå­—ç¬¦çš„æ–‡ä»¶åä»¥åŠ2GBçš„ç©ºé—´ï¼Œext2ç³»ç»Ÿé™¤äº†ä¿®å¤äº†è¿™ä¸ªé—®é¢˜å¤–ï¼Œè¿˜åœ¨ç¡¬ç›˜å­˜å‚¨æ•°æ®ç»“æ„ä¸­é¢„ç•™äº†å¾ˆå¤šç©ºé—´ä¾›æœªæ¥å¼€å‘ä½¿ç”¨ï¼Œå…·æœ‰è‰¯å¥½çš„å¯æ‹“å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå—é©±åŠ¨çš„é™åˆ¶ï¼Œext2æ–‡ä»¶ç³»ç»Ÿæœ€å¤§æ”¯æŒ2TBçš„å•ä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ext3&#34;&gt;ext3&lt;/h4&gt;
&lt;p&gt;ext3åœ¨å½“æ—¶æ€§èƒ½ä¸æ˜¯å¾ˆå‡ºä¼—ï¼Œä½†æ˜¯æ”¯æŒä»å½“æ—¶æœ€æµè¡Œçš„ext2æ–‡ä»¶ç³»ç»Ÿå‡çº§ï¼Œæ— éœ€å¤‡ä»½å’Œæ•°æ®æ¢å¤ï¼ŒåŒæ—¶æœ‰è¾ƒå°‘çš„èµ„æºå ç”¨ï¼ˆCPUå¼€é”€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ext3ç›¸è¾ƒäºext2å¢åŠ äº†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—¥å¿—æ”¯æŒ&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶ç³»ç»Ÿåœ¨çº¿å¢é•¿&lt;/li&gt;
&lt;li&gt;å¯¹å¤§ç›®å½•æä¾›HTreeå“ˆå¸Œæ ‘ç´¢å¼•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ext3æä¾›äº†ä¸‰ä¸ªæ—¥å¿—çº§åˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—¥å¿—ï¼ˆæœ€ä½é£é™©ï¼‰ï¼šmetadataå’Œæ–‡ä»¶å†…å®¹ä¸€èµ·å†™å…¥æ—¥å¿—ä¸­ï¼Œç”±äºè¿˜è¦å†™å…¥æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤å¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰åºï¼ˆä¸­ç­‰é£é™©ï¼‰ï¼šåªå°†metadataå†™å…¥æ—¥å¿—ï¼Œä½†æ˜¯ä¿è¯metadataæäº¤å‰ï¼Œæ–‡ä»¶å†…å®¹ä¼šè¢«å†™å…¥ã€‚å¤§éƒ¨ä»½å‘è¡Œç‰ˆé»˜è®¤çš„æ–¹å¼ã€‚å†™å…¥è¿‡ç¨‹ä¸­å´©æºƒæ—¶ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šæ¸…é™¤è¿˜æ²¡æœ‰è¢«æäº¤çš„æ–‡ä»¶ä¿®æ”¹/åˆ›å»ºï¼Œä½†æ˜¯å¯¹äºæ–‡ä»¶çš„è¦†ç›–å†™å…¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ–‡ä»¶å¤„äºæ–°æ—§æ–‡ä»¶çš„ä¸­é—´æ€ã€‚&lt;/li&gt;
&lt;li&gt;å›å†™ï¼ˆæœ€é«˜é£é™©ï¼‰ï¼šåªè®°å½•metadataåˆ°æ—¥å¿—ï¼Œæ–‡ä»¶å†…å®¹åœ¨æ—¥å¿—æäº¤å‰æˆ–è€…æäº¤åå†™å…¥ã€‚å¦‚æœåœ¨æ—¥å¿—æäº¤å‰å†™å…¥å¤±è´¥ï¼Œä¼šå¯¼è‡´ç¡¬ç›˜å‡ºç°åƒåœ¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ext3å­˜åœ¨çš„ä¸€äº›ç¼ºé™·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ²¡æœ‰åœ¨çº¿çš„ç¢ç‰‡æ•´ç†å·¥å…·&lt;/li&gt;
&lt;li&gt;å®˜æ–¹ç¼ºå°‘å‹ç¼©å·¥å…·&lt;/li&gt;
&lt;li&gt;ä¸æ”¯æŒæ¢å¤å·²ç»åˆ é™¤çš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ç¼ºå°‘å¿«ç…§æ”¯æŒ&lt;/li&gt;
&lt;li&gt;æ—¥å¿—ä¸­ä¸æ”¯æŒæ ¡éªŒå’Œ&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å››ä¸ªå­—èŠ‚å­˜å‚¨Unixæ—¶é—´ï¼Œå› æ­¤åœ¨2038å¹´1æœˆ18æ—¥ä¹‹åå°†æ— æ³•ç»§ç»­å¤„ç†æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ext4-1&#34;&gt;ext4&lt;/h4&gt;
&lt;p&gt;ext4åœ¨Linux 2.6.28ä¸­ä½œä¸ºåŠŸèƒ½å®Œæ•´ç¨³å®šçš„æ–‡ä»¶ç³»ç»Ÿå‘å¸ƒï¼Œext4æ–‡ä»¶ç³»ç»Ÿé¦–å…ˆå…¼å®¹äº†åŸæœ‰çš„ext3ç³»ç»Ÿï¼Œæä¾›å®‰å…¨å¯é çš„å¿«é€Ÿè¿ç§»ã€‚åŒæ—¶è¿˜æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ”¯æŒæ›´å¤§çš„æ–‡ä»¶ç³»ç»Ÿå’Œæ–‡ä»¶å¤§å°&lt;/p&gt;
&lt;p&gt;ä»¥4KBå—ï¼Œç›®å‰æ”¯æŒæœ€å¤§&lt;code&gt;1EiB(1024*1024*1024GB)&lt;/code&gt;çš„æ–‡ä»¶ç³»ç»Ÿå¤§å°å’Œ16TiBçš„æ–‡ä»¶å¤§å°ï¼Œä½¿ç”¨48bitæ¥ç¼–å€ï¼Œæœªæ¥ä¼šæ”¯æŒ64bit&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­ç›®å½•å¯æ‰©å±•æ€§&lt;/p&gt;
&lt;p&gt;ext4æ–‡ä»¶ç³»ç»Ÿæ”¯æŒæœ€å¤š64000ä¸ªå­ç›®å½•ï¼Œæ˜¯ext3æ–‡ä»¶ç³»ç»Ÿçš„ä¸¤å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰©å±•æ•°æ®å—&lt;/p&gt;
&lt;p&gt;é¼“åŠ±å¯¹å¤§æ–‡ä»¶åˆ’åˆ†å¤šä¸ªè¿ç»­æ•°æ®å—ï¼Œåœ¨ç¡¬ç›˜ä¸Šè¿›è¡Œè¿ç»­å¸ƒå±€ï¼Œä»è€Œå‡å°‘ç»´æŠ¤å¤§é‡çš„é—´æ¥æ˜ å°„ï¼Œæœ‰åŠ©äºæé«˜æ€§èƒ½ï¼Œå‡å°‘ç¡¬ç›˜ç¢ç‰‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤šå—åŒæ—¶åˆ†é…ï¼Œ&lt;/p&gt;
&lt;p&gt;åœ¨ext3æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶ç³»ç»Ÿåœ¨åˆ†é…ç©ºé—²å—æ—¶ï¼Œåªèƒ½ä¸€æ¬¡å¤„ç†ä¸€ä¸ªå—ç”³è¯·ï¼Œext4æ”¯æŒå¤šå—åˆ†é…æœºåˆ¶ï¼Œå¯ä»¥ä¸€æ¬¡ç”³è¯·å¤šä¸ªå—&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å—çš„å»¶æ—¶åˆ†é…&lt;/p&gt;
&lt;p&gt;å€Ÿé‰´äº†XFSã€ZFSã€btrfsç­‰ç°ä»£æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨æ‰§è¡Œå†™å…¥è¿‡ç¨‹æ—¶ï¼Œåœ¨ä»¥å¾€çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œéƒ½æ˜¯å¯¹å†™å…¥åˆ°cacheçš„æ•°æ®ç«‹å³åˆ†é…ç›¸åº”çš„blockï¼Œæ¶ˆè€—äº†å¤§é‡çš„æ—¶é—´ï¼Œå»¶æ—¶åˆ†é…åï¼Œåªæœ‰å½“æ•°æ®éœ€è¦è¢«åˆ·æ–°åˆ°ç¡¬ç›˜æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå—çš„åˆ†é…ï¼Œå¯ä»¥å’Œä¸Šé¢ä¸¤ä¸ªfeatè¿›è¡Œé…åˆï¼Œæé«˜äº†æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¿«é€Ÿfsck&lt;/p&gt;
&lt;p&gt;fsckæ˜¯æå…¶è€—æ—¶çš„è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯éœ€è¦æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæ‰€æœ‰çš„inodeã€‚ext4ä¸­ï¼Œåœ¨æ¯ä¸ªgroup&amp;rsquo;s inode tableä¸­éƒ½ä¿å­˜äº†ä¸€ä¸ªç©ºé—²inodeé“¾è¡¨ï¼ˆåŒæ—¶ä¿å­˜äº†checksumï¼‰ï¼Œå› æ­¤fsckå°±ä¸å¿…å†æ£€æŸ¥è¿™äº›inode&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ—¥å¿—æ ¡éªŒå’Œ&lt;/p&gt;
&lt;p&gt;æ—¥å¿—åœ¨ç¡¬ç›˜ä¸­æ˜¯å¾ˆå®¹æ˜“å‡ºé”™çš„éƒ¨åˆ†ï¼Œæ·»åŠ æ ¡éªŒå’Œå¯ä»¥é¿å…æ–‡ä»¶ç³»ç»Ÿæ¢å¤é”™è¯¯çš„æ—¥å¿—å¸¦æ¥æ›´å¤§çš„æŸå¤±ã€‚ä½¿ç”¨æ ¡éªŒå’Œè¿˜ä½¿å¾—åœ¨ext3ä¸­æ—¥å¿—çš„ä¸¤æ­¥æäº¤ç®€åŒ–ä¸ºä¸€æ­¥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ— æ—¥å¿—æ¨¡å¼&lt;/p&gt;
&lt;p&gt;ext4ä¸­å¯ä»¥å…³é—­æ—¥å¿—&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨çº¿ç¢ç‰‡æ•´ç†&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨e4defragå·¥å…·æ‰‹åŠ¨è¿›è¡Œç¢ç‰‡æ•´ç†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;inodeç›¸å…³feat&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ›´å¤§çš„inode&lt;/p&gt;
&lt;p&gt;ä»128bytesæé«˜åˆ°256bytes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;inodeé¢„ç•™&lt;/p&gt;
&lt;p&gt;åˆ›å»ºç›®å½•æ—¶é¢„ç•™ä¸€äº›inodeæé«˜æ€§èƒ½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çº³ç§’çº§æ—¶é—´æˆ³&lt;/p&gt;
&lt;p&gt;æé«˜ç³»ç»Ÿçš„time resolution&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¡¬ç›˜ç©ºé—´é¢„åˆ†é…&lt;/p&gt;
&lt;p&gt;åº”ç”¨å¯ä»¥è®©æ–‡ä»¶ç³»ç»Ÿé¢„å…ˆåˆ†é…ä¸€éƒ¨åˆ†ç¡¬ç›˜ä¸Šçš„ç©ºé—´ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šæå‰åˆ›å»ºå¥½ç›¸å…³çš„æ•°æ®ç»“æ„å¹¶åˆ†é…ç›¸åº”çš„å—ï¼Œåç»­å¯ä»¥ç›´æ¥å†™å…¥æ•°æ®ï¼Œç±»ä¼¼P2Pä¸‹è½½æ—¶é¢„åˆ†é…ï¼Œ1.å¯ä»¥é˜²æ­¢ç±»ä¼¼åŠŸèƒ½çš„ä½æ•ˆç‡åº”ç”¨çº§å®ç°ï¼›2.å‡å°‘ç¡¬ç›˜ç¢ç‰‡ï¼›3.å¯¹äºå®æ—¶åº”ç”¨æ¥è¯´ï¼ˆå»¶è¿Ÿæ•æ„Ÿï¼Œèˆªç©ºå·¥ä¸šç­‰ï¼‰ï¼Œè¿™ä¸ªç‰¹ç‚¹æ”¹å–„äº†å»¶è¿Ÿã€‚æ­¤featé€šè¿‡&lt;code&gt;libc posix_fallocate()&lt;/code&gt;å®ç°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é»˜è®¤å¯ç”¨å†™å±éšœ&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ¶ˆè€—ä¸€äº›æ€§èƒ½æ¥æ”¹å–„æ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´æ€§ï¼Œå®ƒç¡®ä¿æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®åœ¨ç¡¬ç›˜ä¸Šè¢«æ­£ç¡®åœ°å†™å…¥å’Œæ’åºï¼Œå³ä½¿åœ¨æ‰ç”µæ—¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¯¹äºä¸€äº›åˆ›å»ºå¤§é‡å°æ–‡ä»¶æˆ–è€…æ“ä½œå…ƒæ•°æ®çš„ç¨‹åºï¼Œä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½å½±å“ã€‚å¦‚æœç¡¬ç›˜æ˜¯ç”µæ± ä¾›ç”µï¼Œé€šè¿‡&lt;code&gt;barrier=0&lt;/code&gt;å¯ä»¥å…³é—­å†™å±éšœï¼ˆä¼šä¿è¯å®‰å…¨æ€§ï¼‰ã€‚å†™å±éšœä¿æŠ¤ä¿è¯åœ¨æ•°æ®å†™å…¥&lt;code&gt;ç¼“å­˜ï¼ˆç¡¬ç›˜ç¼“å­˜ï¼‰&lt;/code&gt;åï¼Œå…ˆå†™å…¥æ—¥å¿—ä¸­çš„å…ƒæ•°æ®åˆ·æ–°åˆ°ç¡¬ç›˜ï¼Œé˜²æ­¢å‡ºç°å› ä¸ºè°ƒåº¦ç­–ç•¥å¯¼è‡´çš„æ•°æ®å…ˆäºæ—¥å¿—å†™å…¥ç¡¬ç›˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;discard/TRIM&lt;/p&gt;
&lt;p&gt;ä¸ºSSDæä¾›çš„TRIMæ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºSSDè€Œè¨€ï¼Œç”±äºæ–‡ä»¶ç³»ç»Ÿåœ¨åˆ é™¤æ—¶åªå¯¹å—æ ‡è®°ä¸ºç©ºé—²ï¼Œè€ŒSSDå´å¹¶ä¸çŸ¥é“å“ªäº›æ•°æ®å—å¯ç”¨ï¼Œå†æ¬¡å†™å…¥æ—¶ä¼šå…ˆæ¸…é™¤é—ªå­˜ä¸­çš„æ•°æ®ï¼Œå†è¿›è¡Œå†™å…¥ï¼Œè¦æ“¦é™¤æ— æ•ˆé¡µï¼Œè¦å…ˆç§»èµ°æœ‰æ•ˆé¡µï¼Œç„¶åå†å¯¹ä¸€æ•´è¡Œè¿›è¡Œæ“¦é™¤ï¼Œæœ€åæ‰èƒ½æ‰§è¡Œå†™å…¥è¿‡ç¨‹ï¼Œè¿™ä¸ªç°è±¡ä¹Ÿè¢«ç§°ä¸º&lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Write_amplification&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å†™å…¥æ”¾å¤§(Write Amplification)&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;TRIMä¸»è¦ä½¿å¾—æ–‡ä»¶ç³»ç»Ÿå‘ŠçŸ¥SSDå“ªäº›é¡µä¸å†åŒ…å«æœ‰æ•ˆçš„æ•°æ®ï¼Œæœ‰åŠ©äºæé«˜SSDçš„å¯¿å‘½å’Œç£¨æŸå‡è¡¡&lt;/p&gt;
&lt;p&gt;éšç€ä½¿ç”¨çš„blockæ•°é‡æ¥è¿‘SSDçš„å®¹é‡ä¸Šé™ï¼Œä¼šå¯¼è‡´SSDçš„æ€§èƒ½ä¸‹é™ï¼Œæ–‡ä»¶ç³»ç»Ÿé€šè¿‡discardæŒ‡ä»¤å‘ŠçŸ¥SSDå“ªäº›èŒƒå›´å†…çš„blockå·²ç»ä¸å†ä½¿ç”¨ï¼ŒSSDå¯ä»¥å°†å…¶å›æ”¶æˆ–è€…ç”¨æ¥å®ç°ç£¨æŸå‡è¡¡&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ•°æ®ç»„ç»‡&#34;&gt;æ•°æ®ç»„ç»‡&lt;/h3&gt;
&lt;p&gt;ext4æ–‡ä»¶ç³»ç»Ÿå°†éƒ¨åˆ†blockç»„ç»‡ä¸ºä¸€ä¸ªgroupï¼Œé»˜è®¤blockå¤§å°é‡‡ç”¨4KBï¼Œå› æ­¤ä¸€ä¸ªgroupä¸­çš„blockæ•°é‡ä¸º&lt;code&gt;8*block_size_in_bytes=32768 blocks&lt;/code&gt;ï¼Œç©ºé—´ä¸º128MBã€‚&lt;/p&gt;
&lt;p&gt;ext4éƒ¨åˆ†åœ¨ç¡¬ç›˜ä¸­æŒ‰å°ç«¯å†™å…¥ï¼Œjdb2æ—¥å¿—éƒ¨åˆ†åœ¨ç¡¬ç›˜ä¸­æŒ‰å¤§ç«¯å†™å…¥ã€‚&lt;/p&gt;
&lt;p&gt;ext4åœ¨åˆ†é…ç¡¬ç›˜ç©ºé—´æ—¶åªèƒ½åˆ†é…è‹¥å¹²ä¸ªblockï¼Œä¸€ä¸ªblockåŒ…å«ç¡¬ç›˜ä¸Šçš„è‹¥å¹²ä¸ªæ‰‡åŒºï¼Œæ‰‡åŒºçš„æ•°é‡å¿…é¡»æ˜¯2çš„å¹‚æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä½¿ç”¨æ‰©å±•å¸ƒå±€çš„æ–‡ä»¶ï¼ˆé€šè¿‡blockæ˜ å°„ç»´æŠ¤ï¼‰å¿…é¡»å­˜æ”¾åœ¨æ–‡ä»¶ç³»ç»Ÿå‰$2^{32}$ä¸ªblockä¸­ï¼Œé€šè¿‡æ‰©å±•å¸ƒå±€æ¥ä¿å­˜çš„æ–‡ä»¶ï¼Œå¿…é¡»å­˜æ”¾åœ¨å‰$2^{48}$ä¸ªblockä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº32ä½å’Œ64ä½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå„ä¸ªæ•°æ®ç»“æ„çš„å¤§å°é™åˆ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221115165058013.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221115165058013&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221115165128885.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221115165128885&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªBlock Groupä¸­ï¼Œæ•°æ®çš„ç»„ç»‡å¦‚è¡¨æ ¼æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Group 0 Padding&lt;/th&gt;
&lt;th&gt;ext4 Super Block&lt;/th&gt;
&lt;th&gt;Group Descriptors&lt;/th&gt;
&lt;th&gt;Reserved GDT Blocks&lt;/th&gt;
&lt;th&gt;Data Block Bitmap&lt;/th&gt;
&lt;th&gt;inode Bitmap&lt;/th&gt;
&lt;th&gt;inode Table&lt;/th&gt;
&lt;th&gt;Data Blocks&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1024 bytes&lt;/td&gt;
&lt;td&gt;1 block&lt;/td&gt;
&lt;td&gt;many blocks&lt;/td&gt;
&lt;td&gt;many blocks&lt;/td&gt;
&lt;td&gt;1 block&lt;/td&gt;
&lt;td&gt;1 block&lt;/td&gt;
&lt;td&gt;many blocks&lt;/td&gt;
&lt;td&gt;many more blocks&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç¡¬ç›˜ä¸­ä¼šé¢„ç•™1024 bytesï¼Œç”¨äºæ“ä½œç³»ç»Ÿçš„å¼•å¯¼æ¨¡å—å®‰è£…ï¼Œè¯¥paddingåˆ†åŒºåªæœ‰group 0å«æœ‰ï¼Œä¸ºäº†é¿å…supper blockæŸåå¯¼è‡´æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸å¯ç”¨ï¼Œåœ¨å…¶ä»–block groupä¸­è¿˜ä¼šæœ‰å¤‡ä»½ï¼Œå¦‚æœä¸€ä¸ªblock groupä¸å«æœ‰å†—ä½™å¤‡ä»½ï¼Œé‚£ä¹ˆå®ƒå°†ä»¥data block bitmapå¼€å¤´ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ‰§è¡Œmkfsæ—¶ï¼Œè¿˜ä¼šåœ¨group descriptoræè¿°ç¬¦åˆ†åŒºå’Œdata block bitmapåˆ†åŒºä¹‹é—´åˆ†é…ä¸€ä¸ªä¿ç•™çš„GDT blocksåˆ†åŒºï¼Œç”¨äºæ–‡ä»¶ç³»ç»Ÿæ—¥åçš„æ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;ext4æ–‡ä»¶ç³»ç»Ÿä¸­è¿˜å¼•å…¥äº†Flexible Block Groupsçš„æ¦‚å¿µ(flex_bg)ï¼Œä¸»è¦æ€æƒ³æ˜¯å°†è‹¥å¹²ä¸ªblock groupç»„åˆæˆä¸€ä¸ªå¤§çš„Groupï¼Œå°†æ‰€æœ‰block groupä¸­çš„å…ƒæ•°æ®ï¼ˆinodeï¼Œbitmapï¼‰éƒ½é›†ä¸­åˆ°ç¬¬ä¸€ä¸ªblock groupä¸­ï¼Œæé«˜å¯¹å…ƒæ•°æ®åŠ è½½å’ŒæŸ¥è¯¢çš„æ•ˆç‡ï¼Œå¹¶ä¸”ä½¿å¾—æ–‡ä»¶æ•°æ®åœ¨ç¡¬ç›˜ä¸Šè¿ç»­ï¼Œæ›´ç´§å‡‘ã€‚ä¸€èˆ¬é€šè¿‡&lt;code&gt;2^sb.s_log_groups_per_flex&lt;/code&gt;ä¸ªblock groupæ¥ç»„æˆä¸€ä¸ªå¤§çš„Groupã€‚&lt;/p&gt;
&lt;p&gt;è‡ªext3èµ·ï¼Œextæ–‡ä»¶ç³»ç»Ÿå°±å¼€å§‹ä½¿ç”¨Meta block groups(META_BG)ï¼Œæ˜¯ä¸€ç»„åªç”¨ä¸€ä¸ªgroup descriptoræ¥æè¿°çš„block groupsï¼Œé¦–ä¸ªblock groupä¸å†å­˜å‚¨æ¯ä¸ªblock groupçš„æè¿°ç¬¦ï¼Œè½¬ç”±meta block groupæ¥å­˜å‚¨ï¼Œå¹¶ä¸”ä¼šåœ¨å…¶ä¸­å­˜å‚¨å‡ ä¸ªå†—ä½™å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºext4æ–‡ä»¶ç³»ç»Ÿçš„è¯»å†™æµç¨‹è®¡åˆ’åœ¨æ­¤åå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« è¿›è¡Œæ€»ç»“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;f2fs&#34;&gt;F2FS&lt;/h2&gt;
&lt;p&gt;F2FSæ–‡ä»¶ç³»ç»Ÿæå‡ºäº&lt;code&gt;USENIX FAST&#39;15&lt;/code&gt;ï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/conference/fast15/technical-sessions/presentation/lee&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;F2FS: A New File System for Flash Storage | USENIX&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¨ç§°ä¸ºFlash-Friendly File Systemï¼ŒåŸºäºæ—¥å¿—ç»“æ„æ–‡ä»¶ç³»ç»Ÿ(Log-structured File System, LFS)ï¼Œé’ˆå¯¹LFSä¸­wandering treeå’Œgcå¼€é”€å¤§çš„é—®é¢˜è¿›è¡Œäº†ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸»è¦ç‰¹ç‚¹&#34;&gt;ä¸»è¦ç‰¹ç‚¹&lt;/h3&gt;
&lt;p&gt;é’ˆå¯¹é—ªå­˜è¿›è¡Œäº†ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;==æ‰©å¤§éšæœºå†™å…¥åŒºåŸŸæ¥æé«˜æ€§èƒ½==ï¼ˆæ­¤å¤„å­˜åœ¨ç–‘é—®ï¼‰ï¼Œä½†å¸¦æ¥äº†ç©ºé—´å±€éƒ¨æ€§&lt;/li&gt;
&lt;li&gt;å°½å¯èƒ½ä½¿å¾—æ–‡ä»¶ç³»ç»Ÿçš„å¤„ç†å•å…ƒä¸FTLä¸­ä¿æŒä¸€è‡´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é’ˆå¯¹wandering treeé—®é¢˜ï¼Œè¯¥é—®é¢˜æ˜¯å› ä¸ºLFSçš„è„æ•°æ®é€šè¿‡è¿½åŠ æ›´æ–°ï¼Œå¦‚æœä¸€ä¸ªæ•°æ®å—å˜æˆè„æ•°æ®ï¼Œé‚£ä¹ˆå…¶ç´¢å¼•å—ï¼Œä»¥åŠé—´æ¥ç´¢å¼•å—éƒ½ä¼šå˜æˆè„å—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨nodeæ¥ä»£æ›¿inodeå’ŒæŒ‡é’ˆå—&lt;/li&gt;
&lt;li&gt;é€šè¿‡åŒ…å«æ‰€æœ‰nodeå—åœ°å€çš„Node Address Table(NAT)æ¥åˆ‡æ–­æ›´æ–°é€’å½’çš„ä¼ æ’­&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åƒåœ¾å›æ”¶é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æŒåå°æ¸…ç†&lt;/li&gt;
&lt;li&gt;æ”¯æŒè´ªå¿ƒå’Œcost-benefitç®—æ³•&lt;/li&gt;
&lt;li&gt;ä¸ºåŠ¨æ€/é™æ€å†·çƒ­æ•°æ®åˆ†ç¦»æä¾›multi-head logs&lt;/li&gt;
&lt;li&gt;å¼•å…¥è‡ªé€‚åº”æ—¥å¿—æ¥å®ç°é«˜æ•ˆçš„å—åˆ†é…&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;btrfs&#34;&gt;Btrfs&lt;/h2&gt;
&lt;p&gt;Btrfsæ˜¯ä¸€ä¸ªå†™æ—¶å¤åˆ¶çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŸºäºB-treeå®ç°ï¼Œä¸“æ³¨äºå®¹é”™ï¼Œä¿®å¤å’Œæ˜“äºç®¡ç†ï¼Œå‘å¸ƒäº2014å¹´ï¼Œå‘å±•ç›®æ ‡æ˜¯ä¸ºäº†å–ä»£ext3æ–‡ä»¶ç³»ç»Ÿï¼Œè§£å†³ext3çš„é™åˆ¶ã€‚åœ¨2021å¹´ï¼ŒFedora 33å®£å¸ƒå°†ä½¿ç”¨Btrfsä½œä¸ºå®‰è£…æ—¶é»˜è®¤çš„æ–‡ä»¶ç³»ç»Ÿã€‚è€ŒFedoraå—åˆ°redhatçš„ç›´æ¥èµåŠ©ï¼Œè¯´æ˜Btrfsåœ¨ä¸æ–­å‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œå¾—åˆ°äº†ç¤¾åŒºä¸­éƒ¨åˆ†ç”¨æˆ·ä»¥åŠä¼ä¸šçš„è®¤å¯ï¼Œç›®å‰è¿˜å¤„åœ¨æµ‹è¯•å’Œä¸æ–­å®Œå–„çš„é˜¶æ®µã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦ç‰¹ç‚¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºB-Treeç»´æŠ¤å…ƒæ•°æ®ï¼Œæ’å…¥æŸ¥è¯¢æ“ä½œé«˜æ•ˆ&lt;/li&gt;
&lt;li&gt;åŸºäºCOWï¼Œæé«˜ç¡¬ç›˜å¯¿å‘½&lt;/li&gt;
&lt;li&gt;æ”¯æŒåªè¯»/å¯è¯»å¿«ç…§&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;å—ioå±‚-ä¸-ioè°ƒåº¦å™¨&#34;&gt;å—I/Oå±‚ ä¸ I/Oè°ƒåº¦å™¨&lt;/h1&gt;
&lt;h2 id=&#34;å—è®¾å¤‡&#34;&gt;å—è®¾å¤‡&lt;/h2&gt;
&lt;p&gt;å¯¹äºUnixç³»ç»Ÿæ¥è¯´ï¼Œæœ‰ç€ä¸€åˆ‡çš†æ–‡ä»¶çš„è®¾è®¡å“²å­¦ï¼Œå› æ­¤å¤–éƒ¨è®¾å¤‡åœ¨æ“ä½œç³»ç»Ÿçœ‹æ¥æ˜¯ä¸€ä¸ªè®¾å¤‡æ–‡ä»¶ã€‚è®¾å¤‡æ–‡ä»¶å…±åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å—è®¾å¤‡ï¼šæ•°æ®å¯ä»¥è¢«éšæœºè®¿é—®&lt;/li&gt;
&lt;li&gt;å­—ç¬¦è®¾å¤‡ï¼šæ•°æ®ä¸å¯ä»¥è¢«éšæœºè®¿é—®ï¼Œæˆ–è€…åŒ…å«å—é™åˆ¶çš„éšæœºè®¿é—®ï¼ˆè®¾å¤‡å†…éƒ¨æ„æˆï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å—è®¾å¤‡çš„ä¸€ä¸ªä¸»è¦ç‰¹ç‚¹å°±æ˜¯CPUå’Œæ€»çº¿è¯»å†™æ•°æ®çš„æ—¶é—´å¼€é”€ä¸ç¡¬ç›˜ç¡¬ä»¶é€Ÿåº¦ä¸åŒ¹é…ã€‚&lt;/p&gt;
&lt;p&gt;å†…æ ¸å†å¯¹å—è®¾å¤‡å‘å‡ºI/Oè¯·æ±‚æ—¶ï¼Œå†…æ ¸åˆ©ç”¨&lt;code&gt;é€šç”¨å—å±‚&lt;/code&gt;å‘èµ·I/Oï¼Œæ¯æ¬¡I/Oè¯·æ±‚éƒ½æ˜¯é€šè¿‡ä¸€ä¸ª&lt;code&gt;bio&lt;/code&gt;ç»“æ„ä½“æ¥æè¿°ã€‚é€šç”¨å—å±‚ä¸‹çš„I/Oè°ƒåº¦ç¨‹åºä¼šæ ¹æ®ç­–ç•¥å°†å¾…å¤„ç†çš„I/Oè¯·æ±‚è¿›è¡Œå½’ç±»ï¼Œå°†ç›¸é‚»çš„è¯·æ±‚èšé›†åœ¨ä¸€èµ·ï¼Œå‡å°‘ç¡¬ç›˜ç£å¤´çš„ç§»åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;å—æ˜¯æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶è®¾å¤‡åœ¨ä¼ è¾“æ•°æ®æ—¶çš„åŸºæœ¬å•ä½ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»mq-deadlineï¼Œkyberï¼Œbfqä¸‰ä¸ªå¤šé˜Ÿåˆ—è®¾è®¡çš„è°ƒåº¦å™¨&lt;/p&gt;
&lt;h2 id=&#34;mq-deadline&#34;&gt;mq-deadline&lt;/h2&gt;
&lt;p&gt;mq-deadlineè°ƒåº¦å™¨ä¸»è¦æ ¹æ®deadlineè°ƒåº¦å™¨æ¥è®¾è®¡ï¼Œæ˜¯deadlineè°ƒåº¦å™¨çš„å¤šé˜Ÿåˆ—ç‰ˆæœ¬ï¼Œé€‚é…äº†blockå±‚çš„å¤šé˜Ÿåˆ—&lt;/p&gt;
&lt;p&gt;mq-deadlineè°ƒåº¦å™¨å°†IOåˆ†ä¸ºreadå’Œwriteä¸¤ç§ç±»å‹ï¼Œå¯¹äºè¿™æ¯ç§ç±»å‹çš„IOæœ‰ä¸€æ£µçº¢é»‘æ ‘å’Œä¸€ä¸ªFIFOçš„é˜Ÿåˆ—ï¼Œçº¢é»‘æ ‘ç”¨äºå°†I/OæŒ‰ç…§å…¶è®¿é—®çš„LBAæ’åˆ—æ–¹ä¾¿æŸ¥æ‰¾åˆå¹¶ï¼ŒFIFOé˜Ÿåˆ—åˆ™è®°å½•äº†I/Oè¿›å…¥mq-deadlineè°ƒåº¦å™¨çš„é¡ºåºï¼Œä»¥æä¾›è¶…æ—¶æœŸé™çš„ä¿éšœ&lt;/p&gt;
&lt;p&gt;readè¯·æ±‚çš„I/Oå¯ä»¥æŠ¢å writeçš„åˆ†å‘æœºä¼šï¼Œä½†ä¸èƒ½ä¸€ç›´å æœ‰ï¼Œç»´æŠ¤äº†ä¸€ä¸ªè®¡æ•°ä¿è¯readè¯·æ±‚ä¸ä¼šå¯¼è‡´writeè¯·æ±‚é¥¥é¥¿&lt;/p&gt;
&lt;p&gt;mq-deadlineè°ƒåº¦å™¨ä¼šä¼˜å…ˆå»æ‰¹é‡å¼åœ°åˆ†å‘I/Oè€Œä¸å»ç®¡I/Oçš„åˆ°æœŸæ—¶é—´ï¼Œå½“æ‰¹é‡åˆ†å‘åˆ°ä¸€å®šçš„ä¸ªæ•°å†å…³å¿ƒåˆ°æœŸæ—¶é—´ï¼Œç„¶åå»åˆ†å‘å³å°†åˆ°æœŸçš„I/O&lt;/p&gt;
&lt;p&gt;æœ€åmq-deadlineé’ˆå¯¹syncç©¿é€æ€§I/Oè¿™ç§éœ€è¦å°½å¿«å‘é€åˆ°è®¾å¤‡çš„I/Oè®¾ç½®å¦å¤–ä¸€ä¸ªdispatché˜Ÿåˆ—ï¼Œç„¶åæ¯æ¬¡æ´¾å‘çš„æ—¶å€™éƒ½ä¼˜å…ˆæ´¾å‘dispatché˜Ÿåˆ—ä¸Šçš„I/O&lt;/p&gt;
&lt;h2 id=&#34;bfq&#34;&gt;bfq&lt;/h2&gt;
&lt;p&gt;å…¨ç§°ä¸ºBudget Fair Queueingï¼Œbfqæ˜¯ä¸€ç§æ¯”ä¾‹å…±äº«çš„I/Oè°ƒåº¦å™¨ï¼Œæœ‰ä¸€äº›ä½å»¶è¿Ÿèƒ½åŠ›ã€‚æ”¯æŒcgroupã€‚&lt;/p&gt;
&lt;p&gt;BFQçš„ä¸»è¦ç‰¹ç‚¹æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BFQä¿è¯äº†ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å“åº”èƒ½åŠ›ï¼Œä»¥åŠå¯¹æ—¶é—´æ•æ„Ÿç¨‹åºä¿è¯ä½å»¶è¿Ÿï¼ˆéŸ³è§†é¢‘æ’­æ”¾ï¼‰&lt;/li&gt;
&lt;li&gt;BFQåœ¨è¿›ç¨‹æˆ–è€…ç»„ä¹‹é—´åˆ†é…å¸¦å®½ã€æ—¶é—´ï¼Œåœ¨ä¿æŒååé‡æ—¶è¿›è¡Œæ—¶é—´åˆ†é…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨é»˜è®¤é…ç½®ä¸‹ï¼ŒBFQä¼˜å…ˆè€ƒè™‘å»¶è¿Ÿè€Œéååé‡ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®&lt;code&gt;low_latency=0&lt;/code&gt;æ¥å…³é—­ä½å»¶è¿Ÿå¯å‘å¼ç®—æ³•ï¼Œæ¥æé«˜è®¾å¤‡ååé‡ã€‚BFQé€šè¿‡é”æ¥ä¿æŠ¤æ¯ä¸ªI/Oè¯·æ±‚ï¼Œä¼šå¢åŠ ä¸€äº›é¢å¤–å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;BFQæ˜¯ä¸€ç§æ¯”ä¾‹ä»½é¢è°ƒåº¦å™¨ï¼Œä¸»è¦éƒ¨åˆ†å€Ÿé‰´äº†CFQï¼Œæ˜¯ä¸€ç§å…¬å¹³çš„è°ƒåº¦å™¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªåœ¨è®¾å¤‡ä¸Šæ‰§è¡ŒI/Oçš„è¿›ç¨‹éƒ½ä¸ä¸€ä¸ªæƒé‡å’Œä¸€ä¸ªbfq é˜Ÿåˆ—ç›¸å…³è”&lt;/li&gt;
&lt;li&gt;BFQæˆæƒä¸€ä¸ªé˜Ÿåˆ—ï¼ˆè¿›ç¨‹ï¼‰å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…å¯¹è®¾å¤‡çš„ç‹¬å è®¿é—®ï¼Œå¹¶é€šè¿‡å°†æ¯ä¸ªé˜Ÿåˆ—ä¸é¢„ç®—ï¼ˆè¯·æ±‚æ‰‡åŒºæ•°é‡ï¼‰ç›¸å…³è”æ¥å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªé˜Ÿåˆ—è·å¾—è®¾å¤‡è®¿é—®æˆæƒåï¼Œé˜Ÿåˆ—çš„é¢„ç®—ä¼šåœ¨æ¯æ¬¡è¯·æ±‚å‘é€æ—¶æ ¹æ®è¯·æ±‚å¤§å°é€’å‡&lt;/li&gt;
&lt;li&gt;å½“å‘ç”Ÿï¼šé˜Ÿåˆ—å®Œæˆå…¶é¢„ç®—ã€é˜Ÿåˆ—æ¸…ç©ºã€è§¦å‘é¢„ç®—è¶…æ—¶æ—¶ï¼Œé˜Ÿåˆ—æ‰ä¼šè¿‡æœŸï¼Œé¢„ç®—è¶…æ—¶æœºåˆ¶å¯ä»¥é˜²æ­¢éšæœºI/Oè¿›ç¨‹å¯¹è®¾å¤‡é•¿æ—¶é—´çš„å ç”¨é™ä½ååé‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;kyber&#34;&gt;kyber&lt;/h2&gt;
&lt;p&gt;Kyber I/Oè°ƒåº¦å™¨æ˜¯Linuxä¸Šé¢é’ˆå¯¹é«˜é€Ÿå­˜å‚¨è®¾å¤‡ï¼ˆNVMeé—ªå­˜ï¼‰è®¾è®¡çš„ä¸€ä¸ªæ–°çš„I/Oè°ƒåº¦å™¨ï¼Œé…å’Œå¤šé˜Ÿåˆ—çš„Blockå±‚ä½¿ç”¨ã€‚åœ¨Linux 4.12çš„æ—¶å€™å’ŒBFQè°ƒåº¦å™¨ä¸€èµ·æˆä¸ºå†…æ ¸ä¸­çš„ä¸€ä¸ªå¯é€‰é¡¹&lt;/p&gt;
&lt;p&gt;Kyberè°ƒåº¦å™¨çš„åŸºæœ¬æ€è·¯æ˜¯ä¼šä¸ºæ¯ä¸€ä¸ªçš„ç¡¬ä»¶çš„é˜Ÿåˆ—ç»´æŠ¤ä¸€ä¸ªä¸åŒç±»å‹I/Oè¯·æ±‚çš„é˜Ÿåˆ—ï¼Œè¿™äº›è¯·æ±‚ä¸»è¦æ ¹æ®I/Oæ“ä½œçš„æ–¹å¼æ¥è¿›è¡ŒåŒºåˆ†ã€‚KyberæŒ‰ç…§è¯»ã€åŒæ­¥å†™ä»¥åŠå…¶å®ƒçš„(å¼‚æ­¥å†™ç­‰)å°†I/Oè¯·æ±‚åˆ†ä¸ºäº†3ç±»ã€‚åœ¨Kyberçš„è®¾è®¡ä¸­ï¼Œæ›´åŠ å€¾å‘äºè®©è¯»ä¼˜å…ˆï¼Œè¿™ä¸ªç­–ç•¥ä¹Ÿå’Œå…¶å®ƒçš„ä¸€äº›è°ƒåº¦å™¨çš„è®¾è®¡ç±»ä¼¼&lt;/p&gt;
&lt;p&gt;Kyberåœ¨ä¸€ä¸ªKyberä¸Šä¸‹æ–‡ä¸­ç»´æŠ¤äº†å…³äºè¿™å‡ ç±»è¯·æ±‚çš„é˜Ÿåˆ—ã€‚å®ƒé€šè¿‡é™åˆ¶æ¯ä¸€ä¸ªé˜Ÿåˆ—çš„é•¿åº¦æ¥å¯¹åœ¨è¿™é‡Œäº§ç”Ÿçš„è¯·æ±‚çš„å»¶è¿Ÿè¿›è¡Œæ§åˆ¶ã€‚Kyberåªæœ‰åœ¨è¿™äº›é˜Ÿåˆ—é‡Œé¢çš„è¯·æ±‚è¢«å¤„ç†äº†ä¹‹åæ‰ä¼šæ”¶é›†æ–°çš„è¯·æ±‚ã€‚è¿™é‡Œé™åˆ¶çš„æ–¹å¼é‡‡ç”¨äº†åŸºäºTokençš„æ–¹å¼&lt;/p&gt;
&lt;p&gt;ç”±äºKyberé¢å‘çš„æ˜¯é«˜é€Ÿå­˜å‚¨ï¼Œè¿™ç±»è®¾å¤‡ä¸€èˆ¬æ˜¯NVMe SSDã€NVMã€‚é‡‡ç”¨ç±»ä¼¼CFQä¸­çš„ä¸€äº›å¯¹è¯·æ±‚æ’åºçš„æ–¹æ³•å¯èƒ½æœ‰æŸäºæ€§èƒ½ï¼Œæ‰€ä»¥åœ¨Kyberä¸­æ²¡æœ‰å¯¹è¯·æ±‚æ’åºçš„é€»è¾‘ã€‚Kyberä¼šå¯¹ä¸€äº›I/Oè¯·æ±‚è¿›è¡Œåˆå¹¶æ“ä½œï¼Œä»¥åŠä¼šå°è¯•æ‰¹é‡å¤„ç†è¿™äº›è¯·æ±‚æ¥æé«˜æ€§èƒ½ã€‚æ‰¹é‡å¤„ç†çš„å¤§å°æ ¹æ®è¯·æ±‚ç±»å‹æ¥å†³å®š&lt;/p&gt;
&lt;h1 id=&#34;nvmeæ¥å£åè®®&#34;&gt;NVMeæ¥å£åè®®&lt;/h1&gt;
&lt;h2 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;NVMeåè®®çš„äº§ç”Ÿæ˜¯ä¸ºäº†å–ä»£å›ºæ€ç¡¬ç›˜åŸæœ‰çš„AHCIåè®®+SATAæ¥å£ï¼Œéšç€å›ºæ€ç¡¬ç›˜æŠ€æœ¯çš„å‘å±•ï¼Œä½¿å¾—æ€§èƒ½ç“¶é¢ˆä»å­˜å‚¨è®¾å¤‡ä¸Šçš„è½¬ç§»åˆ°äº†åè®®å’Œæ¥å£ä¸­ï¼Œäºæ˜¯å›ºæ€ç¡¬ç›˜çš„å‡ å¤§ç”Ÿäº§å•†ä¸€èµ·åˆ¶å®šäº†è¯¥åè®®ã€‚&lt;/p&gt;
&lt;p&gt;NVMeå®é™…ä¸Šæ˜¯éæ˜“å¤±æ€§å­˜å‚¨å™¨æ ‡å‡†ï¼Œä¸é™äºé—ªå­˜SSDï¼Œä½¿ç”¨PCIeæ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”äºAHCIåè®®ï¼ŒNVMeçš„ä¸»è¦ç‰¹ç‚¹ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½æ—¶å»¶ï¼šå­˜å‚¨ä»‹è´¨æ–¹é¢ï¼Œå­˜å‚¨ä»‹è´¨å¾—åˆ°äº†å·¨å¤§æå‡ï¼›æ§åˆ¶å™¨æ–¹é¢ï¼ŒPCIeä¸»æ§ç›´æ¥ä¸CPUç›¸è¿ï¼ŒSATAæ¥å£éœ€è¦å—æ¡¥æ§åˆ¶å™¨ä¸­è½¬å†è¿æ¥CPUï¼›è½¯ä»¶æ¥å£æ–¹é¢ï¼Œç®€åŒ–äº†æŒ‡ä»¤è·¯å¾„ï¼Œæé«˜äº†å¹¶å‘èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;é«˜æ€§èƒ½ï¼šç›¸è¾ƒäºAHCIåšå‡ºäº†å¤§é‡ä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;ä½åŠŸè€—ï¼šè‡ªåŠ¨åŠŸè€—çŠ¶æ€åˆ‡æ¢ï¼ŒåŠ¨æ€èƒ½è€—ç®¡ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;nvmeå·¥ä½œåŸç†&#34;&gt;NVMeå·¥ä½œåŸç†&lt;/h2&gt;
&lt;p&gt;NVMeä½œä¸ºé«˜å±‚æ¬¡çš„åè®®ï¼ŒåŸåˆ™ä¸Šå¯ä»¥ç”¨äºä»»ä½•æ¥å£ï¼Œä¸€èˆ¬ä½¿ç”¨PCIe&lt;/p&gt;
&lt;p&gt;NVMeåˆ¶å®šäº†ä¸»æœºå’ŒSSDä¹‹é—´çš„é€šä¿¡å‘½ä»¤ï¼ŒNVMeå…±æœ‰ä¸¤ç§å‘½ä»¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Adminå‘½ä»¤ï¼šç”¨äºä¸»æœºç®¡ç†ã€SSDæ§åˆ¶&lt;/li&gt;
&lt;li&gt;I/O å‘½ä»¤ï¼šç”¨äºä¸»æœºå’ŒSSDä¹‹é—´çš„æ•°æ®ä¼ è¾“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Adminå‘½ä»¤é›†æœ‰ï¼š&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221105160942779.png&#34; alt=&#34;image-20221105160942779&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;NVM I/OæŒ‡ä»¤é›†æœ‰ï¼š&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221105161030669.png&#34; alt=&#34;image-20221105161030669&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h3 id=&#34;ä»ä¸»æœºioè¯·æ±‚åˆ°ssd&#34;&gt;ä»ä¸»æœºI/Oè¯·æ±‚åˆ°SSD&lt;/h3&gt;
&lt;p&gt;NVMeæœ‰ä¸‰ä¸ªé‡è¦çš„æœºåˆ¶ï¼ŒSubmission Queueã€Completion Queueã€Doorbell Registerã€‚&lt;/p&gt;
&lt;p&gt;SQå’ŒCQä½äºä¸»æœºçš„å†…å­˜ä¸­ï¼ŒDBä½äºSSDæ§åˆ¶å™¨å†…éƒ¨ï¼Œä¸‹å›¾ç›´è§‚çš„å±•ç¤ºäº†ä»–ä»¬ä¹‹é—´çš„ä½ç½®å…³ç³»ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221105161458148.png&#34; alt=&#34;image-20221105161458148&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;åœ¨ä¸»æœºå‘èµ·I/OæŒ‡ä»¤æ—¶ï¼Œç°å°†æŒ‡ä»¤æ”¾åœ¨SQä¸­ï¼Œä¸»æœºä¼šé€šè¿‡ä¿®æ”¹DBå¯„å­˜å™¨æ¥é€šçŸ¥SSDä»SQä¸­å–å‡ºéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤ã€‚CQè®°å½•äº†æŒ‡ä»¤æ‰§è¡Œçš„çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ï¼ŒSSDè´Ÿè´£å‘CQä¸­å†™å…¥å‘½ä»¤çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;NVMeå¯¹æŒ‡ä»¤çš„å¤„ç†æµç¨‹å¯ä»¥ç”¨ä¸‹å›¾æ¥æ¦‚æ‹¬ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221105162016851.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221105162016851&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸»æœºå†™è¯·æ±‚åˆ°SQ&lt;/li&gt;
&lt;li&gt;ä¸»æœºå†™SQå°¾DBå¯„å­˜å™¨ï¼Œé€šçŸ¥SSDéœ€è¦æ‰§è¡ŒI/Oè¯·æ±‚&lt;/li&gt;
&lt;li&gt;SSDæ§åˆ¶å™¨å–å‡ºSQä¸­çš„è¯·æ±‚&lt;/li&gt;
&lt;li&gt;SSDæ§åˆ¶å™¨æ‰§è¡Œå‘½ä»¤&lt;/li&gt;
&lt;li&gt;SSDæ§åˆ¶å™¨å°†è¯·æ±‚çš„çŠ¶æ€å†™å…¥CQ&lt;/li&gt;
&lt;li&gt;SSDæ§åˆ¶å™¨å‘å‡ºMSI-Xä¸­æ–­ï¼Œé€šçŸ¥ä¸»æœºæŒ‡ä»¤å®Œæˆ&lt;/li&gt;
&lt;li&gt;ä¸»æœºæ”¶åˆ°ä¸­æ–­åï¼Œå¤„ç†CQï¼Œçœ‹æŸ¥è¯·æ±‚çš„å®ŒæˆçŠ¶æ€&lt;/li&gt;
&lt;li&gt;ä¸»æœºå†™å…¥CQå¤´DBå¯„å­˜å™¨ï¼Œå‘ŠçŸ¥SSDè¯¥æŒ‡ä»¤çš„ç»“æœå·²ç»æ”¶åˆ°å¹¶å¤„ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;submission-queueå’Œcompletion-queueç®€ä»‹&#34;&gt;Submission Queueå’ŒCompletion Queueç®€ä»‹&lt;/h2&gt;
&lt;p&gt;ç”±äºNVMeçš„SQã€CQæœºåˆ¶ï¼Œè¿™ä¸¤ä¸ªæ•°æ®ç»“æ„å¿…ç„¶æ˜¯æˆå¯¹å­˜åœ¨çš„ï¼Œä¹Ÿå­˜åœ¨å¤šå¯¹ä¸€çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºI/OæŒ‡ä»¤å’ŒAdminæŒ‡ä»¤ï¼Œåˆ†åˆ«ç”±ä¸“æœ‰çš„SQå’ŒCQè¿›è¡Œç®¡ç†ï¼Œå³Admin SQ/CQå’ŒI/O SQ/CQã€‚&lt;/p&gt;
&lt;p&gt;I/O SQå’ŒSQæ˜¯é€šè¿‡Adminçš„ç›¸å…³æŒ‡ä»¤æ¥è¿›è¡Œåˆ›å»ºçš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»æœºæ–¹é¢æ¯ä¸ªCPUæ ¸å¿ƒå¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªSQï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªCQã€‚ä¸€ä¸ªæ ¸å¿ƒåˆ›å»ºå¤šä¸ªSQä¸»è¦æ˜¯ä¸ºäº†æé«˜å¤šçº¿ç¨‹çš„å¹¶å‘èƒ½åŠ›ï¼ŒåŒæ—¶å¯ä»¥å¯¹ä¸åŒSQè®¾ç½®ä¼˜å…ˆçº§æ¥æé«˜æœåŠ¡è´¨é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221105165937311.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221105165937311&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºAdmin SQ/CQé˜Ÿåˆ—ï¼Œæ·±åº¦åœ¨$2-4096(4K)$&lt;/p&gt;
&lt;p&gt;å¯¹äºI/O SQ/CQé˜Ÿåˆ—ï¼Œæ·±åº¦åœ¨$2-65536(64K)$ï¼Œä¸€ä¸ªSQå‘½ä»¤æ¡ç›®å¤§å°ä¸º$64Byte$ï¼Œä¸€ä¸ªCQæ¡ç›®å¤§å°ä¸º$16Byte$ï¼Œé˜Ÿåˆ—æ·±åº¦å¯ä»¥è‡ªè¡Œé…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªPCIeæ¥å£ä¹Ÿæ”¯æŒå¤šä¸ªlaneã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªNVMeçš„å·¥ä½œæµç¨‹åƒæ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸¤ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221105234231636.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221105234231636&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;db-doorbell-register&#34;&gt;DB: Doorbell Register&lt;/h2&gt;
&lt;p&gt;åœ¨SQå’ŒCQé˜Ÿåˆ—ä¸­éƒ½æœ‰Headå’ŒTailï¼Œå¹¶ä¸”åˆ†åˆ«æœ‰å¯¹åº”çš„Doorbellï¼Œå³Head DBå’ŒTail DBï¼ŒDBåœ¨SSDä¸€ç«¯ï¼Œè®°å½•SQå’ŒCQé˜Ÿåˆ—å¤´ã€å°¾çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºSSDè€Œè¨€ï¼Œè¦é¢‘ç¹ä»SQå¤´å–å‡ºæ•°æ®ï¼Œå¯ä»¥è½»æ¾çš„è·å–SQé˜Ÿå¤´çš„ä½ç½®ï¼Œæ‰€ä»¥SQ Head DBç”±SSDæ¥ç»´æŠ¤ï¼Œè€Œå¯¹äºSQçš„é˜Ÿå°¾å¯¹äºä¸»æœºè€Œè¨€æ›´å®¹æ˜“ç»´æŠ¤ï¼Œå› ä¸ºè¦é¢‘ç¹çš„å‘é˜Ÿå°¾æ’å…¥æ•°æ®ï¼Œå› æ­¤SQ Tail DBç”±ä¸»æœºç»´æŠ¤ï¼ŒSSDæ ¹æ®SQçš„å¤´å°¾å¯ä»¥è·å–å½“å‰é˜Ÿåˆ—ä¸­&lt;code&gt;æœ‰å¤šå°‘è¯·æ±‚åœ¨ç­‰å¾…æ‰§è¡Œ&lt;/code&gt;ã€‚åŒç†ï¼ŒCQ Head DBç”±ä¸»æœºæ¥ç»´æŠ¤ï¼ŒCQ Tail DBç”±SSDæ¥ç»´æŠ¤ï¼ŒSSDæ ¹æ®CQé˜Ÿåˆ—çš„å¤´å°¾æ¥åˆ¤æ–­CQé˜Ÿåˆ—æ˜¯å¦è¿˜èƒ½æ¥å—æ–°çš„&lt;code&gt;è¯·æ±‚å®Œæˆä¿¡æ¯&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä»Doorbellçš„åå­—æ¥çœ‹ï¼Œè¿˜æœ‰é€šçŸ¥çš„ä½œç”¨ï¼Œå½“Doorbell Registerçš„å€¼æ”¹å˜æ—¶ï¼ŒSSDå°±çŸ¥é“æœ‰æ–°çš„è¯·æ±‚éœ€è¦å¤„ç†ï¼›ä¸»æœºå°±çŸ¥é“æœ‰æ–°çš„è¯·æ±‚å·²ç»å®Œæˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šå¯¹äºä¸»æœºæ¥è¯´ï¼ŒDBæ˜¯å¯ä»¥å†™ä¸å¯è¯»çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…¶ä»–æœ‰å…³nvmeçš„å†…å®¹&#34;&gt;å…¶ä»–æœ‰å…³NVMeçš„å†…å®¹&lt;/h2&gt;
&lt;p&gt;å¯»å€é—®é¢˜ï¼ˆPRPã€SGLï¼‰&lt;/p&gt;
&lt;p&gt;Namespace&lt;/p&gt;
&lt;p&gt;æ•°æ®ä¿æŠ¤é—®é¢˜&lt;/p&gt;
&lt;p&gt;åç»­æœ‰æ—¶é—´å†å¯¹è¿™äº›å†…å®¹è¿›è¡Œå­¦ä¹ &lt;/p&gt;
&lt;h1 id=&#34;åŸºäºé—ªå­˜çš„å›ºæ€ç›˜&#34;&gt;åŸºäºé—ªå­˜çš„å›ºæ€ç›˜&lt;/h1&gt;
&lt;p&gt;æ­¤å‰ä¸€ç¯‡åšå®¢æ•´ç†äº†æœ‰å…³é—ªå­˜å’Œå›ºæ€ç›˜çš„å†…å®¹ï¼Œä¸‹æ–‡ä¸ºè½¬è½½è¿‡æ¥çš„å†…å®¹&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.ipandai.club/p/%e5%ad%98%e5%82%a8%e6%8a%80%e6%9c%af%e5%9f%ba%e7%a1%80%e5%9b%ba%e6%80%81%e7%a1%ac%e7%9b%98/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Flash Memory &amp;amp;&amp;amp; å›ºæ€ç¡¬ç›˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸»è¦ç”±Flash Memory å’ŒFTLç»„æˆ&lt;/p&gt;
&lt;p&gt;Non-Volatile Memory æä¾›ä½å»¶è¿ŸæŒä¹…æ€§çš„å†…å­˜/å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšå†…å­˜&lt;/p&gt;
&lt;p&gt;æ ¹æ®å»¶è¿Ÿæ•°é‡çº§ï¼Œä¸€èˆ¬ç”¨PCMåšå†…å­˜ï¼ŒFlash Memoryåšå¤–å­˜&lt;/p&gt;
&lt;h2 id=&#34;flash-memory&#34;&gt;Flash Memory&lt;/h2&gt;
&lt;h3 id=&#34;é—ªå­˜åŸç†&#34;&gt;é—ªå­˜åŸç†&lt;/h3&gt;
&lt;h4 id=&#34;ç±»å‹&#34;&gt;ç±»å‹&lt;/h4&gt;
&lt;p&gt;NORé—ªå­˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨å¯†åº¦ä½&lt;/li&gt;
&lt;li&gt;å¯å­—èŠ‚æ”¹å†™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;NANDé—ªå­˜ï¼ˆä¸»æµï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨å¯†åº¦é«˜&lt;/li&gt;
&lt;li&gt;ä¸å¯è¦†ç›–å†™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”¨äºå¤–å­˜éœ€è¦è¾ƒé«˜çš„å­˜å‚¨é‡çº§ï¼Œä¸€èˆ¬ç”¨NAND&lt;/p&gt;
&lt;h4 id=&#34;é—ªå­˜å•å…ƒ&#34;&gt;é—ªå­˜å•å…ƒ&lt;/h4&gt;
&lt;p&gt;è¯»ï¼šç”µå‹ä»£è¡¨ä¸åŒæ•°å€¼&lt;/p&gt;
&lt;p&gt;å†™ï¼šç”µå­æ³¨å…¥&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”æ™¶ä½“ç®¡æ·»åŠ äº†æµ®æ …é—¨ï¼Œä¿å­˜ç”µå­&lt;/p&gt;
&lt;p&gt;åŸç†å…¶å®æ¯”è¾ƒç®€å•ï¼Œéç”µå­ç³»å°±ä¸åšå¤ªè¯¦ç»†çš„ç ”ç©¶äº†&lt;/p&gt;
&lt;p&gt;é—ªå­˜é¡µ(4KB,8KB,16KBï¼Œè¯»å†™å•å…ƒ)ï¼Œé˜µåˆ—ä¸­çš„æ¯ä¸€è¡Œ&lt;/p&gt;
&lt;p&gt;é—ªå­˜å—(æ“¦é™¤å•å…ƒ)ï¼Œç”±å¤šä¸ªé¡µç»„æˆçš„å•å…ƒ&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922124359358.png&#34; alt=&#34;image-20220922124359358&#34; style=&#34;zoom:33%;&#34; /&gt;
&lt;p&gt;é€‰ä¸­è¡Œå’Œåˆ—ï¼Œç„¶åå°†æ•°æ®åŠ è½½åˆ°Sense Amplifiers&lt;/p&gt;
&lt;p&gt;å­˜å‚¨å•å…ƒæœ‰ä¸¤ä¸ªé˜ˆå€¼çš„ç”µå‹ï¼Œå¯ä»¥æ ¹æ®ä¸¤ä¸ªç”µå‹çš„ä¸­ç‚¹ä½œä¸ºè¯»ç”µå‹ï¼Œ2.5Vè¯»ç”µå‹æ—¶å·¦è¾¹é€šç”µï¼Œæ•°æ®ä¸º1ï¼Œå³è¾¹åˆ™ä¸é€šç”µï¼Œæ•°æ®ä¸º0&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922124755447.png&#34; alt=&#34;image-20220922124755447&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;Pass Through&lt;/p&gt;
&lt;p&gt;é€‰å–ä¸€ä¸ªè¾ƒå¤§çš„ç”µå‹ï¼Œä½¿å¾—æ‰€æœ‰çš„å•å…ƒéƒ½æ¥é€šï¼Œæ•°æ®ä¸º1ï¼Œä¸å½±å“å…¶ä»–è¡Œçš„çŠ¶æ€&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922131649578.png&#34; alt=&#34;image-20220922131649578&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºçš„å­˜å‚¨ç»“æ„ï¼Œåœ¨ç¬¬äºŒè¡Œæ–½åŠ 2.5Vç”µå‹ï¼Œå…¶ä»–è¡Œæ–½åŠ 5Vï¼Œæœ€ç»ˆè¯»å–æ•°æ®ä¸º0011&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922134857889.png&#34; alt=&#34;image-20220922134857889&#34; style=&#34;zoom:33%;&#34;/&gt;
&lt;p&gt;ä¸Šè¿°ä¸ºSLCï¼ŒSingle Level Cellï¼Œå•å­˜å‚¨å•å…ƒ&lt;/p&gt;
&lt;h4 id=&#34;å¤šæ¯”ç‰¹é—ªå­˜&#34;&gt;å¤šæ¯”ç‰¹é—ªå­˜&lt;/h4&gt;
&lt;p&gt;å¤šæ¯”ç‰¹é—ªå­˜å•å…ƒMLCï¼ŒåŒ…å«2Bits 4ä¸ªLevelçš„æ•°æ®&lt;/p&gt;
&lt;p&gt;TLC 3 Bits 8ä¸ªLevel&lt;/p&gt;
&lt;p&gt;QLC 4 Bits 16ä¸ªLevel&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¤šæ¯”ç‰¹ä½¿ç”¨æ ¼é›·ç æ¥ç¼–ç &lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨æ ¼é›·ç ä½¿å¾—ç›¸é‚»å•å…ƒåªæœ‰ä¸€ä½å·®å¼‚ï¼Œæ–¹ä¾¿çº é”™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¤šæ¯”ç‰¹æé«˜äº†å­˜å‚¨å¯†åº¦ï¼Œä½†æ˜¯æé«˜äº†é”™è¯¯ç‡ï¼Œå› ä¸ºæ–½åŠ çš„ç”µå‹å·®è·å¾ˆå°ã€‚å¯é æ€§ä¼šé™ä½ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922135516463.png&#34; alt=&#34;image-20220922135516463&#34; style=&#34;zoom:45%;&#34; /&gt;
&lt;p&gt;å¯¹äºå¤šæ¯”ç‰¹çš„å†™ï¼ŒMLCåˆ†ä¸ºé«˜æ¯”ç‰¹å’Œä½æ¯”ç‰¹ï¼Œå¯¹äºä½æ¯”ç‰¹çš„çŠ¶æ€åŠ åç§»ç”µå‹ç¡®å®šé«˜æ¯”ç‰¹ï¼Œåœ¨ä½æ¯”ç‰¹æ—¶éœ€è¦åŠ çš„ç”µå‹è¾ƒå¤§ï¼Œæ“ä½œéš¾åº¦ä½ï¼Œè¿è¡Œé€Ÿåº¦å¿«ï¼Œåœ¨é«˜æ¯”ç‰¹æ—¶éœ€è¦åŠ çš„ç”µå‹å°ï¼Œæ³¢å½¢çš„é—´è·å°ï¼Œæ“ä½œéš¾åº¦é«˜ï¼Œè¿è¡Œçš„é€Ÿåº¦è¾ƒæ…¢ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922140421405.png&#34; alt=&#34;image-20220922140421405&#34; style=&#34;zoom:40%;&#34; /&gt;
&lt;p&gt;å¯¹äºå¤šæ¯”ç‰¹çš„è¯»ï¼Œå…ˆçœ‹lower bitï¼ŒåŠ ä¸€æ¬¡ç”µå‹ï¼Œå³å¯ç­›é€‰å‡ºä½ä½çš„0ï¼Œ1ï¼Œå†åŠ ä¸¤æ¬¡ç”µå‹ç¡®å®šupper bitã€‚å› ä¸ºupper bitä¸º0çš„åœ¨ä¸­é—´éƒ¨åˆ†ï¼Œä¸º1çš„åœ¨ä¸¤ä¾§ï¼Œå› æ­¤éœ€è¦åœ¨ä¸¤ä¸ªåˆ†ç•Œçº¿åˆ†åˆ«åŠ ä¸€æ¬¡ç”µå‹æ¥ç¡®å®šupper bitä¸ºå¤šå°‘ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922141455826.png&#34; alt=&#34;image-20220922141455826&#34; style=&#34;zoom:40%;&#34; /&gt;
&lt;h4 id=&#34;é—ªå­˜&#34;&gt;é—ªå­˜&lt;/h4&gt;
&lt;p&gt;Blockçš„å¤§å°çš„ä¸€ç§é…ç½®ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€è¡Œæœ‰ä¸¤ä¸ªPageï¼ŒUpper Pageå’ŒLower Pageï¼Œæ¯ä¸ªå•å…ƒä¸­ï¼Œä½ä½æ„æˆLower Pageï¼Œé«˜ä½æ„æˆUpper Pageï¼Œæœ‰128ä¸ªå•å…ƒï¼Œ128K/8=16KB&lt;/p&gt;
&lt;p&gt;æœ‰64åˆ—bitlinesï¼Œä¸€ä¸ªblockçš„å¤§å°å³ä¸º&lt;code&gt;16KB*64*2=2MB&lt;/code&gt;ï¼Œä¸€èˆ¬æŒ‰ç…§æ­¤æ¯”ä¾‹é…ç½®Block&lt;/p&gt;
&lt;p&gt;å†™å…¥æ—¶æŒ‰ç…§å›ºå®šé¡ºåºï¼Œå†™å…¥é«˜ä½é¡µé¢ç›¸äº’ç‹¬ç«‹ï¼Œä¸èƒ½åŒæ—¶å†™ï¼Œåœ¨å†™å…¥åŠ å‹æ—¶å®¹æ˜“ä½¿ç›¸é‚»å•å…ƒå‘ç”Ÿæ•°æ®åç§»ï¼Œè¦é™ä½é”™è¯¯ç‡&lt;/p&gt;
&lt;p&gt;å†™å…¥æ˜¯éœ€è¦å…ˆæ“¦é™¤å†å†™å…¥ï¼Œæ“¦é™¤æ•´ä¸ªå—&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922143608667.png&#34; alt=&#34;image-20220922143608667&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h4 id=&#34;é—ªå­˜ç‰¹æ€§&#34;&gt;é—ªå­˜ç‰¹æ€§&lt;/h4&gt;
&lt;h5 id=&#34;è¯»å†™ç²’åº¦&#34;&gt;è¯»å†™ç²’åº¦&lt;/h5&gt;
&lt;p&gt;é—ªå­˜é¡µè¯»å†™ç²’åº¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;4KBï¼Œ8KBï¼Œ16KBå¿…é¡»å…¨éƒ¨è¯»å–æˆ–è€…å†™å…¥&lt;/li&gt;
&lt;li&gt;uså»¶è¿Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é—ªå­˜å—æ“¦é™¤åŠ›åº¦&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2MBæ“¦é™¤&lt;/li&gt;
&lt;li&gt;mså»¶è¿Ÿï¼Œå¯ä»¥é€šè¿‡FTLæ¥ä¼˜åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;ä¸å¯è¦†ç›–å†™&#34;&gt;ä¸å¯è¦†ç›–å†™&lt;/h5&gt;
&lt;p&gt;å†™å‰éœ€è¦æ“¦é™¤ï¼Œè¯»å†™ç²’åº¦ä¸æ“¦é™¤ç²’åº¦ä¸åŒ&lt;/p&gt;
&lt;p&gt;å­˜åœ¨64bytesçš„OOBï¼ˆout of bound areaï¼‰ï¼Œä¿å­˜ECCï¼Œç”¨äºçº é”™ï¼Œå®¹å¿å†™å…¥æ—¶éƒ¨åˆ†æ¯”ç‰¹å‡ºé”™&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922162139217.png&#34; alt=&#34;image-20220922162139217&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h5 id=&#34;æœ‰é™æ¬¡æ“¦é™¤&#34;&gt;æœ‰é™æ¬¡æ“¦é™¤&lt;/h5&gt;
&lt;p&gt;éšç€æ“¦é™¤æ¬¡æ•°çš„å¢åŠ ï¼Œå­˜å‚¨å•å…ƒä¸èƒ½å¯é çš„ä¿æŒçŠ¶æ€ï¼ˆå­˜å‚¨æ•°æ®ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ°§åŒ–å±‚è€åŒ–å˜è–„ï¼ŒæŸç¼šç”µå­èƒ½åŠ›å˜å¼±&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è€ä¹…æ€§ å˜è–„åœ°æ¬¡æ•°&lt;/li&gt;
&lt;li&gt;ä¿æŒåŠ› ä¸é€šç”µå¯ä»¥æ”¾ç½®çš„æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;SLCï¼š10wæ¬¡&lt;/p&gt;
&lt;p&gt;MLCï¼š1wæ¬¡&lt;/p&gt;
&lt;p&gt;TLCï¼š1kæ¬¡&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç‰¹æ€§æ¥è®¾è®¡FTLå›ºä»¶&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922164523965.png&#34; alt=&#34;image-20220922164523965&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h2 id=&#34;ftl&#34;&gt;FTL&lt;/h2&gt;
&lt;p&gt;å›ºæ€ç¡¬ç›˜æ•´ä½“æ„æˆ&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922164728094.png&#34; alt=&#34;image-20220922164728094&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;SSDä¸­çš„é€šé“å¯ä»¥å¹¶è¡Œï¼Œé€šé“ä¸­ä¹Ÿå¯ä»¥å¹¶è¡Œè¯»å–ï¼Œæ¯ä¸ªPlaneä¸­æœ‰å¯„å­˜å™¨ï¼Œæš‚æ—¶å­˜å‚¨å‡†å¤‡å¥½çš„æ•°æ®ã€‚ä¸åŒå•å…ƒå¹¶è¡Œï¼Œå› æ­¤å†…éƒ¨å¸¦å®½å¤§&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922165354311.png&#34; alt=&#34;image-20220922165354311&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h3 id=&#34;åƒåœ¾å›æ”¶&#34;&gt;åƒåœ¾å›æ”¶&lt;/h3&gt;
&lt;p&gt;pageå¯¹äºOSè€Œè¨€ï¼Œæ˜¯å†™å…¥æ—¶çš„block&lt;/p&gt;
&lt;p&gt;Pageä¸‰ç§çŠ¶æ€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç©ºé—² free page&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆé¡µ live/valid page&lt;/li&gt;
&lt;li&gt;æ— æ•ˆé¡µ dead/invalid page&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922184349456.png&#34; alt=&#34;image-20220922184349456&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;éœ€è¦æ“¦é™¤æ— æ•ˆé¡µï¼Œå…ˆç§»èµ°æœ‰æ•ˆé¡µï¼Œç„¶åå†å¯¹ä¸€æ•´è¡Œè¿›è¡Œæ“¦é™¤ï¼Œè½¬ä¸ºç©ºé—²&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922184406162.png&#34; alt=&#34;image-20220922184406162&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;æ—¶é—´å¼€é”€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤åˆ¶æœ‰æ•ˆæ•°æ®åˆ°$(R_{Latency}+W_{Latency})*N$ï¼ŒNæ˜¯ç§»åŠ¨pageçš„æ•°é‡&lt;/li&gt;
&lt;li&gt;æ“¦é™¤äº§ç”Ÿçš„å¼€é”€ msçº§å»¶è¿Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;gcç­–ç•¥&#34;&gt;GCç­–ç•¥&lt;/h4&gt;
&lt;p&gt;è¦è§£å†³çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½•æ—¶å¯åŠ¨GC&lt;/li&gt;
&lt;li&gt;é€‰ä¸­é‚£äº›/å¤šå°‘Blockè¿›è¡ŒGC&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆçš„é¡µå¦‚ä½•è¢«è½¬å†™&lt;/li&gt;
&lt;li&gt;æ–°æ•°æ®å†™åˆ°å“ªé‡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GCçš„æ—¶é—´å¼€é”€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å—æ“¦é™¤çš„æ—¶é—´ ms&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆé¡µçš„å¤åˆ¶æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è´ªå¿ƒç­–ç•¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰¾åˆ°è„é¡µæœ€å¤šçš„blockæ¥è¿›è¡Œæ“¦é™¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Age&lt;/li&gt;
&lt;li&gt;Hot/Cold æ•°æ®éš”ç¦»ï¼Œåˆ†ç»„é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç£¨æŸå‡è¡¡&#34;&gt;ç£¨æŸå‡è¡¡&lt;/h3&gt;
&lt;p&gt;ä¼˜åŒ–å¯¿å‘½ï¼Œæœ‰é™æ€å’ŒåŠ¨æ€ç­–ç•¥&lt;/p&gt;
&lt;p&gt;é™æ€ï¼šå‘¨æœŸæ€§çš„è°ƒæ•´å†·çƒ­æ•°æ®å­˜å‚¨çš„ä½ç½®&lt;/p&gt;
&lt;p&gt;å†·çƒ­æ•°æ®çš„åˆ†åŒºï¼šå°†å†·æ•°æ®æ”¾åœ¨ä¸€èµ·ï¼Œçƒ­æ•°æ®æ”¾åœ¨ä¸€èµ·&lt;/p&gt;
&lt;h3 id=&#34;ftlç®€ä»‹&#34;&gt;FTLç®€ä»‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç»´æŠ¤æ˜ å°„ï¼Œè™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨SRAMå­˜å‚¨æ˜ å°„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘ä¸Šå±‚éšè—æ“¦é™¤æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¿å…åŸåœ°æ›´æ–°-&amp;gt;å¼‚åœ°æ›´æ–°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ›´æ–°ä¸€ä¸ªæ–°é¡µé¢&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é«˜æ€§èƒ½çš„åƒåœ¾å›æ”¶å’Œæ“¦é™¤&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OOBæœ‰ç‰©ç†åœ°å€åˆ°è™šæ‹Ÿåœ°å€çš„æ˜ å°„ï¼Œç”¨äºæ‰ç”µæ¢å¤ï¼Œè¿™é‡Œå¼•ç”¨ä¸€æ®µ&lt;a class=&#34;link&#34; href=&#34;https://pages.cs.wisc.edu/~remzi/OSTEP/file-ssd.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;wiscçš„OSTEPä¸­çš„ä¸€æ®µè§£é‡Šï¼ˆ44 Flash- based SSDï¼‰&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;OOBä¿å­˜çš„åœ¨æ¯ä¸ªé¡µä¸­æ˜ å°„ä¿¡æ¯ï¼Œå½“æ‰ç”µæˆ–è€…é‡å¯æ—¶ç”¨å®ƒåœ¨å†…å­˜ä¸­é‡å»ºæ˜ å°„&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢åœ¨é‡å»ºæ—¶æ‰«ç æ•´ä¸ªSSDï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—æˆ–è€…æ£€æŸ¥ç‚¹çš„æ–¹å¼æ¥åŠ é€Ÿè¿™ä¸ªè¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;å¤§è‡´çœ‹äº†ä¸€ä¸‹OSTEPï¼Œæ˜¯æœ‰å…³æ“ä½œç³»ç»Ÿçš„ä¸€æœ¬éå¸¸å¥½çš„ä¹¦ï¼Œå¸Œæœ›ä»¥åæœ‰æ—¶é—´è¯»ä¸€ä¸‹&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220924141132556.png&#34; alt=&#34;image-20220924141132556&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h3 id=&#34;page-level-ftl&#34;&gt;Page-Level FTL&lt;/h3&gt;
&lt;p&gt;åŸç†ç±»ä¼¼OSä¸­çš„é¡µè¡¨ï¼Œç”±Logical Page NumberæŸ¥è¯¢é¡µè¡¨å¾—åˆ°Physical Page Number&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹æ˜¯é¡µè¡¨å ç”¨å¾ˆå¤§çš„ç©ºé—´&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220924152322358.png&#34; alt=&#34;image-20220924152322358&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h3 id=&#34;block-level-ftl&#34;&gt;Block-Level FTL&lt;/h3&gt;
&lt;p&gt;ä¿æŒBlock åˆ°Blockçš„æ˜ å°„&lt;/p&gt;
&lt;p&gt;å…ˆæŸ¥æ‰¾åˆ°å¯¹åº”çš„Blockï¼Œåœ¨æ ¹æ®offsetå¾—åˆ°pageï¼Œå—å†…çš„é¡µç åç§»offsetæ˜¯å›ºå®šçš„&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220924152259043.png&#34; alt=&#34;image-20220924152259043&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;ä¼˜ç‚¹æ˜¯å ç”¨ç©ºé—´å¾ˆå°ï¼Œç¼ºç‚¹æ˜¯GCè´Ÿè½½å¢åŠ &lt;/p&gt;
&lt;p&gt;åŸå› ï¼šoffsetåœ¨ä¸åŒBlockä¸­ä¿æŒä¸å˜ï¼Œåœ¨å¼‚åœ°æ›´æ–°æ—¶ï¼Œè¦é€‰æ‹©å…¶ä»–blockä¸­ç›¸åŒçš„offsetè¿›è¡Œå†™å…¥ï¼Œå¦‚æœé€‰ä¸­çš„blockå·²ç»å­˜åœ¨æ•°æ®ï¼Œéœ€è¦æŠŠæ•°æ®è¿ç§»ã€‚ã€TODO è¿™é‡Œè®²å¾—ä¸æ˜¯éå¸¸çš„æ¸…æ¥šã€‘&lt;/p&gt;
&lt;h3 id=&#34;hybrid-ftl&#34;&gt;Hybrid FTL&lt;/h3&gt;
&lt;p&gt;å¯¹å†™å…¥åˆ†ä¸ºæ–°/æ—§æ•°æ®ï¼Œæ–°å†™å…¥çš„æ•°æ®ç”¨Page-Level Mappingæ•ˆç‡é«˜ï¼Œå†™å…¥Log Blocksä½œä¸ºç¼“å†²ï¼Œä¹‹åå†æ›´æ–°åˆ°Data Blocks&lt;/p&gt;
&lt;p&gt;æ—§æ•°æ®å› ä¸ºå†™å…¥åæ›´æ–°ç›¸å¯¹ä¸é¢‘ç¹ï¼Œä½¿ç”¨Block-Level Mappingï¼Œå†™å…¥Data Blocks&lt;/p&gt;
&lt;h1 id=&#34;reference&#34;&gt;Reference&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;NNSSå®éªŒå®¤æš‘æœŸå®ä¹ æ–‡æ¡£&lt;/li&gt;
&lt;li&gt;ã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹&lt;/li&gt;
&lt;li&gt;ã€Šæ·±å…¥ç†è§£Linuxå†…æ ¸ã€‹&lt;/li&gt;
&lt;li&gt;ã€ŠLinuxè®¾å¤‡é©±åŠ¨ç¨‹åºã€‹&lt;/li&gt;
&lt;li&gt;ã€Šæ·±å…¥æµ…å‡ºSSDï¼šå›ºæ€å­˜å‚¨æ ¸å¿ƒæŠ€æœ¯ã€åŸç†ä¸å®æˆ˜ã€‹&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.enterprisestorageforum.com/hardware/nand-dram-sas-scsi-and-sata-ahci-not-dead-yet/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;NAND, DRAM, SAS/SCSI and SATA/AHCI: Not Dead, Yet | Enterprise Storage Forum&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.quora.com/Linux-Kernel/What-is-the-major-difference-between-the-buffer-cache-and-the-page-cache-Why-were-they-separate-entities-in-older-kernels-Why-were-they-merged-later-on/answer/Robert-Love-1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Quoraã€‘Robert Loveå¯¹ç¼“å†²åŒºç¼“å­˜å’Œé¡µé¢ç¼“å­˜çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆçš„å›ç­”ï¼Ÿä¸ºä»€ä¹ˆå®ƒä»¬åœ¨è¾ƒæ—§çš„å†…æ ¸ä¸­æ˜¯ç‹¬ç«‹çš„å®ä½“ï¼Ÿä¸ºä»€ä¹ˆåæ¥ä»–ä»¬è¢«åˆå¹¶äº†ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://pages.cs.wisc.edu/~remzi/OSTEP/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€OSTEPã€‘Operating Systems: Three Easy Pieces (wisc.edu)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.bilibili.com/video/BV1xE411T7Dy/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€bilibili æ¸…åå¤§å­¦ã€‘å­˜å‚¨æŠ€æœ¯åŸºç¡€&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ext4.wiki.kernel.org/index.php/Ext4_Howto&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€kernel.org Ext4æ–‡ä»¶ç³»ç»Ÿä»‹ç»ã€‘Ext4 Howto - Ext4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://btrfs.wiki.kernel.org/index.php/Status&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€kernel.org Btrfsæ–‡ä»¶ç³»ç»Ÿç°çŠ¶ã€‘Status - btrfs Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.kernel.org/doc/html/latest/filesystems/ext4/index.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€kernel.org Ext4æ–‡ä»¶ç³»ç»Ÿè®¾è®¡ã€‘ext4 Data Structures and Algorithms&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/conference/fast15/technical-sessions/presentation/lee&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€USENIX FAST&#39;21ã€‘F2FS: A New File System for Flash Storage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://wiki.archlinux.org/title/Ext4_%28%e7%ae%80%e4%bd%93%e4%b8%ad%e6%96%87%29#%e5%85%b3%e9%97%ad%e5%b1%8f%e9%9a%9c&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€archlinux.org ArchWikiã€‘Ext4 &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-ssd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Red Hat Customer Portal | SSD discardã€‘Chapter 21. Solid-State Disk Deployment Guidelines Red Hat Enterprise Linux 7&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.51cto.com/u_15061941/3859244&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€mq-deadlineã€‘mq-deadlineè°ƒåº¦å™¨åŸç†åŠæºç åˆ†æ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://nan01ab.github.io/2019/02/Kyber.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Kyber I/Oã€‘Kyber IO Scheduler of Linux Â· Columba M71&amp;rsquo;s Blog&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ã€å­˜å‚¨ç³»ç»Ÿã€‘å¤šç¡¬ç›˜å­˜å‚¨ç³»ç»Ÿ</title>
        <link>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E5%A4%9A%E7%A1%AC%E7%9B%98%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/</link>
        <pubDate>Wed, 05 Oct 2022 16:54:42 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E5%A4%9A%E7%A1%AC%E7%9B%98%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/</guid>
        <description>&lt;h1 id=&#34;0x00-å¤šç¡¬ç›˜ç³»ç»Ÿ&#34;&gt;0x00 å¤šç¡¬ç›˜ç³»ç»Ÿ&lt;/h1&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221005193755942.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221005193755942&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯¹å¤šç¡¬ç›˜ç³»ç»Ÿå¯é æ€§çš„åº¦é‡ï¼Œä¸Šå›¾ä»&lt;code&gt;æ•…éšœäº§ç”Ÿ&lt;/code&gt;ï¼Œ&lt;code&gt;æ•…éšœäº§ç”Ÿç¨‹åºé”™è¯¯&lt;/code&gt;ï¼Œ&lt;code&gt;é”™è¯¯æ£€æµ‹&lt;/code&gt;ï¼Œ&lt;code&gt;ä¿®å¤æ•…éšœ&lt;/code&gt;å››ä¸ªæ—¶é—´èŠ‚ç‚¹ä¸ºä¸€ä¸ªå‘¨æœŸã€‚&lt;/p&gt;
&lt;p&gt;ä¸‰ä¸ªå¯é æ€§çš„æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;p&gt;å¯é æ€§ï¼šé€šè¿‡&lt;code&gt;é”™è¯¯äº§ç”Ÿåˆ°å‘ç°é”™è¯¯&lt;/code&gt;çš„æ—¶é—´é—´éš”MTTFæ¥è¡¡é‡&lt;/p&gt;
&lt;p&gt;å¯ç»´æŠ¤æ€§ï¼šé€šè¿‡&lt;code&gt;å‘ç°é”™è¯¯åˆ°é”™è¯¯ä¿®å¤&lt;/code&gt;çš„æ—¶é—´é—´éš”æ¥è¡¡é‡ï¼Œå®šä¹‰ç³»ç»Ÿä¿®å¤çš„èƒ½åŠ›&lt;/p&gt;
&lt;p&gt;å¯ç”¨æ€§ï¼šé€šè¿‡ç³»ç»Ÿä¸­éä¿®å¤æ—¶é—´æ‰€å çš„æ¯”ä¾‹ï¼Œå¯ä»¥å¯¹å¤–æä¾›æœåŠ¡çš„æ—¶é—´å æ¯”ï¼Œ$EA=\frac{MTTF}{MTTF+MTTR}$&lt;/p&gt;
&lt;p&gt;MTBF=MTTR+MTTFï¼Œä¸¤æ•…éšœä¹‹é—´çš„æ—¶é—´é—´éš”&lt;/p&gt;
&lt;p&gt;æ¢å¤ä¸€å—ç¡¬ç›˜çš„ä»£ä»·å¾ˆé«˜ï¼Œä¸ºäº†æé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼Œéœ€è¦æ„å»ºå¤šç›˜ç³»ç»Ÿï¼Œåœ¨æŸå—ç£ç›˜æ•…éšœæ—¶ä»ç„¶èƒ½æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ¯ç§’çš„I/Oè¯·æ±‚å³°å€¼ä¸º1200ï¼ŒR/Wæ¯”ä¾‹ä¸º2:1ï¼Œåˆ†åˆ«ä½¿ç”¨RAID 1/5ï¼Œè®¡ç®—å³°å€¼çš„ç¡¬ç›˜è´Ÿè½½&lt;/p&gt;
&lt;p&gt;æ€»çš„R/Wåˆ†åˆ«ä¸º800/400&lt;/p&gt;
&lt;p&gt;RAID 1ï¼šå†™æ“ä½œéœ€è¦ç¿»å€ï¼Œæ€»è´Ÿè½½ä¸º&lt;code&gt;800+400*2=1600&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;RAID 5ï¼šå†™æ“ä½œç¿»å››å€ï¼Œæ€»è´Ÿè½½ä¸º&lt;code&gt;800+400*4=2400&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä½¿ç”¨å¤šç›˜ç³»ç»Ÿçš„ç›®çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æé«˜å­˜å‚¨å®¹é‡&lt;/li&gt;
&lt;li&gt;æé«˜æ€§èƒ½
&lt;ul&gt;
&lt;li&gt;è´Ÿè½½å‡è¡¡
&lt;ul&gt;
&lt;li&gt;Disk Striping&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¸¦å®½&lt;/li&gt;
&lt;li&gt;ååé‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æé«˜å¯é æ€§
&lt;ul&gt;
&lt;li&gt;å®¹é”™
&lt;ul&gt;
&lt;li&gt;åŸºäºå¥‡å¶æ ¡éªŒçš„ä¿æŠ¤&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå‰¯æœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;JBODï¼ˆJust a Bunch Of Disksï¼‰å•çº¯å¯¹ç¡¬ç›˜è¿›è¡Œç»„åˆï¼Œåªæé«˜å­˜å‚¨å®¹é‡&lt;/p&gt;
&lt;h2 id=&#34;è´Ÿè½½å‡è¡¡&#34;&gt;è´Ÿè½½å‡è¡¡&lt;/h2&gt;
&lt;p&gt;é™æ€ï¼šæŸä¸€åœ°å€å›ºå®šæ˜ å°„åˆ°æŸå—ç¡¬ç›˜&lt;/p&gt;
&lt;p&gt;åŠ¨æ€ï¼šçƒ­ç‚¹æ•°æ®åˆ†é…åˆ°ä¸åŒçš„ç¡¬ç›˜ä¸­&lt;/p&gt;
&lt;p&gt;æŒ‰ç…§æ•°æ®å—ï¼šå°†ä¸€ä¸ªæ•°æ®åˆ’åˆ†åå­˜å‚¨åˆ°æ‰€æœ‰ç¡¬ç›˜ä¸­ï¼ˆDisk Striping æ¡å¸¦åŒ–ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;disk-striping&#34;&gt;Disk Striping&lt;/h3&gt;
&lt;p&gt;æŒ‰ä¸€å®šå¤§å°å¯¹æ•°æ®åˆ†å—ï¼ˆstripe unit/blockï¼‰ï¼Œç„¶åä¾æ¬¡å­˜å‚¨åˆ°å„ä¸ªç¡¬ç›˜ä¸­&lt;/p&gt;
&lt;p&gt;åˆ†é…è§„åˆ™ä½¿ç”¨è½®è¯¢æšä¸¾ï¼Œé€šè¿‡å–æ¨¡åˆ¤æ–­å­˜å‚¨çš„ç£ç›˜ç¼–å·ï¼Œæ ¹æ®ä½™æ•°ç¡®å®šåç§»é‡&lt;/p&gt;
&lt;p&gt;Stripe Unitå¤§å°è®¾ç½®ä¸€èˆ¬ä¸º&lt;code&gt;2Mã€4Mã€16M&lt;/code&gt;ï¼Œå¤ªå¤§ä¸§å¤±è´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼Œå¤ªå°ä¼šåœ¨å¯»å€ä¸ŠèŠ±è´¹å¤ªå¤šæ—¶é—´&lt;/p&gt;
&lt;h2 id=&#34;ç£ç›˜å¤±æ•ˆ&#34;&gt;ç£ç›˜å¤±æ•ˆ&lt;/h2&gt;
&lt;p&gt;å¯¹äºJBODã€StripingæŸå—ç›˜å¤±æ•ˆï¼Œæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿéƒ½å°†å¤±æ•ˆ&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å¤‡ä»½æ¥è§£å†³ï¼Œè¦èŠ±è´¹è¾ƒé•¿çš„æ—¶é—´&lt;/p&gt;
&lt;p&gt;å¤šç›˜ç³»ç»Ÿçš„MTTFä¸ºç¬¬ä¸€å—ç£ç›˜å¤±æ•ˆçš„æ—¶é—´ï¼Œæ¯”å•ç›˜ç³»ç»Ÿæ—¶é—´çŸ­å¾ˆå¤š&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šRedundancyå†—ä½™å­˜å‚¨&lt;/p&gt;
&lt;h3 id=&#34;redundancy&#34;&gt;Redundancy&lt;/h3&gt;
&lt;h4 id=&#34;å­˜å‚¨å‰¯æœ¬&#34;&gt;å­˜å‚¨å‰¯æœ¬&lt;/h4&gt;
&lt;p&gt;å­˜å‚¨ä¸¤ä»½æˆ–æ›´å¤šçš„å‰¯æœ¬ï¼Œé‡‡ç”¨ä¸‰å‰¯æœ¬çš„æœåŠ¡æœ‰HDFS/GFS/Cloud Storage&lt;/p&gt;
&lt;h5 id=&#34;disk-mirroring&#34;&gt;Disk Mirroring&lt;/h5&gt;
&lt;p&gt;ç£ç›˜é•œåƒï¼Œåˆ†ä¸»ä»ç£ç›˜ï¼Œä»ç›˜åŸºäºä¸»ç›˜è¿›è¡ŒåŒæ­¥ï¼Œå¯ä»¥ä»ä»»æ„ç›˜è¿›è¡Œè¯»å–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æœ‰è¾ƒé«˜çš„å¯ç”¨æ€§&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;èŠ±è´¹è¾ƒé«˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†™æ€§èƒ½é™ä½ï¼Œç£ç›˜ä¹‹é—´éœ€è¦åŒæ­¥ï¼Œå—é™äºæœ€æ…¢åŒæ­¥çš„ç£ç›˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¯»æ€§èƒ½æé«˜ï¼Œè¯·æ±‚è¢«åˆ†æ•£åˆ°å„ä¸ªç£ç›˜&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç£ç›˜é•œåƒå¯ä»¥ä¸ç»“åˆæ¡å¸¦åŒ–&lt;/p&gt;
&lt;p&gt;å…ˆåšMirroringå†åšStriping (RAID 10)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221005210811763.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221005210811763&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è‹¥æœ‰ç£ç›˜æ•…éšœï¼Œä¼šæŸå¤±1/2çš„æ•°æ®&lt;/p&gt;
&lt;p&gt;å…ˆåšStripingå†åšMirroring (RAID 01)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221005211127116.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221005211127116&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è‹¥æœ‰ç£ç›˜æ•…éšœï¼Œä¸ä¼šå½±å“æ•´ä½“çš„è¯»å†™ï¼Œå¯ä»¥ä¿è¯å¯é æ€§&lt;/p&gt;
&lt;h5 id=&#34;shadowing&#34;&gt;Shadowing&lt;/h5&gt;
&lt;p&gt;ä¸å¯¹å¤–æœåŠ¡ï¼Œåªå……å½“å¤‡ä»½&lt;/p&gt;
&lt;h5 id=&#34;duplexing&#34;&gt;Duplexing&lt;/h5&gt;
&lt;p&gt;å¯è¿›è¡Œäº¤æ¢&lt;/p&gt;
&lt;h4 id=&#34;eccerror-correcting-codes&#34;&gt;ECC(Error-Correcting Codes)&lt;/h4&gt;
&lt;p&gt;çº é”™ç å¸¸ç”¨æ–¹æ¡ˆæœ‰RAIDï¼Œçº åˆ ç ï¼Œå¥‡å¶æ ¡éªŒ&lt;/p&gt;
&lt;h5 id=&#34;parity-disk&#34;&gt;Parity Disk&lt;/h5&gt;
&lt;p&gt;å¢åŠ ä¸€å—æ£€éªŒç›˜ï¼Œä¿å­˜å…¶ä»–ç›˜ä¸Šæ•°æ®çš„å¼‚æˆ–å€¼&lt;/p&gt;
&lt;p&gt;å¥‡å¶æ ¡éªŒï¼šç»Ÿè®¡æ•°æ®ä¸­1çš„ä¸ªæ•°ï¼Œå¥‡æ•°ä¸º1ï¼Œå¶æ•°ä¸º0&lt;/p&gt;
&lt;p&gt;43:25&lt;/p&gt;
&lt;h1 id=&#34;0x01-raid&#34;&gt;0x01 RAID&lt;/h1&gt;
&lt;p&gt;é€šè¿‡å»‰ä»·ç£ç›˜æ„å»º&lt;strong&gt;å¯é &lt;/strong&gt;å¤§å‹é«˜ç«¯å­˜å‚¨ï¼Œç±»ä¼¼MapReduceé€šè¿‡å»‰ä»·æœåŠ¡å™¨æ¥æ„å»ºé«˜æ€§èƒ½è®¡ç®—é›†ç¾¤&lt;/p&gt;
&lt;p&gt;RAID 0 æ¡å¸¦åŒ–ï¼Œæ— å†—ä½™å­˜å‚¨&lt;/p&gt;
&lt;p&gt;RAID 1 Mirroring&lt;/p&gt;
&lt;p&gt;RAID 2 æ¡å¸¦åŒ–+æµ·æ˜ç å†—ä½™å­˜å‚¨&lt;/p&gt;
&lt;p&gt;RAID 3 æ¡å¸¦åŒ–+å¥‡å¶æ ¡éªŒ ç»†ç²’åº¦&lt;/p&gt;
&lt;p&gt;RAID 4 å—æ¡å¸¦åŒ–+å¥‡å¶æ ¡éªŒ ç²’åº¦å¤§&lt;/p&gt;
&lt;p&gt;RAID 5 å—æ¡å¸¦åŒ–+æ¡å¸¦åŒ–çš„å¥‡å¶æ ¡éªŒ&lt;/p&gt;
&lt;p&gt;RAID 6 å—æ¡å¸¦åŒ–+ä¸¤ä¸ªæ¡å¸¦åŒ–çš„å¥‡å¶æ ¡éªŒ&lt;/p&gt;
&lt;p&gt;RAID 0æ— å®¹é”™ï¼ŒRAID 1-5æ”¯æŒä¸€ä¸ªå•ä½çš„å®¹é”™ï¼ŒRAID 6æ”¯æŒä¸¤ä¸ªå•ä½å®¹é”™&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å­˜å‚¨æŠ€æœ¯åŸºç¡€ã€‘ä¸»å­˜</title>
        <link>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E4%B8%BB%E5%AD%98/</link>
        <pubDate>Sat, 24 Sep 2022 18:26:22 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E4%B8%BB%E5%AD%98/</guid>
        <description>&lt;h1 id=&#34;0x00-ä¸»å­˜&#34;&gt;0x00 ä¸»å­˜&lt;/h1&gt;
&lt;p&gt;å½“å‰é¢ä¸´çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®¹é‡é—®é¢˜ã€å¸¦å®½é—®é¢˜ã€QoSä¿è¯&lt;/p&gt;
&lt;p&gt;å¤šæ ¸å¤„ç†å™¨ã€æ•°æ®å¯†é›†åº”ç”¨ã€äº‘è®¡ç®—ã€GPU&lt;/p&gt;
&lt;p&gt;HDFSï¼ˆGFSï¼‰åŸºäºå¤–å­˜å‚¨å™¨&lt;/p&gt;
&lt;p&gt;Spark å†…å­˜ä¸­æ•°æ®å¤„ç†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;èƒ½è€—åŠŸç‡é—®é¢˜&lt;/p&gt;
&lt;p&gt;40%åŠŸè€—åœ¨DRAMï¼ŒRefreshæ“ä½œè€—èƒ½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DRAMå‘å±•é‡åˆ°ç“¶é¢ˆ&lt;/p&gt;
&lt;p&gt;åˆ¶æˆæ–¹å¼é™åˆ¶&lt;/p&gt;
&lt;p&gt;æ”¹è¿›ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;3D-Stack DRAM æä¾›æ›´é«˜çš„å¸¦å®½&lt;/li&gt;
&lt;li&gt;ä½å»¶è¿ŸDRAM&lt;/li&gt;
&lt;li&gt;ä½åŠŸè€—DRAM&lt;/li&gt;
&lt;li&gt;NVMï¼ˆe.g. PCMï¼‰å®¹é‡æ›´å¤§ï¼Œå»¶è¿Ÿè¾ƒé«˜&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;0x01-dramçš„ç»„æˆ&#34;&gt;0x01 DRAMçš„ç»„æˆ&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Channel&lt;/li&gt;
&lt;li&gt;DIMM å†…å­˜æ¡&lt;/li&gt;
&lt;li&gt;Rank äºŒç»´é˜µåˆ—æœ€å°å•å…ƒ&lt;/li&gt;
&lt;li&gt;Chip èŠ¯ç‰‡&lt;/li&gt;
&lt;li&gt;Bank&lt;/li&gt;
&lt;li&gt;Row/Column&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¡Œä¸ºå­—çº¿ word line&lt;/p&gt;
&lt;p&gt;åˆ—ä¸ºä½çº¿ï¼Œäº¤ç‚¹æ˜¯cell å†…å­˜å•å…ƒ&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221003154123646.png&#34; alt=&#34;image-20221003154123646&#34; style=&#34;zoom:70%;&#34; /&gt;
&lt;p&gt;DRAM rowæ˜¯ä¸€ä¸ªDRAM page&lt;/p&gt;
&lt;p&gt;Sense Amplifiers ä¹Ÿè¢«å«åšRow buffer&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªåœ°å€é€šè¿‡&lt;code&gt;&amp;lt;row,colum&amp;gt;&lt;/code&gt;ç¼–å€&lt;/p&gt;
&lt;p&gt;è®¿é—®ä¸€ä¸ª&lt;code&gt;closed row&lt;/code&gt;çš„è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Activateï¼šå°†rowæ”¾åˆ°row bufferä¸­&lt;/li&gt;
&lt;li&gt;Read/Writeï¼šè¯»å†™row bufferä¸­çš„column&lt;/li&gt;
&lt;li&gt;Prechargeï¼šä»row bufferä¸­çš„æ•°æ®å†™å›åˆ°é€‰ä¸­çš„rowä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;bank-operation&#34;&gt;Bank Operation&lt;/h2&gt;
&lt;p&gt;ç»™å®šRow Addressé€šè¿‡Row decoderé€‰ä¸­ä¸€è¡Œ&lt;/p&gt;
&lt;p&gt;å°†è¡ŒåŠ è½½åˆ°Row Buffer&lt;/p&gt;
&lt;p&gt;è‹¥è¯»å–çš„Rowåœ¨Row Bufferä¸­ï¼Œåˆ™ä¸ºå‘½ä¸­HitçŠ¶æ€ï¼Œé€šè¿‡Column Mutexç›´æ¥è·å–æ•°æ®&lt;/p&gt;
&lt;p&gt;è‹¥è¯»å–çš„Rowä¸åœ¨Row Bufferä¸­ï¼Œåˆ™ä¸ºå†²çªConflictçŠ¶æ€ï¼Œå°†Row Bufferå›å†™ï¼Œç„¶åå†é€‰ä¸­æ–°çš„Rowï¼Œè¯»å–æ•°æ®&lt;/p&gt;
&lt;h2 id=&#34;chip&#34;&gt;Chip&lt;/h2&gt;
&lt;p&gt;ç”±å¤šä¸ª(2-16ä¸ª)Bankç»„æˆï¼ŒBankå…±äº«æ€»çº¿ï¼ˆæŒ‡ä»¤/åœ°å€/æ•°æ®æ€»çº¿ï¼‰&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡åªèƒ½è¯»4æˆ–16 Bit&lt;/p&gt;
&lt;h2 id=&#34;rank-and-module&#34;&gt;Rank and Module&lt;/h2&gt;
&lt;p&gt;Moduleä¸ºDIMMå†…å­˜æ¡ï¼Œè¿æ¥åœ¨ä¸»æ¿ä¸Šï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªrankç»„æˆ&lt;/p&gt;
&lt;p&gt;Rankç”±å¤šä¸ªChipæ„æˆï¼Œæé«˜æ¥å£å¸¦å®½ï¼Œå¤šä¸ªChipå…±äº«åœ°å€å’ŒæŒ‡ä»¤æ€»çº¿ï¼Œæœ‰å•ç‹¬çš„æ•°æ®æ€»çº¿&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221003164422987.png&#34; alt=&#34;image-20221003164422987&#34; style=&#34;zoom:80%;&#34; /&gt;
&lt;p&gt;å¤šä¸ªChipå¯ä»¥å¹¶è¡Œæ“ä½œ&lt;/p&gt;
&lt;p&gt;å¯¹äº64 bitçš„è¯»å–ï¼Œåˆ†é…åˆ°å¤šä¸ªChipä¸­åŒæ—¶è¯»å–&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤šDIMMæƒ…å†µï¼Œå¯ä»¥å…ˆç¡®å®šåœ¨å“ªæ ¹DIMMæ¡ä¸­ï¼Œå†è¿›è¡Œè¯»å–æ“ä½œ&lt;/p&gt;
&lt;h2 id=&#34;chanel&#34;&gt;Chanel&lt;/h2&gt;
&lt;p&gt;Bankä¹‹é—´ä¸ºåˆ†æ—¶å…±äº«&lt;/p&gt;
&lt;p&gt;Channelä¸ºç‹¬ç«‹æ€»çº¿ï¼Œæ•°æ®å¯åŒæ—¶è¯»å†™ï¼Œæ¯ä¸ªChannelæœ‰ä¸€ä¸ªMemory Controller&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221003182243697.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221003182243697&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ¨åŒä¸€ä¸ªChannelä¸­çš„DIMMæ•°æ®åˆ†æ—¶å…±äº«&lt;/p&gt;
&lt;p&gt;ä¸€å¼ æ¯”è¾ƒæ¸…æ™°çš„ç»“æ„å…³ç³»å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221003182445252.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221003182445252&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åŒä¸€ä¸ªChannelå¯ä»¥è¿æ¥å¤šä¸ªDIMMæ¡&lt;/p&gt;
&lt;h2 id=&#34;ä»cpuè®¿é—®è§’åº¦è§‚å¯Ÿ&#34;&gt;ä»CPUè®¿é—®è§’åº¦è§‚å¯Ÿ&lt;/h2&gt;
&lt;p&gt;Memory Channelä¸­ï¼Œåœ¨DIMMä¸­Chip Selectioné€‰æ‹©è®¿é—®çš„Rankï¼Œé€šè¿‡åœ°å€ç¡®å®šè®¿é—®çš„æ•°æ®&lt;/p&gt;
&lt;p&gt;Rankä¸­çš„8ä¸ªChipæ¯ä¸ªéƒ½æä¾›8 bitï¼Œå…±æä¾›8 Byteè®¿é—®&lt;/p&gt;
&lt;p&gt;ç”±æ¯ä¸ªChipä¸­çš„banké€‰æ‹©å™¨ä»8ä¸ªbankä¸­é€‰æ‹©ä¸€ä¸ªè·å–8 bit&lt;/p&gt;
&lt;p&gt;Bankä¸­é€šè¿‡Row-Bufferæ¥è·å–æ•°æ®&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å»¶è¿Ÿçš„äº§ç”Ÿï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CPUåˆ°controllerçš„ä¼ è¾“æ—¶é—´&lt;/li&gt;
&lt;li&gt;Controllerå»¶è¿Ÿï¼Œè¯·æ±‚é˜Ÿåˆ—å’Œè°ƒåº¦&lt;/li&gt;
&lt;li&gt;Controlleråˆ°DRAMçš„ä¼ è¾“æ—¶é—´ï¼ˆæ€»çº¿ï¼‰&lt;/li&gt;
&lt;li&gt;DRAM ä¸­Bankçš„å»¶è¿Ÿ
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©æŸä¸€è¡Œ Activate&lt;/li&gt;
&lt;li&gt;è¯»å–çš„æ—¶é—´&lt;/li&gt;
&lt;li&gt;Precharge&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DRAMåˆ°CPUçš„ä¼ è¾“æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸»è¦å…³æ³¨Bankä¸­çš„å»¶è¿Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;multiple-banks&#34;&gt;Multiple Banks&lt;/h2&gt;
&lt;p&gt;ä½¿DRAMè®¿é—®å¹¶è¡Œ&lt;/p&gt;
&lt;p&gt;ç”±äºä¸åŒBankåˆ†æ—¶å…±äº«ï¼Œå¯ä»¥ä½¿å¾—Bankæå‰å°†rowåŠ è½½åˆ°Row Bufferä¸­ï¼Œæé«˜åˆ©ç”¨ç‡&lt;/p&gt;
&lt;h2 id=&#34;multiple-channels&#34;&gt;Multiple Channels&lt;/h2&gt;
&lt;p&gt;æ›´å®¹æ˜“å®ç°&lt;/p&gt;
&lt;p&gt;æé«˜æ€»çº¿å¸¦å®½&lt;/p&gt;
&lt;p&gt;æé«˜å¹¶å‘èƒ½åŠ›éœ€è¦å‡å°‘Bankå’ŒChannelçš„å†²çªé—®é¢˜ï¼Œéœ€è¦å¯¹ç¼–å€ç­–ç•¥è¿›è¡Œä¼˜åŒ–&lt;/p&gt;
&lt;p&gt;æ¯”è¾ƒç›´è§‚çš„è§‚å¯ŸMultiple Banksä¼˜åŒ–çš„æ•ˆæœï¼Œè¾¾åˆ°Overlapçš„æ•ˆæœ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221003204558855.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221003204558855&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;address-mapping&#34;&gt;Address Mapping&lt;/h2&gt;
&lt;p&gt;åœ°å€æ˜ å°„å¯¹DRAMå¹¶å‘èƒ½åŠ›çš„å½±å“&lt;/p&gt;
&lt;p&gt;å°†è®¿é—®DRAMä¸­æ•°æ®çš„åœ°å€è¿›è¡Œæ’åˆ—ï¼ŒåŒ…å«Channelã€Rowã€Bankã€Column&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³ï¼šè°ƒæ•´å®¹æ˜“äº§ç”Ÿå†²çªçš„åœ°å€ï¼Œä½¿å…¶ç›¸å¯¹é åï¼Œè¿˜è¦å…¼é¡¾å…¶ä»–é—®é¢˜&lt;/p&gt;
&lt;p&gt;å°†Columnçš„é«˜8ä½å’Œä½3ä½åˆ†ç¦»&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221004202109741.png&#34; alt=&#34;image-20221004202109741&#34; style=&#34;zoom:80%;&#34; /&gt;
&lt;p&gt;æé«˜Row Bufferçš„åˆ©ç”¨ç‡ï¼Œå€’æ•°ç¬¬äºŒç§æ¯”è¾ƒå¸¸ç”¨&lt;/p&gt;
&lt;p&gt;å¯¹OSè€Œè¨€ï¼Œç”±é€»è¾‘åœ°å€Virtual Addressæ˜ å°„åˆ°ç‰©ç†åœ°å€&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Virtual Page Number &lt;/code&gt;-&amp;gt; &lt;code&gt;&amp;lt;Row,Bank&amp;gt;&lt;/code&gt;ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´æ˜ å°„ç®—æ³•æ¥ä¼˜åŒ–å­˜å‚¨æ•ˆç‡&lt;/p&gt;
&lt;h1 id=&#34;0x02-dram-refresh&#34;&gt;0x02 DRAM Refresh&lt;/h1&gt;
&lt;p&gt;ç”±äºç”µå®¹ä¸­çš„ç”µå­æŒç»­æ³„æ¼ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´é‡æ–°å†™å…¥æ•°æ®ï¼Œè¯»å–åˆ°row bufferå†å†™å›ï¼Œåˆ·æ–°é—´éš”ä¸€èˆ¬ä¸º64ms&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è´Ÿé¢å½±å“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;èƒ½è€—å¢åŠ &lt;/li&gt;
&lt;li&gt;æ€§èƒ½å‡å°‘ï¼ŒRefreshä¸­å†…å­˜ä¸å¯ç”¨&lt;/li&gt;
&lt;li&gt;QoSå½±å“ï¼Œä¸èƒ½ä¿è¯å¹³ç¨³&lt;/li&gt;
&lt;li&gt;åˆ·æ–°ç‡ä½¿å¾—DRAMå®¹é‡çš„æ‰©å±•å—é™&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ€§èƒ½å½±å“&#34;&gt;æ€§èƒ½å½±å“&lt;/h2&gt;
&lt;p&gt;åˆ·æ–°æ—¶Bankå˜å¾—ä¸å¯ç”¨ï¼ŒRow Bufferçš„å ç”¨&lt;/p&gt;
&lt;p&gt;åœ¨åˆ·æ–°ç»“æŸå‰æœ‰é•¿æ—¶é—´çš„æš‚å®šï¼Œæœ‰ä¸¤ç§ä¼˜åŒ–ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Burst Refresh æ‰€æœ‰çš„è¡Œä¾æ¬¡å…¨éƒ¨åˆ·æ–°&lt;/li&gt;
&lt;li&gt;Distributed Refresh æ¯è¡Œä»¥å›ºå®šçš„æ—¶é—´é—´éš”åœ¨ä¸åŒçš„æ—¶é—´è¿›è¡Œåˆ·æ–°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸¤ç§æ–¹å¼ï¼ˆé›†ä¸­å¼/åˆ†å¸ƒå¼ï¼‰çš„ç¤ºæ„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20221004153056950.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20221004153056950&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Distributed Refreshå‡å°‘äº†ç­‰å¾…æ—¶é—´&lt;/p&gt;
&lt;p&gt;éšç€è®¾å¤‡å®¹é‡çš„å¢åŠ ï¼Œæ¶ˆè€—åœ¨Refreshä¸Šçš„æ—¶é—´/èƒ½è€—å æ¯”è¶Šæ¥è¶Šå¤§&lt;/p&gt;
&lt;p&gt;ç›®å‰åº”ç”¨çš„ç­–ç•¥ï¼šAuto Refreshï¼Œæ¯æ¬¡åªRefreshå…¶ä¸­å‡ è¡Œ&lt;/p&gt;
&lt;p&gt;ä¸€äº›æ¢ç´¢ï¼šåˆ·æ–°é—´éš”çš„è°ƒæ•´ï¼Œ64msä¿è¯åœ¨æœ€åæƒ…å†µä¸‹çš„å¯é æ€§ï¼Œåœ¨å®¹å¿å­˜å‚¨å•å…ƒå‡ºæ•…éšœçš„å‰æä¸‹ï¼Œå¯ä»¥é€‚å½“æé«˜åˆ·æ–°é—´éš”ï¼Œå¯¹äºå‡ºé”™çš„å•å…ƒé‡‡ç”¨æ›´ä½çš„åˆ·æ–°é—´éš”ï¼ˆä¸åŒå­˜å‚¨å•å…ƒé‡‡ç”¨ä¸åŒåˆ·æ–°é¢‘ç‡ï¼‰&lt;/p&gt;
&lt;h1 id=&#34;0x03-memory-controller&#34;&gt;0x03 Memory Controller&lt;/h1&gt;
&lt;p&gt;ä½äºCPUä¸­&lt;/p&gt;
&lt;p&gt;åŸºæœ¬åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿è¯DRAMçš„æ­£ç¡®æ€§ï¼Œåˆ·æ–°å’Œæ—¶åºtiming&lt;/li&gt;
&lt;li&gt;éµå¾ªä¸€å®šçš„æ—¶åºçº¦æŸï¼ˆbankï¼Œæ€»çº¿ï¼Œchannelçš„å†²çªï¼‰æ¥å®ŒæˆDRAMè¯·æ±‚ï¼Œè½¬æ¢è¯·æ±‚ä¸ºDRAM Command&lt;/li&gt;
&lt;li&gt;å¯¹è¯·æ±‚è¿›è¡Œè°ƒåº¦æé«˜æ€§èƒ½&lt;/li&gt;
&lt;li&gt;ç®¡ç†ç”µæºèƒ½è€—ï¼Œå¼€å…³Chipï¼Œç®¡ç†ç”µæºæ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221004204322362.png&#34; alt=&#34;image-20221004204322362&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;ç”±L2 Cacheå‘é€è¯·æ±‚åˆ°Memory Controllerï¼Œç”±ä¸€ä¸ªBufferæ¥å¯¹è¯·æ±‚è¿›è¡Œç¼“å­˜&lt;/p&gt;
&lt;h2 id=&#34;è¯·æ±‚è°ƒåº¦ç­–ç•¥&#34;&gt;è¯·æ±‚è°ƒåº¦ç­–ç•¥&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;FCFS&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FR-FCFS,First Ready&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Row-Hit Firstï¼Œä¼˜å…ˆè°ƒåº¦å‘½ä¸­Row Bufferçš„è¯·æ±‚ï¼Œæé«˜å‘½ä¸­ç‡&lt;/li&gt;
&lt;li&gt;FCFS é˜²æ­¢é¥¥é¥¿&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;row-bufferç®¡ç†ç­–ç•¥&#34;&gt;Row Bufferç®¡ç†ç­–ç•¥&lt;/h2&gt;
&lt;p&gt;Open Row ä¸é¢„å…ˆæ‰§è¡ŒPrechargeå›å†™&lt;/p&gt;
&lt;p&gt;Closed Row é¢„å…ˆå›å†™&lt;/p&gt;
&lt;p&gt;è‡ªé€‚åº”ç»“åˆä¸¤ç§æ–¹æ¡ˆ&lt;/p&gt;
&lt;h2 id=&#34;dram-controllerçš„è®¾è®¡éš¾ç‚¹&#34;&gt;DRAM Controllerçš„è®¾è®¡éš¾ç‚¹&lt;/h2&gt;
&lt;p&gt;æ—¶åºçº¦æŸ&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20221005142053482.png&#34; alt=&#34;image-20221005142053482&#34; style=&#34;zoom:67%;&#34; /&gt;
&lt;p&gt;é˜²æ­¢å†²çªçš„å‘ç”Ÿ&lt;/p&gt;
&lt;p&gt;Refreshæ“ä½œ&lt;/p&gt;
&lt;h2 id=&#34;èƒ½è€—ç®¡ç†&#34;&gt;èƒ½è€—ç®¡ç†&lt;/h2&gt;
&lt;p&gt;åœ¨ä¸è®¿é—®chipæ—¶åˆ‡æ–­ä¾›ç”µ&lt;/p&gt;
&lt;p&gt;å‚å•†æä¾›å¤šç§ä¸åŒåŠŸè€—çš„å·¥ä½œçŠ¶æ€&lt;/p&gt;
&lt;p&gt;çŠ¶æ€è¿‡æ¸¡æ—¶Chipæ— æ³•è¢«è®¿é—®ï¼Œå› æ­¤ä¼šäº§ç”Ÿå»¶è¿Ÿ&lt;/p&gt;
&lt;h1 id=&#34;0x04-nvm&#34;&gt;0x04 NVM&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;è¯»&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;å†™&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;e.g.&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Charge Memoryç”µè·å­˜å‚¨å™¨&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é€šè¿‡æ£€æµ‹ç”µå‹Vè¯»å–æ•°æ®&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é€šè¿‡æ•è·ç”µè·Qå†™å…¥æ•°æ®&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é€šè¿‡å†™æ”¾å¤§å™¨æ¥è¯»å†™ï¼Œä½“ç§¯ä¸èƒ½å¤ªå°&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;DRAM, Flash&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Resistive Memoryç”µé˜»å¼å­˜å‚¨å™¨&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é€šè¿‡æ£€æµ‹ç”µé˜»R&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;é€šè¿‡è„‰å†²ç”µæµ$\frac{dQ}{dt}$å†™å…¥æ•°æ®&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;å†™æ•°æ®è°ƒæ•´é˜»æŠ—&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;PCM, STT-MRAMï¼Œmemristors&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;pcm&#34;&gt;PCM&lt;/h2&gt;
&lt;p&gt;é€šç”µåŠ çƒ­ä¼šæ”¹å˜çŠ¶æ€ç»“æ™¶æ€/éæ™¶æ€ï¼Œé˜»æŠ—å‘ç”Ÿå˜åŒ–ï¼Œè¡¨ç¤º0/1&lt;/p&gt;
&lt;h3 id=&#34;å†™&#34;&gt;å†™&lt;/h3&gt;
&lt;p&gt;ä¸¤ä¸ªçŠ¶æ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SETï¼šä¿æŒä½ç”µå‹ï¼Œå°†ä»‹è´¨å˜ä¸ºç»“æ™¶æ€&lt;/li&gt;
&lt;li&gt;RESETï¼šæé«˜æ¸©åº¦å˜ä¸ºéæ™¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¯»&#34;&gt;è¯»&lt;/h3&gt;
&lt;p&gt;æ£€æµ‹ç»“æ™¶æ€($10^3-10^4\Omega$)/éæ™¶æ€($10^6-10^7\Omega$)çš„é˜»æŠ—ï¼Œä¸¤è€…æ•°é‡çº§å·®è·è¾ƒå¤§&lt;/p&gt;
&lt;h2 id=&#34;ä¼˜åŠ¿&#34;&gt;ä¼˜åŠ¿&lt;/h2&gt;
&lt;p&gt;æ¯”DRAMï¼ŒFlashæœ‰æ›´é«˜çš„æ‰©å±•èƒ½åŠ›ï¼Œå­˜å‚¨å¯†åº¦&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªå•å…ƒçš„å­˜å‚¨å¯†åº¦æé«˜&lt;/p&gt;
&lt;p&gt;Non-Volatileï¼Œä¸é€šç”µæƒ…å†µä¸‹å¯ä»¥ä¿å­˜10å¹´ä»¥ä¸Šï¼ˆ85æ‘„æ°åº¦ï¼‰&lt;/p&gt;
&lt;p&gt;ä¸éœ€è¦Refreshæ“ä½œï¼Œä½åŠŸè€—&lt;/p&gt;
&lt;h3 id=&#34;mlc-pcm&#34;&gt;MLC-PCM&lt;/h3&gt;
&lt;p&gt;æ ¹æ®ç”µé˜»åˆ’åˆ†å¤šä¸ªbitï¼Œæ§åˆ¶è·ç¦»é—´éš”&lt;/p&gt;
&lt;p&gt;å»¶è¿Ÿç›¸è¾ƒäºDRAMé«˜&lt;/p&gt;
&lt;p&gt;åŠ¨æ€èƒ½è€—é«˜äºDRAM&lt;/p&gt;
&lt;p&gt;å†™å¯¿å‘½è¾ƒä½&lt;/p&gt;
&lt;h2 id=&#34;stt-mram&#34;&gt;STT-MRAM&lt;/h2&gt;
&lt;p&gt;è‡ªæ—‹è·ç£å­˜å‚¨å™¨&lt;/p&gt;
&lt;p&gt;ç”µæµæ”¹å˜ç£ä»‹è´¨æ–¹å‘ï¼Œæ”¹å˜é˜»æŠ—&lt;/p&gt;
&lt;p&gt;Reference Layerå’ŒFree Layeræ–¹å‘ç›¸åŒè¡¨ç¤º0ï¼Œç›¸åæ—¶è¡¨ç¤º1&lt;/p&gt;
&lt;h3 id=&#34;ä¼˜åŠ¿-1&#34;&gt;ä¼˜åŠ¿&lt;/h3&gt;
&lt;p&gt;å®¹é‡å¤§ï¼Œé€ ä»·ä½&lt;/p&gt;
&lt;p&gt;éæ˜“å¤±&lt;/p&gt;
&lt;p&gt;åŠŸè€—ä½&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹ç±»ä¼¼äºPCM&lt;/p&gt;
&lt;h2 id=&#34;memristorsrramreram&#34;&gt;Memristors/RRAM/ReRAM&lt;/h2&gt;
&lt;p&gt;æ”¹å˜åŸå­ç»“æ„&lt;/p&gt;
&lt;h1 id=&#34;reference&#34;&gt;Reference&lt;/h1&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.bilibili.com/video/BV1xE411T7Dy&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å­˜å‚¨æŠ€æœ¯åŸºç¡€â€”Main Memory I&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.bilibili.com/video/BV1xE411T7Dy&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å­˜å‚¨æŠ€æœ¯åŸºç¡€â€”Main Memory II&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å­˜å‚¨æŠ€æœ¯åŸºç¡€ã€‘å›ºæ€ç¡¬ç›˜</title>
        <link>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/</link>
        <pubDate>Thu, 22 Sep 2022 09:36:42 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/</guid>
        <description>&lt;p&gt;ä¸»è¦ç”±Flash Memory å’ŒFTLç»„æˆ&lt;/p&gt;
&lt;p&gt;Non-Volatile Memory æä¾›ä½å»¶è¿ŸæŒä¹…æ€§çš„å†…å­˜/å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšå†…å­˜&lt;/p&gt;
&lt;p&gt;æ ¹æ®å»¶è¿Ÿæ•°é‡çº§ï¼Œä¸€èˆ¬ç”¨PCMåšå†…å­˜ï¼ŒFlash Memoryåšå¤–å­˜&lt;/p&gt;
&lt;h1 id=&#34;0x00-flash-memory&#34;&gt;0x00 Flash Memory&lt;/h1&gt;
&lt;h2 id=&#34;é—ªå­˜åŸç†&#34;&gt;é—ªå­˜åŸç†&lt;/h2&gt;
&lt;h3 id=&#34;ç±»å‹&#34;&gt;ç±»å‹&lt;/h3&gt;
&lt;p&gt;NORé—ªå­˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨å¯†åº¦ä½&lt;/li&gt;
&lt;li&gt;å¯å­—èŠ‚æ”¹å†™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;NANDé—ªå­˜ï¼ˆä¸»æµï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨å¯†åº¦é«˜&lt;/li&gt;
&lt;li&gt;ä¸å¯è¦†ç›–å†™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”¨äºå¤–å­˜éœ€è¦è¾ƒé«˜çš„å­˜å‚¨é‡çº§ï¼Œä¸€èˆ¬ç”¨NAND&lt;/p&gt;
&lt;h3 id=&#34;é—ªå­˜å•å…ƒ&#34;&gt;é—ªå­˜å•å…ƒ&lt;/h3&gt;
&lt;p&gt;è¯»ï¼šç”µå‹ä»£è¡¨ä¸åŒæ•°å€¼&lt;/p&gt;
&lt;p&gt;å†™ï¼šç”µå­æ³¨å…¥&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”æ™¶ä½“ç®¡æ·»åŠ äº†æµ®æ …é—¨ï¼Œä¿å­˜ç”µå­&lt;/p&gt;
&lt;p&gt;åŸç†å…¶å®æ¯”è¾ƒç®€å•ï¼Œéç”µå­ç³»å°±ä¸åšå¤ªè¯¦ç»†çš„ç ”ç©¶äº†&lt;/p&gt;
&lt;p&gt;é—ªå­˜é¡µ(4KB,8KB,16KBï¼Œè¯»å†™å•å…ƒ)ï¼Œé˜µåˆ—ä¸­çš„æ¯ä¸€è¡Œ&lt;/p&gt;
&lt;p&gt;é—ªå­˜å—(æ“¦é™¤å•å…ƒ)ï¼Œç”±å¤šä¸ªé¡µç»„æˆçš„å•å…ƒ&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922124359358.png&#34; alt=&#34;image-20220922124359358&#34; style=&#34;zoom:33%;&#34; /&gt;
&lt;p&gt;é€‰ä¸­è¡Œå’Œåˆ—ï¼Œç„¶åå°†æ•°æ®åŠ è½½åˆ°Sense Amplifiers&lt;/p&gt;
&lt;p&gt;å­˜å‚¨å•å…ƒæœ‰ä¸¤ä¸ªé˜ˆå€¼çš„ç”µå‹ï¼Œå¯ä»¥æ ¹æ®ä¸¤ä¸ªç”µå‹çš„ä¸­ç‚¹ä½œä¸ºè¯»ç”µå‹ï¼Œ2.5Vè¯»ç”µå‹æ—¶å·¦è¾¹é€šç”µï¼Œæ•°æ®ä¸º1ï¼Œå³è¾¹åˆ™ä¸é€šç”µï¼Œæ•°æ®ä¸º0&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922124755447.png&#34; alt=&#34;image-20220922124755447&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;Pass Through&lt;/p&gt;
&lt;p&gt;é€‰å–ä¸€ä¸ªè¾ƒå¤§çš„ç”µå‹ï¼Œä½¿å¾—æ‰€æœ‰çš„å•å…ƒéƒ½æ¥é€šï¼Œæ•°æ®ä¸º1ï¼Œä¸å½±å“å…¶ä»–è¡Œçš„çŠ¶æ€&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922131649578.png&#34; alt=&#34;image-20220922131649578&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;å¦‚å›¾æ‰€ç¤ºçš„å­˜å‚¨ç»“æ„ï¼Œåœ¨ç¬¬äºŒè¡Œæ–½åŠ 2.5Vç”µå‹ï¼Œå…¶ä»–è¡Œæ–½åŠ 5Vï¼Œæœ€ç»ˆè¯»å–æ•°æ®ä¸º0011&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922134857889.png&#34; alt=&#34;image-20220922134857889&#34; style=&#34;zoom:33%;&#34;/&gt;
&lt;p&gt;ä¸Šè¿°ä¸ºSLCï¼ŒSingle Level Cellï¼Œå•å­˜å‚¨å•å…ƒ&lt;/p&gt;
&lt;h3 id=&#34;å¤šæ¯”ç‰¹é—ªå­˜&#34;&gt;å¤šæ¯”ç‰¹é—ªå­˜&lt;/h3&gt;
&lt;p&gt;å¤šæ¯”ç‰¹é—ªå­˜å•å…ƒMLCï¼ŒåŒ…å«2Bits 4ä¸ªLevelçš„æ•°æ®&lt;/p&gt;
&lt;p&gt;TLC 3 Bits 8ä¸ªLevel&lt;/p&gt;
&lt;p&gt;QLC 4 Bits 16ä¸ªLevel&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¤šæ¯”ç‰¹ä½¿ç”¨æ ¼é›·ç æ¥ç¼–ç &lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨æ ¼é›·ç ä½¿å¾—ç›¸é‚»å•å…ƒåªæœ‰ä¸€ä½å·®å¼‚ï¼Œæ–¹ä¾¿çº é”™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¤šæ¯”ç‰¹æé«˜äº†å­˜å‚¨å¯†åº¦ï¼Œä½†æ˜¯æé«˜äº†é”™è¯¯ç‡ï¼Œå› ä¸ºæ–½åŠ çš„ç”µå‹å·®è·å¾ˆå°ã€‚å¯é æ€§ä¼šé™ä½ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922135516463.png&#34; alt=&#34;image-20220922135516463&#34; style=&#34;zoom:45%;&#34; /&gt;
&lt;p&gt;å¯¹äºå¤šæ¯”ç‰¹çš„å†™ï¼ŒMLCåˆ†ä¸ºé«˜æ¯”ç‰¹å’Œä½æ¯”ç‰¹ï¼Œå¯¹äºä½æ¯”ç‰¹çš„çŠ¶æ€åŠ åç§»ç”µå‹ç¡®å®šé«˜æ¯”ç‰¹ï¼Œåœ¨ä½æ¯”ç‰¹æ—¶éœ€è¦åŠ çš„ç”µå‹è¾ƒå¤§ï¼Œæ“ä½œéš¾åº¦ä½ï¼Œè¿è¡Œé€Ÿåº¦å¿«ï¼Œåœ¨é«˜æ¯”ç‰¹æ—¶éœ€è¦åŠ çš„ç”µå‹å°ï¼Œæ³¢å½¢çš„é—´è·å°ï¼Œæ“ä½œéš¾åº¦é«˜ï¼Œè¿è¡Œçš„é€Ÿåº¦è¾ƒæ…¢ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922140421405.png&#34; alt=&#34;image-20220922140421405&#34; style=&#34;zoom:40%;&#34; /&gt;
&lt;p&gt;å¯¹äºå¤šæ¯”ç‰¹çš„è¯»ï¼Œå…ˆçœ‹lower bitï¼ŒåŠ ä¸€æ¬¡ç”µå‹ï¼Œå³å¯ç­›é€‰å‡ºä½ä½çš„0ï¼Œ1ï¼Œå†åŠ ä¸¤æ¬¡ç”µå‹ç¡®å®šupper bitã€‚å› ä¸ºupper bitä¸º0çš„åœ¨ä¸­é—´éƒ¨åˆ†ï¼Œä¸º1çš„åœ¨ä¸¤ä¾§ï¼Œå› æ­¤éœ€è¦åœ¨ä¸¤ä¸ªåˆ†ç•Œçº¿åˆ†åˆ«åŠ ä¸€æ¬¡ç”µå‹æ¥ç¡®å®šupper bitä¸ºå¤šå°‘ã€‚&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922141455826.png&#34; alt=&#34;image-20220922141455826&#34; style=&#34;zoom:40%;&#34; /&gt;
&lt;h3 id=&#34;é—ªå­˜&#34;&gt;é—ªå­˜&lt;/h3&gt;
&lt;p&gt;Blockçš„å¤§å°çš„ä¸€ç§é…ç½®ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€è¡Œæœ‰ä¸¤ä¸ªPageï¼ŒUpper Pageå’ŒLower Pageï¼Œæ¯ä¸ªå•å…ƒä¸­ï¼Œä½ä½æ„æˆLower Pageï¼Œé«˜ä½æ„æˆUpper Pageï¼Œæœ‰128ä¸ªå•å…ƒï¼Œ128K/8=16KB&lt;/p&gt;
&lt;p&gt;æœ‰64åˆ—bitlinesï¼Œä¸€ä¸ªblockçš„å¤§å°å³ä¸º&lt;code&gt;16KB*64*2=2MB&lt;/code&gt;ï¼Œä¸€èˆ¬æŒ‰ç…§æ­¤æ¯”ä¾‹é…ç½®Block&lt;/p&gt;
&lt;p&gt;å†™å…¥æ—¶æŒ‰ç…§å›ºå®šé¡ºåºï¼Œå†™å…¥é«˜ä½é¡µé¢ç›¸äº’ç‹¬ç«‹ï¼Œä¸èƒ½åŒæ—¶å†™ï¼Œåœ¨å†™å…¥åŠ å‹æ—¶å®¹æ˜“ä½¿ç›¸é‚»å•å…ƒå‘ç”Ÿæ•°æ®åç§»ï¼Œè¦é™ä½é”™è¯¯ç‡&lt;/p&gt;
&lt;p&gt;å†™å…¥æ˜¯éœ€è¦å…ˆæ“¦é™¤å†å†™å…¥ï¼Œæ“¦é™¤æ•´ä¸ªå—&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922143608667.png&#34; alt=&#34;image-20220922143608667&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h4 id=&#34;ç‰¹æ€§&#34;&gt;ç‰¹æ€§&lt;/h4&gt;
&lt;h5 id=&#34;è¯»å†™ç²’åº¦&#34;&gt;è¯»å†™ç²’åº¦&lt;/h5&gt;
&lt;p&gt;é—ªå­˜é¡µè¯»å†™ç²’åº¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;4KBï¼Œ8KBï¼Œ16KBå¿…é¡»å…¨éƒ¨è¯»å–æˆ–è€…å†™å…¥&lt;/li&gt;
&lt;li&gt;uså»¶è¿Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é—ªå­˜å—æ“¦é™¤åŠ›åº¦&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2MBæ“¦é™¤&lt;/li&gt;
&lt;li&gt;mså»¶è¿Ÿï¼Œå¯ä»¥é€šè¿‡FTLæ¥ä¼˜åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;ä¸å¯è¦†ç›–å†™&#34;&gt;ä¸å¯è¦†ç›–å†™&lt;/h5&gt;
&lt;p&gt;å†™å‰éœ€è¦æ“¦é™¤ï¼Œè¯»å†™ç²’åº¦ä¸æ“¦é™¤ç²’åº¦ä¸åŒ&lt;/p&gt;
&lt;p&gt;å­˜åœ¨64bytesçš„OOBï¼ˆout of bound areaï¼‰ï¼Œä¿å­˜ECCï¼Œç”¨äºçº é”™ï¼Œå®¹å¿å†™å…¥æ—¶éƒ¨åˆ†æ¯”ç‰¹å‡ºé”™&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922162139217.png&#34; alt=&#34;image-20220922162139217&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h5 id=&#34;æœ‰é™æ¬¡æ“¦é™¤&#34;&gt;æœ‰é™æ¬¡æ“¦é™¤&lt;/h5&gt;
&lt;p&gt;éšç€æ“¦é™¤æ¬¡æ•°çš„å¢åŠ ï¼Œå­˜å‚¨å•å…ƒä¸èƒ½å¯é çš„ä¿æŒçŠ¶æ€ï¼ˆå­˜å‚¨æ•°æ®ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ°§åŒ–å±‚è€åŒ–å˜è–„ï¼ŒæŸç¼šç”µå­èƒ½åŠ›å˜å¼±&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è€ä¹…æ€§ å˜è–„åœ°æ¬¡æ•°&lt;/li&gt;
&lt;li&gt;ä¿æŒåŠ› ä¸é€šç”µå¯ä»¥æ”¾ç½®çš„æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;SLCï¼š10wæ¬¡&lt;/p&gt;
&lt;p&gt;MLCï¼š1wæ¬¡&lt;/p&gt;
&lt;p&gt;TLCï¼š1kæ¬¡&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç‰¹æ€§è®¾è®¡FTLå›ºä»¶æ¥&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922164523965.png&#34; alt=&#34;image-20220922164523965&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h1 id=&#34;0x01-ftl&#34;&gt;0x01 FTL&lt;/h1&gt;
&lt;p&gt;å›ºæ€ç¡¬ç›˜æ•´ä½“æ„æˆ&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922164728094.png&#34; alt=&#34;image-20220922164728094&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;SSDä¸­çš„é€šé“å¯ä»¥å¹¶è¡Œï¼Œé€šé“ä¸­ä¹Ÿå¯ä»¥å¹¶è¡Œè¯»å–ï¼Œæ¯ä¸ªPlaneä¸­æœ‰å¯„å­˜å™¨ï¼Œæš‚æ—¶å­˜å‚¨å‡†å¤‡å¥½çš„æ•°æ®ã€‚ä¸åŒå•å…ƒå¹¶è¡Œï¼Œå› æ­¤å†…éƒ¨å¸¦å®½å¤§&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922165354311.png&#34; alt=&#34;image-20220922165354311&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h2 id=&#34;åƒåœ¾å›æ”¶&#34;&gt;åƒåœ¾å›æ”¶&lt;/h2&gt;
&lt;p&gt;pageå¯¹äºOSè€Œè¨€ï¼Œæ˜¯å†™å…¥æ—¶çš„block&lt;/p&gt;
&lt;p&gt;Pageä¸‰ç§çŠ¶æ€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç©ºé—² free page&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆé¡µ live/valid page&lt;/li&gt;
&lt;li&gt;æ— æ•ˆé¡µ dead/invalid page&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922184349456.png&#34; alt=&#34;image-20220922184349456&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;éœ€è¦æ“¦é™¤æ— æ•ˆé¡µï¼Œå…ˆç§»èµ°æœ‰æ•ˆé¡µï¼Œç„¶åå†å¯¹ä¸€æ•´è¡Œè¿›è¡Œæ“¦é™¤ï¼Œè½¬ä¸ºç©ºé—²&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220922184406162.png&#34; alt=&#34;image-20220922184406162&#34; style=&#34;zoom:25%;&#34; /&gt;
&lt;p&gt;æ—¶é—´å¼€é”€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤åˆ¶æœ‰æ•ˆæ•°æ®åˆ°$(R_{Latency}+W_{Latency})*N$ï¼ŒNæ˜¯ç§»åŠ¨pageçš„æ•°é‡&lt;/li&gt;
&lt;li&gt;æ“¦é™¤äº§ç”Ÿçš„å¼€é”€ msçº§å»¶è¿Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;gcç­–ç•¥&#34;&gt;GCç­–ç•¥&lt;/h3&gt;
&lt;p&gt;è¦è§£å†³çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½•æ—¶å¯åŠ¨GC&lt;/li&gt;
&lt;li&gt;é€‰ä¸­é‚£äº›/å¤šå°‘Blockè¿›è¡ŒGC&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆçš„é¡µå¦‚ä½•è¢«è½¬å†™&lt;/li&gt;
&lt;li&gt;æ–°æ•°æ®å†™åˆ°å“ªé‡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GCçš„æ—¶é—´å¼€é”€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å—æ“¦é™¤çš„æ—¶é—´ ms&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆé¡µçš„å¤åˆ¶æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è´ªå¿ƒç­–ç•¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰¾åˆ°è„é¡µæœ€å¤šçš„blockæ¥è¿›è¡Œæ“¦é™¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Age&lt;/li&gt;
&lt;li&gt;Hot/Cold æ•°æ®éš”ç¦»ï¼Œåˆ†ç»„é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç£¨æŸå‡è¡¡&#34;&gt;ç£¨æŸå‡è¡¡&lt;/h2&gt;
&lt;p&gt;ä¼˜åŒ–å¯¿å‘½ï¼Œæœ‰é™æ€å’ŒåŠ¨æ€ç­–ç•¥&lt;/p&gt;
&lt;p&gt;é™æ€ï¼šå‘¨æœŸæ€§çš„è°ƒæ•´å†·çƒ­æ•°æ®å­˜å‚¨çš„ä½ç½®&lt;/p&gt;
&lt;p&gt;å†·çƒ­æ•°æ®çš„åˆ†åŒºï¼šå°†å†·æ•°æ®æ”¾åœ¨ä¸€èµ·ï¼Œçƒ­æ•°æ®æ”¾åœ¨ä¸€èµ·&lt;/p&gt;
&lt;h2 id=&#34;ftlç®€ä»‹&#34;&gt;FTLç®€ä»‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç»´æŠ¤æ˜ å°„ï¼Œè™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨SRAMå­˜å‚¨æ˜ å°„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘ä¸Šå±‚éšè—æ“¦é™¤æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¿å…åŸåœ°æ›´æ–°-&amp;gt;å¼‚åœ°æ›´æ–°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ›´æ–°ä¸€ä¸ªæ–°é¡µé¢&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é«˜æ€§èƒ½çš„åƒåœ¾å›æ”¶å’Œæ“¦é™¤&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OOBæœ‰ç‰©ç†åœ°å€åˆ°è™šæ‹Ÿåœ°å€çš„æ˜ å°„ï¼Œç”¨äºæ‰ç”µæ¢å¤ï¼Œè¿™é‡Œå¼•ç”¨ä¸€æ®µ&lt;a class=&#34;link&#34; href=&#34;https://pages.cs.wisc.edu/~remzi/OSTEP/file-ssd.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;wiscçš„OSTEPä¸­çš„ä¸€æ®µè§£é‡Šï¼ˆ44 Flash- based SSDï¼‰&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;OOBä¿å­˜çš„åœ¨æ¯ä¸ªé¡µä¸­æ˜ å°„ä¿¡æ¯ï¼Œå½“æ‰ç”µæˆ–è€…é‡å¯æ—¶ç”¨å®ƒåœ¨å†…å­˜ä¸­é‡å»ºæ˜ å°„&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢åœ¨é‡å»ºæ—¶æ‰«ç æ•´ä¸ªSSDï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—æˆ–è€…æ£€æŸ¥ç‚¹çš„æ–¹å¼æ¥åŠ é€Ÿè¿™ä¸ªè¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;å¤§è‡´çœ‹äº†ä¸€ä¸‹OSTEPï¼Œè®°å¾—æ˜¯jyyè€å¸ˆæ¨èçš„æ•™æï¼Œå¸Œæœ›ä»¥åæœ‰æ—¶é—´è¯»ä¸€ä¸‹&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220924141132556.png&#34; alt=&#34;image-20220924141132556&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h3 id=&#34;page-level-ftl&#34;&gt;Page-Level FTL&lt;/h3&gt;
&lt;p&gt;åŸç†ç±»ä¼¼OSä¸­çš„é¡µè¡¨ï¼Œç”±Logical Page NumberæŸ¥è¯¢é¡µè¡¨å¾—åˆ°Physical Page Number&lt;/p&gt;
&lt;p&gt;ç¼ºç‚¹æ˜¯é¡µè¡¨å ç”¨å¾ˆå¤§çš„ç©ºé—´&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220924152322358.png&#34; alt=&#34;image-20220924152322358&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h3 id=&#34;block-level-ftl&#34;&gt;Block-Level FTL&lt;/h3&gt;
&lt;p&gt;ä¿æŒBlock åˆ°Blockçš„æ˜ å°„&lt;/p&gt;
&lt;p&gt;å…ˆæŸ¥æ‰¾åˆ°å¯¹åº”çš„Blockï¼Œåœ¨æ ¹æ®offsetå¾—åˆ°pageï¼Œå—å†…çš„é¡µç åç§»offsetæ˜¯å›ºå®šçš„&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220924152259043.png&#34; alt=&#34;image-20220924152259043&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;ä¼˜ç‚¹æ˜¯å ç”¨ç©ºé—´å¾ˆå°ï¼Œç¼ºç‚¹æ˜¯GCè´Ÿè½½å¢åŠ &lt;/p&gt;
&lt;p&gt;åŸå› ï¼šoffsetåœ¨ä¸åŒBlockä¸­ä¿æŒä¸å˜ï¼Œåœ¨å¼‚åœ°æ›´æ–°æ—¶ï¼Œè¦é€‰æ‹©å…¶ä»–blockä¸­ç›¸åŒçš„offsetè¿›è¡Œå†™å…¥ï¼Œå¦‚æœé€‰ä¸­çš„blockå·²ç»å­˜åœ¨æ•°æ®ï¼Œéœ€è¦æŠŠæ•°æ®è¿ç§»ã€‚ã€TODO è¿™é‡Œè®²å¾—ä¸æ˜¯éå¸¸çš„æ¸…æ¥šã€‘&lt;/p&gt;
&lt;h3 id=&#34;hybrid-ftl&#34;&gt;Hybrid FTL&lt;/h3&gt;
&lt;p&gt;å¯¹å†™å…¥åˆ†ä¸ºæ–°/æ—§æ•°æ®ï¼Œæ–°å†™å…¥çš„æ•°æ®ç”¨Page-Level Mappingæ•ˆç‡é«˜ï¼Œå†™å…¥Log Blocksä½œä¸ºç¼“å†²ï¼Œä¹‹åå†æ›´æ–°åˆ°Data Blocks&lt;/p&gt;
&lt;p&gt;æ—§æ•°æ®å› ä¸ºå†™å…¥åæ›´æ–°ç›¸å¯¹ä¸é¢‘ç¹ï¼Œä½¿ç”¨Block-Level Mappingï¼Œå†™å…¥Data Blocks&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å­˜å‚¨æŠ€æœ¯åŸºç¡€ã€‘ç£ç›˜æŠ€æœ¯</title>
        <link>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E7%A3%81%E7%9B%98%E6%8A%80%E6%9C%AF/</link>
        <pubDate>Tue, 20 Sep 2022 16:13:29 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E7%A3%81%E7%9B%98%E6%8A%80%E6%9C%AF/</guid>
        <description>&lt;p&gt;æœ¬è®²å†…å®¹HDDå¥½å¼Ÿå¼Ÿï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç£ç›˜çš„æ„æˆå’Œå„ä¸ªéƒ¨åˆ†çš„åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;ç£ç›˜çš„æ€§èƒ½å’Œè¯„ä¼°æ–¹å¼&lt;/li&gt;
&lt;li&gt;ç£ç›˜å›ºä»¶çš„åŠŸèƒ½ï¼Œå›ºä»¶ç®—æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¨èé˜…è¯»ï¼š&lt;a class=&#34;link&#34; href=&#34;https://github.com/KevinOfNeu/ebooks/blob/master/Memory%20systems%20Cache%20DRAM%20Disk.pdf&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Memory System: Cache,DRAM,Disk.Author: Bruce Jacob, Spencer W. Ng, David T.Wang&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;0x00-ç»„æˆ&#34;&gt;0x00 ç»„æˆ&lt;/h1&gt;
&lt;p&gt;è½¬è½´ï¼Œç›˜ç‰‡ï¼Œç£å¤´&lt;/p&gt;
&lt;p&gt;track ç£é“ï¼Œæ¯ä¸ªç›˜ç‰‡çš„æ­£é¢å’ŒèƒŒé¢çš„åŒå¿ƒåœ†&lt;/p&gt;
&lt;p&gt;å¯¹äºç›˜ç‰‡æ¯ä¸ªé¢æ˜¯surfaceï¼Œæ¯ä¸ªtrackç£é“åˆ†ä¸ºå¤šä¸ªsectorï¼ˆæ‰‡åŒºï¼‰&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰ç›˜ç‰‡ä¸ŠåŒä¸€ä¸ªä½ç½®çš„trackæ˜¯ä¸€ä¸ªcylinderï¼ˆæŸ±é¢ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;å¯»å€&#34;&gt;å¯»å€&lt;/h2&gt;
&lt;p&gt;ç‰©ç†ç¼–å€ï¼šCHSï¼ŒCylinder-Head-Sector å®šä½ä¸€ä¸ªå—çš„ä½ç½®&lt;/p&gt;
&lt;p&gt;æ ¹æ®æŸ±é¢-ç£å¤´-æ‰‡åŒºæ¥è®¿é—®&lt;/p&gt;
&lt;p&gt;å³è¾¹å›¾ç¤ºè¡¨ç¤ºé€»è¾‘å—åœ°å€ï¼Œæ¯ä¸ªæŸ±é¢å¯ä»¥ä»ä¸Šåˆ°ä¸‹é¡ºåºç¼–å€ï¼Œç»„æˆçº¿æ€§ç»“æ„&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/IMG_0448.jpg&#34; alt=&#34;IMG_0448&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h1 id=&#34;0x01-æ€§èƒ½è¯„ä¼°&#34;&gt;0x01 æ€§èƒ½è¯„ä¼°&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ç”µå­è®¾å¤‡
&lt;ul&gt;
&lt;li&gt;ç”µè·¯é©±åŠ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœºæ¢°è®¾å¤‡
&lt;ul&gt;
&lt;li&gt;seek time ç£å¤´è¿åŠ¨é€Ÿåº¦&lt;/li&gt;
&lt;li&gt;rotational latency è½¬è½´æ—‹è½¬é€Ÿåº¦&lt;/li&gt;
&lt;li&gt;data transfer rate æ•°æ®ä¼ è¾“é€Ÿç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$ç£ç›˜è®¿é—®æ—¶é—´=ç£å¤´è¿åŠ¨é€Ÿåº¦+è½¬è½´æ—‹è½¬é€Ÿåº¦+æ•°æ®ä¼ è¾“é€Ÿåº¦$&lt;/p&gt;
&lt;h2 id=&#34;seek-time&#34;&gt;Seek time&lt;/h2&gt;
&lt;p&gt;innerå’Œoutter trackä¸­è¿›è¡Œç§»åŠ¨ï¼Œåˆ°è¾¾å¯¹åº”çš„trackæ‰€æ¶ˆè€—çš„æ—¶é—´&lt;/p&gt;
&lt;p&gt;è¯„ä»·æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Full stroke é‡Œåœˆåˆ°å¤–åœˆ&lt;/li&gt;
&lt;li&gt;Average ç§»åŠ¨åˆ°ä¸­é—´æ‰€èŠ±è´¹çš„æ—¶é—´&lt;/li&gt;
&lt;li&gt;Track-to-track ä¸¤ä¸ªç£é“é—´çš„ç§»åŠ¨æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;rotational-latency&#34;&gt;Rotational Latency&lt;/h2&gt;
&lt;p&gt;å¹³å‡æ—‹è½¬é€Ÿåº¦ï¼šè½¬åŠåœˆçš„æ—¶é—´&lt;/p&gt;
&lt;p&gt;å‚å•†ä½¿ç”¨è½¬é€Ÿæ¥æ ‡ç§°&lt;/p&gt;
&lt;p&gt;rpm: round per min
$$
{\rm Rotational\ Latency}=\frac{1}{2}*\frac{1}{\frac{x\ rpm}{60}}
$$&lt;/p&gt;
&lt;h2 id=&#34;data-transfer-time&#34;&gt;Data Transfer Time&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20220921135256805.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20220921135256805&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åˆ†ä¸ºå†…éƒ¨ä¼ è¾“å’Œå¤–éƒ¨ä¼ è¾“&lt;/p&gt;
&lt;p&gt;å†…éƒ¨ä¼ è¾“æ˜¯ç£ä»‹è´¨åˆ°Buffer&lt;/p&gt;
&lt;p&gt;å¤–éƒ¨ä¼ è¾“æ˜¯ä»æ¥å£åˆ°ä¸»æœºï¼Œä¾‹å¦‚SATAæ¥å£
$$
{\rm Transfer\ time=\frac{Block\ size}{Transfer\ rate(å¸¦å®½)}}
$$
è¿˜æœ‰ç”µå­æ§åˆ¶éƒ¨ä»¶å»¶è¿Ÿï¼Œä¸€èˆ¬è€Œè¨€å¯ä»¥å¿½ç•¥ï¼Œä»¥ä¸Šéƒ½æ˜¯æ¯«ç§’é‡çº§&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20220921135704097.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20220921135704097&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¤§éƒ¨åˆ†æ—¶é—´å¼€é”€åœ¨Seek Timeï¼Œæ¥è¿‘60%&lt;/p&gt;
&lt;p&gt;I/O Controlleråˆ©ç”¨ç‡è¶Šé«˜ï¼Œä¼šå¯¼è‡´å¹³å‡çš„å»¶è¿Ÿå‡é«˜&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.ipandai.club/img/image-20220921140754758.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20220921140754758&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;data-rate-inner-vs-outer-tracks&#34;&gt;Data Rate: Inner vs. Outer Tracks&lt;/h2&gt;
&lt;p&gt;ç£ç›˜åœ¨é‡Œåœˆå’Œå¤–åœˆçš„ä¼ è¾“é€Ÿç‡ä¸åŒï¼Œå¤–åœˆæ•°æ®å¯†åº¦å°ï¼Œç£ç›˜è½¬é€Ÿæ’å®šï¼ˆè§’é€Ÿåº¦ç›¸åŒï¼‰ï¼Œå¤–åœˆçš„çº¿é€Ÿåº¦å¤§ï¼Œå¤–éƒ¨ç£é“æœ‰æ›´å¤§çš„æ•°æ®é€Ÿç‡&lt;/p&gt;
&lt;p&gt;åœ¨æ“ä½œç³»ç»Ÿè§†è§’æ¥è¯´ï¼Œå†…å¤–åœˆé€Ÿç‡ç›¸åŒï¼Œå®é™…å¤–åœˆè¦å¿«ï¼Œæ˜¯é‡Œåœˆçš„1.7å€&lt;/p&gt;
&lt;h1 id=&#34;0x02-ç£ç›˜å›ºä»¶å’Œè°ƒåº¦&#34;&gt;0x02 ç£ç›˜å›ºä»¶å’Œè°ƒåº¦&lt;/h1&gt;
&lt;p&gt;ASICï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿¡å·å¤„ç†&lt;/li&gt;
&lt;li&gt;å®¹é”™&lt;/li&gt;
&lt;li&gt;é©±åŠ¨å¤„ç†&lt;/li&gt;
&lt;li&gt;é©¬è¾¾æ§åˆ¶&lt;/li&gt;
&lt;li&gt;ç¼“å­˜æ§åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;firmwareï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯·æ±‚å¤„ç†&lt;/li&gt;
&lt;li&gt;è¯·æ±‚æ’é˜Ÿå’Œè°ƒåº¦&lt;/li&gt;
&lt;li&gt;LBN-to-PBN é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ˜ å°„é€»è¾‘åœ°å€åˆ°sector&#34;&gt;æ˜ å°„é€»è¾‘åœ°å€åˆ°sector&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬å—å¤§å°ä¸º512bytesæˆ–4KBï¼Œå—çš„æ•°é‡ä¸ºå®¹é‡/å—å¤§å°&lt;/p&gt;
&lt;p&gt;ç£ç›˜ä¸Šçš„æ•°æ®ç¼–å€å¦‚å›¾æ‰€ç¤ºï¼Œä»¥sectorä¸ºåŸºç¡€ï¼Œåœ¨trackå†…è¿ç»­ï¼Œå‡å°‘rotational latency&lt;/p&gt;
&lt;img src=&#34;https://blog.ipandai.club/img/image-20220921164047132.png&#34; alt=&#34;image-20220921164047132&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;ä¸åŒç›˜é¢ä¸Šçš„ç¼–å€åˆ†ä¸ºæ­£é¢å’ŒèƒŒé¢ï¼Œéƒ½ä¼šè¿›è¡Œç¼–å€ï¼Œè¿˜æœ‰ä»¥æŸ±é¢ä¸ºåŸºå‡†çš„ç¼–å€ï¼Œå‡å°‘seek timeã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›˜ç‰‡ä¸º1-5ä¸ªï¼Œ2-10ä¸ªç›˜é¢&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªé¢ç£é“æ•°ä¸º10s - 100sï¼Œ1000s&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªç£é“ä¸Šçš„æ‰‡åŒºæœ‰500-4000ä¸ªï¼Œæ¯ä¸ªç£é“å¤§å°ä¸º250KB-2MB&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;LBNå¯»å€ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æŸ±é¢å·=LBN/æ¯ä¸ªæŸ±é¢çš„ç£é“æ•°&lt;/li&gt;
&lt;li&gt;ç›˜é¢å·=(LBNå¯¹æ¯ä¸ªæŸ±é¢çš„ç£é“æ•°å–æ¨¡)/æ¯ä¸ªç£é“çš„æ‰‡åŒºæ•°&lt;/li&gt;
&lt;li&gt;æ‰‡åŒºå·=LBNå¯¹æ¯ä¸ªç£é“çš„æ‰‡åŒºæ•°å–æ¨¡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è®²è§£äº†å‡ ç§è°ƒåº¦ç®—æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FCFS å…ˆæ¥å…ˆæœåŠ¡&lt;/li&gt;
&lt;li&gt;SSTF æœ€è¿‘å…ˆæœåŠ¡ï¼Œæœ‰é¥¥é¥¿é—®é¢˜&lt;/li&gt;
&lt;li&gt;SCAN å…ˆå¾€ä¸€ä¸ªæ–¹å‘èµ°ï¼Œå†å¾€å¦ä¸€ä¸ªæ–¹å‘æ‰«æ&lt;/li&gt;
&lt;li&gt;C-SCAN å•å‘èµ°&lt;/li&gt;
&lt;li&gt;LOOK ç›¸è¾ƒäºSCANä¸èµ°0å’Œè¾¹ç•Œ&lt;/li&gt;
&lt;li&gt;C-LOOK ç›¸è¾ƒäºC-SCANä¸èµ°è¾¹ç•Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯„ä¼°æŒ‡æ ‡ï¼šå¹³å‡è®¿é—®å»¶è¿Ÿï¼Œä¸€èˆ¬SSTFï¼ŒC-LOOK&lt;/p&gt;
&lt;h1 id=&#34;ç¼ºé™·-ç¬¬ä¸‰è®²å¼€å¤´éƒ¨åˆ†&#34;&gt;ç¼ºé™· ç¬¬ä¸‰è®²å¼€å¤´éƒ¨åˆ†&lt;/h1&gt;
&lt;p&gt;æœºæ¢°å¼éƒ¨ä»¶é™åˆ¶äº†æ€§èƒ½ï¼Œç»§ç»­æå‡ä¼šäº§ç”Ÿä¸€äº›ç‰©ç†é—®é¢˜&lt;/p&gt;
&lt;p&gt;å¸¦å®½æå‡æœ‰é™&lt;/p&gt;
&lt;p&gt;å­˜åœ¨èƒ½è€—é—®é¢˜ï¼Œéœ€è¦é€šç”µã€æ•£çƒ­å†·å´ç­‰å¼€é”€&lt;/p&gt;
&lt;p&gt;éšæœºè®¿é—®çš„æ€§èƒ½å·®&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å­˜å‚¨æŠ€æœ¯åŸºç¡€ã€‘æ¦‚è¿°</title>
        <link>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0/</link>
        <pubDate>Tue, 20 Sep 2022 14:41:57 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0/</guid>
        <description>&lt;h1 id=&#34;0x00-intro&#34;&gt;0x00 Intro&lt;/h1&gt;
&lt;p&gt;å¯¹äºåœºæ™¯åˆ¶å®šå­˜å‚¨æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨ç»“æ„&lt;/li&gt;
&lt;li&gt;å­˜å‚¨å¤§å°&lt;/li&gt;
&lt;li&gt;å¯é æ€§å’Œå®¹é”™&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶è®¿é—®ç±»å‹ï¼Œè¯»/å†™é¢‘ç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¦å­¦ä¹ ç¡¬ä»¶çš„é€‰æ‹©å’Œæ–‡ä»¶ç³»ç»Ÿè®¾è®¡&lt;/p&gt;
&lt;h1 id=&#34;0x01-ç°çŠ¶&#34;&gt;0x01 ç°çŠ¶&lt;/h1&gt;
&lt;h2 id=&#34;å­˜å‚¨çš„æŒ‘æˆ˜&#34;&gt;å­˜å‚¨çš„æŒ‘æˆ˜&lt;/h2&gt;
&lt;p&gt;æ•°æ®é‡æ¿€å¢&lt;/p&gt;
&lt;h2 id=&#34;å­˜å‚¨æ˜¯ä»€ä¹ˆ&#34;&gt;å­˜å‚¨æ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;åˆ†å±‚çš„å­˜å‚¨æ¶æ„&lt;/p&gt;
&lt;p&gt;L0-L1-L2-DRAM-Disk&lt;/p&gt;
&lt;h2 id=&#34;å­˜å‚¨çš„ç‰¹æ€§&#34;&gt;å­˜å‚¨çš„ç‰¹æ€§&lt;/h2&gt;
&lt;p&gt;å¯é æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šå‰¯æœ¬&lt;/li&gt;
&lt;li&gt;çº åˆ ç &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€è‡´æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸå­+æŒä¹…åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ•°æ®ä¿æŠ¤ å®¹ç¾å’Œå¤‡ä»½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§£å†³å•ç‚¹æ•…éšœ&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;0x02-å­˜å‚¨å†å²ä¸å‘å±•&#34;&gt;0x02 å­˜å‚¨å†å²ä¸å‘å±•&lt;/h1&gt;
&lt;h2 id=&#34;ç¡¬ä»¶ä¸Šçš„å‘å±•&#34;&gt;ç¡¬ä»¶ä¸Šçš„å‘å±•&lt;/h2&gt;
&lt;p&gt;1956&amp;ndash;HDD&lt;/p&gt;
&lt;p&gt;1984&amp;ndash;Flash Memory æ—©æœŸç”¨äºåµŒå…¥å¼&lt;/p&gt;
&lt;p&gt;2010s&amp;ndash;Persistent Memory 3D-Point Intel&lt;/p&gt;
&lt;p&gt;SSD NAND Flashï¼š&lt;/p&gt;
&lt;p&gt;SLCï¼ŒMLCï¼ŒTLCï¼ŒQLCå­˜å‚¨å•å…ƒä¸­ç”µå¹³çš„ç­‰çº§&lt;/p&gt;
&lt;p&gt;å¯¹æ¯”HDDå’ŒSSDï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äºNANDï¼Œéœ€è¦å…ˆæ“¦å‡ºï¼Œå†å†™&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NAND Flashæœ‰æ“¦é™¤ï¼ŒHDDåªèƒ½è¦†ç›–å†™&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SSDå¤šä¸ªé¢—ç²’å¯ä»¥å¹¶è¡ŒI/Oï¼Œæ€»ä½“ä¸Šé€Ÿåº¦å¿«&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è½¯ä»¶ä¸Šçš„å‘å±•&#34;&gt;è½¯ä»¶ä¸Šçš„å‘å±•&lt;/h2&gt;
&lt;p&gt;ç½‘ç»œå­˜å‚¨ è¿œç¨‹æŒ‚è½½ç›®å½•NAS&lt;/p&gt;
&lt;p&gt;åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸGFSï¼ŒHadoop HDFS&lt;/p&gt;
&lt;p&gt;é”®å€¼å­˜å‚¨Key-Value&lt;/p&gt;
&lt;p&gt;äº‘å­˜å‚¨ æ•°æ®å­˜åœ¨è¿œç«¯ï¼Œå•†ä¸šåŒ–ï¼Œè½¯ä»¶åä½œOffice&lt;/p&gt;
&lt;h1 id=&#34;assignment&#34;&gt;Assignment&lt;/h1&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªæœåŠ¡å™¨é›†ç¾¤ï¼ˆ4å°ï¼‰ï¼Œé’ˆå¯¹I/O 500æµ‹è¯•ï¼Œéœ€è¦è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ&lt;/p&gt;
</description>
        </item>
        <item>
        <title>[ATC&#39;19] Asynchronous I/O Stack: A Low-latency Kernel I/O Stack for Ultra-Low Latency SSDs</title>
        <link>https://blog.ipandai.club/p/atc19-asynchronous-i/o-stack-a-low-latency-kernel-i/o-stack-for-ultra-low-latency-ssds/</link>
        <pubDate>Wed, 17 Aug 2022 10:30:41 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/atc19-asynchronous-i/o-stack-a-low-latency-kernel-i/o-stack-for-ultra-low-latency-ssds/</guid>
        <description>&lt;h1 id=&#34;intro&#34;&gt;Intro&lt;/h1&gt;
&lt;p&gt;ä¼˜åŒ–I/Oçš„æ–¹æ³•&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·å±‚é¢ç›´æ¥è°ƒç”¨å¤–éƒ¨å­˜å‚¨è®¾å¤‡ï¼Œéœ€è¦åº”ç”¨åŒ…å«æ–‡ä»¶ç³»ç»Ÿçš„è°ƒç”¨ï¼Œè‡ƒè‚¿ï¼ŒåŒæ—¶ä¸åŒåº”ç”¨å’Œç”¨æˆ·é—´çš„å†²çªé—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–æ“ä½œç³»ç»Ÿå†…æ ¸çš„I/O æ ˆ
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨è½®è¯¢æ¥å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€&lt;/li&gt;
&lt;li&gt;åœ¨åº•å±‚å‡å°‘ä¸€åŠçš„ä¸­æ–­å¤„ç†&lt;/li&gt;
&lt;li&gt;åˆ†æ•£I/OæŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;I/O blockè°ƒåº¦æœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;related-work&#34;&gt;Related Work&lt;/h1&gt;
&lt;p&gt;å‡å°‘å†…æ ¸çš„å¼€é”€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡å°‘ä¸­æ–­å¤„ç†çš„ååŠéƒ¨åˆ†&lt;/li&gt;
&lt;li&gt;æ˜¯ç”¨è½®è¯¢æŠ€æœ¯è€Œéä¸­æ–­ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/li&gt;
&lt;li&gt;æ··åˆè½®è¯¢&lt;/li&gt;
&lt;li&gt;åŸºäºSSDçš„é—ªå­˜éšæœºè¯»å†™ç®€åŒ–è°ƒåº¦ç­–ç•¥&lt;/li&gt;
&lt;li&gt;åœ¨NVMeå›ºä»¶ä¸­è¿›è¡Œè°ƒåº¦&lt;/li&gt;
&lt;li&gt;å¯¹é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œæä¾›ä¸åŒçš„IO pathæ”¯æŒï¼Œæœ€å°åŒ–IO pathçš„å¼€é”€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¿®æ”¹å­˜å‚¨æ¥å£&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†æ•£/åˆ†æ•£ IOåˆå¹¶å¤šä¸ªIOåˆ°ä¸€ä¸ªæŒ‡ä»¤ï¼Œå‡å°‘å¾€è¿”æ¬¡æ•°&lt;/li&gt;
&lt;li&gt;ç§»é™¤doorbellæœºåˆ¶å’Œå®Œæˆä¿¡å·&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ”¹å–„fsync&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å†²fsyncè¯·æ±‚å‘å‡ºåˆ°æ”¶åˆ°responseï¼Œå»¶é•¿æ•°æ®æŒä¹…åŒ–çš„æ—¶é—´&lt;/li&gt;
&lt;li&gt;åœ¨æ—¥å¿—æäº¤è®°å½•ä¸­ä½¿ç”¨æ ¡éªŒå’Œï¼Œæœ‰æ•ˆçš„é‡å æ—¥å¿—å†™å…¥å’Œå—å†™å…¥&lt;/li&gt;
&lt;li&gt;æå‡º&lt;code&gt;å†™å®ˆåºç³»ç»Ÿè°ƒç”¨&lt;/code&gt;ï¼Œé‡å çš„fsyncæ•ˆæœç›¸åŒï¼Œå½“åº”ç”¨éœ€è¦ä½¿ç”¨fsyncæ—¶ï¼Œå…³äºIOçš„æ“ä½œå°†åŒæ­¥è¿›è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”¨æˆ·å±‚ç›´æ¥è®¿é—®å¤–è®¾ï¼Œå­˜åœ¨éš”ç¦»ã€ä¿æŠ¤ç­‰å®‰å…¨é—®é¢˜&lt;/p&gt;
&lt;h1 id=&#34;motivation&#34;&gt;Motivation&lt;/h1&gt;
&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;ç°çŠ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I/O è¯·æ±‚è¿‡ç¨‹ä¸­å¤ªå¤šçš„æ­¥éª¤&lt;/li&gt;
&lt;li&gt;é¡µé¢ç¼“å­˜åˆ†é…å’Œç´¢å¼•&lt;/li&gt;
&lt;li&gt;DMAï¼Œä¸€ç³»åˆ—æ•°æ®ç»“æ„çš„åˆ›å»º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›®å‰çš„ ULL SDDå®ç°äº†ä½äº10å¾®å¦™çš„IOå»¶è¿Ÿï¼Œç„¶è€Œæ“ä½œç³»ç»Ÿå†…æ ¸äº§ç”Ÿçš„å»¶è¿Ÿæ²¡æœ‰æ˜æ˜¾å˜åŒ–&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸“æ³¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linuxå†…æ ¸ä¸­çš„&lt;code&gt;read()&lt;/code&gt;å’Œ&lt;code&gt;write()+fsync()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åŸºäºNVMe SSDçš„Ext4æ–‡ä»¶ç³»ç»Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;for-read-path&#34;&gt;For Read Path&lt;/h2&gt;
&lt;p&gt;ç ”ç©¶å‘ç°è®¸å¤šå‰©ä½™çš„æ“ä½œä¸å¿…åœ¨è®¾å¤‡I/Oä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;æ­¤ç±»æ“ä½œå¯ä»¥åœ¨è®¾å¤‡I/Oæ“ä½œè¿›è¡Œæ—¶æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;å› ä¸ºæ­¤ç±»æ“ä½œå¤§å¤šç‹¬ç«‹äºè®¾å¤‡I/Oæ“ä½œï¼Œå› æ­¤è€ƒè™‘è®©è¿™äº›æ“ä½œä¸IOé‡å &lt;/p&gt;
&lt;h2 id=&#34;for-write-path&#34;&gt;For Write Path&lt;/h2&gt;
&lt;p&gt;ç¼“å†²å†™&lt;code&gt;write()&lt;/code&gt;ï¼Œå¹¶ä¸å‘èµ·IOè¯·æ±‚ï¼Œä¸èƒ½å¼‚æ­¥å¤„ç†&lt;/p&gt;
&lt;p&gt;ç”±äºfsyncçš„å›å†™æœºåˆ¶å’Œæ–‡ä»¶ç³»ç»Ÿå´©æºƒä¸€è‡´æ€§ï¼ˆæ—¥å¿—ç³»ç»Ÿï¼‰ï¼ŒåŒ…å«éƒ¨åˆ†IOè¯·æ±‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ–‡ä»¶ç³»ç»Ÿå¸¦æ¥çš„ä¸‰æ¬¡IOæ“ä½œ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•°æ®å—å†™&lt;/li&gt;
&lt;li&gt;jbd2å‘èµ·å†™å…¥æ—¥å¿—Block I/O&lt;/li&gt;
&lt;li&gt;æäº¤Block I/O&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™äº›IOçš„åˆ›å»ºï¼Œæ¶‰åŠä¼—å¤šè¿‡ç¨‹ï¼ˆblockåˆ†é…ï¼Œè¯·æ±‚ç¼“å†²é¡µï¼Œåˆ›å»ºå’Œæäº¤bioï¼Œè®¾ç½®DMAåœ°å€ï¼‰ï¼Œå› æ­¤å¯ä»¥è®©CPUå°†è¿™äº›å‰ç½®æ“ä½œåœ¨IOè¯·æ±‚å‘èµ·å‰é¢„æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;for-lightweight-block-layer&#34;&gt;For Lightweight Block Layer&lt;/h2&gt;
&lt;p&gt;ä¼ ç»ŸBlock Layeræ¶‰åŠè¿‡å¤šè¿‡ç¨‹ï¼Œæ¨è¿Ÿäº†IOæŒ‡ä»¤æäº¤ç»™è®¾å¤‡çš„æ—¶é—´&lt;/p&gt;
&lt;p&gt;å› ä¸ºULL SSDçš„é«˜é€ŸéšæœºIOæ€§èƒ½å’Œä½é€Ÿçš„é¡ºåºIOï¼Œè¯·æ±‚é‡æ’çš„æ•ˆæœå¾ˆä½&lt;/p&gt;
&lt;p&gt;ç®€åŒ–block layerï¼Œé’ˆå¯¹å¼‚æ­¥IO stackè¿›è¡Œä¼˜åŒ–&lt;/p&gt;
&lt;h1 id=&#34;design&#34;&gt;Design&lt;/h1&gt;
&lt;h2 id=&#34;è½»é‡åŒ–çš„block-io-layer&#34;&gt;è½»é‡åŒ–çš„Block I/O Layer&lt;/h2&gt;
&lt;p&gt;LBIOï¼Œä¸ºLL NVMe SSDè€Œè®¾è®¡ï¼Œåªæ”¯æŒIO submission/completionå’ŒIOæŒ‡ä»¤tagging&lt;/p&gt;
&lt;p&gt;åªä½¿ç”¨&lt;code&gt;lbio&lt;/code&gt;æ¥è¡¨ç¤ºä¸€ä¸ªblock I/Oè¯·æ±‚ï¼Œå‡å°‘äº†&lt;code&gt;bio-to-request&lt;/code&gt;çš„æ—¶é—´&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªlbioåŒ…æ‹¬&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LBA&lt;/li&gt;
&lt;li&gt;I/O é•¿åº¦&lt;/li&gt;
&lt;li&gt;å¤åˆ¶çš„é¡µé¢&lt;/li&gt;
&lt;li&gt;é¡µé¢çš„DMAåœ°å€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨å…¨å±€çš„lbioäºŒä½æ•°ç»„æ¥è®°å½•&lt;/p&gt;
&lt;p&gt;è¡Œçš„ä¸ªæ•°ä¸ºCPUæ ¸å¿ƒæ•°ï¼Œè¡Œæˆç»„è¢«åˆ†é…åˆ°ä¸€ä¸ªNVMeé˜Ÿåˆ—&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚8æ ¸å¿ƒï¼Œ4NVMeé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—åˆ†é…2ä¸ªæ ¸å¿ƒçš„lbio
å½“æ ¸å¿ƒæ•°ç­‰äºé˜Ÿåˆ—æ•°æ—¶ï¼Œå¯ä»¥å®ç°æ— é”çš„å‘½ä»¤æäº¤&lt;/p&gt;
&lt;p&gt;lbioåœ¨å…¨å±€æ•°ç»„ä¸­çš„ç´¢å¼•ç”¨ä½œNVMeæŒ‡ä»¤çš„tagï¼Œå‡å°‘äº†ä¹‹å‰èµ‹tagçš„è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;lbioæäº¤åï¼Œè°ƒç”¨&lt;code&gt;nvme_queue_lbio&lt;/code&gt;æ¥æäº¤I/OæŒ‡ä»¤&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LBIOä¸ä¼šåˆå¹¶å’Œè°ƒåº¦IOè¯·æ±‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;read-path&#34;&gt;Read Path&lt;/h2&gt;
&lt;p&gt;Ext4æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç”±extent status treeä¿å­˜ç¼“å­˜åˆ°ç‰©ç†æ–‡ä»¶blockçš„æ˜ å°„&lt;/p&gt;
&lt;p&gt;é¢„åŠ è½½æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œå½“æ ‘å¤ªå¤§æ—¶ï¼Œå¯ä»¥åªå¯¹æŸä¸ªæ–‡ä»¶é¢„åŠ è½½&lt;/p&gt;
&lt;h3 id=&#34;å¼‚æ­¥é¡µé¢ç”³è¯·å’Œdmaåˆ†é…&#34;&gt;å¼‚æ­¥é¡µé¢ç”³è¯·å’ŒDMAåˆ†é…&lt;/h3&gt;
&lt;p&gt;æå‰åˆ†é…ç©ºé—²é¡µæ± &lt;/p&gt;
&lt;p&gt;ä¸ºäº†å‡å°‘é¡µé¢DMAçš„åˆ†é…ï¼Œä¸ºæ¯ä¸ªæ ¸ç»´æŠ¤ä¸€ä¸ªDMAæ˜ å°„ç©ºé—²é¡µï¼ˆ4KB DMAæ˜ å°„é¡µçš„é“¾è¡¨ï¼‰&lt;/p&gt;
&lt;p&gt;å½“ç©ºé—²é¡µæ± ä¸å¤Ÿç”¨æ—¶ï¼Œå°†é€€åŒ–ä¸ºåŒæ­¥è¿›è¡Œï¼ˆoriginï¼‰&lt;/p&gt;
&lt;h3 id=&#34;ç¼“å­˜é¡µç´¢å¼•&#34;&gt;ç¼“å­˜é¡µç´¢å¼•&lt;/h3&gt;
&lt;p&gt;è‡ªæ—‹é”é˜²æ­¢å¹¶å‘é—®é¢˜ï¼Œå½±å“æ•ˆç‡&lt;/p&gt;
&lt;p&gt;åœ¨è¯·æ±‚å‘å‡ºï¼Œä½†æ˜¯é¡µé¢è¿˜æ²¡æœ‰æ›´æ–°æ—¶ï¼Œå¯èƒ½é‡å¤è¯·æ±‚æ›´æ–°é¡µé¢&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆæ˜¯ä¸é™åˆ¶requestï¼Œåœ¨request completioné˜¶æ®µè§£å†³é—®é¢˜&lt;/p&gt;
&lt;p&gt;å°½ç®¡å¤šä¸ªblockè¯·æ±‚ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªé¡µé¢è¢«ç´¢å¼•&lt;/p&gt;
&lt;p&gt;å¯¹äºå…¶ä»–é¡µé¢ï¼Œæ ‡è®°ä¸ºabandonedï¼Œä¸­æ–­å‘ç”Ÿä¹‹åï¼Œå¦‚æœæ ‡è®°ä¸ºabandonedï¼Œåˆ™æ¸…é™¤å·²ç»å®Œæˆçš„é¡µé¢&lt;/p&gt;
&lt;h3 id=&#34;dmaè§£é™¤æ˜ å°„&#34;&gt;DMAè§£é™¤æ˜ å°„&lt;/h3&gt;
&lt;p&gt;åŸæœ¬ä½¿ç”¨ä¸­æ–­æ¥å¤„ç†ï¼Œæ”¹ä¸ºå½“ç³»ç»Ÿç©ºé—²æˆ–ç­‰å¾…ä¸€ä¸ªIOè¯·æ±‚æ—¶å¤„ç†&lt;/p&gt;
&lt;p&gt;è¯¥æ–¹å¼å¯èƒ½ä¼šäº§ç”Ÿæ¼æ´çª—å£ï¼Œè‹¥ä¸å—åˆ°æ¶æ„è®¿é—®ï¼Œä¸ä¼šäº§ç”Ÿå½±å“ï¼Œå¦åˆ™ç”¨æˆ·å¯ä»¥è‡ªè¡Œé€‰æ‹©å…³é—­æƒ°æ€§DMAæ˜ å°„æ¥è§¦&lt;/p&gt;
&lt;h2 id=&#34;write--fsync-path&#34;&gt;Write &amp;amp;&amp;amp; fsync Path&lt;/h2&gt;
&lt;p&gt;å½“fsyncæ¶‰åŠæ–‡ä»¶ç³»ç»Ÿä¸­äº‹åŠ¡æ—¶ï¼Œå¯ä»¥å°†jbd2æ—¥å¿—å¤„ç†é‡å å¤„ç†&lt;/p&gt;
&lt;h1 id=&#34;experiment&#34;&gt;Experiment&lt;/h1&gt;
&lt;p&gt;åŸºäºLinuxå†…æ ¸5.0.5ç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦&lt;code&gt;O_AIOS&lt;/code&gt;&lt;/p&gt;
&lt;h1 id=&#34;evaluation&#34;&gt;Evaluation&lt;/h1&gt;
&lt;h1 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;æå‡ºäº†AIOS&lt;/p&gt;
&lt;p&gt;LBIOå±‚&lt;/p&gt;
&lt;p&gt;AIOSå°†I/Oè·¯å¾„ä¸­çš„åŒæ­¥æ“ä½œæ›¿æ¢ä¸ºå¼‚æ­¥æ“ä½œï¼Œä»¥å°†ä¸è¯»å–å’Œfsyncç›¸å…³çš„è®¡ç®—ä¸è®¾å¤‡I/Oè®¿é—®é‡å ã€‚&lt;/p&gt;
&lt;p&gt;AIOSåœ¨Optane SSDä¸Šå®ç°äº†ä¸€ä½æ•°å¾®ç§’çš„I/Oå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒAIOSé€šè¿‡Z-SSDå’ŒOptane SSDä¸Šçš„æ¨¡æ‹Ÿå®éªŒå’Œå®é™…æµ‹è¯•æ˜¾è‘—é™ä½å»¶è¿Ÿå’Œæ€§èƒ½æ”¹è¿›ã€‚&lt;/p&gt;
&lt;h1 id=&#34;ä¸€äº›å¯å‘&#34;&gt;ä¸€äº›å¯å‘&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;ä¼˜åŒ–I/Oå¯ä»¥ä»CPUçš„ç©ºé—²æ—¶é—´åˆ†æï¼Œéœ€è¦è€ƒè™‘å†…æ ¸å’Œæ–‡ä»¶ç³»ç»Ÿçš„å·¥ä½œæµç¨‹ï¼Œæœ€å¤§ç¨‹åº¦çš„åˆ©ç”¨CPUèµ„æºï¼Œå‡å°‘ç©ºé—²ã€‚&lt;/li&gt;
&lt;li&gt;ç¡¬ä»¶è®¾å¤‡åœ¨å‘å±•çš„åŒæ—¶ï¼Œè½¯ä»¶åº”è¯¥æä¾›å¿…è¦é€‚é…&lt;/li&gt;
&lt;li&gt;å‡å°‘å†…æ ¸ä¸­ä¸I/Oç›¸å…³çš„ç»“æ„ç±»å‹è½¬åŒ–ï¼Œå¯ä»¥æœ‰æ•ˆèŠ‚çœæ—¶é—´å¼€é”€&lt;/li&gt;
&lt;li&gt;æƒ°æ€§ä¿®æ”¹ä¼šå­˜åœ¨å®‰å…¨é—®é¢˜ï¼Œåœ¨ä¿è¯å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æé«˜æ•ˆç‡&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>è®¡ç®—æœºç½‘ç»œè‡ªé¡¶å‘ä¸‹</title>
        <link>https://blog.ipandai.club/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/</link>
        <pubDate>Sat, 05 Mar 2022 10:32:46 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B/</guid>
        <description>&lt;h1 id=&#34;dns&#34;&gt;DNS&lt;/h1&gt;
&lt;p&gt;ä½¿ç”¨UDP 53ç«¯å£&lt;/p&gt;
&lt;h2 id=&#34;å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£&#34;&gt;å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£&lt;/h2&gt;
&lt;h2 id=&#34;æ— è¿æ¥è¿è¾“udp&#34;&gt;æ— è¿æ¥è¿è¾“UDP&lt;/h2&gt;
&lt;p&gt;UDPæ— éœ€å»ºç«‹è¿æ¥ï¼Œé€Ÿåº¦å¿«&lt;/p&gt;
&lt;p&gt;æ— è¿æ¥çŠ¶æ€ï¼Œä¸éœ€è¦ç»´æŠ¤åºåˆ—å·ï¼Œå¯ä»¥æ”¯æŒæ›´å¤šç”¨æˆ·æ´»è·ƒï¼ˆæ¸¸æˆæœåŠ¡å™¨ï¼‰&lt;/p&gt;
&lt;p&gt;é¦–éƒ¨åªæœ‰8ä¸ªå­—èŠ‚ï¼Œæºç«¯å£å·å’Œç›®çš„ç«¯å£å·ï¼Œé•¿åº¦å’Œcheck sum&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆéœ€è¦checksumæ ¡éªŒå’Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è·¯ç”±å™¨å†…å­˜ä¸­å¯èƒ½æœ‰bitå·®é”™&lt;/li&gt;
&lt;li&gt;é“¾è·¯ä¼ è¾“ä¸å¯é &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;checksumæœ€ç»ˆä¸º1111111&amp;hellip;åˆ™å¯èƒ½æ— å·®é”™&lt;/p&gt;
&lt;p&gt;ç«¯åˆ°ç«¯åŸåˆ™ï¼šæŸç§åŠŸèƒ½åº”è¯¥åœ¨è¾ƒé«˜çº§åˆ«æä¾›ï¼Œåœ¨è¾ƒä½çº§åˆ«ä¸Šè®¾ç½®è¯¥åŠŸèƒ½å¯èƒ½ä¼šå†—ä½™&lt;/p&gt;
&lt;p&gt;UDPåªèƒ½æ£€æŸ¥é”™è¯¯ï¼Œä¸èƒ½çº é”™&lt;/p&gt;
&lt;p&gt;DNSæœåŠ¡é‡‡ç”¨UDP&lt;/p&gt;
&lt;p&gt;ä½•æ—¶UDPï¼Œä½•æ—¶TCPï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å¸Œæœ›å»¶è¿ŸæŠ¥æ–‡çš„å‘é€ï¼ŒTCPæœ‰æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œå¹¶å®¹å¿æ•°æ®çš„ä¸¢å¤±&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¯é æ•°æ®ä¼ è¾“&#34;&gt;å¯é æ•°æ®ä¼ è¾“&lt;/h2&gt;
&lt;p&gt;å·®é”™æ£€æµ‹&lt;/p&gt;
&lt;p&gt;æ¥æ”¶æ–¹åé¦ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ACKè‚¯å®šç¡®è®¤&lt;/li&gt;
&lt;li&gt;NAKå¦å®šç¡®è®¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ACK 0æ¥æ”¶æˆåŠŸï¼ŒACK 1æ¥æ”¶å¤±è´¥&lt;/p&gt;
&lt;p&gt;é‡ä¼ ï¼Œæ”¶æ–¹å‘ç°å·®é”™ï¼Œå‘é€æ–¹é‡ä¼ &lt;/p&gt;
&lt;p&gt;åºå·ï¼Œæ£€æµ‹å“ªä¸ªæ•°æ®åŒ…å‡ºé”™è¿›è¡Œé‡ä¼ &lt;/p&gt;
&lt;p&gt;æ•°æ®åŒ…å¯é ä¼ è¾“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ²¡æœ‰ackçš„æƒ…å†µä¸‹ï¼Œç­‰å¾…ä¸€å®šçš„æ—¶é—´åè¿›è¡Œé‡ä¼ &lt;/li&gt;
&lt;li&gt;åºå·å¯ä»¥ä¿è¯ä¼ è¾“ä¸å†—ä½™ï¼ˆæ¥æ”¶æ–¹æ£€æµ‹æ˜¯å¦å†—ä½™ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‘é€æ–¹éœ€è¦å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ²¡å‘é€æˆ–è€…é‡ä¼ ä¸€ä¸ªåˆ†ç»„ï¼Œå¯åŠ¨å®šæ—¶å™¨countdown timer&lt;/li&gt;
&lt;li&gt;å®šæ—¶å™¨è¿‡æœŸåå“åº”&lt;/li&gt;
&lt;li&gt;ç»ˆæ­¢å®šæ—¶å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æµæ°´çº¿å¯é ä¼ è¾“åè®®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨æå°çš„æ•°æ®åŒ…ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°æœ€åä¸€bitç«‹å³ack&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;gbnåè®®å›é€€næ­¥æ»‘åŠ¨çª—å£åè®®&#34;&gt;GBNåè®®ï¼ˆå›é€€Næ­¥ï¼‰ï¼Œæ»‘åŠ¨çª—å£åè®®&lt;/h2&gt;
&lt;p&gt;é™åˆ¶æ•°æ®åŒ…çš„åºå·ï¼Œç›´åˆ°ç›¸åº”åºå·ackä¹‹åå†å‘é€åç»­çš„åºå·ï¼Œç”¨é•¿åº¦ä¸ºNçš„çª—å£æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;GBNå‘é€æ–¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘é€æ•°æ®åŒ…æ—¶ï¼Œæ£€æŸ¥å‘é€çª—å£ï¼Œæœªæ»¡åˆ™è¿”å›æœªå‘é€çš„åˆ†ç»„&lt;/li&gt;
&lt;li&gt;æ”¶åˆ°ackåï¼Œå¯¹åˆ†ç»„ä¸­çš„åºå·ç´¯ç§¯ç¡®è®¤ï¼Œè¡¨æ˜æ¥æ”¶æ–¹ï¼Œæ­£ç¡®æ¥æ”¶åˆ°åºå·ä¸ºnçš„åˆ†ç»„ä»¥åŠä»¥å‰çš„æ‰€æœ‰åˆ†ç»„ï¼Œ&lt;code&gt;[0, N]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è¶…æ—¶ï¼Œå‘é€æ–¹é‡ä¼ æ‰€æœ‰æœªè¢«ç¡®è®¤çš„åˆ†ç»„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥æ”¶æ–¹æ”¶åˆ°çš„åˆ†ç»„éƒ½æ˜¯æœ‰åºçš„ï¼Œå¦‚æœå‡ºç°æ— åºï¼Œä¼šä¸¢å¼ƒåé¢çš„æ•°æ®åŒ…ï¼Œç­‰å¾…é‡ä¼ &lt;/p&gt;
&lt;h2 id=&#34;é€‰æ‹©é‡ä¼ &#34;&gt;é€‰æ‹©é‡ä¼ &lt;/h2&gt;
&lt;p&gt;é¿å…ä¸å¿…è¦çš„é‡ä¼ &lt;/p&gt;
&lt;p&gt;å‘é€æ–¹æ¥æ”¶æ–¹éƒ½ç»´æŠ¤ä¸€ä¸ªçª—å£&lt;/p&gt;
&lt;p&gt;å‘é€æ–¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¶åˆ°send baseåçª—å£å³ç§»åˆ°ç¬¬ä¸€ä¸ªæ²¡ç¡®è®¤çš„åˆ†ç»„å¤„&lt;/li&gt;
&lt;li&gt;æ¥æ”¶ackå°†çª—å£å†…åˆ†ç»„æ ‡è®°ä¸ºack&lt;/li&gt;
&lt;li&gt;å®šæ—¶å™¨é˜²æ­¢åˆ†ç»„ä¸¢å¤±&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥æ”¶æ–¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¥æ”¶çš„åˆ†ç»„è½åœ¨çª—å£å†…ï¼Œè¿”å›ack&lt;/li&gt;
&lt;li&gt;å¦‚æœåºå·ä¸è¿ç»­ï¼Œç›´æ¥ç¼“å­˜&lt;/li&gt;
&lt;li&gt;å¦‚æœåˆ†ç»„åºå·ç­‰äº&lt;code&gt;rcv_base&lt;/code&gt;å°†ä»rcv baseå¼€å§‹çš„å·²ç¼“å­˜åˆ†ç»„äº¤ä»˜ç»™ä¸Šå±‚ï¼Œçª—å£ç§»åŠ¨&lt;/li&gt;
&lt;li&gt;åºå·è½åœ¨çª—å£ä¹‹å¤–ï¼Œ&lt;code&gt;[rcv_base-N, rcv_base-1]&lt;/code&gt;ä¸Šä¸€ä¸ªçª—å£ä¸­ï¼Œè¿”å›ack&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çª—å£é•¿åº¦ä¸èƒ½å¤ªå¤§&lt;/p&gt;
&lt;h2 id=&#34;tcp&#34;&gt;TCP&lt;/h2&gt;
&lt;p&gt;è¿è¡Œä¸ç«¯ç³»ç»Ÿä¸­ï¼Œè·¯ç”±å™¨ç­‰è§†è§’ä¸‹çœ‹åˆ°çš„æ˜¯æ•°æ®æŠ¥&lt;/p&gt;
&lt;p&gt;å…¨åŒå·¥&lt;/p&gt;
&lt;p&gt;socketæ˜¯å¯¹tcpåè®®çš„å°è£…&lt;/p&gt;
&lt;h3 id=&#34;æµé‡æ§åˆ¶&#34;&gt;æµé‡æ§åˆ¶&lt;/h3&gt;
&lt;p&gt;æ¯ä¸€æ–¹éƒ½è®¾ç½®æ¥æ”¶ç¼“å­˜ï¼Œæ•°æ®å…ˆæ”¾åœ¨ç¼“å­˜ä¸­ï¼Œåº”ç”¨ç¨‹åºä»ç¼“å­˜ä¸­è¯»å–æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ç›®çš„æ˜¯æ¶ˆé™¤å‘é€æ–¹ä½¿æ¥æ”¶æ–¹ç¼“å­˜æº¢å‡ºçš„å¯èƒ½ã€‚åŒ¹é…å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¯»å†™é€Ÿç‡ã€‚&lt;/p&gt;
&lt;p&gt;æ”¶å‘å„è‡ªç»´æŠ¤æ¥æ”¶çª—å£ã€‚ä¿å­˜æ¥æ”¶æ–¹è¿˜æœ‰å¤šå°‘ç¼“å­˜ç©ºé—´rwndã€‚&lt;/p&gt;
&lt;p&gt;å‘é€æ–¹ç»´æŒä¸ºç¡®è®¤çš„æ•°æ®é‡åœ¨rwndä¹‹å†…ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå‰©ä½™ç©ºé—´ä¸º0ï¼Œå‘é€æ–¹å‘é€åªæœ‰ä¸€ä¸ªå­—èŠ‚çš„æŠ¥æ–‡ã€‚&lt;/p&gt;
&lt;p&gt;UDPæ²¡æœ‰æµé‡æ§åˆ¶ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°ç¼“å†²åŒºæº¢å‡ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸‰æ¬¡æ¡æ‰‹&#34;&gt;ä¸‰æ¬¡æ¡æ‰‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€SYN=1ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªåºåˆ—å·seq=x&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨è¯»å–è¯¥æŠ¥æ–‡ï¼Œä¸ºtcpè¿æ¥åˆ†é…èµ„æºï¼Œå¯¹å®¢æˆ·ç«¯å‘é€SYN=1ï¼Œack=x+1ï¼Œseq=yï¼ˆéšæœºé€‰å–ï¼‰&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ä¸ºè¯¥è¿æ¥åˆ†é…èµ„æºï¼ˆç¼“å­˜å’Œå˜é‡ï¼‰ï¼Œå‘é€SYN=0ï¼Œack=y+1ï¼Œseq=x+1&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¸‰æ¬¡ï¼Ÿ
ç¡®ä¿åŒæ–¹çš„æ”¶å‘èƒ½åŠ›éƒ½æ˜¯æ­£å¸¸çš„æœ€å°æ¬¡æ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¡æ‰‹èƒ½ä¸èƒ½æºå¸¦æ•°æ®ï¼Ÿ
ç¬¬ä¸€äºŒæ¬¡æ¡æ‰‹ä¸èƒ½æºå¸¦æ•°æ®ï¼Œç¬¬ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;å››æ¬¡æŒ¥æ‰‹&#34;&gt;å››æ¬¡æŒ¥æ‰‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€FIN=1&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å“åº”ACK&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å‘é€FIN=1&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘æŒ¥ACK&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æ‹¥å¡æ§åˆ¶&#34;&gt;æ‹¥å¡æ§åˆ¶&lt;/h3&gt;
&lt;p&gt;ä¸¢åŒ…çš„åŸå› ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç½‘ç»œå µå¡åï¼Œè·¯ç”±å™¨ç¼“å­˜æº¢å‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ…¢å¯åŠ¨&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿé‡ä¼ &lt;/li&gt;
&lt;li&gt;æ‹¥å¡é¿å…&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿæ¢å¤&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Goè¯­è¨€å­¦ä¹ ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Tue, 25 Jan 2022 20:14:16 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;p&gt;Goè¯­è¨€æºç é˜…è¯»ä¸åŸç†åˆ†æ&lt;/p&gt;
&lt;h1 id=&#34;goçš„ç¼–è¯‘&#34;&gt;Goçš„ç¼–è¯‘&lt;/h1&gt;
&lt;h1 id=&#34;æ•°æ®ç»“æ„&#34;&gt;æ•°æ®ç»“æ„&lt;/h1&gt;
&lt;h2 id=&#34;æ•°ç»„&#34;&gt;æ•°ç»„&lt;/h2&gt;
&lt;p&gt;å£°æ˜&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;è¯­æ³•ç³–&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¬¬äºŒç§ç¼–è¯‘å™¨ä¼šè¿›è¡Œè½¬æ¢æˆç¬¬ä¸€ç§&lt;/p&gt;
&lt;p&gt;ä¸Šé™æ¨å¯¼&lt;/p&gt;
&lt;p&gt;è¯­å¥è½¬æ¢&lt;/p&gt;
&lt;p&gt;ç”±å­—é¢é‡ï¼ˆå…·ä½“æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œå­—ç¬¦ä¸²ï¼‰ç»„æˆçš„æ•°ç»„ï¼Œæ ¹æ®é•¿åº¦è¿›è¡Œä¼˜åŒ–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…ƒç´ æ•°é‡&lt;code&gt;&amp;lt;=&lt;/code&gt;4ï¼Œå…ƒç´ æ”¾åœ¨æ ˆä¸Š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;gt;&lt;/code&gt;4æ—¶ï¼Œå…ƒç´ ä¿å­˜åœ¨é™æ€åŒºï¼Œè¿è¡Œæ—¶å–å‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…ƒç´ æ•°é‡&lt;code&gt;&amp;lt;=&lt;/code&gt;4æ—¶ï¼Œç®€åŒ–ä¸ºèµ‹å€¼è¡¨è¾¾å¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;arr&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;arr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;arr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;arr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;review&#34;&gt;review&lt;/h3&gt;
&lt;p&gt;ç¼–è¯‘ä¹‹åçš„äºŒè¿›åˆ¶æ–‡ä»¶åŒ…å«ï¼šæ ˆï¼Œå †ï¼Œæ•°æ®æ®µï¼Œä»£ç æ®µ&lt;/p&gt;
&lt;p&gt;å †æ ˆä¸ºåŠ¨æ€åŒºåŸŸï¼Œæ•°æ®æ®µå’Œä»£ç æ®µä¸ºé™æ€åŒºåŸŸ&lt;/p&gt;
&lt;p&gt;æ ˆï¼šç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡ç­‰&lt;/p&gt;
&lt;p&gt;å †ï¼šç¨‹åºåŠ¨æ€ç”³è¯·çš„å†…å­˜ï¼Œmallocï¼Œç”¨é“¾è¡¨å®ç°&lt;/p&gt;
&lt;p&gt;ä»£ç åŒºï¼šå‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç &lt;/p&gt;
&lt;p&gt;æ•°æ®æ®µï¼šåŒ…å«&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åªè¯»æ•°æ®æ®µ const&lt;/li&gt;
&lt;li&gt;å·²åˆå§‹åŒ–çš„è¯»å†™æ•°æ®æ®µ åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼Œåˆå§‹åŒ–çš„é™æ€å±€éƒ¨å˜é‡static&lt;/li&gt;
&lt;li&gt;æœªåˆå§‹åŒ–æ®µ æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å½“æ•°ç»„å…ƒç´ ä¸ªæ•°å¤§äºå››ä¸ªæ—¶&lt;/p&gt;
&lt;p&gt;è·å–ä¸€ä¸ªå”¯ä¸€çš„staticnameï¼Œåœ¨é™æ€å­˜å‚¨åŒºè¿›è¡Œåˆå§‹åŒ–ï¼Œä¹‹åå†æ‹·è´åˆ°æ ˆä¸Š&lt;/p&gt;
&lt;p&gt;è®¿é—®å’Œèµ‹å€¼&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘å™¨çš„é™æ€ç±»å‹æ£€æŸ¥æ—¶æ£€æµ‹æ•°ç»„è¶Šç•Œï¼Œç´¢å¼•æ˜¯å¦ä¸ºéè´Ÿæ•´æ•°ï¼Œç´¢å¼•è¶Šç•Œ&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å˜é‡ä½œä¸ºç´¢å¼•æ—¶ï¼Œæ— æ³•ç¼–è¯‘æ£€æŸ¥ï¼Œéœ€è¦&lt;strong&gt;è¿è¡Œæ—¶&lt;/strong&gt;é˜»æ­¢ï¼Œå‡ºå‘panic&lt;/p&gt;
&lt;p&gt;å‘ç°æ•°ç»„åˆ‡ç‰‡å­—ç¬¦ä¸²è¶Šç•Œæ—¶é€šè¿‡è¿è¡Œæ—¶çš„&lt;code&gt;runtime.panicIndex&lt;/code&gt;å’Œ&lt;code&gt;runtime.goPanicIndex&lt;/code&gt;è§¦å‘panic&lt;/p&gt;
&lt;p&gt;ä¸‹æ ‡æ²¡æœ‰è¶Šç•Œæ—¶ï¼Œç¼–è¯‘å™¨è·å–æ•°ç»„çš„å†…å­˜åœ°å€å’Œè®¿é—®ä¸‹æ ‡ï¼Œè®¡ç®—å‡ºç›®æ ‡åœ°å€ï¼Œä½¿ç”¨Loadå°†å…ƒç´ åŠ è½½åˆ°å†…å­˜ä¸­&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘æ—¶æ’å…¥è¿è¡Œæ—¶è¶Šç•Œæ£€æŸ¥å‡½æ•°&lt;/p&gt;
&lt;p&gt;èµ‹å€¼æ—¶å…ˆç¡®å®šç›®æ ‡å…ƒç´ åœ°å€ï¼Œä½¿ç”¨StoreæŒ‡ä»¤å°†æ•°æ®å­˜å…¥åœ°å€ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µè€Œä¸æ˜¯è¿è¡Œæ—¶&lt;/p&gt;
&lt;h1 id=&#34;åˆ‡ç‰‡&#34;&gt;åˆ‡ç‰‡&lt;/h1&gt;
&lt;p&gt;ç¼–è¯‘æ—¶ç¡®å®šç±»å‹ï¼Œå­˜å‚¨åœ¨Extraå­—æ®µ&lt;/p&gt;
&lt;p&gt;æ•°æ®ç»“æ„&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Len&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Cap&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆ‡ç‰‡åªåœ¨è¿è¡Œæ—¶ç¡®å®šå†…å®¹&lt;/p&gt;
&lt;h2 id=&#34;åˆå§‹åŒ–&#34;&gt;åˆå§‹åŒ–&lt;/h2&gt;
&lt;h3 id=&#34;åˆ‡ç‰‡slicelr&#34;&gt;åˆ‡ç‰‡&lt;code&gt;slice[l:r]&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;è°ƒç”¨SliceMakeå‡½æ•°ï¼Œå‚æ•°ä¸º å…ƒç´ ç±»å‹ï¼Œæ•°ç»„æŒ‡é’ˆï¼Œåˆ‡ç‰‡å¤§å°å’Œå®¹é‡&lt;/p&gt;
&lt;p&gt;è¿™æ ·åˆå§‹åŒ–çš„åˆ‡ç‰‡åˆ›å»ºäº†æŒ‡å‘åŸåˆ‡ç‰‡çš„ç»“æ„ä½“&lt;/p&gt;
&lt;h3 id=&#34;å­—é¢é‡&#34;&gt;å­—é¢é‡&lt;/h3&gt;
&lt;p&gt;ç¼–è¯‘æ—¶ï¼š&lt;/p&gt;
&lt;p&gt;å¯¹å­—é¢é‡æ•°ç»„åšå¤§å°æ¨æ–­ï¼Œåˆå§‹åŒ–ä¸ºæ•°ç»„&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼ŒæŒ‡å‘é™æ€æ•°ç»„&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;[:]&lt;/code&gt;é€šè¿‡æŒ‡é’ˆåˆ›å»ºåˆ‡ç‰‡&lt;/p&gt;
&lt;h3 id=&#34;make&#34;&gt;make&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;make([]int, len, cap)&lt;/code&gt;
ä¼šåšå‚æ•°æ ¡éªŒï¼Œ&lt;code&gt;cap &amp;gt;= len&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­åˆ‡ç‰‡å¤§å°å’Œå®¹é‡æ˜¯å¦è¶³å¤Ÿ&lt;/li&gt;
&lt;li&gt;åˆ‡ç‰‡æ˜¯å¦å‘ç”Ÿäº†é€ƒé€¸ï¼Œæœ€ç»ˆåœ¨å †ä¸Šåˆå§‹åŒ–&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ‡ç‰‡å¤ªå¤§æ—¶ä¹Ÿä¼šåœ¨å †ä¸Šåˆå§‹åŒ–ï¼Œä½¿ç”¨è¿è¡Œæ—¶makeslice&lt;/p&gt;
&lt;p&gt;makesliceä¼šåœ¨å †ä¸Šç”³è¯·è¿ç»­çš„å†…å­˜&lt;/p&gt;
&lt;p&gt;å¯èƒ½çš„è¿è¡Œæ—¶é”™è¯¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†…å­˜ç©ºé—´å¤§å°å‘ç”Ÿäº†æº¢å‡º&lt;/li&gt;
&lt;li&gt;ç”³è¯·å†…å­˜å¤§äºæœ€å¤§å¯åˆ†é…å†…å­˜&lt;/li&gt;
&lt;li&gt;ä¼ å…¥çš„&lt;code&gt;len&amp;lt;0 or len &amp;gt; cap&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è®¿é—®&#34;&gt;è®¿é—®&lt;/h3&gt;
&lt;p&gt;å¯¹lenå’Œcapçš„è®¿é—®ä¼šåœ¨ç¼–è¯‘æ—¶æ›¿æ¢ä¸ºå¸¸é‡&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨indexè·å–å…ƒç´ ä¼šç›´æ¥è½¬æ¢ä¸ºå¯¹åœ°å€çš„è®¿é—®&lt;/p&gt;
&lt;h3 id=&#34;appendå’Œæ‰©å®¹&#34;&gt;appendå’Œæ‰©å®¹&lt;/h3&gt;
&lt;p&gt;å¦‚æœappendä¹‹å&lt;strong&gt;ä¸éœ€è¦&lt;/strong&gt;èµ‹å€¼ç»™åŸæœ‰å˜é‡ï¼š&lt;/p&gt;
&lt;p&gt;åˆ¤æ–­appendä¹‹åçš„å¤§å°å’Œå®¹é‡è§¦å‘æ‰©å®¹&lt;/p&gt;
&lt;p&gt;å¦‚æœappendä¹‹å&lt;strong&gt;éœ€è¦&lt;/strong&gt;èµ‹å€¼ç»™åŸæœ‰å˜é‡ï¼š&lt;/p&gt;
&lt;p&gt;appendåçš„åˆ‡ç‰‡è¦†ç›–åŸåˆ‡ç‰‡ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ä¸ºä¸å‘ç”Ÿæ‹·è´ï¼Œç›´æ¥æ“ä½œåŸåˆ‡ç‰‡&lt;/p&gt;
&lt;h4 id=&#34;growslice&#34;&gt;growslice&lt;/h4&gt;
&lt;p&gt;å…ˆç¡®å®šæ–°åˆ‡ç‰‡å®¹é‡ï¼Œæ‰©å®¹ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœæœŸæœ›å®¹é‡å¤§äºå½“å‰çš„ä¸¤å€ï¼Œå°±ä¼šä½¿ç”¨æœŸæœ›å®¹é‡&lt;/li&gt;
&lt;li&gt;å½“å‰åˆ‡ç‰‡é•¿åº¦å°äº1024ä¼šå°†å®¹é‡ç¿»å€&lt;/li&gt;
&lt;li&gt;å¦‚æœå½“å‰çš„åˆ‡ç‰‡é•¿åº¦å¤§äº1024æ¯æ¬¡å¢åŠ 25%çš„å®¹é‡ï¼Œç›´åˆ°æ–°å®¹é‡å¤§äºæœŸæœ›å®¹é‡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰©å®¹ä¹‹åè¿›è¡Œå†…å­˜å¯¹é½ï¼Œæé«˜å†…å­˜åˆ†é…æ•ˆç‡ï¼Œå‡å°‘ç¢ç‰‡&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨é¢„åˆ¶çš„å†…å­˜å¤§å°æ•°ç»„å‘ä¸Šå–æ•´ï¼Œç„¶åé€šè¿‡è¯¥å†…å­˜å¤§å°é‡æ–°è®¡ç®—cap&lt;/p&gt;
&lt;p&gt;å¯¹äºéæŒ‡é’ˆåˆ‡ç‰‡ï¼Œå°†åŸæ•°ç»„å†…å®¹æ‹·è´è‡³æ–°å†…å­˜&lt;/p&gt;
&lt;p&gt;growsliceè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ï¼Œéƒ½æ˜¯æ–°çš„ slice(p, len, newcap)&lt;/p&gt;
&lt;h2 id=&#34;copy&#34;&gt;copy&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;copy(a,b)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘æ—¶ä¼šç›´æ¥ä½¿ç”¨memmoveæ‹·è´åˆ°å†…å­˜&lt;/p&gt;
&lt;p&gt;è¿è¡Œæ—¶ä¼šç›´æ¥è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥&lt;/p&gt;
&lt;p&gt;å¤§åˆ‡ç‰‡æ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§&lt;/p&gt;
&lt;h1 id=&#34;å“ˆå¸Œ&#34;&gt;å“ˆå¸Œ&lt;/h1&gt;
&lt;h2 id=&#34;è§£å†³å†²çª&#34;&gt;è§£å†³å†²çª&lt;/h2&gt;
&lt;h3 id=&#34;å¼€æ”¾å¯»å€&#34;&gt;å¼€æ”¾å¯»å€&lt;/h3&gt;
&lt;p&gt;ä»indexå¤„å‘åå¯»æ‰¾ç©ºé—²ä½ç½®ï¼Œè¯»å–ä¼šä»indexå¤„å‘ååŒ¹é…ç›¸ç­‰å…ƒç´ &lt;/p&gt;
&lt;p&gt;&lt;code&gt;è£…è½½å› å­=å…ƒç´ æ•°é‡/æ•°ç»„å¤§å°&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è£…è½½å› å­å¢å¤§ï¼Œçº¿æ€§æ¢æµ‹æ³•çš„å¹³å‡ç”¨æ—¶å¢åŠ ï¼Œæœ€ååˆ°On&lt;/p&gt;
&lt;h3 id=&#34;æ‹‰é“¾æ³•&#34;&gt;æ‹‰é“¾æ³•&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨é“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªæ¡¶ï¼Œé€šè¿‡indexè®¿é—®&lt;/p&gt;
&lt;p&gt;&lt;code&gt;è£…è½½å› å­=å…ƒç´ æ•°é‡/æ¡¶æ•°é‡&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ä¸è¶…è¿‡1ï¼Œè£…è½½å› å­å¤ªå¤§ä¼šè§¦å‘æ‰©å®¹&lt;/p&gt;
&lt;h2 id=&#34;struct&#34;&gt;struct&lt;/h2&gt;
&lt;p&gt;runtime hmap&lt;/p&gt;
&lt;p&gt;ä¿å­˜å¯¹æ•°ï¼Œæ¡¶çš„æ•°é‡éƒ½æ˜¯2çš„å€æ•°&lt;/p&gt;
&lt;p&gt;åŒ…å«runtime bmapï¼Œèƒ½å­˜å‚¨8ä¸ªé”®å€¼å¯¹ï¼Œè¶…è¿‡8ä¸ªæ—¶ä¼šä½¿ç”¨extra.nextOverflowä¸­çš„æº¢å‡ºæ¡¶å­˜&lt;/p&gt;
&lt;p&gt;bmapä¸­å­˜å‚¨keyå“ˆå¸Œçš„é«˜å…«ä½tophash uint8&lt;/p&gt;
&lt;h2 id=&#34;åˆå§‹åŒ–-1&#34;&gt;åˆå§‹åŒ–&lt;/h2&gt;
&lt;h3 id=&#34;å­—é¢é‡-1&#34;&gt;å­—é¢é‡&lt;/h3&gt;
&lt;p&gt;å½“å“ˆå¸Œè¡¨çš„å…ƒç´ &lt;code&gt;&amp;lt;=25&lt;/code&gt;ä¸ªæ—¶ï¼Œå°†åˆå§‹åŒ–è½¬åŒ–ä¸º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¶…è¿‡æ—¶ä¼šè½¬æ¢ä¸ºä¸¤ä¸ªåˆ‡ç‰‡å¾ªç¯åŠ å…¥hash&lt;/p&gt;
&lt;h3 id=&#34;è¿è¡Œæ—¶&#34;&gt;è¿è¡Œæ—¶&lt;/h3&gt;
&lt;p&gt;å½“æ¡¶çš„æ•°é‡å°äº$2^4$ï¼Œä¸åˆ›å»ºæº¢å‡ºæ¡¶&lt;/p&gt;
&lt;p&gt;å¦åˆ™åˆ›å»º$2^{B-4}$ä¸ªæº¢å‡ºæ¡¶&lt;/p&gt;
&lt;h2 id=&#34;è¯»å†™&#34;&gt;è¯»å†™&lt;/h2&gt;
&lt;p&gt;éå†ä½¿ç”¨for range&lt;/p&gt;
&lt;p&gt;åˆ é™¤&lt;code&gt;delete(hash, key)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;bmapçš„å®é™…å­˜å‚¨æ˜¯tophashä¸ºä¸€ä¸ªè¿ç»­çš„ç©ºé—´ï¼Œkeysï¼Œvalues ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;è®¿é—®æ—¶é™è·å–å“ˆå¸Œå€¼ï¼Œå†è·å–å“ˆå¸Œçš„é«˜8ä½&lt;/p&gt;
&lt;p&gt;é€šè¿‡å“ˆå¸Œçš„æœ€ä½å‡ ä½è·å–æ¡¶åºå·&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œå› ä¸ºå“ˆå¸Œè®¡ç®—å‡ºæ¥å¹¶ä¸åœ¨æ¡¶èŒƒå›´å†…ï¼Œåœ¨äºŒè¿›åˆ¶ä¸­ä½“ç°å‡ºæ¥æ˜¯å–é«˜å‡ ä½å’Œä½å‡ ä½ï¼Œä½å‡ ä½å°±æ˜¯å–æ¨¡ä¹‹åçš„å€¼ï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆé¿å…æ¡¶ä¸­æœ‰å¤§é‡é‡å¤tophash&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨bmapä¸­å…ˆæ¯”è¾ƒå“ˆå¸Œé«˜8ä½ï¼ŒåŠ é€Ÿè®¿é—®&lt;/p&gt;
&lt;p&gt;åŒ¹é…æˆåŠŸä¼šæ ¹æ®æŒ‡é’ˆå’Œåç§»é‡è·å–keyè¿›è¡Œæ¯”è¾ƒï¼ŒåŒ¹é…æˆåŠŸå†è·å–value&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°½é‡ä½¿ç”¨åŒå€¼æ¥æ”¶ç»“æœï¼Œé˜²æ­¢å®é™…çš„valueæ˜¯nil&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å†™å…¥æ—¶ä¼šéå†æ­£å¸¸æ¡¶å’Œæº¢å‡ºæ¡¶ï¼Œæº¢å‡ºæ¡¶ä¹ŸåŒ…å«tophash&lt;/p&gt;
&lt;p&gt;å¦‚æœæ¡¶æ»¡ï¼Œåˆ›å»ºæ–°çš„æ¡¶æŠ¤ç€åœ¨æº¢å‡ºæ¡¶ä¸­ä¿å­˜&lt;/p&gt;
&lt;p&gt;è·å–å­˜å‚¨åœ°å€åï¼Œå°†å€¼æ‹·è´åˆ°å†…å­˜&lt;/p&gt;
&lt;h3 id=&#34;æ‰©å®¹&#34;&gt;æ‰©å®¹&lt;/h3&gt;
&lt;p&gt;åœ¨å†™å…¥æ—¶ï¼Œè§¦å‘æ‰©å®¹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è£…è½½å› å­è¶…è¿‡6.5&lt;/li&gt;
&lt;li&gt;å“ˆå¸Œä½¿ç”¨äº†å¤ªå¤šæº¢å‡ºæ¡¶ï¼Œå®¹æ˜“äº§ç”Ÿå†…å­˜æ³„éœ²&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰©å®¹éåŸå­è¿‡ç¨‹ï¼Œæ‰©å®¹å‰åˆ¤æ–­æ˜¯å¦æ­£åœ¨æ‰©å®¹&lt;/p&gt;
&lt;p&gt;æº¢å‡ºæ¡¶å¤ªå¤šè§¦å‘ç­‰é‡æ‰©å®¹ï¼Œæ–°æ¡¶ä¿å­˜æ•°æ®ï¼Œå›æ”¶æ—§æ¡¶ï¼ˆå¤§é‡çš„å†™å…¥åˆ é™¤æ“ä½œï¼‰&lt;/p&gt;
&lt;p&gt;ç¿»å€æ‰©å®¹ï¼Œéšç€å†™æ“ä½œå¢é‡è¿›è¡Œï¼Œä¸ä¼šäº§ç”Ÿæ€§èƒ½çš„å·¨å¤§æŠ–åŠ¨ï¼Œåˆ›å»ºä¸€ç»„æ–°æ¡¶å’Œæº¢å‡ºæ¡¶ï¼Œå°†åŸæ¥çš„æ¡¶ç»„è®¾ç½®åˆ°oldbucketsï¼Œæº¢å‡ºæ¡¶ä¹Ÿè®¾ç½®åˆ°oldoverflowä¸Š&lt;/p&gt;
&lt;p&gt;æ•°æ®è¿ç§»å‘ç”Ÿåœ¨è¿è¡Œæ—¶ evacuateï¼Œå¯¹ä¼ å…¥æ¡¶çš„å…ƒç´ å†åˆ†é…ï¼Œæ¯ä¸ªæ—§æ¡¶å…ƒç´ åˆ†æµåˆ°ä¸¤ä¸ªæ–°æ¡¶&lt;/p&gt;
&lt;p&gt;åˆ†æµé€»è¾‘ï¼šåŸæ¥é€šè¿‡å–æ¨¡å¾—åˆ°çš„æ¡¶æ©ç ä¸º&lt;code&gt;0b11&lt;/code&gt;ï¼Œæ‰©å®¹ç¿»å€ä¹‹åå°†å˜ä¸º&lt;code&gt;0b111&lt;/code&gt;ï¼Œå› æ­¤è¯¥æ•°æ®è¢«åˆ†æµåˆ°3å·å’Œ7å·æ¡¶&lt;/p&gt;
&lt;p&gt;å½“æ—§æ¡¶å®Œå…¨è¢«åˆ†æµåæ¸…é™¤oldbucketså’Œoldoverflowï¼Œé€šè¿‡è®¡æ•°å™¨æ§åˆ¶&lt;/p&gt;
&lt;p&gt;æ‰©å®¹æœŸé—´è®¿é—®æ—¶ï¼Œè‹¥oldbucketså­˜åœ¨ï¼Œå¹¶ä¸”æ—§æ¡¶æ²¡æœ‰è¢«åˆ†æµæ—¶ä¼šå…ˆå»æ—§æ¡¶å¯»æ‰¾&lt;/p&gt;
&lt;p&gt;æ‰©å®¹æœŸé—´å†™å…¥èµ‹å€¼æ—¶ï¼Œä¼šè§¦å‘å¢é‡æ‹·è´ï¼Œå‘æ–°æ¡¶åˆ†æµ&lt;/p&gt;
&lt;h2 id=&#34;åˆ é™¤&#34;&gt;åˆ é™¤&lt;/h2&gt;
&lt;p&gt;æ‰©å®¹æœŸé—´åˆ é™¤ï¼Œä¼šåˆ†æµæ¡¶ä¸­çš„å…ƒç´ ï¼Œç„¶åæ‰¾åˆ°æ¡¶ä¸­çš„ç›®æ ‡é”®å€¼å¯¹åˆ é™¤&lt;/p&gt;
&lt;p&gt;ä¸å†™å…¥ç±»ä¼¼&lt;/p&gt;
&lt;p&gt;è®¿é—®ï¼Œå†™å…¥åˆ é™¤éƒ½æ˜¯è¿è¡Œæ—¶å¤„ç†&lt;/p&gt;
&lt;h1 id=&#34;å­—ç¬¦ä¸²&#34;&gt;å­—ç¬¦ä¸²&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;åªè¯»&lt;/strong&gt;çš„å­—èŠ‚æ•°ç»„ï¼Œä½¿ç”¨è¿ç»­ç©ºé—´&lt;/p&gt;
&lt;p&gt;dataå’Œlen&lt;/p&gt;
&lt;p&gt;åˆ†é…åœ¨åªè¯»çš„å†…å­˜ç©ºé—´ï¼Œä¿®æ”¹éœ€è¦å’Œ&lt;code&gt;[]byte&lt;/code&gt;ç›¸äº’è½¬æ¢&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‹·è´å†…å­˜åˆ°æ ˆæˆ–è€…å †&lt;/li&gt;
&lt;li&gt;å°†å˜é‡ä¿®æ”¹ä¸º&lt;code&gt;[]byte&lt;/code&gt;ç„¶åä¿®æ”¹å­—èŠ‚æ•°æ®&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹å­—èŠ‚æ•°ç»„è½¬å›&lt;code&gt;string&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;hello\&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;`
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;name&amp;#34; : &amp;#34;panda&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;tags&amp;#34; : [&amp;#34;panda&amp;#34;]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;èµ‹å€¼æ—¶ä½¿ç”¨scannerè§£æå­—ç¬¦ä¸²æˆtokenæµ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;strconv.Unquote&lt;/code&gt;å»é™¤å¼•å·&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨+æ‹¼æ¥ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²çš„æ•°é‡å°äºç­‰äºäº”ä¸ªæ—¶ï¼Œä½¿ç”¨concatstring{2,3,4,5}ï¼Œå¦åˆ™ä½¿ç”¨runtime.concatstringsï¼Œä¼ å…¥æ•°ç»„åˆ‡ç‰‡ï¼Œæœ€ç»ˆé€šè¿‡è¿è¡Œæ—¶è¿‡æ»¤ç©ºå­—ç¬¦ä¸²è®¡ç®—æ‹¼æ¥åé•¿åº¦ï¼Œå¦‚æœéç©ºå­—ç¬¦ä¸²æ•°é‡ä¸º1ï¼Œå¹¶ä¸”ä¸åœ¨æ ˆä¸Šï¼Œåˆ™ç›´æ¥è¿”å›&lt;/p&gt;
&lt;p&gt;æ‹·è´åˆ°ç›®æ ‡åœ°å€ç©ºé—´&lt;/p&gt;
&lt;p&gt;ç±»å‹è½¬æ¢æœ‰æ€§èƒ½æŸå¤±ï¼Œéœ€è¦æ‹·è´æ•°æ®&lt;/p&gt;
&lt;h1 id=&#34;å‡½æ•°è°ƒç”¨&#34;&gt;å‡½æ•°è°ƒç”¨&lt;/h1&gt;
&lt;p&gt;cè¯­è¨€ä½¿ç”¨å¯„å­˜å™¨ä¼ å‚æ•°ï¼Œå°äºç­‰äºå…­ä¸ªæ—¶ä½¿ç”¨å¯„å­˜å™¨ï¼Œå¤§äº6ä¸ªçš„å‚æ•°ä½¿ç”¨æ ˆä¼ é€’ï¼Œä½¿ç”¨å¯„å­˜å™¨ä¼ é€’è¿”å›å€¼ï¼Œå¹¶ä¸”åªä½¿ç”¨ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå› æ­¤åªèƒ½æœ‰ä¸€ä¸ªè¿”å›å€¼ã€‚&lt;/p&gt;
&lt;p&gt;goè¯­è¨€ä½¿ç”¨æ ˆä¼ é€’å‚æ•°å’Œè¿”å›å€¼ï¼Œå› æ­¤å­˜åœ¨æ€§èƒ½æŸå¤±ï¼Œä½†æ˜¯å¯ä»¥æ”¯æŒå¤šè¿”å›å€¼ï¼Œä¾¿äºç»´æŠ¤ç¼–è¯‘å™¨ï¼Œä¸éœ€è¦è€ƒè™‘å¯„å­˜å™¨æ•°é‡å’Œå‘½åã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚æ•°ä¼ é€’æ–¹å¼&#34;&gt;å‚æ•°ä¼ é€’æ–¹å¼&lt;/h2&gt;
&lt;p&gt;ä¼ å€¼ï¼ŒåŸºæœ¬ç±»å‹ï¼Œç»“æ„ä½“ï¼ŒæŒ‡é’ˆï¼Œå¯¹å‚æ•°è¿›è¡Œæ‹·è´&lt;/p&gt;</description>
        </item>
        <item>
        <title>Mysqlå­¦ä¹ ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Mon, 17 Jan 2022 23:16:08 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h1 id=&#34;åŸºç¡€çŸ¥è¯†&#34;&gt;åŸºç¡€çŸ¥è¯†&lt;/h1&gt;
&lt;p&gt;å•è¿›ç¨‹å¤šçº¿ç¨‹ï¼Œçº¿ç¨‹ä¹‹é—´å…±äº«å†…å­˜&lt;/p&gt;
&lt;p&gt;OLTP Online Transaction Processing åœ¨çº¿äº‹åŠ¡å¤„ç†&lt;/p&gt;
&lt;h1 id=&#34;innodb&#34;&gt;InnoDB&lt;/h1&gt;
&lt;h2 id=&#34;overview&#34;&gt;overview&lt;/h2&gt;
&lt;p&gt;ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¡Œçº§é”&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤–é”®&lt;/li&gt;
&lt;li&gt;æ”¯æŒäº‹åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MVCCå¹¶å‘æ§åˆ¶ï¼Œæ’å…¥ç¼“å†²ï¼ŒäºŒæ¬¡å†™ï¼Œè‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Œé¢„è¯»&lt;/p&gt;
&lt;p&gt;å››ç§éš”ç¦»çº§åˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;REPEATABLE é»˜è®¤&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;èšé›†æ–¹å¼ä¿å­˜æ•°æ®ï¼ŒæŒ‰ä¸»é”®é¡ºåºå­˜æ”¾ï¼Œæ²¡æœ‰ä¸»é”®åˆ™ç”Ÿæˆ6å­—èŠ‚çš„ROWID&lt;/p&gt;
&lt;h2 id=&#34;åå°çº¿ç¨‹&#34;&gt;åå°çº¿ç¨‹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Master Thread ç¼“å†²åŒºæ•°æ®å¼‚æ­¥æ›´æ–°åˆ°ç£ç›˜&lt;/li&gt;
&lt;li&gt;IO Thread innodbä½¿ç”¨å¼‚æ­¥IOï¼Œæé«˜æ•°æ®åº“æ€§èƒ½ï¼Œè´Ÿè´£æ¥å—å›è°ƒ&lt;/li&gt;
&lt;li&gt;Purge Thread äº‹åŠ¡æäº¤åå›æ”¶undologé¡µ&lt;/li&gt;
&lt;li&gt;Page Cleaner Thread è„é¡µåˆ·æ–°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸»è¦éƒ½æ˜¯ä¸ºäº†å‡è½»Masterçš„è´Ÿæ‹…ï¼Œæé«˜æ€§èƒ½ï¼Œå‡å°‘å¯¹ç”¨æˆ·æŸ¥è¯¢çº¿ç¨‹çš„é˜»å¡&lt;/p&gt;
&lt;h2 id=&#34;å†…å­˜&#34;&gt;å†…å­˜&lt;/h2&gt;
&lt;p&gt;ç”¨é¡µç®¡ç†è®°å½•&lt;/p&gt;
&lt;p&gt;ç¼“å†²æ± ï¼šé€šè¿‡å†…å­˜æ¥å¼¥è¡¥ä½é€Ÿç¡¬ç›˜çš„å½±å“ï¼Œæ•°æ®åº“è¯»å–é¡µï¼Œä»ç£ç›˜è·å–é¡µæ”¾å…¥ç¼“å†²æ± &lt;code&gt;fix&lt;/code&gt;ï¼Œè¯»å–æ—¶å…ˆåˆ¤æ–­ç¼“å†²åŒºï¼Œå‘½ä¸­åç›´æ¥è¯»å–ï¼›ä¿®æ”¹æ—¶å…ˆä¿®æ”¹ç¼“å†²æ± çš„é¡µï¼Œç„¶åé€šè¿‡checkpointæœºåˆ¶åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚åŸºæœ¬ä¸Šå’Œè™šæ‹Ÿå†…å­˜ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;é…ç½®å‚æ•°&lt;code&gt;innodb_buffer_pool_size&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ•°æ®é¡µåˆ†ç±»ï¼šç´¢å¼•é¡µï¼Œæ•°æ®é¡µï¼Œundoé¡µï¼Œæ’å…¥ç¼“å†²ï¼Œè‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Œinnodbé”ä¿¡æ¯ï¼Œæ•°æ®å­—å…¸ä¿¡æ¯ç­‰&lt;/p&gt;
&lt;p&gt;å…è®¸æœ‰å¤šä¸ªç¼“å†²æ± &lt;/p&gt;
&lt;h3 id=&#34;å†…å­˜ç®¡ç†&#34;&gt;å†…å­˜ç®¡ç†&lt;/h3&gt;
&lt;h4 id=&#34;lru-list&#34;&gt;LRU List&lt;/h4&gt;
&lt;p&gt;é¢‘ç¹ä½¿ç”¨çš„åœ¨åˆ—è¡¨å‰ï¼Œä¸é¢‘ç¹çš„åœ¨åˆ—è¡¨åï¼Œå…ˆé‡Šæ”¾å°¾éƒ¨çš„é¡µ&lt;/p&gt;
&lt;p&gt;é¡µé»˜è®¤å¤§å°16KB&lt;/p&gt;
&lt;p&gt;innodbä¼šæŠŠæ–°è¯»å–çš„é¡µæ”¾å…¥midpointä½ç½®ï¼Œä¸ºåˆ—è¡¨é•¿åº¦çš„$$\frac{5}{8}$$ï¼Œmidpointä¹‹åä¸ºoldï¼Œä¹‹å‰ä¸ºnewï¼Œå¦‚æœæ”¾åœ¨é¦–éƒ¨ä¼šå¯¼è‡´æŸäº›sqlå¯¼è‡´ç¼“å†²æ± é¡µè¢«åˆ·æ–°ï¼Œå¦‚å…¨è¡¨æ‰«æéå†å…¨è¡¨ã€‚é˜²æ­¢ä¸€æ¡æŒ‡ä»¤æ‹–æ…¢å…¶ä»–æŒ‡ä»¤æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;Freeåˆ—è¡¨ä¿å­˜ç©ºé—²é¡µ&lt;/p&gt;
&lt;h1 id=&#34;myisam&#34;&gt;MyISAM&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;è¡¨é”&lt;/li&gt;
&lt;li&gt;å…¨æ–‡ç´¢å¼•&lt;/li&gt;
&lt;li&gt;ä¸æ”¯æŒäº‹åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼“å†²åŒºåªç¼“å­˜ç´¢å¼•æ–‡ä»¶ï¼Œä¸ç¼“å†²æ•°æ®&lt;/p&gt;
&lt;p&gt;MYDä¿å­˜æ•°æ®ï¼ŒMYIä¿å­˜ç´¢å¼•æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;myisampackä½¿ç”¨Huffmanç¼–ç å‹ç¼©MYDï¼Œå‹ç¼©ååªè¯»&lt;/p&gt;
</description>
        </item>
        <item>
        <title>å›¾è§£HTTPè¯»ä¹¦ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/%E5%9B%BE%E8%A7%A3http%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sun, 16 Jan 2022 22:25:00 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E5%9B%BE%E8%A7%A3http%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;p&gt;å›¾è§£HTTPè¯»ä¹¦ç¬”è®°&lt;/p&gt;
&lt;h1 id=&#34;webåŠç½‘ç»œåŸºç¡€&#34;&gt;WebåŠç½‘ç»œåŸºç¡€&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;HTTP/0.9&lt;/code&gt; ä¸æ˜¯httpçš„æ­£å¼æ ‡å‡†ï¼Œä¸´æ—¶ç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;&lt;code&gt;HTTP/1.0&lt;/code&gt; RFC1945&lt;/p&gt;
&lt;p&gt;&lt;code&gt;HTTP/1.1&lt;/code&gt; ç›®å‰åº”ç”¨è¾ƒå¹¿ RFC2616&lt;/p&gt;
&lt;p&gt;&lt;code&gt;HTTP/2.0&lt;/code&gt; å¤§å¹…æé«˜äº†webæ€§èƒ½&lt;/p&gt;
&lt;h2 id=&#34;tcpip&#34;&gt;TCP/IP&lt;/h2&gt;
&lt;p&gt;äº’è”ç½‘è¿è¡Œä¸TCP IPåè®®æ—ä¹‹ä¸Šï¼ŒHTTPåŒ…å«äºå…¶ä¸­&lt;/p&gt;
&lt;p&gt;ipï¼Œdnsï¼Œudpï¼Œftpï¼Œhttpï¼Œtcpã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;TCP/IPçš„åˆ†å±‚ç®¡ç†&lt;/p&gt;
&lt;p&gt;åº”ç”¨å±‚ï¼šå†³å®šäº†å‘ç”¨æˆ·æä¾›æœåŠ¡æ—¶é€šä¿¡çš„æ´»åŠ¨ï¼Œftpï¼Œdnsï¼Œhttp&lt;/p&gt;
&lt;p&gt;ä¼ è¾“å±‚ï¼šå¯¹åº”ç”¨å±‚æä¾›è¿æ¥çš„ä¸¤å°è®¡ç®—æœºçš„æ•°æ®ä¼ è¾“ï¼ŒTCP Transmission Control Protocolä¼ è¾“æ§åˆ¶åè®®å’ŒUDP User Data Protocolç”¨æˆ·æ•°æ®æŠ¥åè®®&lt;/p&gt;
&lt;p&gt;ç½‘ç»œå±‚ï¼šå¤„ç†ç½‘ç»œä¸Šçš„æ•°æ®åŒ…ï¼Œæ•°æ®åŒ…æ˜¯ç½‘ç»œä¼ è¾“çš„æœ€å°æ•°æ®å•ä½ï¼Œè§„å®šå¦‚ä½•ä¼ è¾“è·¯çº¿ï¼Œä¼ è¾“æ•°æ®åŒ…&lt;/p&gt;
&lt;p&gt;æ•°æ®é“¾è·¯å±‚ï¼šå¤„ç†è¿æ¥ç½‘ç»œçš„ç¡¬ä»¶ï¼Œç½‘ç»œé€‚é…å™¨NICç½‘å¡&lt;/p&gt;
&lt;p&gt;ç‰©ç†å±‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å±‚æ¬¡åŒ–å¥½å¤„ï¼š1.è®¾è®¡å¥½æ¥å£ï¼Œæ¯ä¸ªå±‚æ¬¡å†…éƒ¨çš„è®¾è®¡å¯ä»¥è‡ªç”±æ”¹åŠ¨ 2.ä½¿è®¾è®¡å˜å¾—æ›´ç®€å•ï¼Œåº”ç”¨å±‚ä¸Šçš„åº”ç”¨ä¸éœ€è¦è€ƒè™‘æ¥æ”¶æ–¹çš„åœ°ç†ä½ç½®ç­‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;iptcpdns&#34;&gt;IPã€TCPã€DNS&lt;/h2&gt;
&lt;h3 id=&#34;ip&#34;&gt;IP&lt;/h3&gt;
&lt;p&gt;IPåè®®ä½äºç½‘ç»œå±‚&lt;/p&gt;
&lt;p&gt;macåœ°å€ä¸ºç½‘å¡çš„å›ºå®šåœ°å€ï¼Œä½¿ç”¨ARPåè®®ï¼ˆaddress resolution Protocolåœ°å€è§£æåè®®ï¼‰å‡­å€Ÿmacåœ°å€è¿›è¡Œé€šä¿¡ï¼Œè§£æipåˆ°macåœ°å€&lt;/p&gt;
&lt;p&gt;é€‰æ‹©ä¼ è¾“è·¯çº¿å«åšè·¯ç”±é€‰æ‹©&lt;/p&gt;
&lt;h3 id=&#34;tcpåè®®çš„å¯é æ€§&#34;&gt;TCPåè®®çš„å¯é æ€§&lt;/h3&gt;
&lt;p&gt;ä½äºä¼ è¾“å±‚&lt;/p&gt;
&lt;p&gt;å°†å¤§æ•°æ®å—åˆ†å‰²ä¸ºæŠ¥æ–‡æ®µsegmentç¡®ä¿ä¼ è¾“å‡†ç¡®å¯é &lt;/p&gt;
&lt;p&gt;å°†è¯·æ±‚æŠ¥æ–‡æŒ‰ç…§åºå·åˆ†ä¸ºå¤šä¸ªæŠ¥æ–‡æ®µï¼Œå°†æ¯ä¸ªæŠ¥æ–‡æ®µå¯é çš„ä¼ è¾“ï¼Œæ”¶åˆ°åå†æ ¹æ®åºåˆ—å·é‡ç»„æŠ¥æ–‡&lt;/p&gt;
&lt;p&gt;ç¡®ä¿æ•°æ®å¯åˆ°è¾¾ï¼š&lt;/p&gt;
&lt;p&gt;ä¸‰æ¬¡æ¡æ‰‹three way handshaking&lt;/p&gt;
&lt;p&gt;TCPæ ‡å¿— SYN synchronizeå’ŒACK acknowledgement&lt;/p&gt;
&lt;p&gt;å…·ä½“è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘é€ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰SYNæ ‡å¿—çš„æ•°æ®åŒ…&lt;/li&gt;
&lt;li&gt;æ¥æ”¶ç«¯æ”¶åˆ°åå›ä¼ å¸¦æœ‰SYN/ACKæ ‡å¿—çš„æ•°æ®åŒ…&lt;/li&gt;
&lt;li&gt;å‘é€ç«¯ä¼ å›å¸¦æœ‰ACKæ ‡å¿—çš„æ•°æ®åŒ…ï¼Œæ¡æ‰‹ç»“æŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ¡æ‰‹ä¸­çš„æŸä¸ªé˜¶æ®µä¸­æ–­ï¼ŒTCPåè®®ä¼šå†æ¬¡å‘é€ç›¸åŒçš„æ•°æ®åŒ…&lt;/p&gt;
&lt;h3 id=&#34;dns&#34;&gt;DNS&lt;/h3&gt;
&lt;p&gt;åŸŸåè§£æ&lt;/p&gt;
&lt;h2 id=&#34;uriå’Œurl&#34;&gt;URIå’ŒURL&lt;/h2&gt;
&lt;p&gt;URLæ˜¯URIçš„å­é›†&lt;/p&gt;
&lt;h1 id=&#34;httpåè®®&#34;&gt;HTTPåè®®&lt;/h1&gt;
&lt;p&gt;httpæ˜¯æ— çŠ¶æ€åè®®&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨cookieç®¡ç†çŠ¶æ€&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨URIå®šä½èµ„æº&lt;/p&gt;
&lt;p&gt;æŒä¹…è¿æ¥ï¼šä»»æ„ä¸€ç«¯æœªæå‡ºæ–­å¼€ï¼Œåˆ™ä¿æŒtcpè¿æ¥çŠ¶æ€ï¼Œå‡å°‘tcpè¿æ¥é‡å¤å»ºç«‹å’Œæ–­å¼€çš„å¼€é”€&lt;/p&gt;
&lt;p&gt;HTTP 1.1ä¸­ï¼Œæ‰€æœ‰è¿æ¥é»˜è®¤ä¸ºæŒä¹…è¿æ¥&lt;/p&gt;
&lt;p&gt;pipelineæŠ€æœ¯ï¼šè¿ç»­å‘é€è¯·æ±‚ï¼Œä¸å¿…ç­‰å¾…ä¸Šä¸€ä¸ªè¯·æ±‚è¿”å›&lt;/p&gt;
&lt;h2 id=&#34;cookie&#34;&gt;Cookie&lt;/h2&gt;
&lt;p&gt;æœåŠ¡å™¨å“åº”æŠ¥æ–‡ä¸­Set-Cookie headerå­—æ®µï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯ä¿å­˜&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚æ—¶è‡ªåŠ¨åœ¨headerä¸­åŠ å…¥cookie&lt;/p&gt;
&lt;h1 id=&#34;httpæŠ¥æ–‡&#34;&gt;HTTPæŠ¥æ–‡&lt;/h1&gt;
&lt;p&gt;æ¢è¡Œç¬¦CR+LFï¼ŒCRå›è½¦ç¬¦&lt;code&gt;0x0d&lt;/code&gt;ï¼ŒLFæ¢è¡Œç¬¦&lt;code&gt;0x0a&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;header + CR+LF + Body&lt;/p&gt;
&lt;p&gt;æŠ¥æ–‡messageæ˜¯é€šä¿¡åŸºæœ¬å•ä½ï¼Œ8ä½ç»„å­—èŠ‚æµ&lt;/p&gt;
&lt;p&gt;å®ä½“entity è¯·æ±‚æˆ–å“åº”çš„åœ¨å’Œï¼ŒåŒ…å«å®ä½“headerå’Œå®ä½“body&lt;/p&gt;
&lt;p&gt;ä¼ è¾“è¿‡ç¨‹ä¸­å¯ä»¥å¯¹å®ä½“è¿›è¡Œå‹ç¼©&lt;/p&gt;
&lt;p&gt;å®ä½“å¯ä»¥åˆ†å‰²ä¼ è¾“&lt;/p&gt;
&lt;h2 id=&#34;è·å–éƒ¨åˆ†å†…å®¹çš„è¯·æ±‚&#34;&gt;è·å–éƒ¨åˆ†å†…å®¹çš„è¯·æ±‚&lt;/h2&gt;
&lt;p&gt;ä¼ è¾“ä¸­æ–­çš„æ¢å¤æœºåˆ¶&lt;/p&gt;
&lt;p&gt;åœ¨headerä¸­åŠ Range&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Range: bytes= 1-5000&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ–­ç‚¹ç»­ä¼ &lt;/p&gt;
&lt;h1 id=&#34;httpçŠ¶æ€ç &#34;&gt;HTTPçŠ¶æ€ç &lt;/h1&gt;
&lt;p&gt;1XXï¼Œæ­£åœ¨å¤„ç† ä¿¡æ¯æ€§çŠ¶æ€
2XXï¼Œå¤„ç†å®Œæ¯• æˆåŠŸ
3XXï¼Œé‡å®šå‘çŠ¶æ€ç 
4XXï¼Œå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç 
5XXï¼ŒæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç &lt;/p&gt;
&lt;p&gt;200 OK&lt;/p&gt;
&lt;p&gt;HEADæ–¹æ³•ä¸ä¼šè¿”å›body&lt;/p&gt;
&lt;p&gt;204 No Content å¤„ç†æˆåŠŸï¼Œä½†æ˜¯responseä¸­ä¸åŒ…å«å®ä½“&lt;/p&gt;
&lt;p&gt;206 Partial Content å®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚&lt;/p&gt;
&lt;p&gt;301 Moved Permanently æ°¸ä¹…é‡å®šå‘ï¼Œèµ„æºåˆ†é…äº†æ–°çš„URI&lt;/p&gt;
&lt;p&gt;302 Found ä¸´æ—¶é‡å®šå‘&lt;/p&gt;
&lt;p&gt;303 See Other å®¢æˆ·ç«¯ç”¨GETï¼Œä¸´æ—¶é‡å®šå‘ï¼ˆæ¯”å¦‚POSTè®¿é—®æ—¶è¿”å›303ï¼Œéœ€è¦æ”¹GETæ–¹æ³•é‡å®šå‘åˆ°å¦ä¸€ä¸ªURIï¼‰&lt;/p&gt;
&lt;p&gt;304 Not modified æˆ‘æœ‰ä½ è¦çš„èµ„æºä½†æ˜¯ä¸è®©ä½ è®¿é—®&lt;/p&gt;
&lt;p&gt;307 Temporary Redirect ä¸´æ—¶é‡å®šå‘&lt;/p&gt;
&lt;p&gt;400 Bad request&lt;/p&gt;
&lt;p&gt;401 Unauthorized&lt;/p&gt;
&lt;p&gt;403 Forbidden ä¸å…è®¸è®¿é—®&lt;/p&gt;
&lt;p&gt;404 Not Found æ‰¾ä¸åˆ°èµ„æº&lt;/p&gt;
&lt;p&gt;500 Internal Server Error å†…éƒ¨é”™è¯¯&lt;/p&gt;
&lt;p&gt;503 Service Unavailable æœåŠ¡å™¨è¶…è´Ÿè·&lt;/p&gt;
&lt;h1 id=&#34;webæœåŠ¡å™¨&#34;&gt;WebæœåŠ¡å™¨&lt;/h1&gt;
&lt;h2 id=&#34;è™šæ‹Ÿä¸»æœº&#34;&gt;è™šæ‹Ÿä¸»æœº&lt;/h2&gt;
&lt;p&gt;ä¸€å°æœåŠ¡å™¨å¯ä»¥ç»‘å®šå¤šä¸ªåŸŸå&lt;/p&gt;
&lt;p&gt;é€šè¿‡dnsè§£æ&lt;/p&gt;
&lt;h2 id=&#34;ä»£ç†-ç½‘å…³-éš§é“&#34;&gt;ä»£ç† ç½‘å…³ éš§é“&lt;/h2&gt;
&lt;h3 id=&#34;ä»£ç†&#34;&gt;ä»£ç†&lt;/h3&gt;
&lt;p&gt;è½¬å‘ä¸­é—´äºº&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡è½¬å‘ä¼šè¿½åŠ å†™å…¥viaé¦–éƒ¨&lt;/p&gt;
&lt;p&gt;ä»£ç†æœåŠ¡åŠŸèƒ½ï¼šç¼“å­˜æŠ€æœ¯ï¼Œè®¿é—®æ§åˆ¶ï¼Œè·å–æ—¥å¿—&lt;/p&gt;
&lt;p&gt;ç¼“å­˜ä»£ç†ï¼šå°†èµ„æºç¼“å­˜åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œä¸ä»åŸæœåŠ¡å™¨è·å–ï¼ˆæœ‰ç‚¹åƒredis&lt;/p&gt;
&lt;p&gt;é€æ˜ä»£ç†ï¼šè½¬å‘è¯·æ±‚å’Œå“åº”ï¼Œä¸æ·»åŠ å…¶ä»–å†…å®¹&lt;/p&gt;
&lt;h3 id=&#34;ç½‘å…³&#34;&gt;ç½‘å…³&lt;/h3&gt;
&lt;p&gt;è½¬å‘å®¢æˆ·ç«¯è¯·æ±‚åˆ°å®é™…ç¨‹åº&lt;/p&gt;
&lt;p&gt;ç½‘å…³ä¸æœåŠ¡å™¨ä½¿ç”¨éhttpé€šä¿¡&lt;/p&gt;
&lt;h3 id=&#34;éš§é“&#34;&gt;éš§é“&lt;/h3&gt;
&lt;p&gt;åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç›´æ¥ä¸­è½¬ï¼Œä¿æŒåŒæ–¹çš„é€šä¿¡è¿æ¥&lt;/p&gt;
&lt;p&gt;æœ¬èº«ä¸è§£æhttpè¯·æ±‚ï¼Œåªä¼ è¾“&lt;/p&gt;
&lt;h2 id=&#34;ç¼“å­˜&#34;&gt;ç¼“å­˜&lt;/h2&gt;
&lt;p&gt;å®¢æˆ·ç«¯ç¼“å­˜å’ŒæœåŠ¡å™¨ç¼“å­˜&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯ç¼“å­˜å­˜å‚¨åœ¨æµè§ˆå™¨&lt;/p&gt;
&lt;p&gt;å„ç§headerçš„ä½œç”¨&lt;/p&gt;
&lt;h2 id=&#34;cookieç›¸å…³header&#34;&gt;Cookieç›¸å…³header&lt;/h2&gt;
&lt;p&gt;Set-Cookie: åè·Ÿname=valueçš„åºåˆ—&lt;/p&gt;
&lt;p&gt;Cookie: å‘é€cookie&lt;/p&gt;
&lt;h1 id=&#34;https&#34;&gt;HTTPS&lt;/h1&gt;
&lt;p&gt;httpç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜æ–‡è¢«çªƒå¬&lt;/li&gt;
&lt;li&gt;ä¸éªŒè¯åŒæ–¹èº«ä»½ï¼Œå¯ä¼ªè£…&lt;/li&gt;
&lt;li&gt;æ— æ³•éªŒè¯å®Œæ•´æ€§ï¼Œå¯ä»¥ç¯¡æ”¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨SSL secure socket layeræˆ–TLS transport layer securityå®‰å…¨å±‚ä¼ è¾“åè®®&lt;/p&gt;
&lt;p&gt;SSLä½¿ç”¨è¯ä¹¦ç¡®å®šèº«ä»½&lt;/p&gt;
&lt;p&gt;é˜²æ­¢ç¯¡æ”¹ï¼šä½¿ç”¨md5æˆ–sha-1ç­‰æ ¡éªŒæ–¹æ³•æ ¡éªŒæŠ¥æ–‡å®Œæ•´æ€§&lt;/p&gt;
&lt;p&gt;HTTP+é€šä¿¡åŠ å¯†+è¯ä¹¦+å®Œæ•´æ€§ä¿æŠ¤&lt;/p&gt;
&lt;p&gt;é€šä¿¡æ¥å£éƒ¨åˆ†ç”¨sslå’Œtlsåè®®ä»£æ›¿&lt;/p&gt;
&lt;p&gt;httpå…ˆå’Œsslé€šä¿¡ï¼Œsslå†å’Œtcpé€šä¿¡&lt;/p&gt;
&lt;p&gt;éå¯¹ç§°åŠ å¯† å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œç§é’¥è¿›è¡Œè§£å¯†&lt;/p&gt;
&lt;h2 id=&#34;é€šä¿¡æ­¥éª¤&#34;&gt;é€šä¿¡æ­¥éª¤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€client helloå¼€å§‹sslé€šä¿¡&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å“åº”server hello&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å‘é€certificateæŠ¥æ–‡ï¼ŒåŒ…å«å…¬é’¥è¯ä¹¦&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å‘é€server hello done&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€client key exchangeæŠ¥æ–‡å“åº”ï¼Œsslæ¡æ‰‹éƒ¨åˆ†ç»“æŸ&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€change cipher spec&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘é€finished&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨å‘é€change cipher spec&lt;/li&gt;
&lt;li&gt;sslè¿æ¥å»ºç«‹æˆåŠŸï¼Œå¼€å§‹è¿›è¡Œhttpè¯·æ±‚&lt;/li&gt;
&lt;/ol&gt;</description>
        </item>
        <item>
        <title>ã€æ“ä½œç³»ç»Ÿã€‘å¼‚å¸¸æ§åˆ¶æµ</title>
        <link>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/</link>
        <pubDate>Fri, 14 Jan 2022 10:12:15 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/</guid>
        <description>&lt;p&gt;å¼‚å¸¸æ§åˆ¶æµ&lt;/p&gt;
&lt;p&gt;CSAPP CH-8&lt;/p&gt;
&lt;p&gt;æŒ‡ä»¤åœ°å€é—´çš„è¿‡åº¦ä¸ºæ§åˆ¶è½¬ç§»ï¼Œæ§åˆ¶è½¬ç§»åºåˆ—å«åšæ§åˆ¶æµ&lt;/p&gt;
&lt;p&gt;ECF Exceptional Control Flow å¼‚å¸¸æ§åˆ¶æµæ˜¯ç³»ç»Ÿå®ç°IOï¼Œè¿›ç¨‹å’Œè™šæ‹Ÿå†…å­˜çš„åŸºæœ¬æœºåˆ¶&lt;/p&gt;
&lt;p&gt;ECFç”¨äºåº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿçš„äº¤äº’&lt;/p&gt;
&lt;p&gt;try catchç­‰è¯­å¥åŸºäºECF&lt;/p&gt;
&lt;h1 id=&#34;å¼‚å¸¸&#34;&gt;å¼‚å¸¸&lt;/h1&gt;
&lt;p&gt;ç¡¬ä»¶å®ç°ï¼Œæ“ä½œç³»ç»Ÿå®ç°&lt;/p&gt;
&lt;p&gt;å¼‚å¸¸æ˜¯æ§åˆ¶æµä¸­çš„çªå˜&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è™šæ‹Ÿå†…å­˜ç¼ºé¡µï¼Œ ç®—æœ¯æº¢å‡ºï¼Œ é™¤ä»¥0&lt;/p&gt;
&lt;p&gt;äº‹ä»¶ï¼šå¤„ç†å™¨çŠ¶æ€å˜åŒ–&lt;/p&gt;
&lt;p&gt;å¤„ç†å™¨æ£€æµ‹åˆ°äº‹ä»¶å‘ç”Ÿï¼Œé€šè¿‡å¼‚å¸¸è¡¨çš„è·³è½¬è¡¨ï¼Œè¿›è¡Œé—´æ¥è¿‡ç¨‹è°ƒç”¨ï¼Œç”±å¼‚å¸¸å¤„ç†ç¨‹åºå¤„ç†å¼‚å¸¸ï¼Œæ ¹æ®å¼‚å¸¸äº‹ä»¶ç±»å‹ï¼Œè¿›è¡Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ§åˆ¶è¿”å›ç»™å½“å‰æŒ‡ä»¤I-curr&lt;/li&gt;
&lt;li&gt;æ§åˆ¶è¿”å›ç»™I-nextï¼Œåˆ™æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œæ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;ç»ˆæ­¢è¢«ä¸­æ–­çš„ç¨‹åº&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¼‚å¸¸å¤„ç†&#34;&gt;å¼‚å¸¸å¤„ç†&lt;/h2&gt;
&lt;p&gt;æ¯ç§å¼‚å¸¸åˆ†é…ä¸€ä¸ªå¼‚å¸¸å·ï¼Œæ˜¯å¼‚å¸¸è¡¨ä¸­çš„ç´¢å¼•&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿå¯åŠ¨æ—¶æ“ä½œç³»ç»Ÿé¢„å¤„ç†ä¸€å¼ å¼‚å¸¸è¡¨ï¼Œç¬¬kä¸ªå…ƒç´ åŒ…å«å¼‚å¸¸kçš„å¤„ç†ç¨‹åºçš„åœ°å€&lt;/p&gt;
&lt;p&gt;å¼‚å¸¸è¡¨åŸºåœ°å€å¯„å­˜å™¨å­˜æ”¾å¼‚å¸¸è¡¨çš„èµ·å§‹åœ°å€&lt;/p&gt;
&lt;p&gt;è¿‡ç¨‹è°ƒç”¨å’Œå¼‚å¸¸çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿‡ç¨‹è°ƒç”¨ï¼Œè·³è½¬å›å¤„ç†ç¨‹åºå‰ï¼Œå¤„ç†å™¨å°†è¿”å›åœ°å€å…¥æ ˆï¼›å¼‚å¸¸ä¸ºæ ¹æ®å¼‚å¸¸ä»¥åŠå¤„ç†ç»“æœè¿›è¡Œè·³è½¬&lt;/li&gt;
&lt;li&gt;å¤„ç†å™¨ä¼šå°†é¢å¤–å¤„ç†å™¨çŠ¶æ€å…¥æ ˆ&lt;/li&gt;
&lt;li&gt;æ§åˆ¶ä»ç”¨æˆ·ç¨‹åºè½¬ç§»åˆ°å†…æ ¸ï¼Œéƒ½è¢«å‹å…¥å†…æ ¸æ ˆ&lt;/li&gt;
&lt;li&gt;å¼‚å¸¸å¤„ç†è¿è¡Œåœ¨å†…æ ¸æ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¡¬ä»¶è§¦å‘å¼‚å¸¸ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºåœ¨è½¯ä»¶ä¸­å®Œæˆ&lt;/p&gt;
&lt;h2 id=&#34;å¼‚å¸¸ç±»å‹&#34;&gt;å¼‚å¸¸ç±»å‹&lt;/h2&gt;
&lt;p&gt;ä¸­æ–­ interrupt æ¥è‡ªIOè®¾å¤‡ å¼‚æ­¥ è¿”å›åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤&lt;/p&gt;
&lt;p&gt;é™·é˜± trap æœ‰æ„å¼‚å¸¸ åŒæ­¥ è¿”å›åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤&lt;/p&gt;
&lt;p&gt;æ•…éšœ fault æ½œåœ¨çš„å¯æ¢å¤é”™è¯¯ åŒæ­¥ å¯èƒ½è¿”å›å½“å‰æŒ‡ä»¤&lt;/p&gt;
&lt;p&gt;ç»ˆæ­¢ abort ä¸å¯æ¢å¤é”™è¯¯ åŒæ­¥ ä¸ä¼šè¿”å›&lt;/p&gt;
&lt;h3 id=&#34;ä¸­æ–­&#34;&gt;ä¸­æ–­&lt;/h3&gt;
&lt;p&gt;å¼‚æ­¥å‘ç”Ÿï¼Œæ¥è‡ªå¤„ç†å™¨å¤–éƒ¨çš„IOè®¾å¤‡&lt;/p&gt;
&lt;p&gt;å¼‚æ­¥çš„å«ä¹‰ï¼šä¸­æ–­ä¸æ˜¯ç”±ä¸€ä¸ªä¸“é—¨æŒ‡ä»¤é€ æˆçš„&lt;/p&gt;
&lt;p&gt;å¼‚å¸¸ç”±ä¸­æ–­å¤„ç†ç¨‹åºå¤„ç†&lt;/p&gt;
&lt;h3 id=&#34;trapå’Œç³»ç»Ÿè°ƒç”¨&#34;&gt;trapå’Œç³»ç»Ÿè°ƒç”¨&lt;/h3&gt;
&lt;p&gt;trapæ˜¯æŒ‡å‘æŒ‡ä»¤çš„ç»“æœï¼Œç”¨äºåœ¨ç”¨æˆ·ç¨‹åºå’Œå†…æ ¸ä¹‹é—´æä¾›ä¸€ä¸ªæ¥å£ï¼Œå«åšç³»ç»Ÿè°ƒç”¨&lt;/p&gt;
&lt;p&gt;è¯»æ–‡ä»¶ï¼Œåˆ›å»ºè¿›ç¨‹forkï¼ŒåŠ è½½ç¨‹åº&lt;/p&gt;
&lt;h3 id=&#34;æ•…éšœ&#34;&gt;æ•…éšœ&lt;/h3&gt;
&lt;p&gt;ç”±é”™è¯¯æƒ…å†µå¼•èµ·ï¼Œè¢«æ•…éšœå¤„ç†ç¨‹åºä¿®æ­£ï¼Œæ§åˆ¶è¿”å›åˆ°å¼•èµ·æ•…éšœçš„æŒ‡ä»¤ï¼Œä»è€Œé‡æ–°æ‰§è¡Œï¼Œå¦åˆ™è¿”å›åˆ°å†…æ ¸çš„abortï¼Œå°†å¼•èµ·æ•…éšœçš„ç¨‹åºç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç»ˆæ­¢&#34;&gt;ç»ˆæ­¢&lt;/h3&gt;
&lt;p&gt;ç¡¬ä»¶é”™è¯¯ï¼Œdramæˆ–è€…sramæŸå ä¼šè¿”å›abortç„¶åç»ˆæ­¢åº”ç”¨ç¨‹åº&lt;/p&gt;
&lt;h2 id=&#34;linux-x86-64ç³»ç»Ÿä¸­çš„å¼‚å¸¸&#34;&gt;Linux x86-64ç³»ç»Ÿä¸­çš„å¼‚å¸¸&lt;/h2&gt;
&lt;p&gt;æ•…éšœå·å’Œcpuæ¶æ„æœ‰å…³&lt;/p&gt;
&lt;h3 id=&#34;linuxä¸­çš„æ•…éšœå’Œç»ˆæ­¢&#34;&gt;Linuxä¸­çš„æ•…éšœå’Œç»ˆæ­¢&lt;/h3&gt;
&lt;p&gt;é™¤æ³•é”™è¯¯ï¼šé™¤ä»¥0ï¼ŒUnixä¼šç›´æ¥ç»ˆæ­¢ç¨‹åº floating exception&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ•…éšœä¿æŠ¤ï¼šç¥ç§˜çš„é”™è¯¯ï¼Œå¦‚ç¨‹åºå¼•ç”¨äº†æœªå®šä¹‰çš„è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œæˆ–è€…è®¿é—®åªè¯»çš„æ–‡æœ¬ï¼Œä¹Ÿå°±æ˜¯æ®µé”™è¯¯segmentation fault&lt;/p&gt;
&lt;p&gt;ç¼ºé¡µï¼šä¼šä»æ–°æ‰§è¡Œäº§ç”Ÿæ•…éšœçš„æŒ‡ä»¤ï¼Œå°†ç£ç›˜ä¸Šçš„è™šæ‹Ÿå†…å­˜çš„ä¸€ä¸ªé¡µé¢æ˜ å°„åˆ°ç‰©ç†å†…å­˜çš„ä¸€ä¸ªé¡µé¢ï¼Œç„¶åé‡æ–°æ‰§è¡Œè¿™æ¡æŒ‡ä»¤&lt;/p&gt;
&lt;p&gt;æœºå™¨æ£€æŸ¥ï¼šæ˜¯åœ¨å¯¼è‡´æ•…éšœçš„æŒ‡ä»¤æ‰§è¡Œä¸­æ£€æµ‹åˆ°è‡´å‘½çš„ç¡¬ä»¶é”™è¯¯æ—¶å‘ç”Ÿçš„&lt;/p&gt;
&lt;h3 id=&#34;ç³»ç»Ÿè°ƒç”¨&#34;&gt;ç³»ç»Ÿè°ƒç”¨&lt;/h3&gt;
&lt;p&gt;è¯·æ±‚å†…æ ¸çš„æœåŠ¡&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªç³»ç»Ÿè°ƒç”¨æœ‰ä¸€ä¸ªç¼–å·ï¼Œå¯¹åº”å†…æ ¸ä¸­è·³è½¬è¡¨çš„åç§»é‡&lt;/p&gt;
&lt;p&gt;cè¯­è¨€ä¸­syscallå‡½æ•°ï¼Œcä¸€èˆ¬å°è£…äº†ç³»ç»Ÿè°ƒç”¨åº“å‡½æ•°ï¼Œå¸¦ç€å‚æ•°é™·å…¥å†…æ ¸ï¼Œå°†ç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡ŒçŠ¶æ€è¿”å›&lt;/p&gt;
&lt;p&gt;Linuxç³»ç»Ÿè°ƒç”¨çš„å‚æ•°é€šè¿‡å¯„å­˜å™¨ä¼ é€’&lt;/p&gt;
&lt;h1 id=&#34;è¿›ç¨‹&#34;&gt;è¿›ç¨‹&lt;/h1&gt;
&lt;p&gt;æ‰§è¡Œä¸­ç¨‹åºçš„å®ä¾‹ï¼Œæ¯ä¸ªç¨‹åºè¿è¡Œåœ¨æŸä¸ªè¿›ç¨‹çš„ä¸Šä¸‹æ–‡contextä¸­&lt;/p&gt;
&lt;p&gt;ä¸Šä¸‹æ–‡åŒ…æ‹¬å†…å­˜ä¸­ç¨‹åºçš„ä»£ç å’Œæ•°æ®ï¼Œæ ˆï¼Œé€šç”¨ç›®çš„å¯„å­˜å™¨ï¼Œç¨‹åºè®¡æ•°å™¨ï¼Œç¯å¢ƒå˜é‡ï¼Œæ–‡ä»¶æè¿°ç¬¦é›†åˆ&lt;/p&gt;
&lt;p&gt;æä¾›æŠ½è±¡ï¼šç‹¬ç«‹çš„é€»è¾‘æ§åˆ¶æµï¼Œå‡è±¡ç¨‹åºç‹¬å å¤„ç†å™¨ï¼›ç§æœ‰åœ°å€ç©ºé—´ï¼Œå‡è±¡ç¨‹åºç‹¬å å†…å­˜&lt;/p&gt;
&lt;p&gt;é€»è¾‘æ§åˆ¶æµæ˜¯äº¤é”™çš„ï¼Œè¿›ç¨‹è½®æµä½¿ç”¨å¤„ç†å™¨ï¼Œæ¯ä¸ªè¿›ç¨‹æ‰§è¡Œæµçš„ä¸€éƒ¨åˆ†&lt;/p&gt;
&lt;h1 id=&#34;å¹¶å‘æµ&#34;&gt;å¹¶å‘æµ&lt;/h1&gt;
&lt;p&gt;é€»è¾‘æµå¯ä»¥æ˜¯è¿›ç¨‹ã€çº¿ç¨‹ç­‰&lt;/p&gt;
&lt;p&gt;å¹¶å‘ï¼šå¤šä¸ªæµå¹¶å‘çš„æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;è¿è¡Œåœ¨åŒä¸€ä¸ªå¤„ç†å™¨ä¸Š&lt;/p&gt;
&lt;p&gt;å¹¶è¡Œï¼šè¿è¡Œåœ¨ä¸åŒå¤„ç†å™¨æ ¸ä¸Š&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªæ§åˆ¶æµä¸­çš„ä¸€éƒ¨åˆ†æ˜¯æ—¶é—´ç‰‡&lt;/p&gt;
&lt;h1 id=&#34;ç§æœ‰åœ°å€ç©ºé—´&#34;&gt;ç§æœ‰åœ°å€ç©ºé—´&lt;/h1&gt;
&lt;p&gt;è¿›ç¨‹ä¸ºæ¯ä¸ªç¨‹åºæä¾›å‡è±¡ï¼Œnä½åœ°å€æœºå™¨ï¼Œåœ°å€ç©ºé—´&lt;code&gt;2^n&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;åº•éƒ¨ç”¨äºç”¨æˆ·ç¨‹åºï¼šåŒ…æ‹¬ä»£ç ï¼Œæ•°æ®ï¼Œå †ï¼Œæ ˆ&lt;/p&gt;
&lt;p&gt;é¡¶éƒ¨ç»™å†…æ ¸&lt;/p&gt;
&lt;h1 id=&#34;ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼&#34;&gt;ç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼&lt;/h1&gt;
&lt;p&gt;é€šè¿‡æ¨¡å¼ä½å¯„å­˜å™¨æ§åˆ¶&lt;/p&gt;
&lt;p&gt;/procæ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…å«ç³»ç»Ÿå±æ€§ï¼Œå¦‚å†…æ ¸æ•°ï¼Œcpuç±»å‹ï¼ŒæŸè¿›ç¨‹ä½¿ç”¨çš„å†…å­˜æ®µåœ°å€&lt;/p&gt;
&lt;h1 id=&#34;ä¸Šä¸‹æ–‡åˆ‡æ¢&#34;&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/h1&gt;
&lt;p&gt;å®ç°å¤šä»»åŠ¡&lt;/p&gt;
&lt;p&gt;å†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ŒåŒ…å«é‡æ–°å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹æ‰€éœ€çš„çŠ¶æ€&lt;/p&gt;
&lt;p&gt;åŒ…å«é€šç”¨ç›®çš„å¯„å­˜å™¨ï¼Œæµ®ç‚¹å¯„å­˜å™¨ï¼Œç¨‹åºè®¡æ•°å™¨ï¼Œç”¨æˆ·æ ˆï¼ŒçŠ¶æ€å¯„å­˜å™¨ï¼Œå†…æ ¸æ ˆï¼Œå†…æ ¸æ•°æ®ç»“æ„ï¼ˆæè¿°åœ°å€ç©ºé—´çš„é¡µè¡¨ã€å½“å‰è¿›ç¨‹ä¿¡æ¯çš„è¿›ç¨‹è¡¨ã€å·²æ‰“å¼€æ–‡ä»¶çš„æ–‡ä»¶è¡¨ï¼‰&lt;/p&gt;
&lt;p&gt;å†…æ ¸å¯ä»¥é€šè¿‡è°ƒåº¦å†³å®šæ‰§è¡Œå“ªä¸ªè¿›ç¨‹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¿å­˜å½“å‰è¿›ç¨‹ä¸Šä¸‹æ–‡&lt;/li&gt;
&lt;li&gt;æ¢å¤å…ˆå‰è¢«æŠ¢å è¿›ç¨‹çš„ä¸Šä¸‹æ–‡&lt;/li&gt;
&lt;li&gt;æ§åˆ¶ä¼ é€’ç»™æ–°æ¢å¤çš„è¿›ç¨‹&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;é”™è¯¯å¤„ç†&#34;&gt;é”™è¯¯å¤„ç†&lt;/h1&gt;
&lt;p&gt;å…¨å±€å˜é‡ errnoï¼Œstrerror(errno)&lt;/p&gt;
&lt;h1 id=&#34;è¿›ç¨‹æ§åˆ¶&#34;&gt;è¿›ç¨‹æ§åˆ¶&lt;/h1&gt;
&lt;h2 id=&#34;è·å–è¿›ç¨‹id&#34;&gt;è·å–è¿›ç¨‹id&lt;/h2&gt;
&lt;p&gt;pid&lt;/p&gt;</description>
        </item>
        <item>
        <title>rediså®æˆ˜è¯»ä¹¦ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/redis%E5%AE%9E%E6%88%98%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Mon, 03 Jan 2022 16:22:27 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/redis%E5%AE%9E%E6%88%98%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;p&gt;redisåŸºç¡€çŸ¥è¯†ä»¥åŠä¸€äº›åº”ç”¨åœºæ™¯æ€»ç»“&lt;/p&gt;
&lt;h1 id=&#34;åŸºç¡€&#34;&gt;åŸºç¡€&lt;/h1&gt;
&lt;p&gt;å†…å­˜æ•°æ®åº“&lt;/p&gt;
&lt;p&gt;ä¼˜äºmemcachedï¼Œé€Ÿåº¦ä¸ŠåŠŸèƒ½ä¸Š&lt;/p&gt;
&lt;p&gt;åŸºç¡€æ•°æ®ç»“æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Stringï¼ŒListï¼ŒSetï¼ŒHashï¼ŒZSet&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://redis.io/commands&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;rediså‘½ä»¤æ‰‹å†Œ&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;string&#34;&gt;String&lt;/h2&gt;
&lt;p&gt;key-value&lt;/p&gt;
&lt;p&gt;æŒ‡ä»¤GETï¼ŒSETï¼ŒDEL&lt;/p&gt;
&lt;h2 id=&#34;list&#34;&gt;LIST&lt;/h2&gt;
&lt;p&gt;key-list&lt;/p&gt;
&lt;p&gt;æŒ‡ä»¤&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LPUSHï¼ŒRPUSH æ¨å…¥åˆ—è¡¨çš„å·¦ç«¯å’Œå³ç«¯
LPUSH listname item
è¿”å›å€¼ä¸ºåˆ—è¡¨é•¿åº¦&lt;/li&gt;
&lt;li&gt;LPOPï¼ŒRPOPï¼Œä»å·¦ç«¯å’Œå³ç«¯åˆ é™¤å…ƒç´ &lt;/li&gt;
&lt;li&gt;LINDEXï¼Œè·å–åˆ—è¡¨æŒ‡å®šä½ç½®çš„å…ƒç´ 
LINDEX listname 1&lt;/li&gt;
&lt;li&gt;LRANGEï¼Œè·å–ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ 
LRANGE listname 0 -1
0ä¸ºå¼€å§‹ç´¢å¼•ï¼Œ-1ä½ç»“æŸç´¢å¼•&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;set&#34;&gt;SET&lt;/h2&gt;
&lt;p&gt;key-set&lt;/p&gt;
&lt;p&gt;SADD, SMEMBERS, SISMEMBER, SREM&lt;/p&gt;
&lt;h2 id=&#34;hash&#34;&gt;HASH&lt;/h2&gt;
&lt;p&gt;key-hash table&lt;/p&gt;
&lt;p&gt;å†…éƒ¨ä¹Ÿæ˜¯key-value&lt;/p&gt;
&lt;p&gt;HSET, HGET, HGETALL, HDEL&lt;/p&gt;
&lt;h2 id=&#34;zset&#34;&gt;ZSET&lt;/h2&gt;
&lt;p&gt;key-zset&lt;/p&gt;
&lt;p&gt;ZADD, ZRANGE, ZRANGEBYSCORE, ZREM&lt;/p&gt;
&lt;h2 id=&#34;ä¸€ä¸ªæ–‡ç« æŠ•ç¥¨ç³»ç»Ÿçš„è®¾è®¡&#34;&gt;ä¸€ä¸ªæ–‡ç« æŠ•ç¥¨ç³»ç»Ÿçš„è®¾è®¡&lt;/h2&gt;
&lt;h3 id=&#34;åŸºç¡€åŠŸèƒ½è®¾è®¡&#34;&gt;åŸºç¡€åŠŸèƒ½è®¾è®¡&lt;/h3&gt;
&lt;p&gt;æ ¹æ®æ–‡ç« çš„å‘å¸ƒæ—¶é—´å’ŒæŠ•ç¥¨æ•°é‡è®¡ç®—ä¸€ä¸ªè¯„åˆ†ï¼Œæ ¹æ®è¯¥è¯„åˆ†æ¥æ’åºå’Œå±•ç¤ºæ–‡ç« &lt;/p&gt;
&lt;p&gt;è¦æ±‚ï¼šå¦‚æœæœ‰ä¸€ç¯‡æ–‡ç« ç¬¦åˆæœ‰è¶£æ–‡ç« çš„è¦æ±‚ï¼ˆæ”¯æŒç¥¨è‡³å°‘200å¼ ï¼‰ï¼Œæ”¾åœ¨æ’è¡Œæ¦œå‰100ä½è‡³å°‘ä¸€å¤©&lt;/p&gt;
&lt;p&gt;æ„é€ åˆ†æ•°&lt;/p&gt;
&lt;p&gt;$
score = up\ vote\ *C + post\ time
$&lt;/p&gt;
&lt;p&gt;å¸¸é‡Cå¯ä»¥é€‰æ‹©432&lt;/p&gt;
&lt;p&gt;åˆ†æï¼šä¸€å¤©çš„ç§’æ•°ä¸º86400ï¼Œæ–‡ç« è¾¾åˆ°æœ‰è¶£éœ€è¦200ç¥¨ï¼Œå¯ä»¥åˆ©ç”¨86400/200=432æ¥ä½œä¸ºæ¯ä¸ªæŠ•ç¥¨å¯¹å¾—åˆ†çš„è´¡çŒ®&lt;/p&gt;
&lt;p&gt;ä¿å­˜è¯„åˆ†ä»¥åŠå­˜å‚¨æ–‡ç« ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨hashç»“æ„å­˜å‚¨æ–‡ç« çš„æ ‡é¢˜ï¼Œæ–‡ç« çš„urlï¼Œå‘å¸ƒæ–‡ç« çš„ç”¨æˆ·ï¼Œå‘å¸ƒæ—¶é—´ï¼Œå¾—ç¥¨æ•°é‡ç­‰ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;å…³äºkeyçš„è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå¦‚&lt;code&gt;article:ID&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸¤ä¸ªzsetï¼Œå…¶ä¸­ä¸€ä¸ªæˆå‘˜ä¸ºæ–‡ç« idï¼Œåˆ†å€¼ä¸ºæ–‡ç« çš„å‘å¸ƒæ—¶é—´ï¼Œå¦ä¸€ä¸ªæˆå‘˜ä¸ºæ–‡ç« idï¼Œåˆ†å€¼ä¸ºæ–‡ç« çš„è¯„åˆ†ï¼Œä½¿å¾—ç½‘ç«™å¯ä»¥æŒ‰ç…§å‘å¸ƒæ—¶é—´å’Œè¯„åˆ†ä¸¤ç§æ–¹å¼å±•ç¤ºæ–‡ç« &lt;/p&gt;
&lt;p&gt;é˜²æ­¢ç”¨æˆ·é‡å¤æŠ•ç¥¨ï¼Œå»ºç«‹å·²æŠ•ç¥¨ç”¨æˆ·åå•ï¼Œä½¿ç”¨setç»“æ„ï¼Œkeyä¸º&lt;code&gt;voted:article_id&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;éœ€è¦ç”¨åˆ°çš„ä¸€äº›æŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ZSCORE è·å–æ–‡ç« å‘å¸ƒæ—¶é—´çš„æœ‰åºé›†åˆï¼Œåˆ¤æ–­å‘å¸ƒæ—¶é—´æ˜¯å¦åœ¨ä¸€å‘¨å†…&lt;/li&gt;
&lt;li&gt;SADD è‹¥å¯æŠ•ç¥¨ï¼Œå°†ç”¨æˆ·æ·»åŠ åˆ°å·²æŠ•ç¥¨çš„setä¸­ï¼Œæ“ä½œæˆåŠŸåˆ™è¯´æ˜ç”¨æˆ·æœªå‘è¯¥æ–‡ç« æŠ•è¿‡ç¥¨&lt;/li&gt;
&lt;li&gt;ZINCRBY å°†æ–‡ç« çš„è¯„åˆ†å¢åŠ 432&lt;/li&gt;
&lt;li&gt;HINCRBY å¯¹hashç»“æ„ä¸­çš„æ–‡ç« æŠ•ç¥¨æ•°é‡è¿›è¡Œæ›´æ–°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å‘å¸ƒè·å–æ–‡ç« &#34;&gt;å‘å¸ƒè·å–æ–‡ç« &lt;/h3&gt;
&lt;p&gt;å‘å¸ƒæ–‡ç« éœ€è¦æ–°å¢idï¼Œä½¿ç”¨è®¡æ•°å™¨ï¼Œæ‰§è¡ŒincræŒ‡ä»¤&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;incr keyname
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥å¾—åˆ°è®¡æ•°å™¨++ä¹‹åçš„å€¼&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨saddå°†å‘å¸ƒè€…idæ·»åŠ åˆ°æ–‡ç« æŠ•ç¥¨çš„ç”¨æˆ·é›†åˆä¸­ï¼ˆé¿å…è‡ªå·±ç»™è‡ªå·±æŠ•ç¥¨ï¼‰&lt;/p&gt;
&lt;p&gt;é›†åˆçš„è¿‡æœŸæ—¶é—´ä¸ºä¸€å‘¨ï¼Œä¸€å‘¨åè‡ªåŠ¨é‡Šæ”¾expire&lt;/p&gt;
&lt;p&gt;HMSETå­˜å‚¨æ–‡ç« ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œzaddæ·»åŠ æ–‡ç« åˆå§‹è¯„åˆ†åˆ°ä¿å­˜è¯„åˆ†çš„zset&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œzaddæ·»åŠ æ–‡ç« å‘å¸ƒæ—¶é—´åˆ°ä¿å­˜æ—¶é—´çš„zset&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨HGETALLè·å–å­˜å‚¨åœ¨hashä¸­çš„æ–‡ç« ç»“æ„&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ZREVRANGEå–å‡ºè¯„åˆ†æœ€é«˜çš„æ–‡ç« å’Œæœ€æ–°å‘å¸ƒçš„æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ZREVRANGEè·å–æ–‡ç« çš„id&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨HGETALLè·å–è¯¦ç»†å†…å®¹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ–‡ç« åˆ†ç»„&#34;&gt;æ–‡ç« åˆ†ç»„&lt;/h3&gt;
&lt;p&gt;TODO&lt;/p&gt;</description>
        </item>
        <item>
        <title>ã€æ“ä½œç³»ç»Ÿã€‘ç½‘ç»œç¼–ç¨‹</title>
        <link>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</link>
        <pubDate>Mon, 03 Jan 2022 13:37:02 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</guid>
        <description>&lt;p&gt;æ‰¿æ¥Unix I/Oè¿™ä¸€ç« èŠ‚ï¼Œäº†è§£ç½‘ç»œå¦‚ä½•æ„å»ºä»¥åŠå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¦‚ä½•é€šä¿¡ï¼Œsocketå‡½æ•°ç›¸å…³å†…å®¹çš„å­¦ä¹ &lt;/p&gt;
&lt;p&gt;CSAPP Ch-11 ç¬”è®°&lt;/p&gt;
&lt;h2 id=&#34;csç¼–ç¨‹æ¨¡å‹&#34;&gt;CSç¼–ç¨‹æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;å®¢æˆ·ç«¯æœåŠ¡å™¨æ¨¡å‹&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæœåŠ¡å™¨è¿›ç¨‹ï¼Œå¤šä¸ªå®¢æˆ·ç«¯è¿›ç¨‹&lt;/p&gt;
&lt;p&gt;åŸºæœ¬æ“ä½œæ˜¯äº‹åŠ¡transaction&lt;/p&gt;
&lt;p&gt;æœ‰å››æ­¥&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå‘èµ·ä¸€ä¸ªäº‹åŠ¡&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨è§£é‡Šè¯·æ±‚ï¼Œç”¨å“åº”çš„æ–¹å¼æ“ä½œèµ„æº&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨è¿”å›å“åº”ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ¥å—å“åº”å¹¶å¤„ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç½‘ç»œ&#34;&gt;ç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;ç½‘ç»œæ˜¯ä¸€ç§IOè®¾å¤‡ï¼Œæ˜¯æ•°æ®æºå’Œæ•°æ®æ¥æ”¶æ–¹&lt;/p&gt;
&lt;p&gt;ç½‘ç»œæ•°æ®æ¥æ”¶åç»IOå’Œå†…å­˜æ€»çº¿å¤åˆ¶åˆ°å†…å­˜ï¼ŒåŒå‘ä¼ è¾“&lt;/p&gt;
&lt;p&gt;ä»¥å¤ªç½‘Ethernetæ˜¯å±€åŸŸç½‘æŠ€æœ¯&lt;/p&gt;
&lt;p&gt;ç”µç¼†é“¾æ¥ä¸»æœºå’Œé›†çº¿å™¨ï¼Œé›†çº¿å™¨å¹¿æ’­æ¯ä¸ªç«¯å£çš„ä¿¡æ¯åˆ°æ‰€æœ‰ä¸»æœº&lt;/p&gt;
&lt;p&gt;ä¸»æœºå‘é€å¸§frameå¼€å¤´çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬headerï¼Œéšåæ˜¯æœ‰æ•ˆè½½è·ï¼Œpayloadï¼Œç½‘å†…æ¯ä¸ªä¸»æœºéƒ½å¯ä»¥è§ï¼Œåªæœ‰ç›®çš„ä¸»æœºè¯»å–&lt;/p&gt;
&lt;p&gt;æ¡¥æ¥ä»¥å¤ªç½‘ï¼Œä¸»æœº&amp;hellip;-é›†çº¿å™¨-æ¡¥-æ¡¥-é›†çº¿å™¨-&amp;hellip;ä¸»æœºï¼Œç½‘æ¡¥ä¼šæ ¹æ®é€šä¿¡éœ€è¦æ¥é€‰æ‹©æ˜¯å¦è½¬å‘å¸§åˆ°å…¶ä»–ç½‘æ¡¥&lt;/p&gt;
&lt;p&gt;è¿æ¥å¤šä¸ªå±€åŸŸç½‘ä½¿ç”¨è·¯ç”±å™¨&lt;/p&gt;
&lt;p&gt;åè®®è§£å†³ç½‘ç»œä¼ è¾“ä¸­çš„å·®å¼‚ï¼Œæä¾›å‘½åæœºåˆ¶ï¼ˆç½‘ç»œåœ°å€ï¼‰å’Œä¼ è¾“æœºåˆ¶ï¼ˆåŒ…å¤´+æœ‰æ•ˆè½½è·ï¼‰&lt;/p&gt;
&lt;p&gt;æ•°æ®å‘é€è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸»æœºAé€šè¿‡ç³»ç»Ÿè°ƒç”¨ä»è™šå­˜åŠ è½½æ•°æ®åˆ°å†…æ ¸ç¼“å†²åŒº&lt;/li&gt;
&lt;li&gt;ä¸»æœºAä¸Šçš„åè®®è½¯ä»¶æ·»åŠ äº’è”ç½‘åŒ…å¤´å’Œæ¥å£å¸§å¤´ï¼Œäº’è”ç½‘åŒ…å¤´æŒ‡å‘ä¸»æœºBï¼Œæ¥å£å¸§å¤´æŒ‡å‘ä¸»æœºLAN1ã€‚æ˜¯å°è£…å…³ç³»ã€‚
å¸§å¤´çš„åŒ…æ•°æ®ä¸ºäº’è”ç½‘åŒ…å¤´ä»¥åŠæ•°æ®ï¼Œå¸§å¤´ä¸ºå…¶è‡ªå·±çš„äº’è”ç½‘åŒ…å¤´&lt;/li&gt;
&lt;li&gt;LAN1é€‚é…å™¨å¤åˆ¶æ•°æ®åˆ°ç½‘ç»œ&lt;/li&gt;
&lt;li&gt;è·¯ç”±å™¨è¯»å–æ•°æ®çŒ´ä¼ é€åˆ°åè®®è½¯ä»¶&lt;/li&gt;
&lt;li&gt;åè®®è½¯ä»¶è¯»å–ç›®æ ‡äº’è”ç½‘åœ°å€ï¼Œä½œä¸ºè·¯ç”±è¡¨çš„ç´¢å¼•è½¬å‘åˆ°å¯¹åº”çš„LAN2é€‚é…å™¨&lt;/li&gt;
&lt;li&gt;LAN2é€‚é…å™¨å¤åˆ¶å¸§åˆ°ç½‘ç»œ&lt;/li&gt;
&lt;li&gt;åˆ°è¾¾ä¸»æœºBï¼Œä»é€‚é…å™¨è¯»å–å¸§ï¼Œä¼ è¾“åˆ°åè®®è½¯ä»¶&lt;/li&gt;
&lt;li&gt;åè®®è½¯ä»¶å»é™¤åŒ…å¤´å’Œå¸§å¤´ï¼Œè¯»å–æ•°æ®ï¼Œä¸»æœºBé€šè¿‡ç³»ç»Ÿè°ƒç”¨æ‹·è´æ•°æ®åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å…¨çƒip&#34;&gt;å…¨çƒIP&lt;/h2&gt;
&lt;p&gt;å®¢æˆ·ç«¯ï¼ˆç”¨æˆ·ï¼‰-ã€socketæ¥å£ç³»ç»Ÿè°ƒç”¨ã€‘-TCP/IPï¼ˆå†…æ ¸ï¼‰-ã€ç¡¬ä»¶æ¥å£ï¼Œä¸­æ–­ã€‘-ç½‘ç»œé€‚é…å™¨ï¼ˆç¡¬ä»¶ï¼‰-å…¨å±€IPå› ç‰¹ç½‘&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨socketæ¥å£å‡½æ•°å’ŒUnix IOå‡½æ•°é€šä¿¡ï¼Œsocketå‡½æ•°ä¸ºç³»ç»Ÿè°ƒç”¨ï¼Œè°ƒç”¨å†…æ ¸çš„TCP/IPå‡½æ•°&lt;/p&gt;
&lt;p&gt;TCP/IPæ˜¯ä¸€ä¸ªåè®®æ—ï¼ŒIPåè®®æä¾›å‘½åæ–¹æ³•å’Œä¼ é€’æœºåˆ¶ï¼Œæ•°æ®æŠ¥&lt;/p&gt;
&lt;p&gt;IPæœºåˆ¶ä¸å¯é ï¼Œæ•°æ®æŠ¥ä¸¢å¤±ä¸ä¼šè‡ªåŠ¨æ¢å¤&lt;/p&gt;
&lt;p&gt;UDP UNreliable datagram protocolï¼Œä¸å¯é æ•°æ®æŠ¥åè®®å¯¹å…¶è¿›è¡Œäº†æ‰©å±•ï¼ŒåŒ…å¯ä»¥åœ¨è¿›ç¨‹ä¹‹é—´ä¼ é€’ï¼Œè€Œä¸æ˜¯ä¸»æœºä¹‹é—´&lt;/p&gt;
&lt;p&gt;TCPæ˜¯åŸºäºIPçš„åè®®ï¼Œè¿›ç¨‹é—´å¯é çš„å…¨åŒå·¥è¿æ¥&lt;/p&gt;
&lt;p&gt;å› ç‰¹ç½‘çš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸»æœºé›†åˆæ˜ å°„åˆ°32ä½ipåœ°å€&lt;/li&gt;
&lt;li&gt;ipåœ°å€æ˜ å°„ä¸ºä¸€ç»„åŸŸå&lt;/li&gt;
&lt;li&gt;ä¸»æœºä¸Šçš„è¿›ç¨‹èƒ½å¤Ÿé€šè¿‡è¿æ¥å…¶ä»–ä¸»æœºçš„è¿›ç¨‹é€šä¿¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ipv4å’Œipv6ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;version 4ï¼š32ä½åœ°å€&lt;/li&gt;
&lt;li&gt;version 6ï¼š128ä½åœ°å€&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ipåœ°å€&#34;&gt;ipåœ°å€&lt;/h3&gt;
&lt;p&gt;32ä½æ— ç¬¦å·æ•´æ•°ï¼Œ8*4&lt;/p&gt;
&lt;p&gt;TCP/IPç»Ÿä¸€äº†å­—èŠ‚é¡ºåºï¼Œå¤§ç«¯æ³•&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºï¼ŒLinuxæŸ¥çœ‹ä¸»æœºåœ°å€&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hostname -i
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;åŸŸå&#34;&gt;åŸŸå&lt;/h3&gt;
&lt;p&gt;ä¸€çº§åŸŸåmilï¼Œeduï¼Œgovï¼Œcomï¼Œcn&lt;/p&gt;
&lt;p&gt;äºŒçº§åŸŸåwhut.edu&lt;/p&gt;
&lt;p&gt;hostsæ–‡ä»¶æ‰‹å·¥ç»´æŠ¤ipå’ŒåŸŸåçš„æ˜ å°„&lt;/p&gt;
&lt;p&gt;DNSï¼Œdomain name system&lt;/p&gt;
&lt;p&gt;Linuxä½¿ç”¨nslookupæŸ¥çœ‹åŸŸåip&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nslookup baidu.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šå¸¸åŸŸåå’Œipä¸€ä¸€å¯¹åº”ï¼Œå¤šä¸ªåŸŸåä¹Ÿå¯ä»¥å¯¹åº”åŒä¸€ipï¼Œæ³›åŸŸåcs.whut.edu, ee.whut.edu&lt;/p&gt;
&lt;p&gt;å¤šä¸ªåŸŸåå¯ä»¥æ˜ å°„åˆ°åŒä¸€ç»„çš„å¤šä¸ªipï¼Œå¦‚www.twitter.comå’Œtwitter.comæ˜ å°„åˆ°199.16.156.*&lt;/p&gt;
&lt;h3 id=&#34;å› ç‰¹ç½‘è¿æ¥&#34;&gt;å› ç‰¹ç½‘è¿æ¥&lt;/h3&gt;
&lt;p&gt;å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨è¿æ¥ä¸Šå‘é€å’Œæ¥æ”¶å­—èŠ‚æµæ¥é€šä¿¡ï¼Œç‚¹å¯¹ç‚¹ï¼Œå…¨åŒå·¥ï¼Œå¯ä»¥åŒæ—¶åŒå‘æµåŠ¨&lt;/p&gt;
&lt;p&gt;socketæ˜¯è¿æ¥çš„ç«¯ç‚¹ï¼Œæ¯ä¸ªsocketéƒ½æœ‰socketåœ°å€ï¼Œç”±&lt;code&gt;åœ°å€:ç«¯å£&lt;/code&gt;æ„æˆï¼Œåå…­ä½ç«¯å£å·0-65535&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯socketåœ°å€ç«¯å£ç”±å†…æ ¸è‡ªåŠ¨åˆ†é…ï¼Œä¸´æ—¶ç«¯å£ï¼›æœåŠ¡å™¨çš„ä¸ºé»˜è®¤ç«¯å£&lt;/p&gt;
&lt;p&gt;webä½¿ç”¨80ï¼ˆhttpï¼‰ï¼Œç”µå­é‚®ä»¶åœ°å€ä½¿ç”¨25ï¼ˆSMTPï¼‰&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡&lt;code&gt;/etc/services&lt;/code&gt;çœ‹æŸ¥&lt;strong&gt;çŸ¥å&lt;/strong&gt;æœåŠ¡é»˜è®¤ç«¯å£&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªè¿æ¥ä¸¤ç«¯çš„socketåœ°å€æ˜¯å”¯ä¸€ç¡®å®šçš„ï¼Œsocket pairï¼Œæ ¼å¼&lt;code&gt;(cliaddr:cliport, servaddr:servport)&lt;/code&gt;ï¼Œå³&lt;code&gt;(å®¢æˆ·ç«¯IP:å®¢æˆ·ç«¯ç«¯å£,æœåŠ¡å™¨IP:æœåŠ¡å™¨ç«¯å£)&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;socketæ¥å£&#34;&gt;socketæ¥å£&lt;/h2&gt;
&lt;p&gt;ä¸€ç»„å‡½æ•°å®ç°ï¼Œå’ŒUnix IOé…åˆåˆ›å»ºç½‘ç»œåº”ç”¨&lt;/p&gt;
&lt;p&gt;æµç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯getaddrinfo-&amp;gt;socket-&amp;gt;connectå‘é€è¿æ¥è¯·æ±‚-&amp;gt;rio_writen-&amp;gt;rio_readlineb-&amp;gt;closeå‘é€EOF&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨getaddrinfo-&amp;gt;socket-&amp;gt;bind-&amp;gt;listen-&amp;gt;acceptæ¥å—è¯·æ±‚-&amp;gt;rio_readlinebè¯»å®¢æˆ·ç«¯çš„write-&amp;gt;rio_writenå†™å…¥response-&amp;gt;rio_readlinebè¯»å–EOF-close&lt;/p&gt;
&lt;h3 id=&#34;socketåœ°å€ç»“æ„&#34;&gt;socketåœ°å€ç»“æ„&lt;/h3&gt;
&lt;p&gt;å¯¹äºLinuxå†…æ ¸ï¼Œsocketå°±æ˜¯ä¸€ä¸ªæœ‰æè¿°ç¬¦çš„æ‰“å¼€æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;socketåœ°å€å­˜æ”¾ä¸&lt;code&gt;sockaddr_in&lt;/code&gt;ï¼ŒåŒ…å«&lt;code&gt;AF_INET&lt;/code&gt;ï¼Œ&lt;code&gt;sin_port&lt;/code&gt;ä¸º16ä½ç«¯å£å·ï¼Œ&lt;code&gt;sin_addr&lt;/code&gt;ä¸º32ä½ipåœ°å€ï¼Œéƒ½æ˜¯ä»¥å¤§ç«¯æ³•å­˜æ”¾&lt;/p&gt;
&lt;h3 id=&#34;socketå‡½æ•°&#34;&gt;socketå‡½æ•°&lt;/h3&gt;
&lt;p&gt;å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä½¿ç”¨socketå‡½æ•°åˆ›å»ºsocketæè¿°ç¬¦&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;clientfd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AF_INET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SOCK_STREAM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;AF_INET&lt;/code&gt;è¡¨ç¤ºä½¿ç”¨32ä½IPåœ°å€ï¼Œ&lt;code&gt;SOCK_STREAM&lt;/code&gt;è¡¨ç¤ºè¯¥socketä¸ºè¿æ¥ç«¯ç‚¹&lt;/p&gt;
&lt;p&gt;è¯¥å‡½æ•°è¿”å›çš„æè¿°ç¬¦ä¸ºéƒ¨åˆ†æ‰“å¼€çš„ï¼Œä¸èƒ½è¯»å†™ï¼Œå°†æœ‰å®¢æˆ·ç«¯å®Œæˆæ‰“å¼€socketçš„å·¥ä½œ&lt;/p&gt;
&lt;h3 id=&#34;connectå‡½æ•°&#34;&gt;connectå‡½æ•°&lt;/h3&gt;
&lt;p&gt;å®¢æˆ·ç«¯è°ƒç”¨connectå‡½æ•°å»ºç«‹å’ŒæœåŠ¡å™¨è¿æ¥&lt;/p&gt;
&lt;p&gt;connectå‡½æ•°ä¼šé˜»å¡ä¸€ç›´åˆ°è¿æ¥æˆåŠŸå»ºç«‹æˆ–è€…é”™è¯¯ï¼ŒæˆåŠŸåclientfdä¸ºå¯è¯»å†™çŠ¶æ€&lt;/p&gt;
&lt;p&gt;ç”±getaddrinfoå‡½æ•°è·å–connectçš„å‚æ•°&lt;/p&gt;
&lt;h3 id=&#34;bindå‡½æ•°&#34;&gt;bindå‡½æ•°&lt;/h3&gt;
&lt;p&gt;bindå‡½æ•°é€šçŸ¥å†…æ ¸å°†addrä¸­çš„æœåŠ¡å™¨socketåœ°å€å’Œsocketæè¿°ç¬¦socketfdè”ç³»åˆ°ä¸€èµ·&lt;/p&gt;
&lt;p&gt;ç”±getaddrinfoå‡½æ•°è·å–bindçš„å‚æ•°&lt;/p&gt;
&lt;h3 id=&#34;listenå‡½æ•°&#34;&gt;listenå‡½æ•°&lt;/h3&gt;
&lt;p&gt;å®¢æˆ·ç«¯æ˜¯å‘èµ·è¯·æ±‚çš„ä¸»åŠ¨å®ä½“ï¼ŒæœåŠ¡å™¨æ˜¯è¢«åŠ¨å®ä½“&lt;/p&gt;
&lt;p&gt;é»˜è®¤ï¼Œå†…æ ¸è®¤ä¸ºsocketå‡½æ•°åˆ›å»ºçš„æè¿°ç¬¦ä¸ºä¸»åŠ¨socketï¼ŒæœåŠ¡å™¨é€šè¿‡listenå‡½æ•°é€šçŸ¥å†…æ ¸æè¿°ç¬¦æ˜¯è¢«æœåŠ¡å™¨ä½¿ç”¨è€Œä¸æ˜¯å®¢æˆ·ç«¯&lt;/p&gt;
&lt;p&gt;å°†socketfdä»ä¸»åŠ¨socketè½¬åŒ–ä¸ºç›‘å¬socketï¼Œç›‘å¬socketå¯ä»¥æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚&lt;/p&gt;
&lt;p&gt;å‚æ•°backlogä¸ºé˜Ÿåˆ—ä¸­æœªå®Œæˆçš„è¯·æ±‚æ•°é‡ï¼Œä¸€èˆ¬è®¾ç½®è¾ƒå¤§çš„æ•°&lt;/p&gt;
&lt;h3 id=&#34;acceptå‡½æ•°&#34;&gt;acceptå‡½æ•°&lt;/h3&gt;
&lt;p&gt;æœåŠ¡å™¨ä½¿ç”¨acceptå‡½æ•°ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚&lt;/p&gt;
&lt;p&gt;å·²ç»è·å¾—ç›‘å¬æè¿°ç¬¦connfdï¼Œlistenfdï¼Œè¿”å›ä¸€ä¸ªå·²è¿æ¥æè¿°ç¬¦ï¼Œè¯¥æè¿°ç¬¦å¯ä»¥è¢«Unix IOè¯»å†™ï¼Œå¯ä»¥å’Œå®¢æˆ·ç«¯é€šä¿¡ï¼Œå°†connfdè¿”å›ç»™å®¢æˆ·ç«¯&lt;/p&gt;
&lt;p&gt;ä¸ç›‘å¬æè¿°ç¬¦ä¸å¤ªï¼Œç›‘å¬æè¿°ç¬¦æ˜¯å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚çš„ç«¯ç‚¹ï¼Œåªåˆ›å»ºä¸€æ¬¡ï¼Œå­˜åœ¨äºæœåŠ¡å™¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ&lt;/p&gt;
&lt;p&gt;å·²è¿æ¥æè¿°ç¬¦ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç›´æ¥å·²ç»å»ºç«‹è¿æ¥çš„ç«¯ç‚¹ï¼ŒæœåŠ¡å™¨æ¯æ¬¡æ¥å—è¯·æ±‚éƒ½ä¼šåˆ›å»º&lt;/p&gt;
&lt;p&gt;å¯ä»¥ç†è§£ä¸ºåç«¯ç¨‹åºå½“å‰å·²ç»ç›‘å¬ç³»ç»Ÿçš„æŸä¸ªç«¯å£ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯è¯·æ±‚ååç«¯åœ¨è¯¥åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å»å¤„ç†è¯¥è¯·æ±‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸»æœºå’ŒæœåŠ¡çš„è½¬æ¢&#34;&gt;ä¸»æœºå’ŒæœåŠ¡çš„è½¬æ¢&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;getaddrinfo&lt;/code&gt;
å°†ä¸»æœºåã€ä¸»æœºåœ°å€ã€æœåŠ¡åç«¯å£å·è½¬ä¸ºsocketåœ°å€ç»“æ„
è¿”å›resultä¸ºä¸€ä¸ªaddrinfoé“¾è¡¨ï¼Œæ¯ä¸ªç»“æ„å¯¹åº”ä¸€ä¸ªhostå’Œserviceçš„socketåœ°å€ç»“æ„
å®¢æˆ·ç«¯è°ƒç”¨ä¹‹åï¼Œéå†é“¾è¡¨ï¼Œå°è¯•æ¯ä¸ªåœ°å€ï¼Œç›´åˆ°socketå’ŒconnectæˆåŠŸï¼Œå»ºç«‹è¿æ¥
æœåŠ¡å™¨ä¼šéå†æ¯ä¸ªåœ°å€ï¼Œç›´åˆ°socketå’ŒbindæˆåŠŸ
é¿å…å†…å­˜æ³„éœ²ï¼Œæœ€åè°ƒç”¨freeaddrinfoé‡Šæ”¾é“¾è¡¨
å‚æ•°è®²è§£è·³äº†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getnameinfo&lt;/code&gt;
å°†socketåœ°å€è½¬æ¢ä¸ºä¸»æœºå’ŒæœåŠ¡åå­—ç¬¦ä¸²&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;socketæ¥å£è¾…åŠ©å‡½æ•°&#34;&gt;socketæ¥å£è¾…åŠ©å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸Šæ¥å£çš„æ•´åˆå°è£…&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;open_clientfd
&lt;code&gt;int open_clientfd(char *hostname, char *port)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;open_clientfdå»ºç«‹å’ŒæœåŠ¡å™¨çš„è¿æ¥ï¼Œè¿”å›æè¿°ç¬¦ï¼Œå¯ä»¥ç›´æ¥ç”¨äºUnix IOå‡½æ•°è¯»å†™&lt;/p&gt;
&lt;p&gt;æµç¨‹ï¼šgetaddrinfoï¼Œè¿”å›addrinfoé“¾è¡¨ï¼Œéå†é“¾è¡¨å°è¯•å»ºç«‹è¿æ¥ï¼Œå¤±è´¥åˆ™å…³é—­æè¿°ç¬¦ï¼ŒæˆåŠŸåé‡Šæ”¾é“¾è¡¨å°†æè¿°ç¬¦ï¼ˆconnfdï¼‰è¿”å›ç»™å®¢æˆ·ç«¯&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;open_listenfd
æœåŠ¡å™¨åˆ›å»ºç›‘å¬æè¿°ç¬¦&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;int open_listenfd(char *port)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;éå†é“¾è¡¨ç›´åˆ°è°ƒç”¨socketå’ŒbindæˆåŠŸ&lt;/p&gt;
&lt;h3 id=&#34;echoå®ä¾‹&#34;&gt;echoå®ä¾‹&lt;/h3&gt;
&lt;p&gt;ç®€å•çš„å•çº¿ç¨‹å¤„ç†æœåŠ¡å™¨&lt;/p&gt;
&lt;p&gt;EOFæ¦‚å¿µï¼Œå¹¶ä¸æ˜¯å­—ç¬¦ï¼Œè€Œæ˜¯å†…æ ¸æ£€æµ‹çš„ä¸€ä¸ªæ¡ä»¶ï¼Œreadå‡½æ•°è¿”å›0æ—¶ï¼Œç¨‹åºæ£€æµ‹åˆ°EOFæ¡ä»¶ã€‚ç£ç›˜æ–‡ä»¶è¯»å†™ï¼Œæ–‡ä»¶ä½ç½®è¶…å‡ºé•¿åº¦ï¼Œåˆ¤æ–­EOFã€‚ç½‘ç»œè¿æ¥ï¼Œè¿›ç¨‹å…³é—­è¿æ¥å…¶ä¸­ä¸€ç«¯ï¼Œè§¦å‘EOFã€‚å°è¯•è¯»å–é€šä¿¡ä¸­å­—èŠ‚æµçš„æœ€åä¸€ä¸ªå­—èŠ‚ä¹‹åçš„å­—èŠ‚ï¼Œè§¦å‘EOFã€‚&lt;/p&gt;
&lt;h2 id=&#34;webæœåŠ¡å™¨&#34;&gt;WebæœåŠ¡å™¨&lt;/h2&gt;
&lt;h3 id=&#34;webåŸºç¡€&#34;&gt;WebåŸºç¡€&lt;/h3&gt;
&lt;p&gt;HTTPåè®®ï¼ŒHypertext Transfer Protocolè¶…æ–‡æœ¬ä¼ è¾“åè®®&lt;/p&gt;
&lt;h3 id=&#34;webå†…å®¹&#34;&gt;Webå†…å®¹&lt;/h3&gt;
&lt;p&gt;å†…å®¹æ˜¯MIMEï¼Œå¤šç”¨é€”çš„ç½‘é™…é‚®ä»¶æ‰©å……åè®®ï¼Œç±»å‹ç›¸å…³çš„å­—èŠ‚åºåˆ—&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯»å–ä¸€ä¸ªç£ç›˜æ–‡ä»¶ï¼Œå°†å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œç£ç›˜æ–‡ä»¶ä¸ºé™æ€å†…å®¹&lt;/li&gt;
&lt;li&gt;è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°†è¾“å‡ºè¿”å›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨URLæ ‡è¯†æ¯ä¸ªæ–‡ä»¶&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç›®å½•æŒ‡å®šè¿”å›è§„åˆ™&lt;/p&gt;
&lt;p&gt;æ ¹ç›®å½•ä¸ºç½‘é¡µé™æ€å†…å®¹çš„æ ¹ç›®å½•&lt;/p&gt;
&lt;p&gt;åç¼€ä¸º&lt;code&gt;/&lt;/code&gt;æ—¶æœåŠ¡å™¨è‡ªåŠ¨è¡¥å…¨é»˜è®¤æ–‡ä»¶å&lt;/p&gt;
&lt;h3 id=&#34;httpäº‹åŠ¡&#34;&gt;HTTPäº‹åŠ¡&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨Linuxçš„Telnetå’Œä»»ä½•webæœåŠ¡å™¨æ‰§è¡Œäº‹åŠ¡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;telnet url port
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;HTTPè¯·æ±‚&lt;/p&gt;
&lt;p&gt;è¯·æ±‚è¡Œ&lt;code&gt;method URI version&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;0ä¸ªæˆ–å¤šä¸ªè¯·æ±‚æŠ¥å¤´&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç©ºçš„æ–‡æœ¬è¡Œç»ˆæ­¢æŠ¥å¤´åˆ—è¡¨&lt;/p&gt;
&lt;p&gt;body&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GET / HTTP/1.1  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host: www.baidu.com
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯·æ±‚æ–¹æ³•GETã€POSTã€OPTIONSã€HEADã€PUTã€DELETEã€TRACE&lt;/p&gt;
&lt;p&gt;URIæ˜¯ç›¸åº”URLçš„åç¼€ï¼ŒåŒ…æ‹¬æ–‡ä»¶åå’Œå‚æ•°&lt;/p&gt;
&lt;p&gt;versionä¸ºhttpç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://developer.mozilla.org/zh-CN/docs/Glossary/Request_header&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Mozillaæ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;headerå¯ä»¥å­˜æ”¾å¤šç§ä¿¡æ¯ï¼Œæ¯”å¦‚cookieç­‰&lt;/p&gt;
&lt;p&gt;hostè¯·æ±‚å¤´åœ¨HTTP 1.1ä½å¿…é¡»ï¼Œ1.0ä¸­ä¸å¿…é¡»ã€‚ä»£ç†ç¼“å­˜proxy cacheä¼šä½¿ç”¨hostæŠ¥å¤´ï¼Œç†è§£ä¸ºåå‘ä»£ç†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç›´æ¥å¯ä»¥ç”±ä»£ç†ï¼Œ&lt;code&gt;ä»£ç†é“¾&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;HTTPå“åº”ç»„æˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;å“åº”è¡Œ
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0ä¸ªæˆ–å¤šä¸ªå“åº”å¤´
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ç»ˆæ­¢æŠ¥å¤´çš„ç©ºè¡Œ
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;å“åº”ä¸»ä½“body
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å“åº”è¡Œæ ¼å¼&lt;/p&gt;
&lt;p&gt;&lt;code&gt;version status-code status-message&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;versionå¯¹äºHTTPç‰ˆæœ¬ï¼Œcodeä¸º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1**
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;200
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;301 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;400
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;403
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;404
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;501
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;505
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ›´å¤šçŠ¶æ€ç &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å“åº”å¤´ä¸­åº”æœ‰Content-Typeï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯ä¸»ä½“å†…å®¹çš„MIMEç±»å‹ï¼ŒContent-Lengthï¼Œå‘ŠçŸ¥ä¸»ä½“çš„å­—èŠ‚å¤§å°&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¼ é€’å‚æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;URIæˆ–è€…è¯·æ±‚ä¸»ä½“
2. æœåŠ¡å™¨ä¼ é€’å‚æ•°ç»™å­è¿›ç¨‹&lt;/p&gt;
&lt;p&gt;forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œè°ƒç”¨execveåœ¨å­è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œå¯¹åº”çš„ç¨‹åºï¼Œé€šè¿‡ç¯å¢ƒå˜é‡ï¼Œå¦‚QUERY_STRING, REQUEST_METHODç­‰ä¿¡æ¯ï¼Œç¨‹åºåšå‡ºå¯¹åº”çš„å¤„ç†&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;å­è¿›ç¨‹çš„è¾“å‡ºåˆ°å“ªé‡Œï¼Ÿ
CGIç¨‹åºï¼ˆé€šç”¨ç½‘å…³æ¥å£Common Gateway Interfaceï¼‰ï¼Œå°†å†…å®¹å‘é€åˆ°æ ‡å‡†è¾“å‡ºï¼Œåœ¨å­è¿›ç¨‹è°ƒç”¨CGIç¨‹åºä¹‹å‰ï¼Œä½¿ç”¨Linux dup2å‡½æ•°å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°å’Œå®¢æˆ·ç«¯ç›¸è¿çš„å·²è¿æ¥æè¿°ç¬¦ï¼ŒCGIç¨‹åºå†™å…¥åˆ°æ ‡å‡†è¾“å‡ºçš„å†…å®¹éƒ½ä¼šç›´æ¥åˆ°è¾¾å®¢æˆ·ç«¯&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;å®ç°ä¸€ä¸ªwebæœåŠ¡å™¨&#34;&gt;å®ç°ä¸€ä¸ªWebæœåŠ¡å™¨&lt;/h1&gt;
&lt;p&gt;ä½¿ç”¨cé…åˆCSAPPæä¾›çš„å°è£…æ­å»ºä¸€ä¸ªç®€æ˜“çš„webæœåŠ¡å™¨&lt;/p&gt;
&lt;h1 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h1&gt;
&lt;p&gt;æœ¬ç« ä¸»è¦äº†è§£äº†Unixå¦‚ä½•å»ºç«‹ä¸€ä¸ªç½‘ç»œè¿æ¥ï¼Œä»¥åŠæ•°æ®ä¼ è¾“çš„å…·ä½“è¿‡ç¨‹ï¼Œsocketçš„è®¾è®¡å·§å¦™ä¹‹å¤„ï¼Œä»¥åŠLinuxä¸€åˆ‡çš†æ–‡ä»¶çš„è¿›ä¸€æ­¥ç†è§£ã€‚&lt;/p&gt;</description>
        </item>
        <item>
        <title>ã€æ“ä½œç³»ç»Ÿã€‘ç³»ç»Ÿçº§IO</title>
        <link>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%B3%BB%E7%BB%9F%E7%BA%A7io/</link>
        <pubDate>Mon, 03 Jan 2022 10:31:33 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%B3%BB%E7%BB%9F%E7%BA%A7io/</guid>
        <description>&lt;p&gt;é«˜çº§åˆ«çš„IOç¨‹åºï¼Œå¦‚cä¸­çš„printfå’Œscanfï¼Œc++ä¸­çš„&lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;å’Œ&lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;ï¼Œéƒ½ä¾èµ–Unix ç³»ç»Ÿçº§IO&lt;/p&gt;
&lt;p&gt;CSAPP Ch-10 ç¬”è®°&lt;/p&gt;
&lt;h2 id=&#34;unix-io&#34;&gt;Unix IO&lt;/h2&gt;
&lt;p&gt;Linuxæ–‡ä»¶å³æ˜¯mä¸ªå­—èŠ‚çš„åºåˆ—$B_0, B_1, &amp;hellip;, B_k, &amp;hellip;, B_{m-1}$&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰çš„IOè®¾å¤‡ï¼ˆç½‘ç»œï¼Œç£ç›˜ï¼Œç»ˆç«¯ï¼‰è¢«æŠ½è±¡ä¸ºæ–‡ä»¶ï¼Œè¾“å…¥å’Œè¾“å‡ºè¢«ä½œä¸ºç›¸åº”æ–‡ä»¶çš„è¯»å’Œå†™è¿›è¡Œï¼ŒLinuxå†…æ ¸åªéœ€è¦æš´éœ²ä¸€ä¸ªç®€å•ä½çº§çš„åº”ç”¨æ¥å£&lt;/p&gt;
&lt;p&gt;è¾“å…¥å’Œè¾“å‡ºçš„ç»Ÿä¸€æ–¹å¼:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰“å¼€æ–‡ä»¶ï¼šåº”ç”¨ç¨‹åºè¯·æ±‚IOè®¾å¤‡ï¼Œå†…æ ¸è¿”å›æè¿°ç¬¦&lt;/li&gt;
&lt;li&gt;Linux Shellåˆ›å»ºçš„è¿›ç¨‹å¼€å§‹æ—¶æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼šæ ‡å‡†è¾“å…¥0ï¼Œæ ‡å‡†è¾“å‡º1ï¼Œæ ‡å‡†é”™è¯¯2&lt;/li&gt;
&lt;li&gt;æ”¹å˜å½“å‰çš„æ–‡ä»¶ä½ç½®ï¼šå†…æ ¸å­˜å‚¨æ–‡ä»¶ä½ç½®kï¼Œåˆå§‹ä¸º0ï¼Œé€šè¿‡seekæ”¹å˜è¿™ä¸ªåç§»é‡&lt;/li&gt;
&lt;li&gt;è¯»å†™æ–‡ä»¶ï¼šè¯»ä¸ºå¤åˆ¶å­—èŠ‚åˆ°å†…å­˜ï¼Œå½“k&amp;gt;=mæ—¶ï¼Œä¼šè§¦å‘EOFæ¡ä»¶ï¼›å†™ä¸ºå¤åˆ¶å­—èŠ‚åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä»å½“å‰ä½ç½®kå¼€å§‹ï¼Œç„¶åæ›´æ–°k&lt;/li&gt;
&lt;li&gt;å…³é—­æ–‡ä»¶ï¼šé€šçŸ¥å†…æ ¸ï¼Œå†…æ ¸é‡Šæ”¾æ–‡ä»¶æ‰“å¼€æ—¶åˆ›å»ºçš„æ•°æ®ç»“æ„ï¼Œé‡Šæ”¾æè¿°ç¬¦ï¼Œè¿›ç¨‹ç»ˆæ­¢æ—¶å†…æ ¸ä¼šé‡Šæ”¾æ‰“å¼€çš„æ–‡ä»¶ä»¥åŠå†…å­˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ–‡ä»¶&#34;&gt;æ–‡ä»¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ™®é€šæ–‡ä»¶ï¼šæ–‡æœ¬æ–‡ä»¶ï¼šASCIIæˆ–Unicodeå­—ç¬¦æ–‡ä»¶ï¼Œå…¶ä»–çš„éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯¹å†…æ ¸è€Œè¨€æ— åŒºåˆ«ï¼Œæ¢è¡Œç¬¦&lt;code&gt;\n&lt;/code&gt;å¯¹åº”ASCII LF&lt;/li&gt;
&lt;li&gt;ç›®å½•ï¼šåŒ…å«ä¸€ç»„é“¾æ¥çš„æ–‡ä»¶ï¼Œé“¾æ¥å°†æ–‡ä»¶åæ˜ å°„åˆ°ä¸€ä¸ªæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å¥—æ¥å­—socketï¼šä¸å¦ä¸€ä¸ªè¿›ç¨‹è¿›è¡Œè·¨ç½‘ç»œé€šä¿¡çš„æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å‘½åé€šé“named pipeï¼Œç¬¦å·é“¾æ¥ï¼Œå­—ç¬¦å’Œå—è®¾å¤‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»å¯¹è·¯å¾„ï¼šä»¥æ–œæ å¼€å§‹&lt;code&gt;/home/test&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç›¸å¯¹è·¯å¾„ï¼šä»¥æ–‡ä»¶åå¼€å§‹,&lt;code&gt;../test&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ‰“å¼€å’Œå…³é—­æ–‡ä»¶&#34;&gt;æ‰“å¼€å’Œå…³é—­æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;openå‡½æ•°æ‰“å¼€æˆ–åˆ›å»ºæ–‡ä»¶&lt;/p&gt;
&lt;p&gt;è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œåœ¨è¿›ç¨‹ä¸­æ²¡æœ‰æ‰“å¼€çš„æœ€å°æè¿°ç¬¦
å‡ ç§æ§åˆ¶å‚æ•°flags&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;O_RDONLY&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;åªè¯»&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;O_WRONLY&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;åªå†™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;O_RDWR&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å¯è¯»å¯å†™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;O_CREAT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºç©ºæ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;O_TRUNC&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­˜åœ¨åˆ™æˆªæ–­ï¼Œæ¸…ç©º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;O_APPEND&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¿½åŠ å†™å…¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;modeå‚æ•°æ§åˆ¶è¯»å†™æƒé™&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰umask&lt;/p&gt;
&lt;p&gt;è®¿é—®æƒé™ä¸º&lt;code&gt;mode &amp;amp; ~umask&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;close(int fd)å…³é—­æ–‡ä»¶ï¼ŒæˆåŠŸè¿”å›0ï¼Œå¤±è´¥-1&lt;/p&gt;
&lt;h2 id=&#34;è¯»å†™æ–‡ä»¶&#34;&gt;è¯»å†™æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;readå’Œwrite&lt;/p&gt;
&lt;p&gt;è¾“å…¥çš„sizeä¸ºunsigned longç±»å‹ï¼Œssize_tä¸ºlongç±»å‹ï¼Œå› ä¸ºreadå’Œwriteå‡½æ•°éœ€è¦è¿”å›-1&lt;/p&gt;
&lt;p&gt;readå’Œwriteè¯»å†™é‡åˆ°ä¸è¶³çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯»å–æ—¶é‡åˆ°EOF&lt;/li&gt;
&lt;li&gt;ä»ç»ˆç«¯è¯»æ–‡æœ¬è¡Œ&lt;/li&gt;
&lt;li&gt;è¯»å†™socketï¼šç½‘ç»œå»¶è¿Ÿå¯¼è‡´readå’Œwriteè¿”å›å€¼ä¸è¶³&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;rioåŒ…-robust-io&#34;&gt;RIOåŒ… Robust IO&lt;/h2&gt;
&lt;h2 id=&#34;è¯»å–æ–‡ä»¶å…ƒæ•°æ®&#34;&gt;è¯»å–æ–‡ä»¶å…ƒæ•°æ®&lt;/h2&gt;
&lt;p&gt;statå’Œfstatå‡½æ•°ï¼Œè¯»å–æ–‡ä»¶ä¿¡æ¯&lt;/p&gt;
&lt;h2 id=&#34;è¯»å–ç›®å½•å†…å®¹&#34;&gt;è¯»å–ç›®å½•å†…å®¹&lt;/h2&gt;
&lt;p&gt;opendirå‡½æ•°&lt;/p&gt;
&lt;h2 id=&#34;å…±äº«æ–‡ä»¶&#34;&gt;å…±äº«æ–‡ä»¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æè¿°ç¬¦è¡¨ï¼Œæ¯ä¸ªè¿›ç¨‹ä¹‹é—´ç‹¬ç«‹&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶è¡¨ï¼Œæ‰“å¼€æ–‡ä»¶çš„é›†åˆï¼Œæ‰€æœ‰è¿›ç¨‹å…±äº«ï¼ŒåŒ…å«æ–‡ä»¶ä½ç½®ï¼Œå¼•ç”¨è®¡æ•°ï¼ŒæŒ‡å‘vnodeè¡¨çš„æŒ‡é’ˆï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œæ“ä½œç³»ç»Ÿåˆ é™¤è¡¨é¡¹&lt;/li&gt;
&lt;li&gt;v-nodeï¼Œè¿›ç¨‹é—´å…±äº«ï¼ŒåŒ…å«statä¸­çš„ä¿¡æ¯ï¼Œst modeï¼Œst size&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ioé‡å®šå‘&#34;&gt;IOé‡å®šå‘&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ ‡å‡†è¾“å‡º&lt;/strong&gt;é‡å®šå‘åˆ°ç£ç›˜æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;è¦†ç›–å†™å…¥æ–‡ä»¶ä¹‹å‰çš„å†…å®¹&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨dup2å‡½æ•°ï¼Œå°†ç»ˆç«¯çš„è¾“å‡ºå…³é—­ï¼Œæ”¹ä¸ºç£ç›˜æ–‡ä»¶ï¼Œç£ç›˜æ–‡ä»¶å¼•ç”¨æ¬¡æ•°+1&lt;/p&gt;
&lt;h2 id=&#34;æ ‡å‡†io&#34;&gt;æ ‡å‡†IO&lt;/h2&gt;
&lt;p&gt;æ ‡å‡†IOå°†æ‰“å¼€çš„æ–‡ä»¶æ¨¡å‹åŒ–ä¸ºä¸€ä¸ªæµï¼Œå‡å°‘ç³»ç»Ÿçº§IOæ“ä½œçš„è°ƒç”¨&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡getcè°ƒç”¨IO readå‡½æ•°è¯»å–åˆ°ç¼“å†²åŒºï¼Œä¹‹åè°ƒç”¨å°†ç¼“å†²åŒºç¬¬ä¸€ä¸ªå­—èŠ‚è¿”å›ç»™åº”ç”¨ç¨‹åº&lt;/p&gt;
&lt;h2 id=&#34;é€‰å–ioå‡½æ•°é—®é¢˜&#34;&gt;é€‰å–IOå‡½æ•°é—®é¢˜&lt;/h2&gt;
&lt;p&gt;socketä¸­ä¸è¦ä½¿ç”¨æ ‡å‡†IOï¼Œå¯èƒ½ä¼šå¯¼è‡´å´©æºƒï¼Œä½¿ç”¨RIOå‡½æ•°/Unix IO&lt;/p&gt;</description>
        </item>
        <item>
        <title>ç¼–è¯‘åŸç†ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sun, 02 Jan 2022 10:33:48 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;p&gt;ç¼–è¯‘åŸç†ç¬”è®°ï¼Œè¯æ³•è¯­æ³•åˆ†æ&lt;/p&gt;
&lt;h1 id=&#34;è¯æ³•åˆ†æ&#34;&gt;è¯æ³•åˆ†æ&lt;/h1&gt;
&lt;h2 id=&#34;æœ‰ç©·è‡ªåŠ¨æœº-dfa&#34;&gt;æœ‰ç©·è‡ªåŠ¨æœº DFA&lt;/h2&gt;
&lt;p&gt;$f: K \times \sum \to K$æ˜¯ä¸€ä¸ªå•å€¼å‡½æ•°ï¼Œä»»ä½•è¾“å…¥ç¬¦å·éƒ½å”¯ä¸€çš„ç¡®å®šäº†ä¸‹ä¸€ä¸ªçŠ¶æ€&lt;/p&gt;
&lt;h2 id=&#34;ä¸ç¡®å®šçš„æœ‰ç©·è‡ªåŠ¨æœº-nfa&#34;&gt;ä¸ç¡®å®šçš„æœ‰ç©·è‡ªåŠ¨æœº NFA&lt;/h2&gt;
&lt;p&gt;è‡³å°‘ä¸€ä¸ªåˆæ€èŠ‚ç‚¹ï¼Œè‹¥å¹²ä¸ªç»ˆæ€èŠ‚ç‚¹
DFAæ˜¯NFAçš„ç‰¹ä¾‹&lt;/p&gt;
&lt;h2 id=&#34;å­é›†æ³•-nfaè½¬æ¢ä¸ºdfa&#34;&gt;å­é›†æ³• NFAè½¬æ¢ä¸ºDFA&lt;/h2&gt;
&lt;p&gt;å¯¹äºçŠ¶æ€é›†åˆ$I$ï¼Œå®šä¹‰ä¸¤ä¸ªè¿ç®—&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;é›†åˆ$I$çš„$\epsilon-Closure(I)$ï¼Œæ˜¯ä¸€ä¸ªçŠ¶æ€é›†$I$ä¸­çš„ä»»ä½•çŠ¶æ€ç»è¿‡ä»»æ„æ¡$\epsilon$å¼§èƒ½åˆ°è¾¾çš„çŠ¶æ€é›†åˆ
å› ä¸ºå½“è¾“å…¥ç¬¦å·ä¸ºç©ºæ—¶ï¼Œåˆ™è‡ªåŠ¨æœºåœç•™åœ¨åŸæ¥çš„ä½ç½®ä¸Šï¼Œæ‰€ä»¥æœ‰å…³ç³»$\forall S \in I \ \ , S \in \epsilon-Closure(I)$&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çŠ¶æ€é›†åˆ$I$çš„$a$å¼§è½¬æ¢ï¼Œè¡¨ç¤ºä¸º$move(I,a)$ï¼Œå®šä¹‰ä¸ºçŠ¶æ€é›†åˆJï¼Œå…¶ä¸­$J$æ˜¯æ‰€æœ‰é‚£äº›å¯ä»¥ä»$I$ä¸­çš„æŸä¸€çŠ¶æ€ç»è¿‡ä¸€æ¡$a$å¼§è€Œåˆ°è¾¾çš„çŠ¶æ€çš„å…¨ä½“
æœ‰å…³ç³»$\forall S_i \in I \ \ , move(I,a)=f(S_1,a)\bigcup f(S_2,a) \bigcup f(S_3,a)&amp;hellip;$
ç®—æ³•æµç¨‹ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;C&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;save&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;K_0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;epsilon&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Closure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;C&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;epsilon&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Closure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K_0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;C&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;have&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;visit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;n&#34;&gt;visit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Set&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nl&#34;&gt;U&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;epsilon&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Closure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Move&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;U&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;			&lt;span class=&#34;n&#34;&gt;C&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»è¿‡çŠ¶æ€é‡æ–°å‘½åå¯ä»¥å¾—åˆ°DFA&lt;/p&gt;
&lt;h2 id=&#34;dfaçš„åŒ–ç®€&#34;&gt;DFAçš„åŒ–ç®€&lt;/h2&gt;
&lt;p&gt;åŒ–ç®€ çš„DFAï¼šæ²¡æœ‰å¤šä½™çŠ¶æ€ï¼Œæ²¡æœ‰ä¸¤ä¸ªçŠ¶æ€æ˜¯äº’ç›¸ç­‰ä»·çš„ã€‚
DFAå¯ä»¥é€šè¿‡æ¶ˆé™¤æ— ç”¨çŠ¶æ€å’Œåˆå¹¶ç­‰ä»·çŠ¶æ€äºŒè½¬æ¢æˆä¸€ä¸ªä¸ä¹‹ç­‰ä»·çš„æœ€å°çŠ¶æ€çš„DFA&lt;/p&gt;
&lt;p&gt;æ— ç”¨çŠ¶æ€ï¼šä»å¼€å§‹çŠ¶æ€è§¦å‘ï¼Œä»»ä½•è¾“å…¥ä¸²éƒ½æ— æ³•åˆ°è¾¾
æˆ–è€…ä»è¿™ä¸ªçŠ¶æ€æ²¡æœ‰é€šè·¯åˆ°è¾¾ç»ˆæ€
![[Pasted image 20211230203930.png]]
å¦‚s4ï¼Œs6ï¼Œs8ï¼Œå¯ä»¥ç›´æ¥æ¶ˆé™¤&lt;/p&gt;
&lt;p&gt;DFAä¸­çš„çŠ¶æ€ç­‰ä»·æ¡ä»¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€è‡´æ€§æ¡ä»¶-çŠ¶æ€så’Œtå¿…é¡»åŒæ—¶ä¸ºå¯æ¥å—çŠ¶æ€æˆ–ä¸å¯æ¥å—çŠ¶æ€&lt;/li&gt;
&lt;li&gt;è”“å»¶æ€§æ¡ä»¶-å¯¹äºæ‰€æœ‰è¾“å…¥ç¬¦å·ï¼ŒçŠ¶æ€så’Œtå¿…é¡»è½¬æ¢åˆ°ç­‰ä»·çš„çŠ¶æ€&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ†å‰²æ³•åˆ†è§£DFAçŠ¶æ€ï¼š
æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆå°†ç»ˆæ€å’Œéç»ˆæ€åˆ†å‰²ï¼Œä½œä¸ºä¸¤ä¸ªå­é›†ï¼Œä½œä¸ºä¸€ä¸ªåˆ’åˆ†&lt;/li&gt;
&lt;li&gt;åœ¨åˆ’åˆ†ä¸­å¯¹æ¯ä¸ªå­é›†åŠ ä¸Šå¯è¾“å…¥å­—ç¬¦ï¼Œå°†å¯åŒºåˆ«çš„çŠ¶æ€æ‹†åˆ†ï¼Œå¾—åˆ°æ–°çš„åˆ’åˆ†&lt;/li&gt;
&lt;li&gt;é‡å¤ç›´åˆ°åˆ’åˆ†ä¸å¯ä»¥å†åˆ†å‰²&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŒ–ç®€åçš„DFAä¾¿äºåœ¨è®¡ç®—æœºä¸Šå®ç°&lt;/p&gt;
&lt;h2 id=&#34;ç”±dfaåŒ–ç®€ä¸ºæ­£è§„å¼&#34;&gt;ç”±DFAåŒ–ç®€ä¸ºæ­£è§„å¼&lt;/h2&gt;
&lt;p&gt;å¾ˆç®€å•
ç¼©ç¼©ç¼©&lt;/p&gt;
&lt;h2 id=&#34;ç”±æ­£è§„å¼ç”Ÿæˆnfa&#34;&gt;ç”±æ­£è§„å¼ç”ŸæˆNFA&lt;/h2&gt;
&lt;p&gt;$L(G)$è¡¨ç¤ºæ–‡æ³•Gäº§ç”Ÿçš„è¯­è¨€çš„é›†åˆ
$L(G1) = L(G2)$ åˆ™ä¸¤ä¸ªæ–‡æ³•ç­‰ä»·
åæ­£å°±æ˜¯æ„é€ ä¸€ä¸ªç­‰ä»·çš„$\mathbb{NFA}$&lt;/p&gt;
&lt;h3 id=&#34;è¯­æ³•åˆ¶å¯¼&#34;&gt;è¯­æ³•åˆ¶å¯¼&lt;/h3&gt;
&lt;p&gt;æŒ‰ç…§è¯­æ³•ç»“æ„æ„é€ 
å°†æ­£è§„å¼åˆ†è§£ä¸ºå­è¡¨è¾¾å¼
Â 
é—­åŒ…ï¼šç»ˆæ€è¾“å…¥epsilonåˆ°è¾¾åˆæ€
åˆ†è§£æ–¹å¼ä¸å”¯ä¸€
å¯ä»¥ä»å¤´å¼€å§‹ï¼Œä¹Ÿå¯ä»¥åˆ†éƒ¨è¿›è¡Œ&lt;/p&gt;
&lt;p&gt;å¤„ç†æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚$r_1 r_2$ï¼Œé¡ºåºæ‹¼æ¥ä¸¤ä¸ªNFA&lt;/li&gt;
&lt;li&gt;å¦‚$r1^*$å¤„ç†é—­åŒ…ï¼Œç»ˆæ€è¾“å…¥epsiloné“¾æ¥åˆ°åˆæ€&lt;/li&gt;
&lt;li&gt;å¦‚$r_1|r_2$ï¼Œç”±åˆæ€è¾“å…¥epsilonåˆ°ä¸¤ä¸ªNFAï¼Œç”±ä¸¤ä¸ªNFAè¾“å…¥epsilonåˆ°è¾¾ç»ˆæ€&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;è¯­æ³•åˆ†æ&#34;&gt;è¯­æ³•åˆ†æ&lt;/h1&gt;
&lt;h2 id=&#34;è‡ªé¡¶å‘ä¸‹&#34;&gt;è‡ªé¡¶å‘ä¸‹&lt;/h2&gt;
&lt;p&gt;æ–‡æ³•ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¯ä¸ªäº§ç”Ÿå¼å³éƒ¨éƒ½ç”±ç»ˆç»“ç¬¦å·å¼€å§‹&lt;/li&gt;
&lt;li&gt;è‹¥ä¸¤ä¸ªäº§ç”Ÿå¼éƒ½ç”±ç›¸åŒçš„å·¦éƒ¨ï¼Œå³éƒ¨éƒ½ç”±ä¸åŒçš„ç»ˆç»“ç¬¦å¼€å§‹
åˆ†æè¿‡ç¨‹æ˜¯å”¯ä¸€çš„&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;FIRSTé›†
$FIRST(\alpha)={ä»¥\alphaä¸ºå·¦éƒ¨çš„ï¼Œäº§ç”Ÿå¼å³éƒ¨çš„ç¬¬ä¸€ä¸ªéç»ˆç»“ç¬¦é›†åˆ}$
ä¸ºaçš„å¼€å§‹ç¬¦å·é›†&lt;/p&gt;
&lt;p&gt;FOLLOWé›†
å¯¹äºä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼ŒSæ˜¯å¼€å§‹ç¬¦å·
$FOLLOW(A)={çŠ¶æ€Aåè·Ÿç¬¦å·}$
è‹¥Aå¯ä»¥å¼•å¯¼ç»ˆæ­¢epsilon ï¼Œåˆ™åŠ å…¥#åˆ°FOLLOWé›†&lt;/p&gt;
&lt;h4 id=&#34;æ„é€ ç®—æ³•&#34;&gt;æ„é€ ç®—æ³•&lt;/h4&gt;
&lt;p&gt;å¯¹æ–‡æ³•ä¸­æ¯ä¸€éç»ˆç»“ç¬¦Aï¼Œæ„é€ FOLLOW(A)çš„ç®—æ³•å¦‚ä¸‹ï¼šåå¤ä½¿ç”¨å¦‚ä¸‹è§„åˆ™ï¼Œç›´è‡³FOLLOWé›†ä¸å†å¢å¤§ä¸ºæ­¢ã€‚
â‘´è‹¥Aæ˜¯æ–‡æ³•çš„å¼€å§‹ç¬¦å·,åˆ™æŠŠè¾“å…¥ç»“æŸç¬¦ï¼ƒåŠ å…¥FOLLOW(A)ä¸­ï¼›
â‘µè‹¥Bâ†’Î±AaÎ²,aæ˜¯ç»ˆç»“ç¬¦,åˆ™æŠŠaåŠ å…¥FOLLOW(A)ä¸­ï¼›
â‘¶è‹¥Bâ†’Î±AXÎ²,Xæ˜¯éç»ˆç»“ç¬¦,åˆ™æŠŠFIRST(XÎ²)åŠ å…¥FOLLOW(A)ä¸­ï¼›
â‘·è‹¥Bâ†’Î±Aæˆ–Bâ†’Î±AÎ²,ä¸”Î²å¯ä»¥æ¨å¯¼è‡³Îµï¼Œåˆ™æŠŠFOLLOW(B)åŠ å…¥FOLLOW(A)ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;SELECTé›†
$SELECT(A  \to a)=(FIRST(a)-{\epsilon})\bigcup FOLLOW(A)$&lt;/p&gt;
&lt;p&gt;LL(1)æ–‡æ³•ï¼šç¬¬ä¸€ä¸ªLè¡¨ç¤ºè‡ªé¡¶å‘ä¸‹åˆ†ææ˜¯ä»å·¦åˆ°å³æ‰«æè¾“å…¥ä¸²ï¼Œç¬¬äºŒä¸ªLè¡¨æ˜åˆ†æè¿‡ç¨‹ä¸­å°†ç”¨æœ€å·¦æ¨å¯¼ï¼Œ1è¡¨æ˜åªéœ€è¦å‘å³çœ‹ä¸€ä¸ªç¬¦å·ä¾¿å¯ä»¥å†³å®šå¦‚ä½•æ¨å¯¼ã€‚
å……è¦æ¡ä»¶:
å¯¹äºæ¯ä¸ªéç»ˆç»“ç¬¦Aï¼Œçš„ä¸¤ä¸ªä¸åŒäº§ç”Ÿå¼
$SELECT(A \to \alpha)\bigcap SELECT(A \to \beta)=\varnothing$&lt;/p&gt;
&lt;h2 id=&#34;éll1æ–‡æ³•åˆ°ll1æ–‡æ³•çš„ç­‰ä»·è½¬æ¢&#34;&gt;éLL(1)æ–‡æ³•åˆ°LL(1)æ–‡æ³•çš„ç­‰ä»·è½¬æ¢&lt;/h2&gt;
&lt;p&gt;LL(1)æ–‡æ³•çš„æ€§è´¨ï¼š
â‘  LL(1)æ–‡æ³•æ˜¯æ— äºŒä¹‰æ€§çš„ï¼›
â‘¡ LL(1)æ–‡æ³•ä¸å«å·¦é€’å½’ï¼›
â‘¢ LL(1)æ–‡æ³•æ²¡æœ‰å…¬å…±å·¦å› å­ã€‚&lt;/p&gt;
&lt;p&gt;æ¶ˆé™¤å·¦é€’å½’
æ¶ˆé™¤å›æº¯ï¼šæå–å·¦å…¬å› å­
æ”¹é€ æˆLL1æ–‡æ³•&lt;/p&gt;
&lt;h3 id=&#34;æ¶ˆé™¤ç›´æ¥å·¦é€’å½’&#34;&gt;æ¶ˆé™¤ç›´æ¥å·¦é€’å½’ï¼š&lt;/h3&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š
Aâ†’AÎ±|Î²
å¯¹Aå¼•å…¥ä¸€ä¸ªæ–°çš„éç»ˆç»“ç¬¦Aâ€²ï¼ŒæŠŠä¸Šå¼æ”¹å†™ä¸ºï¼š
A â†’Î²Aâ€²        &lt;br&gt;
Aâ€²â†’Î±Aâ€²|Îµ
ä¾‹2ï¼š
Eâ†’E +T | T
Tâ†’T * F | F
Fâ†’i |ï¼ˆEï¼‰
æ”¹é€ ä¸º
Eâ†’TEâ€²
Eâ€²â†’+T Eâ€²|Îµ
Tâ†’FT â€²
Tâ€²â†’* FTâ€²|Îµ
Fâ†’i |ï¼ˆEï¼‰&lt;/p&gt;
&lt;h3 id=&#34;æ¶ˆé™¤é—´æ¥å·¦é€’å½’&#34;&gt;æ¶ˆé™¤é—´æ¥å·¦é€’å½’&lt;/h3&gt;
&lt;p&gt;æŠŠå¼å­å¸¦å…¥ï¼Œç„¶åæŒ‰ç…§æ¶ˆé™¤ç›´æ¥å·¦é€’å½’çš„æ–¹æ³•å»æ¶ˆé™¤
S â†’ AÎ±|Î²      â‘´
A â†’ SÎ³           â‘µ
å¾—åˆ°
S â†’ SÎ³Î±|Î²     â‘¶
æ¶ˆé™¤å·¦é€’å½’
S â†’ Î²Sâ€²
S â€²â†’Î³Î±Sâ€²|Îµ&lt;/p&gt;</description>
        </item>
        <item>
        <title>ã€æ“ä½œç³»ç»Ÿã€‘ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º</title>
        <link>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/</link>
        <pubDate>Fri, 10 Dec 2021 21:19:54 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/</guid>
        <description>&lt;p&gt;è®²è§£æœºå™¨ä»£ç ä»¥åŠæ±‡ç¼–&lt;/p&gt;
&lt;p&gt;TODOäº†ï¼Œæœ‰ä¸ªbomb lab&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€æ“ä½œç³»ç»Ÿã€‘ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç†</title>
        <link>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/</link>
        <pubDate>Fri, 10 Dec 2021 13:02:03 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/</guid>
        <description>&lt;p&gt;æœ¬ç« ä¸ºCSAPP Ch-2çš„è¯»ä¹¦ç¬”è®°ï¼Œå¤ä¹ äº†æ•°æ®çš„å­˜å‚¨æ–¹å¼&lt;/p&gt;
&lt;h1 id=&#34;ä¿¡æ¯å­˜å‚¨&#34;&gt;ä¿¡æ¯å­˜å‚¨&lt;/h1&gt;
&lt;p&gt;æœ€å°å¯å¯»å€å†…å­˜å•ä½ -å­—èŠ‚byte ä¸€èˆ¬ä¸º8ä½çš„å—&lt;/p&gt;
&lt;p&gt;å†…å­˜è¢«è§†ä¸ºä¸€ä¸ªå¾ˆå¤§çš„å­—èŠ‚æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è™šæ‹Ÿå†…å­˜ï¼Œæ¯ä¸ªå­—èŠ‚ç”¨åœ°å€æ ‡è¯†&lt;/p&gt;
&lt;p&gt;åœ°å€çš„é›†åˆä¸ºè™šæ‹Ÿåœ°å€ç©ºé—´&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿå†…å­˜ä¸­åŒ…å«ç¨‹åºçš„æ•°æ®ï¼ŒæŒ‡ä»¤ï¼Œæ§åˆ¶ä¿¡æ¯&lt;/p&gt;
&lt;h2 id=&#34;åå…­è¿›åˆ¶è¡¨ç¤º&#34;&gt;åå…­è¿›åˆ¶è¡¨ç¤º&lt;/h2&gt;
&lt;p&gt;è·³&lt;/p&gt;
&lt;h2 id=&#34;å­—æ•°æ®å¤§å°&#34;&gt;å­—æ•°æ®å¤§å°&lt;/h2&gt;
&lt;p&gt;å­—é•¿ä¸ºæ•°æ®æ ‡ç§°å¤§å°&lt;/p&gt;
&lt;p&gt;å­—é•¿å†³å®šäº†è™šæ‹Ÿåœ°å€ç©ºé—´çš„æœ€å¤§å¤§å°ï¼Œå­—é•¿ä¸ºwçš„æœºå™¨è™šæ‹Ÿåœ°å€èŒƒå›´æ˜¯[0, $2^w-1$]&lt;/p&gt;
&lt;p&gt;æœ€å¤šè®¿é—®$2^w$ä¸ªå­—èŠ‚&lt;/p&gt;
&lt;p&gt;32ä½å’Œ64ä½&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gcc -m32&lt;/code&gt;å¯ä»¥ç¼–è¯‘32ä½ç¨‹åº&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gcc -m64&lt;/code&gt;å¯ä»¥ç¼–è¯‘64ä½ç¨‹åº&lt;/p&gt;
&lt;h2 id=&#34;å¯»å€å’Œå­—èŠ‚é¡ºåº&#34;&gt;å¯»å€å’Œå­—èŠ‚é¡ºåº&lt;/h2&gt;
&lt;p&gt;æœ€ä½æœ‰æ•ˆå­—èŠ‚åœ¨å‰-å°ç«¯æ³•&lt;/p&gt;
&lt;p&gt;æœ€é«˜æœ‰æ•ˆå­—èŠ‚åœ¨å‰-å¤§ç«¯æ³•&lt;/p&gt;
&lt;p&gt;éƒ¨åˆ†cpuæ”¯æŒåŒç«¯æ³• ï¼Œä½†æ˜¯æ“ä½œç³»ç»Ÿåªæ”¯æŒå°ç«¯æ¨¡å¼ï¼ˆiOS &amp;amp; Androidï¼‰&lt;/p&gt;
&lt;h3 id=&#34;å¤§å°ç«¯çš„å½±å“&#34;&gt;å¤§å°ç«¯çš„å½±å“&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ç½‘ç»œæ”¶å‘ç»Ÿä¸€é¡ºåº&lt;/li&gt;
&lt;li&gt;æ±‡ç¼–é˜…è¯»å­—èŠ‚é¡ºåº&lt;/li&gt;
&lt;li&gt;æŒ‰å­—èŠ‚æ‰“å°&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å­—ç¬¦ä¸²è¡¨ç¤º&#34;&gt;å­—ç¬¦ä¸²è¡¨ç¤º&lt;/h2&gt;
&lt;p&gt;ä»¥nullç»“å°¾çš„å­—ç¬¦æ•°ç»„&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªå­—ç¬¦ä½¿ç”¨ASCIIç ï¼Œåœ¨å„ä¸ªç³»ç»Ÿéƒ½ç›¸åŒï¼Œå› æ­¤æ–‡æœ¬æ•°æ®çš„è¡¨ç¤ºæœ‰æ›´é«˜çš„å¹³å°ç‹¬ç«‹æ€§ï¼ˆthanäºŒè¿›åˆ¶æ•°æ®ï¼‰&lt;/p&gt;
&lt;p&gt;ç»ˆæ­¢å­—ç¬¦&lt;code&gt;0x00&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;UTF-8ï¼Œæ¯ä¸ªå­—ç¬¦ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚æ¥ç¼–ç &lt;/p&gt;
&lt;h2 id=&#34;å¸ƒå°”ä»£æ•°&#34;&gt;å¸ƒå°”ä»£æ•°&lt;/h2&gt;
&lt;p&gt;null&lt;/p&gt;
&lt;h2 id=&#34;ä½è¿ç®—&#34;&gt;ä½è¿ç®—&lt;/h2&gt;
&lt;p&gt;æ©ç è¿ç®—&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ©ç ï¼šè¡¨ç¤ºä»ä¸€ä¸ªå­—ä¸­é€‰å‡ºæ¥ä½çš„é›†åˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;æ•´æ•°è¡¨ç¤º&#34;&gt;æ•´æ•°è¡¨ç¤º&lt;/h1&gt;
&lt;p&gt;è·³&lt;/p&gt;</description>
        </item>
        <item>
        <title>æ“ä½œç³»ç»Ÿ</title>
        <link>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</link>
        <pubDate>Thu, 09 Dec 2021 19:58:54 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</guid>
        <description>&lt;p&gt;CSAPPè¯»ä¹¦ç¬”è®° Ch-1 å®è§‚çœ‹ä¸€çœ‹æ“ä½œç³»ç»Ÿï¼Œå¾ˆå¤šçŸ¥è¯†ä¹‹å‰ç¡®å®æ²¡äº†è§£åˆ°ï¼Œå€¼å¾—ä¸€è¯»&lt;/p&gt;
&lt;h1 id=&#34;ch1&#34;&gt;Ch1&lt;/h1&gt;
&lt;p&gt;æºç¨‹åº -&amp;gt; é¢„å¤„ç†å™¨ (cpp) &amp;mdash;hello.i&amp;mdash;&amp;gt; ç¼–è¯‘å™¨(ccl) &amp;mdash;&amp;ndash;hello.s&amp;mdash;&amp;ndash;&amp;gt; æ±‡ç¼–å™¨(as) &amp;mdash;-hello.o(binary) with printf.o&amp;mdash;&amp;gt; è¿æ¥å™¨ &amp;mdash;&amp;mdash;-&amp;gt; å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸»å­˜ï¼šä¸´æ—¶å­˜å‚¨è®¾å¤‡ DRAMç»„æˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿›ç¨‹ï¼šå¹¶å‘æ‰§è¡Œå¤šä¸ªè¿›ç¨‹-ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿›ç¨‹è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ &lt;strong&gt;ä¸Šä¸‹æ–‡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šPCå’Œå¯„å­˜å™¨æ–‡ä»¶çš„å½“å‰å€¼ï¼Œä¸»å­˜çš„å†…å®¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¹¶å‘æ‰§è¡Œ ï¼šä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤å’Œå¦ä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤äº¤é”™æ‰§è¡Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çº¿ç¨‹ï¼šè¿›ç¨‹æ˜¯ç”±å¤šä¸ªçº¿ç¨‹çš„æ‰§è¡Œå•å…ƒç»„æˆ ï¼Œè¿è¡Œåœ¨è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå…±äº«åŒæ ·çš„ä»£ç å’Œå…¨å±€æ•°æ®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤šçº¿ç¨‹å…±äº«æ•°æ®æ¯”å¤šè¿›ç¨‹å®¹æ˜“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è™šæ‹Ÿå†…å­˜ï¼šå¯¹äºè¿›ç¨‹ï¼Œæä¾›è™šæ‹Ÿåœ°å€ç©ºé—´&lt;/p&gt;
&lt;p&gt;åŒ…å« ç¨‹åºä»£ç å’Œæ•°æ®ï¼Œå †malloc å’Œfreeï¼Œå…±äº«åº“soï¼Œæ ˆï¼Œå†…æ ¸è™šæ‹Ÿå†…å­˜ä¸ºå†…æ ¸ä¿ç•™ï¼Œä¸å…è®¸åº”ç”¨ç¨‹åºè¯»å†™è¿™ä¸ªåŒºåŸŸ&lt;/p&gt;
&lt;p&gt;åŸºæœ¬æ€æƒ³ï¼šä¸€ä¸ªè¿›ç¨‹è™šæ‹Ÿå†…å­˜çš„å†…å®¹å­˜å‚¨åœ¨ç£ç›˜ï¼Œåˆ©ç”¨ä¸»å­˜åº§ä½ç£ç›˜çš„é«˜é€Ÿç¼“å­˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹¶å‘å’Œå¹¶è¡Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶å‘ï¼šåŒæ—¶å…·æœ‰å¤šä¸ªæ´»åŠ¨çš„ç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œï¼šç”¨å¹¶å‘æ˜¯ä¸€ä¸ªç³»ç»Ÿè¿è¡Œçš„æ›´å¿«&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹çº§å¹¶å‘ï¼šåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œå¤šä¸ªæ§åˆ¶æµ&lt;/li&gt;
&lt;li&gt;æŒ‡ä»¤çº§å¹¶è¡Œï¼šæµæ°´çº¿æŠ€æœ¯&lt;/li&gt;
&lt;li&gt;å•æŒ‡ä»¤ï¼Œå¤šæ•°æ®å¹¶è¡Œ SIMDå¹¶è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿçš„æŠ½è±¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶æ˜¯å¯¹I/Oè®¾å¤‡çš„æŠ½è±¡&lt;/li&gt;
&lt;li&gt;è™šæ‹Ÿå†…å­˜æ˜¯å¯¹ä¸»å­˜å’Œç£ç›˜çš„æŠ½è±¡&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹æ˜¯å¯¹å¤„ç†å™¨ï¼Œä¸»å­˜å’ŒIOè®¾å¤‡çš„æŠ½è±¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç½‘ç»œå¯ä»¥çœ‹åšä¸€ç§IOè®¾å¤‡&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        <item>
        <title>Bilibiliè§†é¢‘ç½‘ç«™æ’è¡Œæ¦œè¯„åˆ†çš„çº¿æ€§å›å½’åˆ†æ</title>
        <link>https://blog.ipandai.club/p/bilibili%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E6%8E%92%E8%A1%8C%E6%A6%9C%E8%AF%84%E5%88%86%E7%9A%84%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/</link>
        <pubDate>Fri, 02 Jul 2021 14:05:48 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/bilibili%E8%A7%86%E9%A2%91%E7%BD%91%E7%AB%99%E6%8E%92%E8%A1%8C%E6%A6%9C%E8%AF%84%E5%88%86%E7%9A%84%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/</guid>
        <description>&lt;p&gt;Bilibiliï¼ˆå“”å“©å“”å“©ï¼‰æ˜¯å½“ä¸‹æœ€çƒ­é—¨çš„è§†é¢‘æ’­æ”¾ç½‘ç«™ï¼Œäººä»¬åœ¨è¯¥ç½‘ç«™å¯¹è§†é¢‘è¿›è¡Œæµè§ˆï¼Œä¼šæ ¹æ®è‡ªå·±å–œå¥½å¯¹è§†é¢‘è¿›è¡Œç‚¹èµã€æŠ•å¸ã€æ”¶è—ã€åˆ†äº«ã€å›å¤ç­‰æ“ä½œï¼ŒBilibiliåŒæ—¶è¿˜æœ‰ä¸€ä¸ªæ’è¡Œæ¦œæœºåˆ¶ï¼Œè®°å½•äº†è¿‘æœŸæ¯”è¾ƒçƒ­é—¨çš„è§†é¢‘ï¼Œå¹¶ç»™å‡ºäº†ä¸€ä¸ªè¯„åˆ†ï¼Œæ’è¡Œæ¦œçš„æ’åºè§„åˆ™å³æ ¹æ®è¯¥è¯„åˆ†ï¼Œæœ¬æ–‡å°†æ ¹æ®è¿™äº›æ’è¡Œæ¦œè§†é¢‘çš„å„é¡¹æ•°æ®ï¼Œè¿›è¡Œçº¿æ€§å›å½’åˆ†æï¼Œç»“åˆå®é™…æƒ…å†µæ‰¾å‡ºå¯¹è¯„åˆ†å½±å“æœ€å¤§çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;Bilibiliæä¾›äº†è·å–æ’è¡Œæ¦œæ•°æ®çš„APIï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¯¥APIè·å–å®æ—¶çš„æ’è¡Œæ¦œæ•°æ®ï¼Œè·å–çš„æ•°æ®ä¸ºjsonæ ¼å¼ï¼Œç»è¿‡è§£æï¼Œå·²å°†æ•°æ®ä¿å­˜è‡³Bilibili.csvæ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡çš„æ€è·¯å³ä¸ºå¤šå…ƒçº¿æ€§å›å½’ï¼Œåœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œçº¿æ€§å›å½’ï¼ˆlinear regressionï¼‰æ˜¯åˆ©ç”¨ç§°ä¸ºçº¿æ€§å›å½’æ–¹ç¨‹çš„æœ€å°äºŒä¹˜å‡½æ•°å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå˜é‡å’Œå› å˜é‡ä¹‹é—´å…³ç³»è¿›è¡Œå»ºæ¨¡çš„ä¸€ç§å›å½’åˆ†æã€‚è¿™ç§å‡½æ•°æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªç§°ä¸ºå›å½’ç³»æ•°çš„æ¨¡å‹å‚æ•°çš„çº¿æ€§ç»„åˆã€‚åªæœ‰ä¸€ä¸ªè‡ªå˜é‡çš„æƒ…å†µç§°ä¸ºç®€å•å›å½’ï¼Œå¤§äºä¸€ä¸ªè‡ªå˜é‡æƒ…å†µçš„å«åšå¤šå…ƒå›å½’ï¼ˆmultivariable linear regressionï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å®Œæˆäº†å¯¹å„ä¸ªè‡ªå˜é‡æƒé‡çš„è®¡ç®—ï¼Œæ‰¾å‡ºäº†å¯¹è¯„åˆ†å½±å“æƒé‡æœ€é«˜çš„å› ç´ ï¼Œå¹¶å¾—åˆ°äº†éªŒè¯ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æ•°æ®è·å–&#34;&gt;æ•°æ®è·å–&lt;/h1&gt;
&lt;p&gt;åœ¨å“”å“©å“”å“©å®˜ç½‘é¦–é¡µå¤„è·å–æ’è¡Œæ¦œä¿¡æ¯çš„APIï¼Œå¾—åˆ°ä¸º&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://api.bilibili.com/x/web-interface/ranking/v2?rid=0&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://api.bilibili.com/x/web-interface/ranking/v2?rid=0&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¯·æ±‚å‚æ•°ä¸º&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;rid åˆ†ç±»ï¼Œ0ä»£è¡¨å…¨éƒ¨åˆ†ç±»&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿”å›æ ¼å¼ä¸ºjsonæ ¼å¼ï¼Œjsonä¸­çš„dataå­—æ®µä¸ºè§†é¢‘ä¿¡æ¯æ•°ç»„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢è¯·æ±‚æ¬¡æ•°è¿‡å¤šå¢åŠ æœåŠ¡å™¨å‹åŠ›ï¼Œå¯¼è‡´æœ¬æœºIPç¦æ­¢è®¿é—®å“”å“©å“”å“©ï¼Œå…ˆå°†è¯·æ±‚çš„responseä¿å­˜åˆ°data.txtæ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨pythonçš„jsonåŒ…è¿›è¡Œè§£æ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;aid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;375696064&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;videos&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;tid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;17&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;tname&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;å•æœºæ¸¸æˆ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;copyright&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;pic&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://i0.hdslb.com/bfs/archive/85005893d4c4959ff096d6fb061040e223842bcb.jpg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;å²ä¸Šæœ€éªšé­”æ³•å¸ˆï¼(ç¬¬äºŒé›†)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;pubdate&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1621566911&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;ctime&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1621566912&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;desc&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;æœ¬æœŸè¯·åˆ°äº†Warmaå‚ä¸é…éŸ³ï¼é¼“æŒï¼ï¼ï¼ï¼ï¼\næ¸¸æˆï¼šDarkside Detective\nç¬¬ä¸€é›†ï¼šBV1M64y1m7gA\nå„ä½å¦‚æœçœ‹å¾—å¼€å¿ƒï¼Œå¸Œæœ›ä¸‰è¿æ”¯æŒä¸€ä¸‹ï¼&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;state&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;duration&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;658&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;mission_id&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;24025&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;rights&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;bp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;elec&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;download&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;movie&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;pay&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;hd5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;no_reprint&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;autoplay&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;ugc_pay&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;is_cooperation&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;ugc_pay_preview&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;no_background&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;owner&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;mid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;546195&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;è€ç•ªèŒ„&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;face&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://i0.hdslb.com/bfs/face/bc5ca101313d4db223c395d64779e76eb3482d60.jpg&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;stat&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;aid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;375696064&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;view&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1149043&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;danmaku&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7300&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;reply&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3278&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;favorite&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;37490&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;coin&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;98319&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;share&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1780&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;now_rank&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;his_rank&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;like&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;210211&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;dislike&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;dynamic&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ç”¨é­”æ³•å‡»è´¥é­”æ³•&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;cid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;341808079&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;dimension&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;width&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1920&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;height&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1080&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;rotate&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;short_link&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://b23.tv/BV1jo4y117Vf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;short_link_v2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://b23.tv/BV1jo4y117Vf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;bvid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;BV1jo4y117Vf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2446535&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é€šè¿‡è§£æjsonæ ¼å¼æ–‡ä»¶å¹¶æ•´ç†å¾—åˆ°bilibili.csv&lt;/p&gt;
&lt;p&gt;æ•°æ®å¤„ç†çš„ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pandas&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;urllib.request&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;urlopen&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;urllib&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;requests&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;json&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getDataFromFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;./data.txt&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;raise&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;TypeError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;file not exist&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;./data.txt&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;headers&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;User-Agent&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.8    5 Safari/537.36&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://api.bilibili.com/x/web-interface/ranking/v2?rid=0&amp;amp;type=all&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;getDataFromFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;jsonData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;loads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æ ‡é¢˜&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;author&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# upğŸ·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æ’­æ”¾é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;danmu&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# å¼¹å¹•æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;coins&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æŠ•å¸&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;share&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# åˆ†äº«&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;like&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# ç‚¹èµ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;score&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# åˆ†æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;favor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æ”¶è—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;reply&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# è¯„è®º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;rank&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æ’å&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;cnt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;104&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;videoData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jsonData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;list&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;score&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;score&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;author&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;owner&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;videoData&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;stat&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;danmu&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;danmaku&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;view&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;rank&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;his_rank&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;reply&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;reply&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;favor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;favorite&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;coins&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;coin&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;share&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;share&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;like&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;videoStat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;like&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;cnt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cnt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;outfile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DataFrame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;author&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;author&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;rank&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rank&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;score&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;view&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;view&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;coins&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;coins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;favorite&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;favor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;reply&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reply&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;danmu&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;danmu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;outfile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_csv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;bilibili2.csv&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;æ•°æ®åˆ†æ&#34;&gt;æ•°æ®åˆ†æ&lt;/h1&gt;
&lt;p&gt;æ•°æ®åŠ è½½&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pandas&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pd&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# csvæ–‡ä»¶è¯»å†™åˆ†æ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;numpy&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;np&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# çº¿æ€§ä»£æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;plt&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# åˆ¶å›¾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;read_csv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;./bilibili.csv&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index_col&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¯„åˆ†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;score&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;score&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ’­æ”¾é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;view&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;view&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŠ•å¸&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;coins&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;coins&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ”¶è—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;favor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;favorite&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¯„è®º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;reply&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;reply&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç‚¹èµ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;like&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;like&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¼¹å¹•æ•°é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;danmu&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;danmu&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ†äº«æ¬¡æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;share&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;share&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»˜åˆ¶å›¾åƒï¼Œè§‚å¯Ÿæ•°æ®ä¹‹å‰çš„å…³ç³»
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qfcn&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qfcn.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qfcn.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qW1s&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qW1s.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qW1s.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qhXq&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qhXq.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qhXq.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qRpj&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qRpj.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qRpj.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qghQ&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qghQ.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qghQ.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2q5n0&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2q5n0.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2q5n0.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qIBV&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qIBV.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qIBV.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qo7T&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qo7T.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qo7T.png&#34;
	
	
&gt;&lt;/a&gt;
ç”±å›¾åƒå¯ä»¥å¾—å‡ºï¼Œbç«™ç»¼åˆæ‰“åˆ†çš„è¯„åˆ†å’Œå„ä¸ªæ•°æ®ä¹‹å‰æœ‰ä¸€å®šçš„ç›¸å…³æ€§ï¼Œä¸»è¦ä¸ºæ­£ç›¸å…³ã€‚&lt;/p&gt;
&lt;h1 id=&#34;å¤šå…ƒçº¿æ€§å›å½’&#34;&gt;å¤šå…ƒçº¿æ€§å›å½’&lt;/h1&gt;
&lt;p&gt;æˆ‘ä»¬çš„ç›®çš„æ˜¯å¾—åˆ°
$f(x_i) = w^{T} x_i + b $
ç±»ä¼¼çš„ï¼Œä½¿ç”¨æœ€å°äºŒä¹˜æ³•ä¼°è®¡wå’Œb&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨æ±‚è§£å…¬å¼
$ \hat w^{} = (X^{T}X)^{-1}X^{T}y$&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è®¡ç®—ç³»æ•°çŸ©é˜µw-hat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;linalg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–bçŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–wç³»æ•°çŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;çœ‹æŸ¥wçš„å€¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.53588246&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.01063732&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;5.79443124&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;4.91889223&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;17.51523907&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.73019387&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.89537493&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œå‘ç°wç³»æ•°çŸ©é˜µä¸­å‡ºç°äº†è´Ÿå€¼ï¼Œç»æ£€æŸ¥å‘ç°è¯¥é¡¹ç›®å¯¹åº”çš„è‡ªå˜é‡ä¸ºlikeå’Œreplyï¼Œå³è§†é¢‘çš„ç‚¹èµæ¬¡æ•°å’Œè¯„è®ºæ•°ï¼Œè¿™ä¸å®é™…æƒ…å†µæ˜¯ä¸ç¬¦çš„ï¼ŒçŒœæµ‹æ˜¯å› ä¸ºè¯¥è‡ªå˜é‡å¯¹ç»“æœçš„å½±å“è¿‡å°ï¼Œå¯¼è‡´é¢„æµ‹å‡ºç°äº†åå·®ï¼ŒåŒæ—¶å‘ç°å¼¹å¹•æ•°é‡å¯¹è§†é¢‘è¯„åˆ†çš„å½±å“è¿‡å¤§ï¼Œè¿œè¶…äºå…¶ä»–å‚æ•°ï¼Œæ˜¾ç„¶ä¸å®é™…ç”Ÿæ´»ä¸ç¬¦ï¼Œå¹¶ä¸”ä½œä¸ºå¯¹è§†é¢‘è´¨é‡çš„ä¼°è®¡ï¼Œå¼¹å¹•æ•°ä¹Ÿçš„ç¡®ä¸èƒ½ä½œä¸ºä¸€ä¸ªé‡è¦çš„å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤æˆ‘ä»¬å¯¹å¼¹å¹•æ•°è¿›è¡Œå‰”é™¤é‡æ–°è¿›è¡Œæ‹Ÿåˆã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–è‡ªå˜é‡çŸ©é˜µï¼Œå‰”é™¤å¼¹å¹•æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:,[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–å› å˜é‡çŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reshape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç”Ÿæˆè®¾è®¡çŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;om&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ones&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reshape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hstack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;om&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è®¡ç®—ç³»æ•°çŸ©é˜µw-hat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;linalg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–bçŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–wç³»æ•°çŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¾—åˆ°wçš„å€¼ä¸º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.60269881&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.82157809&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;5.35461617&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.04630747&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;3.9125348&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.33063835&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è§‚å¯Ÿå‘ç°æ­¤æ—¶å„é¡¹å‚æ•°å¯¹äºè¯„åˆ†çš„å½±å“å·²ç»è¾ƒä¸ºæ¥è¿‘æ­£å¸¸æ°´å¹³ã€‚ä½†æ˜¯shareï¼Œè§†é¢‘åˆ†äº«æ•°å¯¹äºè¯„åˆ†çš„å½±å“ä»ä¸ºè´Ÿå€¼ï¼Œä¾ç„¶æ ¹æ®ä¸Šè¿°çŒœæµ‹ï¼Œshareå¯¹äºæ€»åˆ†çš„å½±å“è¿‡å°ï¼Œå¯¼è‡´æ‹Ÿåˆçš„ç»“æœå·®ï¼Œå› æ­¤å†æ¬¡å‰”é™¤shareå­—æ®µã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–è‡ªå˜é‡çŸ©é˜µï¼Œå‰”é™¤å¼¹å¹•æ•°ï¼Œåˆ†äº«æ•°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:,[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–å› å˜é‡çŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reshape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç”Ÿæˆè®¾è®¡çŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;om&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ones&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;shape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reshape&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hstack&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;om&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è®¡ç®—ç³»æ•°çŸ©é˜µw-hat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;linalg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–bçŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è·å–wç³»æ•°çŸ©é˜µ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;w_hat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;X_test&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Y_predict&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;np&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;X_test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¾—åˆ°wçŸ©é˜µä¸º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.59149795&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;2.85961313&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;4.47955342&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.34492927&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.35243338&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»˜åˆ¶é¢„æµ‹å€¼ä¸å®é™…å€¼å›¾åƒ
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2q7AU&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2q7AU.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2q7AU.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qHNF&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qHNF.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qHNF.png&#34;
	
	
&gt;&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://imgtu.com/i/R2qbh4&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://z3.ax1x.com/2021/07/03/R2qbh4.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;R2qbh4.png&#34;
	
	
&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è§‚å¯Ÿé¢„æµ‹å€¼ä¸å®é™…å€¼çš„å·®è·ï¼Œå‘ç°æ‹Ÿåˆçš„è¶‹åŠ¿åŸºæœ¬å»åˆï¼Œä½†ä»æœ‰è¾ƒå¤§çš„è¯¯å·®&lt;/p&gt;
&lt;p&gt;åˆ†æå¾—å‡ºï¼Œè¯¥çº¿æ€§æ¨¡å‹çš„æ‹Ÿåˆè¯¯å·®è¾ƒä¸ºé›†ä¸­ï¼Œé›†ä¸­åœ¨[0, 181348.81788162683]å³å¹³å‡è¯¯å·®ä¹‹é—´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.59149795&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;2.85961313&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;4.47955342&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.34492927&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.35243338&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ ¹æ®æƒé‡åˆ†æå„ä¸ªæ•°æ®å¯¹æ€»åˆ†çš„å½±å“ï¼Œå¯ä»¥å‘ç°ï¼Œæ”¶è—å¯¹äºè§†é¢‘æ€»è¯„åˆ†çš„å½±å“å æ¯”æœ€é«˜ï¼Œå…¶æ¬¡æ˜¯ç¡¬å¸æ•°ï¼Œæ’­æ”¾æ•°ï¼Œè¯´æ˜å“”å“©å“”å“©å¯¹ä¸è§†é¢‘çš„è´¨é‡é«˜ä½è¯„åˆ¤æœ‰ä¸€å®šçš„ç»¼åˆè€ƒé‡ï¼Œæ’­æ”¾é‡å±äºå¯ä»¥ç”±è§†é¢‘åˆ¶ä½œäººé€šè¿‡å…¶ä»–æ–¹å¼åˆ·å–ï¼Œä½†æ˜¯æ”¶è—é‡æ˜¯ç”±ç”¨æˆ·å¯¹äºè§†é¢‘è´¨é‡çš„é«˜ä½åšå‡ºçš„å†³å®šï¼Œå› è€Œæ›´å…·ä»£è¡¨æ€§ï¼Œæ›´æœ‰è¯´æœåŠ›ã€‚åè§‚å®é™…è§‚çœ‹ä½“éªŒä¸­ï¼Œæœ‰äº›è§†é¢‘åˆ¶ä½œäººä¼šä»¥è§†é¢‘æ”¶è—æ»¡å‡ ä¸‡åï¼Œæ›´æ–°ä¸‹ä¸€æœŸè§†é¢‘ï¼Œå› ä¸ºè¯¥é¡¹å¯¹è§†é¢‘çš„æ”¶ç›Šå½±å“æœ€å¤§ï¼Œæ›´èƒ½ç»™è§†é¢‘åˆ¶ä½œäººå¸¦æ¥å®é™…æ”¶ç›Šã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ¬¡çº¿æ€§å›å½’çš„æ‹Ÿåˆå¯ä»¥è¾ƒä¸ºå‡†ç¡®çš„åˆ¤æ–­å‡ºå„å„æ•°æ®å¯¹äºè§†é¢‘è¯„åˆ†çš„å½±å“ï¼Œä½†æ˜¯å¯¹äºè§†é¢‘è¯„åˆ†çš„é¢„æµ‹è¯¯å·®è¾ƒå¤§ï¼Œä½†æ˜¯ä»èƒ½è¾ƒå‡†ç¡®çš„åˆ¤æ–­å‡ºè§†é¢‘è¯„åˆ†æ‰€å½±å“çš„è§†é¢‘æ’åï¼Œè®¤ä¸ºæœ‰å¦‚ä¸‹åŸå› ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®é‡è¿‡å°‘ï¼Œå¯¼è‡´æ‹Ÿåˆç¨‹åº¦ä¸è¶³&lt;/li&gt;
&lt;li&gt;è¯„åˆ†è§„åˆ™éçº¿å½¢æ¨¡å‹ï¼Œåº”è¯¥æ›´æ¢æ¨¡å‹&lt;/li&gt;
&lt;li&gt;è¿˜æœ‰å…¶ä»–æœªè€ƒè™‘çš„å› ç´ 
å¦‚æœè¦æ›´å‡†ç¡®çš„å¯¹è§†é¢‘è¯„åˆ†è¿›è¡Œé¢„æµ‹ï¼Œåº”è¯¥ç»¼åˆåˆ†ææ•°æ®çš„ç‰¹æ€§ï¼Œæˆ–è€…é‡‡ç”¨æœºå™¨å­¦ä¹ ç­‰æ›´ä¼˜ç§€çš„æ‰‹æ®µæ¥è¿›è¡Œæ±‚è§£å’Œé¢„æµ‹ï¼Œçº¿æ€§å›å½’ä»æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        <item>
        <title>Gitå­¦ä¹ ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Fri, 02 Apr 2021 22:33:25 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;p&gt;å¯¹äºgitï¼Œå¾ˆæ—©å¾ˆæ—©å°±åœ¨ç”¨äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ç³»ç»Ÿæ•´ç†è¿‡ï¼Œå¹¶ä¸”æœ‰äº›å‘½ä»¤ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼Œåœ¨æ­¤ä¹Ÿä¸€å¹¶æ ‡å‡ºã€‚&lt;/p&gt;
&lt;h1 id=&#34;about-git&#34;&gt;About Git&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;git&lt;/code&gt;æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªç¨‹åºçŒ¿ï¼Œé‚£ä½ å¿…é¡»è¦å­¦ä¼šå¦‚ä½•ä½¿ç”¨&lt;code&gt;git&lt;/code&gt;æ¥ç®¡ç†ä½ çš„ä»£ç æˆ–è€…é¡¹ç›®ã€‚
å¯èƒ½æ›´å¤šäººæ‰€ç†ŸçŸ¥çš„æ˜¯GitHubï¼Œé¡¾åæ€ä¹‰ï¼ŒæŒ‰ç…§è‹±è¯­çš„å‘½åç‰¹ç‚¹ï¼ŒGitHubå°±æ˜¯æ‰€æœ‰gitä¸Šä¼ çš„æ¢çº½ï¼Œæ±‡èšåˆ°ä¸€èµ·ï¼Œä½ å¯ä»¥å¼€æºä½ çš„ä»£ç ï¼ŒæŒ‡å®šä¸€æ¬¾å¼€æºåè®®å…±äº«ç»™æ‰€æœ‰éœ€è¦çš„äººï¼Œä¹Ÿå¯ä»¥å°†ä»“åº“è®¾ä¸ºç§æœ‰ï¼Œåªæœ‰è‡ªå·±æˆ–è€…å—åˆ°é‚€è¯·çš„äººå¯è§æˆ–è€…è¿›è¡Œç¼–è¾‘ã€‚
é™¤äº†GitHubï¼Œä¸–ç•Œä¸Šè¿˜æœ‰å¾ˆå¤šè¿™ç§ä»£ç æ‰˜ç®¡å¹³å°ï¼Œæ¯”å¦‚å›½å†…çš„gitee,codingç­‰ï¼Œå›½å¤–è¿˜æœ‰gitlabç­‰å¹³å°æä¾›ä»£ç æ‰˜ç®¡æœåŠ¡ã€‚&lt;/p&gt;
&lt;h1 id=&#34;setup&#34;&gt;Setup&lt;/h1&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code&gt;git init&lt;/code&gt;æ¥åˆå§‹åŒ–è¿™ä¸ªç›®å½•ï¼Œgitä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹å˜ä¸ºä¸€ä¸ªgitç›®å½•ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt; GitTest git init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Initialized empty Git repository in /Users/username/GitTest/.git/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;git remote add origin {your repo url}&lt;/code&gt;
å³å¯æ·»åŠ è¿œç¨‹çš„ä»“åº“åœ°å€ã€‚&lt;/p&gt;
&lt;h1 id=&#34;commit--push&#34;&gt;Commit &amp;amp;&amp;amp; Push&lt;/h1&gt;
&lt;p&gt;å¯¹äºä¸€ä¸ªé‡‡ç”¨è¿­ä»£å¼å¼€å‘æˆ–è€…å…¶ä»–å¼€å‘æ¨¡å¼çš„é¡¹ç›®æ¥è¯´ï¼Œéƒ½é¿å…ä¸äº†åç»­å¯¹ä»£ç è¿›è¡Œä¿®æ”¹æˆ–è€…æ·»åŠ ä¸€äº›æ–°çš„æ–‡ä»¶ï¼Œå¯¹äºæ¯ä¸€æ¬¡è¿™æ ·çš„æ“ä½œï¼Œéƒ½è¦å¯¹æ·»åŠ æˆ–è€…ä¿®æ”¹çš„æ–‡ä»¶æŒ‡å®šä¸€ä¸ªcommitã€‚
ä¾‹å¦‚ï¼šä¿®æ”¹äº†é¡¹ç›®åŠŸèƒ½ä¸­çš„bugï¼Œæ–‡ä»¶åå­—ä¸º&lt;code&gt;a.cpp&lt;/code&gt;
å¯ä»¥ä½¿ç”¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git add a.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git commit -m &amp;#34;fix: the bug in xxx&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±å¯ä»¥å°†æ­¤æ¬¡æ›´æ”¹æ·»åŠ åˆ°æäº¤çš„é˜Ÿåˆ—ä¸­
å¦‚æœä½¿ç”¨&lt;code&gt;git add .&lt;/code&gt;ï¼Œgitå°†æ·»åŠ æ‰€æœ‰ç›‘æ§çš„æ–‡ä»¶åˆ°ç¼“å†²åŒº
å†ä½¿ç”¨&lt;code&gt;git push&lt;/code&gt;å°±å¯ä»¥å°†ä¿®æ”¹æ·»åŠ åˆ°è¿œç¨‹ä»“åº“ä¸­&lt;/p&gt;
&lt;p&gt;å¯¹ä¸ä¸€ä¸ªå›¢é˜Ÿè€Œè¨€ï¼Œæœ‰æ ‡å‡†è§„èŒƒçš„commitæ ¼å¼æ˜¯å¾ˆé‡è¦çš„ï¼Œä¾‹å¦‚ä»¥ä¸‹æ ¼å¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;feat: æ–°åŠŸèƒ½feature
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;fix: è§£å†³bug
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;add: æ·»åŠ æ¨¡å—
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;update: æ›´æ–°æ¨¡å—
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;... ç­‰ç­‰
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;dangerous-pull-ing&#34;&gt;Dangerous Pull ing&lt;/h1&gt;
&lt;p&gt;å¦‚æœæ˜¯å¤šäººåä½œå¼€å‘ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå¯¼è‡´æœ¬åœ°æ–‡ä»¶ä¹‹é—´å­˜åœ¨ç€ä¸ä¸€è‡´ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨&lt;code&gt;git pull&lt;/code&gt;ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤åå°†åŒæ­¥ä»“åº“ä¸­å­˜åœ¨å¹¶ä¸”ä¸æœ¬åœ°ä¸åŒçš„æ–‡ä»¶ã€‚
è¿™ä¸ªæ“ä½œçœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯æœ‰æ—¶å€™å¦‚æœä½¿ç”¨äº†&amp;ndash;forceå¼ºåˆ¶æ‰§è¡Œçš„è¯ï¼Œä¼šè¦†ç›–æ‰æœ¬åœ°çš„æ–‡ä»¶ï¼Œå±äºéå¸¸å±é™©çš„æ“ä½œï¼Œæ‰€ä»¥æ— è®ºåœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨&amp;ndash;forceä¹‹å‰éƒ½è¦æ€è€ƒæ¸…æ¥šè‡ªå·±åœ¨å¹²ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;h1 id=&#34;branch&#34;&gt;Branch&lt;/h1&gt;
&lt;p&gt;æˆ‘è§‰å¾—gitå¾ˆå¼ºå¤§çš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯å¯¹åˆ†æ”¯çš„ç®¡ç†ï¼Œåœ¨ä¸åŒåˆ†æ”¯ä¸­åˆ‡æ¢å¯ä»¥è®©é¡¹ç›®çš„ä»£ç å¾—åˆ°æ›´æœ‰æ•ˆçš„ç®¡ç†ï¼Œä¾‹å¦‚åœ¨mainä¸»åˆ†æ”¯ä¸­ä¿å­˜å¯ä»¥ç¨³å®šè¿è¡Œçš„ç‰ˆæœ¬ï¼Œåœ¨å¦ä¸€ä¸ªdevåˆ†æ”¯ä¸­ä¿å­˜æ­£åœ¨å¼€å‘çš„éç¨³å®šç‰ˆï¼Œåç»­æ”¹è¿›ä¹‹åå¯ä»¥å°†devåˆ†æ”¯åˆå¹¶åˆ°mainåˆ†æ”¯ä¸­å»ã€‚
å¦‚æœæ›´æ–°è¿‡åçš„ä¸»åˆ†æ”¯ä¾ç„¶å‡ºç°é—®é¢˜ï¼Œä¹Ÿæ˜¯å¯ä»¥é€šè¿‡å›æ»šçš„æ–¹å¼å›åˆ°ä¹‹å‰æŸä¸ªç¨³å®šçš„ç‰ˆæœ¬ã€‚
åˆ†æ”¯çš„åˆ›å»ºä¹Ÿéå¸¸ç®€å•&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git branch name
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git checkout name
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆ‡æ¢ågitæ‰€æœ‰çš„æ“ä½œå°†åœ¨æ–°çš„åˆ†æ”¯è¿›è¡Œ&lt;/p&gt;
&lt;h1 id=&#34;gitignore&#34;&gt;.gitignore&lt;/h1&gt;
&lt;p&gt;é¡¾åæ€ä¹‰ï¼Œè‚¯å®šæ˜¯è®©gitå»å¿½ç•¥æŸäº›é¡¹ç›®ï¼Œæ¯”å¦‚æ–‡ä»¶å¤¹ï¼Œæˆ–è€…æ˜¯å•ä¸ªæ–‡ä»¶ï¼Œæ·»åŠ åˆ°gitignoreä¹‹ågitå°†ä¸åœ¨è¿½è¸ªè¿™äº›æ–‡ä»¶çš„å˜åŒ–ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ä¾‹å¦‚npmåºå¤§çš„node_modulesè¿™ç§æ–‡ä»¶å¤¹æ·»åŠ åˆ°å…¶ä¸­ï¼Œæˆ–è€…æ˜¯ç¼–è¯‘å™¨è°ƒè¯•äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼Œä¼˜åŒ–ä»“åº“çš„å­˜å‚¨ç»“æ„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git status
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½¿ç”¨è¯¥å‘½ä»¤çœ‹æŸ¥ç›®å‰é¡¹ç›®çš„æ”¹åŠ¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;On branch dev
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Untracked files:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  (use &amp;#34;git add &amp;lt;file&amp;gt;...&amp;#34; to include in what will be committed)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	b.cpp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nothing added to commit but untracked files present (use &amp;#34;git add&amp;#34; to track)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;gitç›‘æ§åˆ°äº†æ–‡ä»¶b.cppçš„äº§ç”Ÿï¼Œæˆ‘ä»¬å°†b.cppæ·»åŠ åˆ°.gitignoreä¸­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;On branch dev
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;nothing to commit, working tree clean
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å†æ¬¡ä½¿ç”¨git statusçœ‹æŸ¥ï¼Œå‘ç°b.cppå·²ç»ä¸å†è¢«ç›‘æ§äº†ï¼Œåœ¨.gitignoreä¸­è¿˜å¯ä»¥ä½¿ç”¨æ–‡ä»¶å¤¹åå¿½ç•¥æ•´ä¸ªæ–‡ä»¶å¤¹çš„é¡¹ç›®ï¼Œæˆ–è€…ä½¿ç”¨é€šé…å¿½ç•¥åŒ…å«ç‰¹å®šåç¼€åçš„æ–‡ä»¶ç­‰ã€‚&lt;/p&gt;
&lt;h1 id=&#34;end&#34;&gt;End&lt;/h1&gt;
&lt;p&gt;éšç€å¼€å‘å·¥å…·çš„ç°ä»£åŒ–ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å·²ç»ç”¨ä¸åˆ°è¿™äº›gitå‘½ä»¤äº†ï¼Œå¾ˆå¤šç¹ççš„å‘½ä»¤æ—©å·²è¢«å›¾å½¢åŒ–çš„ç•Œé¢å–ä»£ï¼Œä½†ä¸ä¹è¿˜æœ‰gitçˆ±å¥½è€…ä»¬åšå‡ºçš„åŠªåŠ›ï¼Œå¦‚&lt;a class=&#34;link&#34; href=&#34;https://github.com/jesseduffield/lazygit&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;lazygit&lt;/a&gt;ç­‰å·¥å…·ã€‚
å½“ä½ æ¥æ”¶ä¸€å°å´­æ–°çš„æœåŠ¡å™¨æ—¶ï¼Œè¿™äº›å‘½ä»¤åˆæ˜¾å¾—æ ¼ä¸ºé‡è¦äº†ã€‚å› æ­¤ï¼Œåœ¨ç®€ä¾¿çš„å·¥å…·çš„åŒ…è£¹ä¸‹ï¼Œä»–ä»¬èƒŒåçš„åŸç†æ‰æ˜¯æœ€å€¼å¾—æˆ‘ä»¬å»äº†è§£çš„ï¼Œå°±å¦‚åŒå­¦ä¹ æ±‡ç¼–è¯­è¨€ä¸€æ ·ï¼Œç»™åŠ›æˆ‘ä»¬å¦ä¸€ç§çœ‹å¾…ç¨‹åºçš„æ–¹å¼ã€‚
å¾ˆæ—©å°±åƒæ€»ç»“ä¸€ä¸‹gitäº†ï¼Œæ‹–äº†è¿™ä¹ˆä¹…ç»ˆäºå†™å®Œäº†ï¼Œåç»­è¿˜æƒ³å†æ·»åŠ ä¸€äº›æ›´å…·ä½“çš„å†…å®¹ï¼Œå¸Œæœ›èƒ½ç»™åˆå…¥gitçš„åŒå­¦ä¸€äº›å¯å‘ã€‚&lt;/p&gt;</description>
        </item>
        <item>
        <title>æ±‡ç¼–è¯­è¨€ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Tue, 16 Mar 2021 10:29:27 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h2 id=&#34;ç®€ä»‹&#34;&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;æœ¬å­¦æœŸé€‰äº†æ±‡ç¼–è¯­è¨€è¿™é—¨é€‰ä¿®è¯¾ï¼Œæˆ‘è®¤ä¸ºè¿˜æ˜¯æœ‰å¾ˆå¤§çš„å­¦ä¹ ä»·å€¼çš„ï¼Œè™½ç„¶å­¦ä¹ çš„è¿˜æ˜¯å¹´ä»£ä¹…è¿œçš„8086CPUæŒ‡ä»¤é›†ï¼Œä½†å¯¹åç»­æ¥è§¦æ›´å¤šæ±‡ç¼–è¯­è¨€è¿˜æ˜¯æœ‰å¾ˆå¤§å¸®åŠ©ï¼Œæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•ç¨‹åºï¼Œå¤šäº†ä¸€ç§æŸ¥é”™çš„æ–¹å¼ã€‚
å…¶å®å…³äºè°ƒè¯•è‡ªå·±å¾ˆä¹…ä¹‹å‰å°±æƒ³å­¦äº†ï¼Œé«˜ä¸­çš„æ—¶å€™çœ‹ç´«ä¹¦ï¼Œå‘ç°lrjè€å¸ˆè®²äº†ä¸€æ®µçš„gdbè°ƒè¯•æ–¹æ³•ï¼Œå½“æ—¶æ„Ÿè§‰ä¸€ç‚¹éƒ½çœ‹ä¸æ‡‚ï¼Œç°åœ¨å€Ÿæ­¤æœºä¼šå­¦ä¹ ä¸€ä¸‹gdbçš„è°ƒè¯•ã€‚
æœ¬æ–‡é™¤äº†å°†æ€»ç»“ä¸€äº›æ±‡ç¼–è¯­è¨€å­¦ä¹ è¿‡ç¨‹ä¸­çš„ç¬”è®°ä¹‹å¤–ï¼Œè¿˜è®¡åˆ’ç©¿æ’ä¸€äº›cs213/CSAPP çš„å†…å®¹ä»¥åŠbomb labçš„è§£æã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;å‡†å¤‡å·¥ä½œ&#34;&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;dosç³»ç»Ÿç°åœ¨ä»¥åŠå¹´ä»£ä¹…è¿œï¼Œæƒ³ä½¿ç”¨8086CPUæŒ‡ä»¤é›†è°ƒè¯•çš„è¯éœ€è¦å€ŸåŠ©DosBoxæ¥å®ç°ã€‚
&lt;a class=&#34;link&#34; href=&#34;https://www.dosbox.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DosBoxå®˜ç½‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºmacOSä¸‹æ²¡æœ‰DOSboxéœ€è¦çš„è°ƒè¯•å·¥å…·ï¼Œå› æ­¤ä¸‹è½½ä¹‹åéœ€è¦æŒ‚è½½debug.exeç­‰Windowsä¸‹çš„è°ƒè¯•å·¥å…·
åœ¨DOSboxä¸­è¾“å…¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mount C ~/dos
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;debug
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å³å¯è¿›å…¥debugæ¨¡å¼&lt;/p&gt;
&lt;h2 id=&#34;å®éªŒ1&#34;&gt;å®éªŒ1&lt;/h2&gt;
&lt;h3 id=&#34;å‰ç½®çŸ¥è¯†&#34;&gt;å‰ç½®çŸ¥è¯†&lt;/h3&gt;
&lt;p&gt;å‡ æ¡æ±‡ç¼–æŒ‡ä»¤&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mov ç›®æ ‡æ“ä½œå¯¹è±¡,æºæ“ä½œæ•°
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;add ç›®æ ‡æ“ä½œå¯¹è±¡,æºæ“ä½œæ•°
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;jmp å¯„å­˜å™¨ //ä¿®æ”¹IPå¯„å­˜å™¨çš„å€¼
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;or 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;jmp CS:IP
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;eg: jmp ax == (let IP = ax)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    jmp 2AE3:3 == let CS = 2AE3H and let IP = 0003H
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sub ax,bx
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ax = ax - bx
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;inc and dec
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;inc æ“ä½œå¯¹è±¡ 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;eg: inc ax == ax+=1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    dec ax == ax-=1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼šä¸å¯ç”¨movæŒ‡ä»¤ä¿®æ”¹æ®µå¯„å­˜å™¨çš„å€¼ã€‚ï¼ˆä»£ç æ®µå¯„å­˜å™¨CSï¼ŒæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨IPï¼‰
CPUä¸­è¯†åˆ«&lt;code&gt;CS:IP&lt;/code&gt;ä¸ºæ‰§è¡ŒæŒ‡ä»¤
æ“ä½œå¯¹è±¡å¯ä»¥æ˜¯å¯„å­˜å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ°å€&lt;/p&gt;
&lt;p&gt;Debugå‘½ä»¤&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;r: çœ‹æŸ¥å¯„å­˜å™¨å†…å®¹ï¼Œæˆ–è€…ä¿®æ”¹å¯„å­˜å™¨å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;d: çœ‹æŸ¥å†…å­˜å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;e: æ”¹å†™å†…å­˜å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;u: å°†æœºå™¨æŒ‡ä»¤ç¿»è¯‘ä¸ºæ±‡ç¼–æŒ‡ä»¤
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;t: æ‰§è¡Œä¸‹ä¸€æ¡æ±‡ç¼–æŒ‡ä»¤
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;a: å†™å…¥æ±‡ç¼–æŒ‡ä»¤
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç¼–è¯‘æŒ‡ä»¤&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;masm test
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;link test.obj
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;debug test.exe
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;lab1&#34;&gt;lab1&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-asm&#34; data-lang=&#34;asm&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;WORD&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;PTR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3445&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;WORD&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;PTR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1102&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5678&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;WORD&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;PTR&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1106&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6732&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;AX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;SUB&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;AX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1102&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;ADD&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;AX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1106&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1104&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;HLT&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//ä½¿CPUåœæ­¢å·¥ä½œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-asm&#34; data-lang=&#34;asm&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;AX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1234&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;no&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;AX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;BX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1002&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;BYTE&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;PTR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;BX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;DL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;39&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;INC&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;BX&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;BX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;DL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;DEC&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;DL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;SI&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;BX&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;SI&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;DL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;BX&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;SI&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;DL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;MOV&lt;/span&gt;	&lt;span class=&#34;no&#34;&gt;WORD&lt;/span&gt; &lt;span class=&#34;no&#34;&gt;PTR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;BX&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;SI&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2846&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>è®¡ç®—æœºç»„æˆåŸç†ç¬”è®°</title>
        <link>https://blog.ipandai.club/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Mon, 15 Mar 2021 19:53:04 +0000</pubDate>
        
        <guid>https://blog.ipandai.club/p/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;p&gt;æœ¬æ–‡éšæœºæ›´æ–°æœºç»„ç¬”è®°&lt;/p&gt;
&lt;h1 id=&#34;ch2æ•°æ®è¡¨ç¤º&#34;&gt;CH2æ•°æ®è¡¨ç¤º&lt;/h1&gt;
&lt;h2 id=&#34;å®šç‚¹æ•°ä¸æµ®ç‚¹æ•°&#34;&gt;å®šç‚¹æ•°ä¸æµ®ç‚¹æ•°&lt;/h2&gt;
&lt;h3 id=&#34;å®šç‚¹æ•°&#34;&gt;å®šç‚¹æ•°&lt;/h3&gt;
&lt;p&gt;å°æ•°ç‚¹çš„ä½ç½®å›ºå®šä¸å˜ï¼Œæœ‰ä¸¤ç§å½¢å¼ï¼Œå®šç‚¹å°æ•°å’Œå®šç‚¹æ•´æ•°.
å®šç‚¹æ•´æ•°è¦æ±‚å°æ•°ç‚¹åœ¨æ•°æ®æœ€ä½æœ‰æ•ˆæ•°ä½ä¹‹åã€‚
$00101001.$
å®šç‚¹å°æ•°è¦æ±‚å°æ•°ç‚¹åœ¨æ•°æ®æœ€é«˜æœ‰æ•ˆæ•°ä½ä¹‹å‰ã€‚
$0.1111111$&lt;/p&gt;
&lt;h3 id=&#34;æµ®ç‚¹æ•°&#34;&gt;æµ®ç‚¹æ•°&lt;/h3&gt;
&lt;p&gt;åŸºæ•°ä¸º2çš„æ•°Fï¼Œæµ®ç‚¹è¡¨ç¤ºä¸º
$F = M \times 2^E$
å…¶ä¸­Mä¸ºå°¾æ•°ï¼ŒEä¸ºé˜¶ç ã€‚å°¾æ•°ä¸ºå¸¦ç¬¦å·çš„çº¯å°æ•°ï¼Œé˜¶ç ä¸ºå¸¦ç¬¦å·çš„çº¯æ•´æ•°ã€‚æŒ‰ç…§ä¸Šå¼è¡¨ç¤ºçš„æ•°å­—æ—¢å¯ä»¥æ˜¯çº¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯çº¯å°æ•°ï¼Œå› æ­¤å°æ•°ç‚¹ä½ç½®ä¸å›ºå®šï¼Œæ‰€ä»¥ç§°ä¸ºæµ®ç‚¹æ•°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è®¡ç®—æœºä¸­ï¼Œå¸¸ç”¨çš„ä¸€ç§æµ®ç‚¹æ•°è¡¨ç¤ºæ–¹æ³•ä¸º&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ•°ç¬¦&lt;/th&gt;
&lt;th&gt;é˜¶ç¬¦&lt;/th&gt;
&lt;th&gt;é˜¶ç æ•°å€¼éƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;å°¾æ•°æ•°å€¼éƒ¨åˆ†&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;k&lt;/td&gt;
&lt;td&gt;n&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;é˜¶ç å’Œå°¾æ•°çš„æ•°å€¼èŒƒå›´ä¸º&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é˜¶ç ä¸å°¾æ•°&lt;/th&gt;
&lt;th&gt;æ•°å€¼&lt;/th&gt;
&lt;th&gt;é˜¶ç ä¸å°¾æ•°&lt;/th&gt;
&lt;th&gt;æ•°å€¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;é˜¶ç æœ€å°å€¼&lt;/td&gt;
&lt;td&gt;$-2^k$&lt;/td&gt;
&lt;td&gt;é˜¶ç æœ€å¤§å€¼&lt;/td&gt;
&lt;td&gt;$2^k-1$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å°¾æ•°æœ€å°è´Ÿå€¼&lt;/td&gt;
&lt;td&gt;$-1$&lt;/td&gt;
&lt;td&gt;å°¾æ•°æœ€å¤§è´Ÿå€¼&lt;/td&gt;
&lt;td&gt;$-2^{-n}$&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å°¾æ•°æœ€å°æ­£å€¼&lt;/td&gt;
&lt;td&gt;$+2^{-n}$&lt;/td&gt;
&lt;td&gt;å°¾æ•°æœ€å¤§æ­£å€¼&lt;/td&gt;
&lt;td&gt;$+(1-2^{-n})$&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å› æ­¤å¯ä»¥å¾—åˆ°æµ®ç‚¹æ•°è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´ï¼š
æœ€å°è´Ÿæ•°:$-2^{2^k-1}=-2^{é˜¶ç æœ€å¤§å€¼}$&lt;/p&gt;
&lt;p&gt;æœ€å¤§è´Ÿæ•°:$-2$&lt;/p&gt;
&lt;p&gt;å› æ­¤æµ®ç‚¹æ•°ç¼–ç ä½æ•°ä½
$m=(n+1)+(k+1)$&lt;/p&gt;
&lt;h3 id=&#34;è¡¥ç &#34;&gt;è¡¥ç &lt;/h3&gt;
&lt;p&gt;è¡¥ç çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;nä½è¡¥ç è¡¨ç¤ºçš„æ•´æ•°æ•°å€¼èŒƒå›´ä¸º$[-2^{n-1},2^{n-1}-1]$&lt;/p&gt;
&lt;p&gt;nä½è¡¥ç è¡¨ç¤ºçš„å°æ•°æ•°å€¼èŒƒå›´ä¸º$[-1,1-2^{-n+1}]$&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨è¡¥ç ä¸­0çš„è¡¨ç¤ºæ˜¯å”¯ä¸€çš„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å˜å½¢ç ï¼Œå½“æ¨¡æ•°ä¸º4æ—¶ï¼Œå¯ä»¥å½¢æˆåŒç¬¦å·ä½è¡¥ç ï¼Œ11è¡¨ç¤ºè´Ÿï¼Œ00è¡¨ç¤ºæ­£ï¼Œå½“ä¸¤ä¸ªç¬¦å·ä½ä¸åŒæ—¶è¡¨ç¤ºè¿ç®—æº¢å‡ºï¼Œåˆå«åšå˜å½¢è¡¥ç ã€‚&lt;strong&gt;å¾…æ›´&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ±‚è¡¥è¿ç®—&lt;/strong&gt;ï¼Œå¤„ç†å™¨ä¸­æœ‰æ±‚è¡¥æŒ‡ä»¤ï¼Œå…¶åŠŸèƒ½æ˜¯å¯¹æ“ä½œæ•°å–è´Ÿæ•°(æ‰€æœ‰ä½å˜å+1)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç®€åŒ–åŠ å‡æ³•
$[X+Y]_è¡¥=&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; _è¡¥+[Y]_è¡¥$&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç§»ç &#34;&gt;ç§»ç &lt;/h3&gt;
&lt;p&gt;å½“ä¸€ä¸ªæ•°å­—çš„æ­£æ•°æ‰€å¯¹çš„äºŒè¿›åˆ¶ä¸è´Ÿæ•°æ‰€å¯¹çš„äºŒè¿›åˆ¶ç›´æ¥æ¯”è¾ƒå¤§å°æ—¶ï¼Œä¼šå‡ºç°è´Ÿæ•°æ‰€å¯¹çš„äºŒè¿›åˆ¶æ›´å¤§çš„æƒ…å†µã€‚ä¾‹å¦‚å¯¹äºåè¿›åˆ¶æ•°31&lt;/p&gt;
&lt;p&gt;$10011111_{-31} &amp;gt; 01100001_{31}$&lt;/p&gt;
&lt;p&gt;å¦‚æœå¯¹è´Ÿæ•°è¡¥ç ä¸ŠåŠ ä¸Šä¸€ä¸ªåç§»é‡ï¼Œå†è¿›è¡Œæ¯”è¾ƒå³å¯ååº”å®é™…æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;å®šä¹‰ä¸º:
å¯¹äºåŒ…æ‹¬ç¬¦å·ä½åœ¨å†…çš„nä½å­—é•¿ï¼Œåœ¨å…¶çœŸå€¼ä¸ŠåŠ ä¸Š$2^{n-1}$
$[X]_ç§» =2^{n-1}+X$&lt;/p&gt;
&lt;p&gt;ç‰¹ç‚¹ï¼š
$[X]_ç§»&amp;lt;ç¬¦å·ä¸ºå–å&amp;gt;[X]_è¡¥$&lt;/p&gt;
&lt;h3 id=&#34;çº é”™ç &#34;&gt;çº é”™ç &lt;/h3&gt;
&lt;p&gt;è‹¥æœ‰nä½æ•°æ®ï¼Œæ·»åŠ kä½æ ¡éªŒä½ï¼Œå…±æœ‰n+kä½ç¼–ç &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æµ·æ˜è·ç¦»ï¼š
$d = |x-y|=\sum_{i=0}^{m-1}|x_i-y_i|$&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨ä½è¿ç®—å¼‚æˆ–æ±‚è§£ï¼Œè·å¾—æµ·æ˜è·ç¦»&lt;/p&gt;
&lt;h3 id=&#34;å¥‡å¶æ ¡éªŒç &#34;&gt;å¥‡å¶æ ¡éªŒç &lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¥‡æ ¡éªŒï¼šè®¾
$X = x_0x_1x_2x_3x_4&amp;hellip;x_{n-1}$
æ˜¯ä¸€ä¸ªnä½å­—ï¼Œåœ¨æœ€é«˜ä½æ·»åŠ ä¸€ä½å¥‡æ ¡éªŒcä½¿å¾—
$X&amp;rsquo;=cx_0x_1x_2x_3x_4&amp;hellip;x_{n-1}$
æœ‰
$c \oplus x_1\oplus &amp;hellip; \oplus x_{n-1} = 1$&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¶æ ¡éªŒåˆ™ç›¸åï¼Œåªèƒ½åˆ¤æ–­æ˜¯å¦å‡ºé”™ï¼Œæ— æ³•çº é”™&lt;/p&gt;
&lt;h3 id=&#34;æµ·æ˜æ ¡éªŒç &#34;&gt;æµ·æ˜æ ¡éªŒç &lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äº16ä½æ•°æ®ï¼Œç”¨
$D_{16}-D_{0}$
åˆ†åˆ«è¡¨ç¤ºé«˜ä½åˆ°ä½ä½ï¼Œè¦ä½¿å…¶æ‹¥æœ‰1ä½çº é”™åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨æœ‰æ•ˆä¿¡æ¯ä¸­æ·»åŠ 5ä¸ªæ ¡éªŒä½ï¼ŒH4ï½H0
æ­¤æ—¶æµ·æ˜ç çš„ç é•¿ä¸º
$m=n+k=16+5=21$&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;å¾ªç¯å†—ä½™æ ¡éªŒç &#34;&gt;å¾ªç¯å†—ä½™æ ¡éªŒç &lt;/h3&gt;
&lt;p&gt;å¤§æ¦‚å°±æ˜¯ç”¨ä¸€ä¸ªæ€§èƒ½æ¯”è¾ƒå¥½çš„ç”Ÿæˆå¤šé¡¹å¼æ„é€ ä¸€ä¸ªç¼–ç ï¼Œåˆ©ç”¨æ¨¡2é™¤æ³•çš„ä½™æ•°è¿›è¡Œæ ¡éªŒï¼Œè€Œä¸”çº é”™æ€§èƒ½ä¸æ˜¯100%ï¼Œå…ˆPass&lt;/p&gt;
&lt;h2 id=&#34;è¿ç®—æ–¹æ³•å’Œè¿ç®—å™¨&#34;&gt;è¿ç®—æ–¹æ³•å’Œè¿ç®—å™¨&lt;/h2&gt;
&lt;h3 id=&#34;åŠ å‡è¿ç®—&#34;&gt;åŠ å‡è¿ç®—&lt;/h3&gt;
&lt;p&gt;åˆ©ç”¨è¡¥ç çš„æ€§è´¨ï¼Œå¯ä»¥å°†è¿ç®—è½¬åŒ–ä¸ºè¡¥ç çš„åŠ æ³•ã€‚&lt;/p&gt;
&lt;p&gt;$[X+Y]_è¡¥=[X]_è¡¥+[Y]_è¡¥$&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦åŒºåˆ†çš„æ¦‚å¿µï¼Œæ±‚è¡¥è¿ç®—å’Œæ±‚è¡¥ç çš„åŒºåˆ«&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ±‚è¡¥ï¼šå¯¹ä¸€ä¸ªæ­£æ•°æ±‚è¡¥ï¼Œä»¤å…¶åŒ…æ‹¬ç¬¦å·ä½åœ¨å†…çš„å„ä½å–åå†åŠ 1ï¼Œå³å¯å¾—åˆ°è¯¥æ•°çš„è´Ÿæ•°ï¼Œè‹¥å¯¹è¯¥è´Ÿæ•°å†æ±‚è¡¥ï¼Œå¯ä»¥å¾—åˆ°åŸæ¥çš„æ­£æ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;$[[X]_è¡¥]_æ±‚=[-X]_è¡¥$&lt;/p&gt;
&lt;p&gt;åŒç†æœ‰&lt;/p&gt;
&lt;p&gt;$[[-X]_è¡¥]_æ±‚=[X]_è¡¥$&lt;/p&gt;
&lt;p&gt;å¯ä»¥æ€»ç»“å‡ºè¡¥ç å‡æ³•çš„è¿ç®—æ³•åˆ™ä¸º&lt;/p&gt;
&lt;p&gt;$[X-Y]_è¡¥ = [X]_è¡¥+[-Y]_è¡¥ =[X]_è¡¥+[[Y]_è¡¥]_æ±‚$&lt;/p&gt;
&lt;p&gt;å› æ­¤å¯ä»¥å°†å‡æ³•è½¬åŒ–ä¸ºåŠ æ³•è¿ç®—&lt;/p&gt;
&lt;h3 id=&#34;æº¢å‡ºåˆ¤æ–­&#34;&gt;æº¢å‡ºåˆ¤æ–­&lt;/h3&gt;
&lt;p&gt;åªæœ‰ä¸¤ä¸ªç¬¦å·ç›¸åŒçš„æ•°å­—ç›¸åŠ ï¼Œæˆ–è€…ç¬¦å·ç›¸å¼‚çš„æ•°ç›¸å‡æ‰æœ‰å¯èƒ½å‘ç”Ÿæº¢å‡ºã€‚
è‹¥åˆ†åˆ«ç”¨xyzè¡¨ç¤ºä¸‰ä¸ªæ•°å­—çš„ç¬¦å·ä½ï¼Œå¯å¾—æ ‡å‡†æœ€å°é¡¹
$\overline{x} \cdot \overline{y} \cdot z+x\cdot y\cdot \overline{z}$
åªæœ‰è¯¥å¼ä¸ºçœŸæ—¶ï¼Œå°†å‘ç”Ÿæº¢å‡ºã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŒç¬¦å·ä½åˆ¤å®š&#34;&gt;åŒç¬¦å·ä½åˆ¤å®š&lt;/h4&gt;
&lt;p&gt;æ¯ä¸ªæ•°å­—æœ‰ä¸¤ä¸ªç¬¦å·ä½ï¼Œå…¶ä¸­00è¡¨ç¤ºæ­£æ•°ï¼Œ11è¡¨ç¤ºè´Ÿæ•°
ä»¤OF OverflowFlagè¡¨ç¤ºæº¢å‡ºç¬¦å·
$S_1,S_2$
åˆ†åˆ«è¡¨ç¤ºè¿ç®—ç»“æœçš„ä¸¤ç¬¦å·ï¼Œ æœ‰
$OF = S_1 \oplus S_2$&lt;/p&gt;
&lt;h4 id=&#34;è¿›ä½ç¬¦å·åˆ¤å®š&#34;&gt;è¿›ä½ç¬¦å·åˆ¤å®š&lt;/h4&gt;
&lt;p&gt;$ä»¤ C_{n-1}è¡¨ç¤ºæœ€é«˜æ•°å€¼ä½äº§ç”Ÿçš„è¿›ä½ï¼ŒC_nè¡¨ç¤ºç¬¦å·ä½äº§ç”Ÿçš„è¿›ä½$
å³æœ‰
$OF = C_{n-1}\oplus C_n$&lt;/p&gt;
&lt;h3 id=&#34;ä¸€ä½å…¨åŠ å™¨&#34;&gt;ä¸€ä½å…¨åŠ å™¨&lt;/h3&gt;
&lt;p&gt;è®¡ç®—æ¯ä¸€ä½é€»è¾‘
$Z_i=X_i\oplus Y_i \oplus C_i$
è¿›ä½ä¿¡å·é€šè¿‡é€’æ¨äº§ç”Ÿ
å¯ä»¥è®¾è®¡å‡ºç®€å•çš„è¡Œæ³¢å¼è¿›ä½åŠ æ³•å™¨ï¼Œä»æœ€ä½ä½å¼€å§‹ä¼ é€’è¿›ä½ä¿¡å·ï¼Œæ˜¯å¼‚æ­¥æ—¶åºç”µè·¯ï¼Œå› æ­¤è¿ç®—é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½æ•°å·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¾è®¡ç”µè·¯ä¸€æ¬¡æ€§è®¡ç®—å‡ºæ‰€æœ‰çš„è¿›ä½ä¿¡å·ï¼Œæ¯”è¾ƒç†æƒ³çš„æƒ…å†µæ˜¯ä»¥å››ä¸ªä½æ•°ä¸ºä¸€ç»„ï¼Œè¯¥ç”µè·¯å¢é•¿é‡çº§å¤ªå¤§ï¼Œå¦‚æœéœ€è¦æ›´å¤šä½æ•°å¯ä»¥åˆ©ç”¨å¤šä¸ªè¯¥ç”µè·¯ç»„åˆä½¿ç”¨ï¼Œç»„æˆç»„å†…å¹¶è¡Œç»„é—´ä¸²è¡Œè¿›ä½åŠ æ³•å™¨ã€‚&lt;/p&gt;</description>
        </item>
        <item>
        <title>Katexæµ‹è¯•åŠå…¶è¯­æ³•æ€»ç»“</title>
        <link>https://blog.ipandai.club/p/katex%E6%B5%8B%E8%AF%95%E5%8F%8A%E5%85%B6%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/</link>
        <pubDate>Sun, 14 Mar 2021 20:50:48 +0800</pubDate>
        
        <guid>https://blog.ipandai.club/p/katex%E6%B5%8B%E8%AF%95%E5%8F%8A%E5%85%B6%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/</guid>
        <description>&lt;p&gt;æ–‡ç« æ€»ç»“è‡ªKaTex Support
å¾…æ›´æ–°&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://katex.org/docs/supported.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;KATEX Support&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;KATEXæµ‹è¯•
$$
\frac{\sum_{i=1}^Nf(x_i)}{\int_1^\infin \frac{1}{e^x}}
$$&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
